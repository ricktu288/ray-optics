/*! For license information please see rayOptics.js.LICENSE.txt */
(()=>{var e={9721:e=>{!function(){"use strict";var t,n,r,i,s;function a(e,t){var n,r=Object.keys(t);for(n=0;n<r.length;n++)e=e.replace(new RegExp("\\{"+r[n]+"\\}","gi"),t[r[n]]);return e}function o(e){var t,n;if(!e)throw new Error("cannot create a random attribute name for an undefined object");t="";do{for(t="",n=0;n<12;n++)t+="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz"[Math.floor(51*Math.random())]}while(e[t]);return t}function c(e){var t={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return t[e]||t.alphabetic}s=function(e,t){var n,r,i,s={};for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r="&"+e[n+1]+";",i=parseInt(e[n],t),s[r]="&#"+i+";";return s["\\xa0"]="&#160;",s}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),t={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},r=function(e,t){this.__root=e,this.__ctx=t},r.prototype.addColorStop=function(e,t){var n,r=this.__ctx.__createElement("stop");r.setAttribute("offset",e),-1!==t.indexOf("rgba")?(n=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(t),r.setAttribute("stop-color",a("rgb({r},{g},{b})",{r:n[1],g:n[2],b:n[3]})),r.setAttribute("stop-opacity",n[4])):r.setAttribute("stop-color",t),this.__root.appendChild(r)},i=function(e,t){this.__root=e,this.__ctx=t},n=function(e){var t,r={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((t=r).width=arguments[0],t.height=arguments[1]):t=e||r,!(this instanceof n))return new n(t);this.width=t.width||r.width,this.height=t.height||r.height,this.enableMirroring=void 0!==t.enableMirroring?t.enableMirroring:r.enableMirroring,this.canvas=this,this.__document=t.document||document,t.ctx?this.__ctx=t.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)},n.prototype.__createElement=function(e,t,n){void 0===t&&(t={});var r,i,s=this.__document.createElementNS("http://www.w3.org/2000/svg",e),a=Object.keys(t);for(n&&(s.setAttribute("fill","none"),s.setAttribute("stroke","none")),r=0;r<a.length;r++)i=a[r],s.setAttribute(i,t[i]);return s},n.prototype.__setDefaultStyles=function(){var e,n,r=Object.keys(t);for(e=0;e<r.length;e++)this[n=r[e]]=t[n].canvas},n.prototype.__applyStyleState=function(e){var t,n,r=Object.keys(e);for(t=0;t<r.length;t++)this[n=r[t]]=e[n]},n.prototype.__getStyleState=function(){var e,n,r={},i=Object.keys(t);for(e=0;e<i.length;e++)r[n=i[e]]=this[n];return r},n.prototype.__applyStyleToCurrentElement=function(e){var n=this.__currentElement,s=this.__currentElementsToStyle;s&&(n.setAttribute(e,""),n=s.element,s.children.forEach((function(t){t.setAttribute(e,"")})));var o,c,u,l,h,p=Object.keys(t);for(o=0;o<p.length;o++)if(c=t[p[o]],u=this[p[o]],c.apply)if(u instanceof i){if(u.__ctx)for(;u.__ctx.__defs.childNodes.length;)l=u.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[l]=l,this.__defs.appendChild(u.__ctx.__defs.childNodes[0]);n.setAttribute(c.apply,a("url(#{id})",{id:u.__root.getAttribute("id")}))}else if(u instanceof r)n.setAttribute(c.apply,a("url(#{id})",{id:u.__root.getAttribute("id")}));else if(-1!==c.apply.indexOf(e)&&c.svg!==u)if("stroke"!==c.svgAttr&&"fill"!==c.svgAttr||-1===u.indexOf("rgba")){var d=c.svgAttr;if("globalAlpha"===p[o]&&(d=e+"-"+c.svgAttr,n.getAttribute(d)))continue;n.setAttribute(d,u)}else{h=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(u),n.setAttribute(c.svgAttr,a("rgb({r},{g},{b})",{r:h[1],g:h[2],b:h[3]}));var f=h[4],m=this.globalAlpha;null!=m&&(f*=m),n.setAttribute(c.svgAttr+"-opacity",f)}},n.prototype.__closestGroupOrSvg=function(e){return"g"===(e=e||this.__currentElement).nodeName||"svg"===e.nodeName?e:this.__closestGroupOrSvg(e.parentNode)},n.prototype.getSerializedSvg=function(e){var t,n,r,i,a,o=(new XMLSerializer).serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(o)&&(o=o.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),e)for(t=Object.keys(s),n=0;n<t.length;n++)r=t[n],i=s[r],(a=new RegExp(r,"gi")).test(o)&&(o=o.replace(a,i));return o},n.prototype.getSvg=function(){return this.__root},n.prototype.save=function(){var e=this.__createElement("g"),t=this.__closestGroupOrSvg();this.__groupStack.push(t),t.appendChild(e),this.__currentElement=e,this.__stack.push(this.__getStyleState())},n.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var e=this.__stack.pop();this.__applyStyleState(e)},n.prototype.__addTransform=function(e){var t=this.__closestGroupOrSvg();if(t.childNodes.length>0){"path"===this.__currentElement.nodeName&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:t,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var n=this.__createElement("g");t.appendChild(n),this.__currentElement=n}var r=this.__currentElement.getAttribute("transform");r?r+=" ":r="",r+=e,this.__currentElement.setAttribute("transform",r)},n.prototype.scale=function(e,t){void 0===t&&(t=e),this.__addTransform(a("scale({x},{y})",{x:e,y:t}))},n.prototype.rotate=function(e){var t=180*e/Math.PI;this.__addTransform(a("rotate({angle},{cx},{cy})",{angle:t,cx:0,cy:0}))},n.prototype.translate=function(e,t){this.__addTransform(a("translate({x},{y})",{x:e,y:t}))},n.prototype.transform=function(e,t,n,r,i,s){this.__addTransform(a("matrix({a},{b},{c},{d},{e},{f})",{a:e,b:t,c:n,d:r,e:i,f:s}))},n.prototype.beginPath=function(){var e;this.__currentDefaultPath="",this.__currentPosition={},e=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(e),this.__currentElement=e},n.prototype.__applyCurrentDefaultPath=function(){var e=this.__currentElement;"path"===e.nodeName?e.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",e.nodeName)},n.prototype.__addPathCommand=function(e){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=e},n.prototype.moveTo=function(e,t){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:e,y:t},this.__addPathCommand(a("M {x} {y}",{x:e,y:t}))},n.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},n.prototype.lineTo=function(e,t){this.__currentPosition={x:e,y:t},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(a("L {x} {y}",{x:e,y:t})):this.__addPathCommand(a("M {x} {y}",{x:e,y:t}))},n.prototype.bezierCurveTo=function(e,t,n,r,i,s){this.__currentPosition={x:i,y:s},this.__addPathCommand(a("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:e,cp1y:t,cp2x:n,cp2y:r,x:i,y:s}))},n.prototype.quadraticCurveTo=function(e,t,n,r){this.__currentPosition={x:n,y:r},this.__addPathCommand(a("Q {cpx} {cpy} {x} {y}",{cpx:e,cpy:t,x:n,y:r}))};var u=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]};n.prototype.arcTo=function(e,t,n,r,i){var s=this.__currentPosition&&this.__currentPosition.x,a=this.__currentPosition&&this.__currentPosition.y;if(void 0!==s&&void 0!==a){if(i<0)throw new Error("IndexSizeError: The radius provided ("+i+") is negative.");if(s===e&&a===t||e===n&&t===r||0===i)this.lineTo(e,t);else{var o=u([s-e,a-t]),c=u([n-e,r-t]);if(o[0]*c[1]!=o[1]*c[0]){var l=o[0]*c[0]+o[1]*c[1],h=Math.acos(Math.abs(l)),p=u([o[0]+c[0],o[1]+c[1]]),d=i/Math.sin(h/2),f=e+d*p[0],m=t+d*p[1],g=[-o[1],o[0]],y=[c[1],-c[0]],x=function(e){var t=e[0];return e[1]>=0?Math.acos(t):-Math.acos(t)},v=x(g),b=x(y);this.lineTo(f+g[0]*i,m+g[1]*i),this.arc(f,m,i,v,b)}else this.lineTo(e,t)}}},n.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},n.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},n.prototype.rect=function(e,t,n,r){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.closePath()},n.prototype.fillRect=function(e,t,n,r){var i;i=this.__createElement("rect",{x:e,y:t,width:n,height:r},!0),this.__closestGroupOrSvg().appendChild(i),this.__currentElement=i,this.__applyStyleToCurrentElement("fill")},n.prototype.strokeRect=function(e,t,n,r){var i;i=this.__createElement("rect",{x:e,y:t,width:n,height:r},!0),this.__closestGroupOrSvg().appendChild(i),this.__currentElement=i,this.__applyStyleToCurrentElement("stroke")},n.prototype.__clearCanvas=function(){for(var e=this.__closestGroupOrSvg().getAttribute("transform"),t=this.__root.childNodes[1],n=t.childNodes,r=n.length-1;r>=0;r--)n[r]&&t.removeChild(n[r]);this.__currentElement=t,this.__groupStack=[],e&&this.__addTransform(e)},n.prototype.clearRect=function(e,t,n,r){if(0!==e||0!==t||n!==this.width||r!==this.height){var i,s=this.__closestGroupOrSvg();i=this.__createElement("rect",{x:e,y:t,width:n,height:r,fill:"#FFFFFF"},!0),s.appendChild(i)}else this.__clearCanvas()},n.prototype.createLinearGradient=function(e,t,n,i){var s=this.__createElement("linearGradient",{id:o(this.__ids),x1:e+"px",x2:n+"px",y1:t+"px",y2:i+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(s),new r(s,this)},n.prototype.createRadialGradient=function(e,t,n,i,s,a){var c=this.__createElement("radialGradient",{id:o(this.__ids),cx:i+"px",cy:s+"px",r:a+"px",fx:e+"px",fy:t+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(c),new r(c,this)},n.prototype.__parseFont=function(){var e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),t={style:e[1]||"normal",size:e[4]||"10px",family:e[6]||"sans-serif",weight:e[3]||"normal",decoration:e[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(t.decoration="underline"),this.__fontHref&&(t.href=this.__fontHref),t},n.prototype.__wrapTextLink=function(e,t){if(e.href){var n=this.__createElement("a");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.href),n.appendChild(t),n}return t},n.prototype.__applyText=function(e,t,n,r){var i,s,a=this.__parseFont(),o=this.__closestGroupOrSvg(),u=this.__createElement("text",{"font-family":a.family,"font-size":a.size,"font-style":a.style,"font-weight":a.weight,"text-decoration":a.decoration,x:t,y:n,"text-anchor":(i=this.textAlign,s={left:"start",right:"end",center:"middle",start:"start",end:"end"},s[i]||s.start),"dominant-baseline":c(this.textBaseline)},!0);u.appendChild(this.__document.createTextNode(e)),this.__currentElement=u,this.__applyStyleToCurrentElement(r),o.appendChild(this.__wrapTextLink(a,u))},n.prototype.fillText=function(e,t,n){this.__applyText(e,t,n,"fill")},n.prototype.strokeText=function(e,t,n){this.__applyText(e,t,n,"stroke")},n.prototype.measureText=function(e){return this.__ctx.font=this.font,this.__ctx.measureText(e)},n.prototype.arc=function(e,t,n,r,i,s){if(r!==i){(r%=2*Math.PI)==(i%=2*Math.PI)&&(i=(i+2*Math.PI-.001*(s?-1:1))%(2*Math.PI));var o,c=e+n*Math.cos(i),u=t+n*Math.sin(i),l=e+n*Math.cos(r),h=t+n*Math.sin(r),p=s?0:1,d=i-r;d<0&&(d+=2*Math.PI),o=s?d>Math.PI?0:1:d>Math.PI?1:0,this.lineTo(l,h),this.__addPathCommand(a("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:n,ry:n,xAxisRotation:0,largeArcFlag:o,sweepFlag:p,endX:c,endY:u})),this.__currentPosition={x:c,y:u}}},n.prototype.clip=function(){var e=this.__closestGroupOrSvg(),t=this.__createElement("clipPath"),n=o(this.__ids),r=this.__createElement("g");this.__applyCurrentDefaultPath(),e.removeChild(this.__currentElement),t.setAttribute("id",n),t.appendChild(this.__currentElement),this.__defs.appendChild(t),e.setAttribute("clip-path",a("url(#{id})",{id:n})),e.appendChild(r),this.__currentElement=r},n.prototype.drawImage=function(){var e,t,r,i,s,a,o,c,u,l,h,p,d,f=Array.prototype.slice.call(arguments),m=f[0],g=0,y=0;if(3===f.length)e=f[1],t=f[2],r=s=m.width,i=a=m.height;else if(5===f.length)e=f[1],t=f[2],r=f[3],i=f[4],s=m.width,a=m.height;else{if(9!==f.length)throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);g=f[1],y=f[2],s=f[3],a=f[4],e=f[5],t=f[6],r=f[7],i=f[8]}o=this.__closestGroupOrSvg(),this.__currentElement;var x="translate("+e+", "+t+")";if(m instanceof n){if((c=m.getSvg().cloneNode(!0)).childNodes&&c.childNodes.length>1){for(u=c.childNodes[0];u.childNodes.length;)d=u.childNodes[0].getAttribute("id"),this.__ids[d]=d,this.__defs.appendChild(u.childNodes[0]);if(l=c.childNodes[1]){var v,b=l.getAttribute("transform");v=b?b+" "+x:x,l.setAttribute("transform",v),o.appendChild(l)}}}else"CANVAS"!==m.nodeName&&"IMG"!==m.nodeName||((h=this.__createElement("image")).setAttribute("width",r),h.setAttribute("height",i),h.setAttribute("preserveAspectRatio","none"),(g||y||s!==m.width||a!==m.height)&&((p=this.__document.createElement("canvas")).width=r,p.height=i,p.getContext("2d").drawImage(m,g,y,s,a,0,0,r,i),m=p),h.setAttribute("transform",x),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===m.nodeName?m.toDataURL():m.getAttribute("src")),o.appendChild(h))},n.prototype.createPattern=function(e,t){var r,s=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),a=o(this.__ids);return s.setAttribute("id",a),s.setAttribute("width",e.width),s.setAttribute("height",e.height),"CANVAS"===e.nodeName||"IMG"===e.nodeName?((r=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",e.width),r.setAttribute("height",e.height),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===e.nodeName?e.toDataURL():e.getAttribute("src")),s.appendChild(r),this.__defs.appendChild(s)):e instanceof n&&(s.appendChild(e.__root.childNodes[1]),this.__defs.appendChild(s)),new i(s,this)},n.prototype.setLineDash=function(e){e&&e.length>0?this.lineDash=e.join(","):this.lineDash=null},n.prototype.drawFocusRing=function(){},n.prototype.createImageData=function(){},n.prototype.getImageData=function(){},n.prototype.putImageData=function(){},n.prototype.globalCompositeOperation=function(){},n.prototype.setTransform=function(){},"object"==typeof window&&(window.C2S=n),"object"==typeof e.exports&&(e.exports=n)}()},5716:function(e,t){var n;!function(){"use strict";var r=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:.5*(Math.exp(e)+Math.exp(-e))},i=Math.sinh||function(e){return Math.abs(e)<1e-9?e:.5*(Math.exp(e)-Math.exp(-e))},s=function(){throw SyntaxError("Invalid Param")};function a(e,t){var n=Math.abs(e),r=Math.abs(t);return 0===e?Math.log(r):0===t?Math.log(n):n<3e3&&r<3e3?.5*Math.log(e*e+t*t):(e/=2,t/=2,.5*Math.log(e*e+t*t)+Math.LN2)}function o(e,t){if(!(this instanceof o))return new o(e,t);var n=function(e,t){var n={re:0,im:0};if(null==e)n.re=n.im=0;else if(void 0!==t)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return o.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return o.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else 2===e.length?(n.re=e[0],n.im=e[1]):s();break;case"string":n.im=n.re=0;var r=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),i=1,a=0;null===r&&s();for(var c=0;c<r.length;c++){var u=r[c];" "===u||"\t"===u||"\n"===u||("+"===u?i++:"-"===u?a++:"i"===u||"I"===u?(i+a===0&&s()," "===r[c+1]||isNaN(r[c+1])?n.im+=parseFloat((a%2?"-":"")+"1"):(n.im+=parseFloat((a%2?"-":"")+r[c+1]),c++),i=a=0):((i+a===0||isNaN(u))&&s(),"i"===r[c+1]||"I"===r[c+1]?(n.im+=parseFloat((a%2?"-":"")+u),c++):n.re+=parseFloat((a%2?"-":"")+u),i=a=0))}i+a>0&&s();break;case"number":n.im=0,n.re=e;break;default:s()}return isNaN(n.re)||isNaN(n.im),n}(e,t);this.re=n.re,this.im=n.im}o.prototype={re:0,im:0,sign:function(){var e=this.abs();return new o(this.re/e,this.im/e)},add:function(e,t){var n=new o(e,t);return this.isInfinite()&&n.isInfinite()?o.NAN:this.isInfinite()||n.isInfinite()?o.INFINITY:new o(this.re+n.re,this.im+n.im)},sub:function(e,t){var n=new o(e,t);return this.isInfinite()&&n.isInfinite()?o.NAN:this.isInfinite()||n.isInfinite()?o.INFINITY:new o(this.re-n.re,this.im-n.im)},mul:function(e,t){var n=new o(e,t);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?o.NAN:this.isInfinite()||n.isInfinite()?o.INFINITY:0===n.im&&0===this.im?new o(this.re*n.re,0):new o(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){var n=new o(e,t);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return o.NAN;if(this.isInfinite()||n.isZero())return o.INFINITY;if(this.isZero()||n.isInfinite())return o.ZERO;e=this.re,t=this.im;var r,i,s=n.re,a=n.im;return 0===a?new o(e/s,t/s):Math.abs(s)<Math.abs(a)?new o((e*(i=s/a)+t)/(r=s*i+a),(t*i-e)/r):new o((e+t*(i=a/s))/(r=a*i+s),(t-e*i)/r)},pow:function(e,t){var n=new o(e,t);if(e=this.re,t=this.im,n.isZero())return o.ONE;if(0===n.im){if(0===t&&e>0)return new o(Math.pow(e,n.re),0);if(0===e)switch((n.re%4+4)%4){case 0:return new o(Math.pow(t,n.re),0);case 1:return new o(0,Math.pow(t,n.re));case 2:return new o(-Math.pow(t,n.re),0);case 3:return new o(0,-Math.pow(t,n.re))}}if(0===e&&0===t&&n.re>0&&n.im>=0)return o.ZERO;var r=Math.atan2(t,e),i=a(e,t);return e=Math.exp(n.re*i-n.im*r),t=n.im*i+n.re*r,new o(e*Math.cos(t),e*Math.sin(t))},sqrt:function(){var e,t,n=this.re,r=this.im,i=this.abs();if(n>=0){if(0===r)return new o(Math.sqrt(n),0);e=.5*Math.sqrt(2*(i+n))}else e=Math.abs(r)/Math.sqrt(2*(i-n));return t=n<=0?.5*Math.sqrt(2*(i-n)):Math.abs(r)/Math.sqrt(2*(i+n)),new o(e,r<0?-t:t)},exp:function(){var e=Math.exp(this.re);return this.im,new o(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,t=this.im;return new o(Math.expm1(e)*Math.cos(t)+function(e){var t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;var n=e*e;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){var e=this.re,t=this.im;return new o(a(e,t),Math.atan2(t,e))},abs:function(){return e=this.re,t=this.im,n=Math.abs(e),r=Math.abs(t),n<3e3&&r<3e3?Math.sqrt(n*n+r*r):(n<r?(n=r,r=e/t):r=t/e,n*Math.sqrt(1+r*r));var e,t,n,r},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new o(Math.sin(e)*r(t),Math.cos(e)*i(t))},cos:function(){var e=this.re,t=this.im;return new o(Math.cos(e)*r(t),-Math.sin(e)*i(t))},tan:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)+r(t);return new o(Math.sin(e)/n,i(t)/n)},cot:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)-r(t);return new o(-Math.sin(e)/n,i(t)/n)},sec:function(){var e=this.re,t=this.im,n=.5*r(2*t)+.5*Math.cos(2*e);return new o(Math.cos(e)*r(t)/n,Math.sin(e)*i(t)/n)},csc:function(){var e=this.re,t=this.im,n=.5*r(2*t)-.5*Math.cos(2*e);return new o(Math.sin(e)*r(t)/n,-Math.cos(e)*i(t)/n)},asin:function(){var e=this.re,t=this.im,n=new o(t*t-e*e+1,-2*e*t).sqrt(),r=new o(n.re-t,n.im+e).log();return new o(r.im,-r.re)},acos:function(){var e=this.re,t=this.im,n=new o(t*t-e*e+1,-2*e*t).sqrt(),r=new o(n.re-t,n.im+e).log();return new o(Math.PI/2-r.im,r.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new o(0,1/0);if(-1===t)return new o(0,-1/0)}var n=e*e+(1-t)*(1-t),r=new o((1-t*t-e*e)/n,-2*e/n).log();return new o(-.5*r.im,.5*r.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new o(Math.atan2(1,e),0);var n=e*e+t*t;return 0!==n?new o(e/n,-t/n).atan():new o(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new o(0,1/0);var n=e*e+t*t;return 0!==n?new o(e/n,-t/n).acos():new o(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new o(Math.PI/2,1/0);var n=e*e+t*t;return 0!==n?new o(e/n,-t/n).asin():new o(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,t=this.im;return new o(i(e)*Math.cos(t),r(e)*Math.sin(t))},cosh:function(){var e=this.re,t=this.im;return new o(r(e)*Math.cos(t),i(e)*Math.sin(t))},tanh:function(){var e=2*this.re,t=2*this.im,n=r(e)+Math.cos(t);return new o(i(e)/n,Math.sin(t)/n)},coth:function(){var e=2*this.re,t=2*this.im,n=r(e)-Math.cos(t);return new o(i(e)/n,-Math.sin(t)/n)},csch:function(){var e=this.re,t=this.im,n=Math.cos(2*t)-r(2*e);return new o(-2*i(e)*Math.cos(t)/n,2*r(e)*Math.sin(t)/n)},sech:function(){var e=this.re,t=this.im,n=Math.cos(2*t)+r(2*e);return new o(2*r(e)*Math.cos(t)/n,-2*i(e)*Math.sin(t)/n)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(e.im<=0){var t=e.re;e.re=-e.im,e.im=t}else t=e.im,e.im=-e.re,e.re=t;return e},atanh:function(){var e=this.re,t=this.im,n=e>1&&0===t,r=1-e,i=1+e,s=r*r+t*t,c=0!==s?new o((i*r-t*t)/s,(t*r+i*t)/s):new o(-1!==e?e/0:0,0!==t?t/0:0),u=c.re;return c.re=a(c.re,c.im)/2,c.im=Math.atan2(c.im,u)/2,n&&(c.im=-c.im),c},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new o(0,Math.PI/2);var n=e*e+t*t;return 0!==n?new o(e/n,-t/n).atanh():new o(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new o(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var n=e*e+t*t;return 0!==n?new o(e/n,-t/n).asinh():new o(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return o.INFINITY;var n=e*e+t*t;return 0!==n?new o(e/n,-t/n).acosh():new o(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return o.INFINITY;if(this.isInfinite())return o.ZERO;var e=this.re,t=this.im,n=e*e+t*t;return new o(e/n,-t/n)},conjugate:function(){return new o(this.re,-this.im)},neg:function(){return new o(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new o(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new o(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new o(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){var n=new o(e,t);return Math.abs(n.re-this.re)<=o.EPSILON&&Math.abs(n.im-this.im)<=o.EPSILON},clone:function(){return new o(this.re,this.im)},toString:function(){var e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<o.EPSILON&&(e=0),Math.abs(t)<o.EPSILON&&(t=0),0===t?n+e:(0!==e?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),1!==t&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},o.ZERO=new o(0,0),o.ONE=new o(1,0),o.I=new o(0,1),o.PI=new o(Math.PI,0),o.E=new o(Math.E,0),o.INFINITY=new o(1/0,1/0),o.NAN=new o(NaN,NaN),o.EPSILON=1e-15,void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},763:e=>{"use strict";var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},r={"–":"\\--","—":"\\---"," ":"~","\t":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},i=function(e,n){return t({},e,n)};e.exports=function(e){for(var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=s.preserveFormatting,o=void 0!==a&&a,c=s.escapeMapFn,u=void 0===c?i:c,l=String(e),h="",p=u(t({},n),o?t({},r):{}),d=Object.keys(p),f=function(){var e=!1;d.forEach((function(t,n){e||l.length>=t.length&&l.slice(0,t.length)===t&&(h+=p[d[n]],l=l.slice(t.length,l.length),e=!0)})),e||(h+=l.slice(0,1),l=l.slice(1,l.length))};l;)f();return h}},8023:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.value=n,this.name=null,this.children=[]}return n(e,[{key:"addChild",value:function(e){return this.children.push(e),this}},{key:"evaluate",value:function(t){var n=0;switch(this.type){case e.TYPE_FUNCTION:var r=this.children.map((function(e){return e.evaluate(t)}));n=this.value.apply(this,r);break;case e.TYPE_INVERSE:n=1/this.child.evaluate(t);break;case e.TYPE_NEGATE:n=-this.child.evaluate(t);break;case e.TYPE_NUMBER:n=this.value;break;case e.TYPE_POWER:n=Math.pow(this.children[0].evaluate(t),this.children[1].evaluate(t));break;case e.TYPE_PRODUCT:n=this.children.reduce((function(e,n){return e*n.evaluate(t)}),1);break;case e.TYPE_SUM:n=this.children.reduce((function(e,n){return e+n.evaluate(t)}),0);break;case e.TYPE_SYMBOL:if(isFinite(t[this.value]))return t[this.value];throw new Error("Symbol "+this.value+" is undefined or not a number")}return n}},{key:"isUnary",value:function(){return i.indexOf(this.type)>=0}},{key:"printTree",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t="",n=0;n<e;n++)t+="  ";for(var r in console.log(t+this.toString()),this.children)this.children[r].printTree(e+1)}},{key:"simplify",value:function(){if(this.children.length>1||this.isUnary()){var t=new e(this.type,this.value);for(var n in this.children)t.addChild(this.children[n].simplify());return t}return 1===this.children.length?this.children[0].simplify():this}},{key:"toString",value:function(){var e="function"==typeof this.value?this.name:this.value;return this.children.length+" "+this.type+" ["+e+"]"}},{key:"child",get:function(){return this.children[0]}},{key:"nodeCount",get:function(){var e=1,t=!0,n=!1,r=void 0;try{for(var i,s=this.children[Symbol.iterator]();!(t=(i=s.next()).done);t=!0)e+=i.value.nodeCount}catch(e){n=!0,r=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw r}}return e}}]),e}();r.TYPE_FUNCTION="FUNCTION",r.TYPE_INVERSE="INVERSE",r.TYPE_NEGATE="NEGATE",r.TYPE_NUMBER="NUMBER",r.TYPE_POWER="POWER",r.TYPE_PRODUCT="PRODUCT",r.TYPE_SUM="SUM",r.TYPE_SYMBOL="SYMBOL",t.default=r;var i=["FACTORIAL","FUNCTION","INVERSE","NEGATE"]},7642:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.value=n,this.name=null}return n(e,[{key:"equals",value:function(e){return this.type===e.type&&this.value===e.value}},{key:"toString",value:function(){if(i.indexOf(this.type)>=0)return this.type;var e="function"==typeof this.value?this.name:this.value;return this.type+"["+e+"]"}}]),e}();r.TYPE_LPAREN="LPAREN",r.TYPE_RPAREN="RPAREN",r.TYPE_PLUS="PLUS",r.TYPE_MINUS="MINUS",r.TYPE_TIMES="TIMES",r.TYPE_DIVIDE="DIVIDE",r.TYPE_COMMAND="COMMAND",r.TYPE_SYMBOL="SYMBOL",r.TYPE_WHITESPACE="WHITESPACE",r.TYPE_ABS="ABSOLUTEVAL",r.TYPE_BANG="BANG",r.TYPE_COMMA="COMMA",r.TYPE_POWER="POWER",r.TYPE_NUMBER="NUMBER",r.patterns=new Map([[r.TYPE_LPAREN,/(\(|\[|{|\\left\(|\\left\[)/],[r.TYPE_RPAREN,/(\)|]|}|\\right\)|\\right])/],[r.TYPE_PLUS,/\+/],[r.TYPE_MINUS,/-/],[r.TYPE_TIMES,/\*/],[r.TYPE_DIVIDE,/\//],[r.TYPE_COMMAND,/\\[A-Za-z]+/],[r.TYPE_SYMBOL,/[A-Za-z_][A-Za-z_0-9]*/],[r.TYPE_WHITESPACE,/\s+/],[r.TYPE_ABS,/\|/],[r.TYPE_BANG,/!/],[r.TYPE_COMMA,/,/],[r.TYPE_POWER,/\^/],[r.TYPE_NUMBER,/\d+(\.\d+)?/]]),t.default=r;var i=["TPLUS","TMINUS","TTIMES","TDIVIDE","TWS","TABS","TBANG","TCOMMA","TPOWER"]},2014:(e,t,n)=>{"use strict";t.A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=(0,r.default)(e,t,n),a=(0,i.default)(s).simplify(),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.evaluate(e)};return o.ast=a,o.expression=e,o.tokens=s,o};var r=s(n(5105)),i=s(n(1400));function s(e){return e&&e.__esModule?e:{default:e}}},5105:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t=new p(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:h);return t.lex(),t.tokens.toString=function(){return t.tokens.map((function(e){return e.toString()})).join(" ")},t.tokens};var s=u(n(7642)),a=u(n(4517)),o=u(n(4730)),c=u(n(8087));function u(e){return e&&e.__esModule?e:{default:e}}var l=[s.default.TYPE_POWER,s.default.TYPE_COMMAND],h={latex:!1},p=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.buffer=t,this.constants=Object.assign({},n,o.default),this.opts=r,this.tokens=[]}return i(e,[{key:"lex",value:function(){this.lexExpression(),this.replaceConstants(),this.replaceCommands()}},{key:"lexExpression",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.hasNext();){var t=e?this.nextCharToken():this.next();if(this.tokens.push((0,c.default)(t)),this.opts.latex&&d(t)){var n=1;t.type===s.default.TYPE_COMMAND&&(n=a.default[t.value.substr(1).toLowerCase()]);for(var r=0;r<n;r++)this.lexExpression(!0)}else f(t)&&this.lexExpression(!1);if(e||m(t))return}}},{key:"hasNext",value:function(){return this.buffer.length>0}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this.skipWhitespace(),!this.hasNext())throw"Lexer error: reached end of stream";var t=!0,n=!1,i=void 0;try{for(var a,o=s.default.patterns[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var c=a.value,u=r(c,2),l=u[0],h=u[1],p=new RegExp(/^/.source+h.source).exec(this.buffer.substr(0,e));if(p)return this.buffer=this.buffer.substr(p[0].length),new s.default(l,p[0])}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}throw"Lexer error: can't match any token"}},{key:"nextCharToken",value:function(){return this.skipWhitespace(),"\\"===this.buffer.charAt(0)?this.next():this.next(1)}},{key:"replaceCommands",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.tokens[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;a.type===s.default.TYPE_COMMAND&&(a.value=a.value.substr(1).toLowerCase(),a.name=a.value,a.value=this.constants[a.name])}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"replaceConstants",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.tokens[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;a.type===s.default.TYPE_SYMBOL&&("function"==typeof this.constants[a.value]?(a.type=s.default.TYPE_FUNCTION,a.name=a.value,a.value=this.constants[a.value]):"number"==typeof this.constants[a.value]&&(a.type=s.default.TYPE_NUMBER,a.value=a.fn=this.constants[a.value]))}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"skipWhitespace",value:function(){var e=new RegExp(/^/.source+s.default.patterns.get(s.default.TYPE_WHITESPACE).source);this.buffer=this.buffer.replace(e,"")}}]),e}();function d(e){return-1!==l.indexOf(e.type)}function f(e){return e.type===s.default.TYPE_LPAREN&&"{"===e.value}function m(e){return e.type===s.default.TYPE_RPAREN&&"}"===e.value}},1400:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return new u(e).parse()};var i=c(n(8023)),s=c(n(7642)),a=c(n(4517)),o=n(4730);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cursor=0,this.tokens=t}return r(e,[{key:"parse",value:function(){var e=this.sum();if(e=e.simplify(),void 0!==this.currentToken)throw console.log(e.printTree()),"Parsing error: Expected end of input, but got "+this.currentToken.type+" "+this.currentToken.value;return e}},{key:"accept",value:function(e){return!(!this.currentToken||this.currentToken.type!==e||(this.cursor++,0))}},{key:"expect",value:function(e){if(!this.accept(e))throw"Expected "+e+" but got "+(this.currentToken?this.currentToken.toString():"end of input.")}},{key:"sum",value:function(){var e=new i.default(i.default.TYPE_SUM);for(e.addChild(this.product());;)if(this.accept(s.default.TYPE_PLUS))e.addChild(this.product());else{if(!this.accept(s.default.TYPE_MINUS))break;e.addChild(new i.default(i.default.TYPE_NEGATE).addChild(this.product()))}return e}},{key:"product",value:function(){var e=new i.default(i.default.TYPE_PRODUCT);for(e.addChild(this.power());;)if(this.accept(s.default.TYPE_TIMES))e.addChild(this.power());else if(this.accept(s.default.TYPE_DIVIDE))e.addChild(new i.default(i.default.TYPE_INVERSE).addChild(this.power()));else if(this.accept(s.default.TYPE_LPAREN))this.cursor--,e.addChild(this.power());else{if(!(this.accept(s.default.TYPE_SYMBOL)||this.accept(s.default.TYPE_NUMBER)||this.accept(s.default.TYPE_FUNCTION)))break;this.cursor--,e.addChild(this.power())}return e}},{key:"power",value:function(){var e=new i.default(i.default.TYPE_POWER);return e.addChild(this.val()),this.accept(s.default.TYPE_POWER)&&e.addChild(this.power()),e}},{key:"val",value:function(){var e={};if(this.accept(s.default.TYPE_SYMBOL))e=new i.default(i.default.TYPE_SYMBOL,this.prevToken.value);else if(this.accept(s.default.TYPE_NUMBER))e=new i.default(i.default.TYPE_NUMBER,parseFloat(this.prevToken.value));else if(this.accept(s.default.TYPE_COMMAND)){var t=this.prevToken;(e=new i.default(i.default.TYPE_FUNCTION,t.value)).name=t.name;for(var n=0;n<a.default[t.name];n++)e.addChild(this.val())}else if(this.accept(s.default.TYPE_FUNCTION))if((e=new i.default(i.default.TYPE_FUNCTION,this.prevToken.value)).name=this.prevToken.name,this.accept(s.default.TYPE_LPAREN)){for(e.addChild(this.sum());this.accept(s.default.TYPE_COMMA);)e.addChild(this.sum());this.expect(s.default.TYPE_RPAREN)}else e.addChild(this.power());else if(this.accept(s.default.TYPE_MINUS))e=new i.default(i.default.TYPE_NEGATE).addChild(this.power());else if(this.accept(s.default.TYPE_LPAREN))e=this.sum(),this.expect(s.default.TYPE_RPAREN);else{if(!this.accept(s.default.TYPE_ABS))throw"Unexpected "+this.currentToken.toString()+" at token "+this.cursor;(e=new i.default(i.default.TYPE_FUNCTION,Math.abs)).addChild(this.sum()),this.expect(s.default.TYPE_ABS)}if(this.accept(s.default.TYPE_BANG)){var r=new i.default(i.default.TYPE_FUNCTION,o.fact);return r.addChild(e),r}return e}},{key:"currentToken",get:function(){return this.tokens[this.cursor]}},{key:"prevToken",get:function(){return this.tokens[this.cursor-1]}}]),e}()},4517:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={frac:2,sqrt:1,sin:1,cos:1,tan:1,asin:1,acos:1,atan:1,sec:1,csc:1,cot:1,asec:1,acsc:1,acot:1}},4730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={fact:t.fact=function(e){var t=1;if((e=Math.round(e))<0)throw"Can't factorial a negative.";for(;e>1;e--)t*=e;return t},frac:t.frac=function(e,t){return e/t},logn:t.logn=function(e,t){return Math.log(e)/Math.log(t)},rootn:t.rootn=function(e,t){return Math.pow(e,1/t)},sec:t.sec=function(e){return 1/Math.cos(e)},csc:t.csc=function(e){return 1/Math.sin(e)},cot:t.cot=function(e){return 1/Math.tan(e)}},r=!0,i=!1,s=void 0;try{for(var a,o=Object.getOwnPropertyNames(Math)[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var c=a.value;n[c]=Math[c]}}catch(e){i=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}t.default=n},8087:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.type===i.default.TYPE_COMMAND&&["\\cdot","\\times"].includes(e.value)?new i.default(i.default.TYPE_TIMES,"*"):e};var r,i=(r=n(7642))&&r.__esModule?r:{default:r}},4213:function(e,t){var n,r;void 0===(r="function"==typeof(n=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){a(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,s=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,s,a){var o=i.URL||i.webkitURL,c=document.createElement("a");s=s||e.name||"download",c.download=s,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?r(c):n(c.href)?t(e,s,a):r(c,c.target="_blank")):(c.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(c.href)}),4e4),setTimeout((function(){r(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,i,s){if(i=i||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,s),i);else if(n(e))t(e,i,s);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){r(a)}))}}:function(e,n,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var o="application/octet-stream"===e.type,c=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&c||s)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},l.readAsDataURL(e)}else{var h=i.URL||i.webkitURL,p=h.createObjectURL(e);a?a.location=p:location.href=p,a=null,setTimeout((function(){h.revokeObjectURL(p)}),4e4)}});i.saveAs=a.saveAs=a,e.exports=a})?n.apply(t,[]):n)||(e.exports=r)},1880:e=>{e.exports=function e(t,n){"use strict";var r,i,s=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=/^0x[0-9a-f]+$/i,u=/^0/,l=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},h=l(t).replace(a,"")||"",p=l(n).replace(a,"")||"",d=h.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=p.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(h.match(c),16)||1!==d.length&&h.match(o)&&Date.parse(h),g=parseInt(p.match(c),16)||m&&p.match(o)&&Date.parse(p)||null;if(g){if(m<g)return-1;if(m>g)return 1}for(var y=0,x=Math.max(d.length,f.length);y<x;y++){if(r=!(d[y]||"").match(u)&&parseFloat(d[y])||d[y]||0,i=!(f[y]||"").match(u)&&parseFloat(f[y])||f[y]||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(typeof r!=typeof i&&(r+="",i+=""),r<i)return-1;if(r>i)return 1}return 0}},7391:(e,t,n)=>{var r=n(7180),i=n(3181),s=n(3031),a=n(9067),o=n(6833),c=n(3717),u=n(4801);u.alea=r,u.xor128=i,u.xorwow=s,u.xorshift7=a,u.xor4096=o,u.tychei=c,e.exports=u},7180:function(e,t,n){var r;!function(e,i){function s(e){var t,n=this,r=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new s(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,i))||(i.exports=r):this.alea=o}(0,e=n.nmd(e),n.amdD)},3717:function(e,t,n){var r;!function(e,i){function s(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new s(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,i))||(i.exports=r):this.tychei=o}(0,e=n.nmd(e),n.amdD)},3181:function(e,t,n){var r;!function(e,i){function s(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new s(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,i))||(i.exports=r):this.xor128=o}(0,e=n.nmd(e),n.amdD)},6833:function(e,t,n){var r;!function(e,i){function s(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,s=t.i;return t.w=r=r+1640531527|0,n=i[s+34&127],e=i[s=s+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[s]=n^e,t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,i,s,a,o=[],c=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,c=Math.max(c,t.length)),i=0,s=-32;s<c;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(a=a+1640531527|0,i=0==(n=o[127&s]^=r+a)?i+1:0);for(i>=128&&(o[127&(t&&t.length||0)]=-1),i=127,s=512;s>0;--s)r=o[i+34&127],n=o[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,o[i]=r^n;e.w=a,e.X=o,e.i=i}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var n=new s(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,i))||(i.exports=r):this.xor4096=o}(0,e=n.nmd(e),n.amdD)},9067:function(e,t,n){var r;!function(e,i){function s(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var n=new s(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,i))||(i.exports=r):this.xorshift7=o}(0,e=n.nmd(e),n.amdD)},3031:function(e,t,n){var r;!function(e,i){function s(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new s(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,i))||(i.exports=r):this.xorwow=o}(0,e=n.nmd(e),n.amdD)},4801:function(e,t,n){var r;!function(i,s,a){var o,c=256,u=a.pow(c,6),l=a.pow(2,52),h=2*l,p=c-1;function d(e,t,n){var r=[],p=y(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,x(s)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(c):(e=new Uint8Array(c),(i.crypto||i.msCrypto).getRandomValues(e)),x(e)}catch(e){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,x(s)]}}():e,3),r),d=new f(r),v=function(){for(var e=d.g(6),t=u,n=0;e<l;)e=(e+n)*c,t*=c,n=d.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return v.int32=function(){return 0|d.g(4)},v.quick=function(){return d.g(4)/4294967296},v.double=v,y(x(d.S),s),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,d),e.state=function(){return m(d,{})}),n?(a.random=e,t):e})(v,p,"global"in t?t.global:this==a,t.state)}function f(e){var t,n=e.length,r=this,i=0,s=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);i<c;)a[i]=i++;for(i=0;i<c;i++)a[i]=a[s=p&s+e[i%n]+(t=a[i])],a[s]=t;(r.g=function(e){for(var t,n=0,i=r.i,s=r.j,a=r.S;e--;)t=a[i=p&i+1],n=n*c+a[p&(a[i]=a[s=p&s+t])+(a[s]=t)];return r.i=i,r.j=s,n})(c)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(g(e[n],t-1))}catch(e){}return r.length?r:"string"==i?e:e+"\0"}function y(e,t){for(var n,r=e+"",i=0;i<r.length;)t[p&i]=p&(n^=19*t[p&i])+r.charCodeAt(i++);return x(t)}function x(e){return String.fromCharCode.apply(0,e)}if(y(a.random(),s),e.exports){e.exports=d;try{o=n(6982)}catch(e){}}else void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof self?self:this,[],Math)},2779:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e="",t,...n){super(...n),this.name="ParseError",this.message=`${t.lexeme} at ${t.pos}: ${e}`}}t.default=n},3211:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeToOperation=t.lexemeToType=void 0,t.lexemeToType={"=":2,"+":3,"-":4,"*":5,"\\cdot":5,"\\times":6,"^":8,"/":7,",":9,"{":10,"}":11,"(":12,")":13,"|":14,"&":15,bmatrix:37,"\\\\":16,"\\sqrt":17,"\\frac":18,"\\sin":19,"\\cos":20,"\\tan":21,"\\csc":22,"\\sec":23,"\\cot":24,"\\arcsin":25,"\\arccos":26,"\\arctan":27,"\\sinh":28,"\\cosh":29,"\\tanh":30,"\\log":31,"\\ln":32,"\\pi":33,e:34,"\\begin":35,"\\end":36,"\\left":38,"\\right":39,T:41,"\\det":42,"\\operatorname":43,eigenvectors:45,eigenvalues:44,cross:46,proj:47,comp:48,norm:49,inv:50},t.typeToOperation={3:"add",4:"subtract",5:"multiply",6:"multiply",8:"pow",7:"divide",18:"divide",14:"abs",17:"sqrt",19:"sin",20:"cos",21:"tan",22:"csc",23:"sec",24:"cot",25:"asin",26:"acos",27:"atan",28:"sinh",29:"cosh",30:"tanh",31:"log10",32:"log",42:"det",45:"eigenvectors",44:"eigenvalues",46:"cross",47:"proj",48:"comp",49:"norm",50:"inv"},t.default=class{constructor(e,t,n){this.lexeme=e,this.type=t,this.pos=n}}},4149:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8463),i=r.create(r.all,{number:"BigNumber",precision:64}),s={lastFn:"",lastArgs:[],eigenvalues:e=>i.eigs(e).values,eigenvectors:e=>i.eigs(e).vectors,comp:(e,t)=>i.divide(i.dot(e,t),i.norm(e)),proj:(e,t)=>i.multiply(i.divide(e,i.norm(e)),i.divide(i.dot(e,t),i.norm(e)))};i.import(s,{override:!0});const a=i.Unit.UNITS;Object.keys(a).forEach((e=>{delete a[e]})),t.default=i},5582:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateTex=t.parseTex=void 0;const i=r(n(4528)),s=r(n(5787));function a(e){return s.default(i.default(e))}t.parseTex=a,t.evaluateTex=function(e,t){return{evaluated:a(e).evaluate(t),scope:t}}},5787:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(n(4149)),c=a(n(2779)),u=s(n(3211));function l(e,t=[]){let n=u.typeToOperation[e.type];switch(e.type){case 6:return new o.default.FunctionNode("cross",t);case 4:n=1===t.length?"unaryMinus":n;case 3:case 5:case 18:case 7:return new o.default.OperatorNode(e.lexeme,n,t);case 8:if(t.length<2)throw new c.default("Expected two children for ^ operator",e);return t[1].isSymbolNode&&"T"===t[1].name?new o.default.FunctionNode("transpose",[t[0]]):new o.default.OperatorNode(e.lexeme,n,t);case 14:case 17:case 19:case 20:case 21:case 22:case 23:case 24:case 28:case 29:case 30:case 25:case 26:case 27:case 31:case 32:case 44:case 45:case 42:case 46:case 47:case 48:case 49:case 50:return new o.default.FunctionNode(n,t);case 2:return new o.default.AssignmentNode(t[0],t[1]);case 1:return new o.default.SymbolNode(e.lexeme);case 0:{const t=Number.isNaN(Number(e.lexeme))?e.lexeme:+e.lexeme;return new o.default.ConstantNode(t)}case 33:return new o.default.SymbolNode("pi");case 34:return new o.default.SymbolNode("e");case 37:return new o.default.ArrayNode(t);case 41:return new o.default.SymbolNode("T");default:throw new c.default("unknown token type",e)}}const h={12:13,10:11,38:39,14:14},p=[38,12,10,14,0,1,18,17,19,20,21,22,23,24,25,26,27,28,29,30,31,32,42,33,34,35,41,43];class d{constructor(e){this.tokens=e,this.pos=0}match(...e){const{type:t}=this.tokens[this.pos];return-1!==e.indexOf(t)?t:void 0}nextToken(){return this.tokens[this.pos++]}currentToken(){return this.tokens[this.pos]}previousToken(){return this.tokens[this.pos-1]}nextExpression(){let e=this.nextTerm();if(this.match(2)){if(!e.isSymbolNode)throw new c.default("expected variable (SymbolNode) on left hand of assignment",this.previousToken());return l(this.nextToken(),[e,this.nextExpression()])}for(;this.match(3,4);)e=l(this.nextToken(),[e,this.nextTerm()]);return e}nextTerm(){let e=this.nextFactor(),t=!1;for(;;){const r=this.match(5,6,7,...p);if(void 0===r)break;let i,s;if((n=e).isConstantNode&&!Number.isNaN(Number(n))&&0===r)throw new c.default("multiplication is not implicit between two differentnumbers: expected * or \\cdot",this.currentToken());if(this.match(5,6,7))i=this.nextToken(),s=this.nextFactor();else{const e=this.pos;s=this.nextPower(),i=new u.default("*",5,e),t=!0}e=l(i,[e,s]),e.implicit=t}var n;return e}nextFactor(){return this.match(4)?l(this.nextToken(),[this.nextPower()]):this.nextPower()}nextPower(){let e=this.nextPrimary();for(;this.match(8);)e=l(this.nextToken(),[e,this.nextPrimary()]);return e}tryConsume(e,...t){if(void 0===this.match(...t))throw new c.default(e,this.currentToken());return this.nextToken()}nextPrimary(){const e=this.match(...p);if(void 0===e)throw new c.default("expected primary",this.currentToken());let t;switch(e){case 38:case 12:case 10:case 14:[t]=this.nextGrouping();break;case 0:case 1:case 33:case 34:case 41:t=l(this.nextToken());break;case 17:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 42:t=this.nextUnaryFunc();break;case 43:t=this.nextCustomFunc();break;case 18:t=this.nextFrac();break;case 35:t=this.nextMatrix();break;default:throw new c.default("unknown token encountered during parsing",this.nextToken())}return t}nextGrouping(){let e=!1;this.match(38)&&(e=!0,this.nextToken());const t=this.tryConsume("expected '(', '|', '{'",12,14,10);let n=this.nextExpression();14===t.type&&(n=l(t,[n]));const r=[n];if(12===t.type)for(;this.match(9);)this.nextToken(),r.push(this.nextExpression());return e&&this.tryConsume("expected \\right to match corresponding \\left after expression",39),this.tryConsumeRightGrouping(t),r}nextUnaryFunc(){return l(this.nextToken(),this.nextArgument())}nextCustomFunc(){this.nextToken(),this.tryConsume("expected '{' after \\operatorname",10);const e=this.nextToken();return this.tryConsume("expected '}' after operator name",11),l(e,this.nextArgument())}nextArgument(){let e;return e=this.match(38,12,10,14)?this.nextGrouping():[this.nextPrimary()],e}nextFrac(){const e=this.nextToken();this.tryConsume("expected '{' for the numerator in \\frac",10);const t=this.nextExpression();let n;return this.tryConsume("expected '}' for the numerator in \\frac",11),this.match(10)?(this.nextToken(),n=this.nextExpression(),this.tryConsume("expected '}' for the denominator in \\frac",11)):n=this.nextExpression(),l(e,[t,n])}nextMatrix(){this.nextToken(),this.tryConsume("expected '{' after \\begin",10);const e=this.tryConsume("expected 'matrix' after '\\begin{' (no other environnmentsare supported yet)",37);this.tryConsume("expected '}' after \\begin{matrix",11);let t=[];const n=[];for(;;){const r=this.nextExpression();if(this.match(15))this.nextToken(),t.push(r);else{if(void 0===this.match(16,36))throw this.match(40)?new c.default("unexpected EOF encountered while parsing matrix",this.currentToken()):new c.default("unexpected delimiter while parsing matrix",this.currentToken());{const i=this.nextToken();if(t.push(r),1===t.length?n.push(r):n.push(l(e,t)),t=[],36===i.type)break}}}return this.tryConsume("expected '{' after \\end",10),this.tryConsume("expected 'matrix' after '\\end{' (no other environnmentsare supported yet)",37),this.tryConsume("expected '}' after \\end{matrix",11),l(e,n)}tryConsumeRightGrouping(e){const t=h[e.type],n=`expected ${Object.keys(u.lexemeToType).filter((e=>u.lexemeToType[e]===t)).map((e=>`'${e}'`)).join(" or ")} to match corresponding '${e.lexeme}'`;this.tryConsume(n,h[e.type])}}t.default=function(e){return new d(e).nextExpression()}},4528:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(3211));function o(e){return""===e.trim()}function c(e){return/^[A-Za-z]{1,1}$/.test(e)}function u(e){return/[^ -~]/.test(e)}function l(e){return e>="0"&&e<="9"}function h(e,t){if(!c(e[t]))return"";let n=t;for(;c(e[n]);)n+=1;return e.slice(t,n)}function p(e,t){if(!l(e[t]))return"";let n=t+1;for(;l(e[n]);)n+=1;if("."===e[n])for(n+=1;l(e[n]);)n+=1;return e.slice(t,n)}class d extends Error{constructor(e="",t,...n){super(...n),this.name="LexError",this.message=`at ${t}: ${e}`}}t.default=function(e){let t=0;const{length:n}=e,r=[];for(;t<n;){for(;o(e[t]);)t+=1;let n="",i=40;const s=e[t];if(u(s))throw new d("invalid control sequence encountered (forgot to escape backslashes (\\begin => \\\\begin)?",t);if(!c(s)&&s in a.lexemeToType)i=a.lexemeToType[s],n=s;else if("\\"===s){const r=e[t+1];if("\\"===r)i=16,n="\\\\";else if(" "===r)i=51,n="\\ ";else{const r=h(e,t+1);if(void 0===r)throw new d("expected command (a non-alphabetic character was encountered)",t);if(n=`\\${r}`,i=a.lexemeToType[n],void 0===i)throw new d(`unknown command "${n}"`,t)}}else if(l(s))n=p(e,t),i=0;else{if(!c(s))throw new d(`unrecognized character "${s}"`,t);{const r=h(e,t);if(r in a.lexemeToType)n=r,i=a.lexemeToType[r];else{const e=r[0];e in a.lexemeToType?(n=e,i=a.lexemeToType[e]):(n=e,i=1)}}}51!==i&&r.push(new a.default(n,i,t)),t+=n.length}return r.push(new a.default("EOF",40,t)),r}},1504:e=>{function t(){}t.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var s=0,a=r.length;s<a;s++)r[s].fn!==t&&r[s].fn._!==t&&i.push(r[s]);return i.length?n[e]=i:delete n[e],this}},e.exports=t,e.exports.TinyEmitter=t},7389:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(6492);n(4824);class i{static CLICK_EXTENT_LINE=10;static CLICK_EXTENT_POINT=10;static TOUCHSCREEN_EXTENT_RATIO=2;static SNAP_TO_DIRECTION_LOCK_LIMIT=30;constructor(e,t,n=!1,r=0){this.pos=e,this.scene=t,this.isTouch=n,this.overrideGrid=r}getClickExtent(e){let t;return t=e?i.CLICK_EXTENT_POINT/this.scene.scale:i.CLICK_EXTENT_LINE/this.scene.scale,this.isTouch&&(t*=i.TOUCHSCREEN_EXTENT_RATIO),t}isOnPoint(e){return r.A.distanceSquared(this.pos,e)<this.getClickExtent(!0)*this.getClickExtent(!0)}snapsOnPoint(e){return r.A.distanceSquared(this.getPosSnappedToGrid(),e)<this.getClickExtent(!0)*this.getClickExtent(!0)}isOnSegment(e){var t=Math.pow((this.pos.x-e.p1.x)*(e.p1.y-e.p2.y)+(this.pos.y-e.p1.y)*(e.p2.x-e.p1.x),2)/((e.p1.y-e.p2.y)*(e.p1.y-e.p2.y)+(e.p2.x-e.p1.x)*(e.p2.x-e.p1.x)),n=(e.p2.x-e.p1.x)*(this.pos.x-e.p1.x)+(e.p2.y-e.p1.y)*(this.pos.y-e.p1.y);return t<this.getClickExtent()*this.getClickExtent()&&n>=0&&n<=r.A.segmentLengthSquared(e)}isOnCurve(e){return e.project(this.pos).d**2<this.getClickExtent(!0)*this.getClickExtent(!0)}isOnLine(e){return Math.pow((this.pos.x-e.p1.x)*(e.p1.y-e.p2.y)+(this.pos.y-e.p1.y)*(e.p2.x-e.p1.x),2)/((e.p1.y-e.p2.y)*(e.p1.y-e.p2.y)+(e.p2.x-e.p1.x)*(e.p2.x-e.p1.x))<this.getClickExtent()*this.getClickExtent()}getPosSnappedToGrid(){return 0===this.overrideGrid&&this.scene.snapToGrid||1===this.overrideGrid&&!this.scene.snapToGrid?r.A.point(Math.round(this.pos.x/this.scene.gridSize)*this.scene.gridSize,Math.round(this.pos.y/this.scene.gridSize)*this.scene.gridSize):this.pos}getPosSnappedToDirection(e,t,n){const s=this.getPosSnappedToGrid();var a=s.x-e.x,o=s.y-e.y;if(n&&n.locked){var c=(t[n.i0].x*a+t[n.i0].y*o)/(t[n.i0].x*t[n.i0].x+t[n.i0].y*t[n.i0].y);return r.A.point(e.x+c*t[n.i0].x,e.y+c*t[n.i0].y)}for(var u,l,h=1/0,p=0;p<t.length;p++)(l=(t[p].y*a-t[p].x*o)*(t[p].y*a-t[p].x*o)/(t[p].x*t[p].x+t[p].y*t[p].y))<h&&(h=l,u=p);return n&&a*a+o*o>i.SNAP_TO_DIRECTION_LOCK_LIMIT*i.SNAP_TO_DIRECTION_LOCK_LIMIT/this.scene.scale/this.scene.scale&&(n.locked=!0,n.i0=u),c=(t[u].x*a+t[u].y*o)/(t[u].x*t[u].x+t[u].y*t[u].y),r.A.point(e.x+c*t[u].x,e.y+c*t[u].y)}}const s=i},7235:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(9721);const i=class{constructor(e,t,n,i,s,a){this.ctx=e,this.origin=t,this.scale=n,this.lengthScale=i,this.canvas=e.canvas,this.backgroundImage=s,this.ctxVirtual=a,void 0!==r&&e.constructor===r&&(this.isSVG=!0),this.isSVG||(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.setTransform(this.scale,0,0,this.scale,this.origin.x,this.origin.y),this.ctx.constructor!==r&&this.backgroundImage&&(this.ctx.globalAlpha=1,this.ctx.drawImage(this.backgroundImage,0,0)))}rgbaToCssColor(e){if(void 0!==e.r){const{r:t,g:n,b:r,a:i}=e;return`rgba(${Math.round(255*t)}, ${Math.round(255*n)}, ${Math.round(255*r)}, ${i})`}{const[t,n,r,i]=e;return`rgba(${Math.round(255*t)}, ${Math.round(255*n)}, ${Math.round(255*r)}, ${i})`}}drawPoint(e,t=[0,0,0,1],n=5){this.ctx.fillStyle=this.rgbaToCssColor(t),this.ctx.fillRect(e.x-n/2*this.lengthScale,e.y-n/2*this.lengthScale,n*this.lengthScale,n*this.lengthScale)}drawLine(e,t=[0,0,0,1],n=!1,r=[],i=1){this.ctx.setLineDash(r.map((e=>e*this.lengthScale))),this.ctx.strokeStyle=this.rgbaToCssColor(t),this.ctx.lineWidth=i*this.lengthScale,this.ctx.beginPath();let s=Math.atan2(e.p2.x-e.p1.x,e.p2.y-e.p1.y),a=(Math.abs(e.p1.x+this.origin.x)+Math.abs(e.p1.y+this.origin.y)+this.canvas.height+this.canvas.width)/Math.min(1,this.scale);this.ctx.moveTo(e.p1.x-Math.sin(s)*a,e.p1.y-Math.cos(s)*a),this.ctx.lineTo(e.p1.x+Math.sin(s)*a,e.p1.y+Math.cos(s)*a),this.ctx.stroke()}drawRay(e,t=[0,0,0,1],n=!1,r=[],i=1){if(this.ctx.setLineDash(r.map((e=>e*this.lengthScale))),this.ctx.strokeStyle=this.rgbaToCssColor(t),this.ctx.lineWidth=i*this.lengthScale,this.ctx.fillStyle=this.rgbaToCssColor(t),Math.abs(e.p2.x-e.p1.x)<=1e-5*this.lengthScale&&Math.abs(e.p2.y-e.p1.y)<=1e-5*this.lengthScale)return;const s=e.p2.x-e.p1.x,a=e.p2.y-e.p1.y,o=Math.sqrt(s*s+a*a),c=s/o,u=a/o,l=(Math.abs(e.p1.x+this.origin.x)+Math.abs(e.p1.y+this.origin.y)+this.canvas.height+this.canvas.width)/Math.min(1,this.scale),h=5*this.lengthScale,p=150*this.lengthScale;if(!n||h<1.2*this.ctx.lineWidth)return this.ctx.beginPath(),this.ctx.moveTo(e.p1.x,e.p1.y),this.ctx.lineTo(e.p1.x+c*l,e.p1.y+u*l),void this.ctx.stroke();this.ctx.beginPath(),this.ctx.moveTo(e.p1.x,e.p1.y),this.ctx.lineTo(e.p1.x+c*p,e.p1.y+u*p),this.ctx.stroke();const d=e.p1.x+c*p,f=e.p1.y+u*p,m=this.ctx.lineWidth,g=h,y=-u,x=c;this.ctx.beginPath(),this.ctx.moveTo(d-g/2*y,f-g/2*x),this.ctx.lineTo(d+g/2*y,f+g/2*x),this.ctx.lineTo(d+h*c+m/2*y,f+h*u+m/2*x),this.ctx.lineTo(d+h*c-m/2*y,f+h*u-m/2*x),this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(d+h*c,f+h*u),this.ctx.lineTo(e.p1.x+c*l,e.p1.y+u*l),this.ctx.stroke()}drawSegment(e,t=[0,0,0,1],n=!1,r=[],i=1){this.ctx.setLineDash(r.map((e=>e*this.lengthScale))),this.ctx.strokeStyle=this.rgbaToCssColor(t),this.ctx.lineWidth=i*this.lengthScale,this.ctx.fillStyle=this.rgbaToCssColor(t);const s=e.p2.x-e.p1.x,a=e.p2.y-e.p1.y,o=Math.sqrt(s*s+a*a),c=Math.min(.15*o,5*this.lengthScale);if(!n||c<1.2*this.ctx.lineWidth)return this.ctx.beginPath(),this.ctx.moveTo(e.p1.x,e.p1.y),this.ctx.lineTo(e.p2.x,e.p2.y),void this.ctx.stroke();const u=s/o,l=a/o,h=e.p1.x+.67*s,p=e.p1.y+.67*a;this.ctx.beginPath(),this.ctx.moveTo(e.p1.x,e.p1.y),this.ctx.lineTo(h-c/2*u,p-c/2*l),this.ctx.stroke();const d=this.ctx.lineWidth,f=c,m=-l,g=u;this.ctx.beginPath(),this.ctx.moveTo(h-c/2*u-f/2*m,p-c/2*l-f/2*g),this.ctx.lineTo(h-c/2*u+f/2*m,p-c/2*l+f/2*g),this.ctx.lineTo(h+c/2*u+d/2*m,p+c/2*l+d/2*g),this.ctx.lineTo(h+c/2*u-d/2*m,p+c/2*l-d/2*g),this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(h+c/2*u,p+c/2*l),this.ctx.lineTo(e.p2.x,e.p2.y),this.ctx.stroke()}drawCircle(e,t="black"){if(this.ctx.strokeStyle=t,this.ctx.lineWidth=1*this.lengthScale,this.ctx.beginPath(),"object"==typeof e.r){let t=e.r.p1.x-e.r.p2.x,n=e.r.p1.y-e.r.p2.y;this.ctx.arc(e.c.x,e.c.y,Math.sqrt(t*t+n*n),0,2*Math.PI,!1)}else this.ctx.arc(e.c.x,e.c.y,e.r,0,2*Math.PI,!1);this.ctx.stroke()}applyColorTransformation(){this.ctxVirtual.canvas.width=this.canvas.width,this.ctxVirtual.canvas.height=this.canvas.height,this.ctxVirtual.drawImage(this.canvas,0,0);const e=this.ctxVirtual.getImageData(0,0,this.ctxVirtual.canvas.width,this.ctxVirtual.canvas.height),t=e.data;for(let e=0;e<t.length;e+=4){if(0===t[e+3])continue;const n=t[e+3]/256,r=-Math.log(1-t[e]/256)*n,i=-Math.log(1-t[e+1]/256)*n,s=-Math.log(1-t[e+2]/256)*n,a=Math.max(r,i,s);t[e]=255*r/a,t[e+1]=255*i/a,t[e+2]=255*s/a,t[e+3]=255*Math.min(a,1)}this.ctxVirtual.putImageData(e,0,0),this.ctx.globalCompositeOperation="source-over",this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.ctxVirtual.canvas,0,0)}};class s{static MAX_CACHE_SIZE=500;constructor(e,t,n,r,i,s,a){if(this.gl=e,!this.gl)throw new Error("Unable to initialize WebGL. Your browser may not support it.");if(!this.gl.getExtension("OES_texture_float"))throw new Error("OES_texture_float not supported");this.canvas=e.canvas,this.width=this.canvas.width,this.height=this.canvas.height,this.origin=t,this.scale=n,this.lengthScale=r,this.colorMode=a,this.rayCache=[],this.segmentCache=[],this.pointCache=[],this.arrowCache=[],this.hasFirstFlush=!1,"colorizedIntensity"===this.colorMode?this.msaaCount=1:this.msaaCount=4,this.lineBuffer=this.gl.createBuffer(),this.pointBuffer=this.gl.createBuffer(),this.arrowBuffer=this.gl.createBuffer(),this.initializeShaders(),this.initializeFramebuffer()}initializeFramebuffer(){const e=this.gl;this.floatTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.floatTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.canvas.width,e.canvas.height,0,e.RGBA,e.FLOAT,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),this.framebuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.floatTexture,0);const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete: "+t);this.quadBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.quadBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),e.STATIC_DRAW),e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindBuffer(e.ARRAY_BUFFER,null)}initializeShaders(){const e="\n      precision highp float;\n      uniform vec4 u_color;\n      uniform bool u_isScreenSpace;\n      \n      varying vec2 v_position;\n      varying vec2 v_resolution;\n      \n      void main() {\n        gl_FragColor = u_color;\n      }\n    ",t=e;let n;switch(this.colorMode){case"linear":n="\n          precision highp float;\n          uniform sampler2D u_texture;\n          varying vec2 v_texCoord;\n\n          void main() {\n            vec4 color = texture2D(u_texture, v_texCoord);\n            float maxComponent = max(max(color.r, color.g), color.b);\n            if (maxComponent > 1.0) {\n              color.rgb /= maxComponent;\n            }\n            gl_FragColor = vec4(pow(color.rgb, vec3(1.0 / 2.2)), pow(min(maxComponent, 1.0), 1.0 / 2.2));\n          }\n        ";break;case"linearRGB":n="\n          precision highp float;\n          uniform sampler2D u_texture;\n          varying vec2 v_texCoord;\n\n          void main() {\n            vec4 color = texture2D(u_texture, v_texCoord);\n            float maxComponent = max(max(color.r, color.g), color.b);\n            gl_FragColor = vec4(pow(color.rgb, vec3(1.0 / 2.2)), pow(maxComponent, 1.0 / 2.2));\n          }\n        ";break;case"reinhard":n="\n          precision highp float;\n\n          uniform sampler2D u_texture;\n          varying vec2 v_texCoord;\n\n          // Convert RGB to luminance using perceptual weights\n          float getLuminance(vec3 color) {\n            return dot(color, vec3(0.2126, 0.7152, 0.0722));\n          }\n\n          void main() {\n            // Sample the texture\n            vec4 color = texture2D(u_texture, v_texCoord);\n\n            // Calculate luminance\n            float Lold = getLuminance(color.rgb);\n\n            // Apply Reinhard tone mapping to luminance\n            float Lnew = Lold / (1.0 + Lold);\n\n            // Scale RGB by ratio of new to old luminance\n            vec3 toneMapped = color.rgb * (Lnew / Lold);\n\n            // Apply gamma correction\n            vec3 gammaCorrected = pow(toneMapped, vec3(1.0 / 2.2));\n\n            // Store the maximum component of the original color\n            float maxComponent = max(max(color.r, color.g), color.b);\n\n            gl_FragColor = vec4(gammaCorrected, pow(maxComponent, 1.0 / 2.2));\n          }\n        ";break;case"colorizedIntensity":n="\n          precision highp float;\n          uniform sampler2D u_texture;\n          varying vec2 v_texCoord;\n\n          vec4 brightnessToColor(float brightness) {\n              if (brightness > 100.0) {\n                  return vec4(1.0, 0.0, 0.0, 1.0); // Red\n              } else if (brightness > 10.0) {\n                  return vec4(mix(vec3(1.0, 0.5, 0.0), vec3(1.0, 0.0, 0.0), (log2(brightness) - log2(10.0)) / (log2(100.0) - log2(10.0))), 1.0); // Smooth transition from orange to red\n              } else if (brightness > 1.0) {\n                  return vec4(mix(vec3(1.0, 1.0, 0.0), vec3(1.0, 0.5, 0.0), (log2(brightness) - log2(1.0)) / (log2(10.0) - log2(1.0))), 1.0); // Smooth transition from yellow to orange\n              } else if (brightness > 0.1) {\n                  return vec4(mix(vec3(0.0, 1.0, 0.0), vec3(1.0, 1.0, 0.0), (log2(brightness) - log2(0.1)) / (log2(1.0) - log2(0.1))), 1.0); // Smooth transition from green to yellow\n              } else if (brightness > 0.01) {\n                  return vec4(mix(vec3(0.0, 1.0, 1.0), vec3(0.0, 1.0, 0.0), (log2(brightness) - log2(0.01)) / (log2(0.1) - log2(0.01))), 1.0); // Smooth transition from cyan to green\n              } else if (brightness > 0.001) {\n                  return vec4(mix(vec3(0.0, 0.0, 1.0), vec3(0.0, 1.0, 1.0), (log2(brightness) - log2(0.001)) / (log2(0.01) - log2(0.001))), 1.0); // Smooth transition from blue to cyan\n              } else if (brightness > 0.0001) {\n                  return vec4(mix(vec3(0.3, 0.0, 0.3), vec3(0.0, 0.0, 1.0), (log2(brightness) - log2(0.0001)) / (log2(0.001) - log2(0.0001))), 1.0); // Smooth transition from purple to blue\n              } else {\n                  return vec4(mix(vec3(0.0, 0.0, 0.0), vec3(0.3, 0.0, 0.3), (log2(max(brightness, 1e-7)) - log2(1e-7)) / (log2(0.0001) - log2(1e-7))), (log2(max(brightness, 1e-7)) - log2(1e-7)) / (log2(0.0001) - log2(1e-7))); // Smooth transition from purple to transparent\n              }\n          }\n\n          void main() {\n              vec4 color = texture2D(u_texture, v_texCoord);\n              float maxComponent = max(max(color.r, color.g), color.b);\n\n              vec4 mappedColor = brightnessToColor(maxComponent);\n              gl_FragColor = vec4(mappedColor.rgb * 0.8, 0.0);\n          }\n        "}const r=this.compileShader(this.gl,"\n      attribute vec2 position;\n      uniform vec2 u_resolution;\n      uniform vec2 u_origin;\n      uniform float u_scale;\n      uniform bool u_isScreenSpace;\n      \n      varying vec2 v_position;\n      varying vec2 v_resolution;\n      \n      void main() {\n        vec2 pos;\n        if (u_isScreenSpace) {\n          pos = position;\n        } else {\n          pos = position * u_scale + u_origin;\n        }\n        \n        // Convert to clip space\n        vec2 clipSpace = (pos / u_resolution) * 2.0 - 1.0;\n        clipSpace.y = -clipSpace.y;\n        gl_Position = vec4(clipSpace, 0.0, 1.0);\n        \n        // Pass values to fragment shader\n        v_position = pos;\n        v_resolution = u_resolution;\n      }\n    ",this.gl.VERTEX_SHADER),i=this.compileShader(this.gl,e,this.gl.FRAGMENT_SHADER);if(this.rayProgram=this.gl.createProgram(),this.gl.attachShader(this.rayProgram,r),this.gl.attachShader(this.rayProgram,i),this.gl.linkProgram(this.rayProgram),!this.gl.getProgramParameter(this.rayProgram,this.gl.LINK_STATUS))return void this.gl.deleteProgram(this.rayProgram);this.positionAttributeLocation=this.gl.getAttribLocation(this.rayProgram,"position"),this.resolutionUniformLocation=this.gl.getUniformLocation(this.rayProgram,"u_resolution"),this.originUniformLocation=this.gl.getUniformLocation(this.rayProgram,"u_origin"),this.scaleUniformLocation=this.gl.getUniformLocation(this.rayProgram,"u_scale"),this.isScreenSpaceLocation=this.gl.getUniformLocation(this.rayProgram,"u_isScreenSpace"),this.colorUniformLocation=this.gl.getUniformLocation(this.rayProgram,"u_color");const s=this.compileShader(this.gl,"\n      attribute vec2 position;\n      uniform vec2 u_resolution;\n      uniform vec2 u_origin;\n      uniform float u_scale;\n      uniform vec2 u_point;\n      uniform float u_size;\n      \n      varying vec2 v_position;\n      varying vec2 v_resolution;\n      \n      void main() {\n        // Calculate point position\n        vec2 pointPos = u_point * u_scale + u_origin;\n        vec2 pos = pointPos + position * u_size * u_scale;\n        \n        // Convert to clip space\n        vec2 clipSpace = (pos / u_resolution) * 2.0 - 1.0;\n        clipSpace.y = -clipSpace.y;\n        gl_Position = vec4(clipSpace, 0.0, 1.0);\n        \n        // Pass values to fragment shader\n        v_position = pos;\n        v_resolution = u_resolution;\n      }\n    ",this.gl.VERTEX_SHADER),a=this.compileShader(this.gl,t,this.gl.FRAGMENT_SHADER);if(this.pointProgram=this.gl.createProgram(),this.gl.attachShader(this.pointProgram,s),this.gl.attachShader(this.pointProgram,a),this.gl.linkProgram(this.pointProgram),!this.gl.getProgramParameter(this.pointProgram,this.gl.LINK_STATUS))return void this.gl.deleteProgram(this.pointProgram);this.pointPositionAttributeLocation=this.gl.getAttribLocation(this.pointProgram,"position"),this.pointResolutionUniformLocation=this.gl.getUniformLocation(this.pointProgram,"u_resolution"),this.pointOriginUniformLocation=this.gl.getUniformLocation(this.pointProgram,"u_origin"),this.pointScaleUniformLocation=this.gl.getUniformLocation(this.pointProgram,"u_scale"),this.pointPositionUniformLocation=this.gl.getUniformLocation(this.pointProgram,"u_point"),this.pointSizeUniformLocation=this.gl.getUniformLocation(this.pointProgram,"u_size"),this.pointColorUniformLocation=this.gl.getUniformLocation(this.pointProgram,"u_color");const o=this.compileShader(this.gl,"\n      attribute vec2 position;\n      varying vec2 v_texCoord;\n      \n      void main() {\n        gl_Position = vec4(position, 0.0, 1.0);\n        v_texCoord = position * 0.5 + 0.5;\n      }\n    ",this.gl.VERTEX_SHADER),c=this.compileShader(this.gl,n,this.gl.FRAGMENT_SHADER);if(this.quadProgram=this.gl.createProgram(),this.gl.attachShader(this.quadProgram,o),this.gl.attachShader(this.quadProgram,c),this.gl.linkProgram(this.quadProgram),!this.gl.getProgramParameter(this.quadProgram,this.gl.LINK_STATUS))return void this.gl.deleteProgram(this.quadProgram);this.quadPositionLocation=this.gl.getAttribLocation(this.quadProgram,"position"),this.textureLocation=this.gl.getUniformLocation(this.quadProgram,"u_texture");const u=new Float32Array([-.5,-.5,.5,-.5,-.5,.5,.5,.5]);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.pointBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,u,this.gl.STATIC_DRAW)}compileShader(e,t,n){const r=e.createShader(n);return e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(e.deleteShader(r),null)}begin(){this.rayCache=[],this.segmentCache=[],this.pointCache=[],this.arrowCache=[],this.hasFirstFlush=!1}drawPoint(e,t=[0,0,0,1],n=5){t=this.preprocessColor(t),this.pointCache.push({p:e,color:t,size:n}),this.pointCache.length>=s.MAX_CACHE_SIZE&&this.flush()}drawRay(e,t=[0,0,0,1],n=!1,r=[]){const i=e.p2.x-e.p1.x,a=e.p2.y-e.p1.y,o=Math.sqrt(i*i+a*a);if(o<1e-5*this.lengthScale)return;t=this.preprocessColor(t);const c=i/o,u=a/o,l=(Math.abs(e.p1.x+this.origin.x)+Math.abs(e.p1.y+this.origin.y)+this.canvas.height+this.canvas.width)/Math.min(1,this.scale),h=5*this.lengthScale,p=150*this.lengthScale;if(n&&h>=1.2*this.lengthScale){const n={p1:e.p1,p2:{x:e.p1.x+c*p,y:e.p1.y+u*p}};r&&r.length>0?this.drawDashedSegment(n,t,r):this.segmentCache.push({s:n,color:t});const i=e.p1.x+c*p,s=e.p1.y+u*p,a=-u,o=c,d=this.lengthScale,f=h;this.arrowCache.push({points:[i-f/2*a,s-f/2*o,i+f/2*a,s+f/2*o,i+h*c+d/2*a,s+h*u+d/2*o,i+h*c-d/2*a,s+h*u-d/2*o],color:t});const m={p1:{x:i+h*c,y:s+h*u},p2:{x:e.p1.x+c*l,y:e.p1.y+u*l}};r&&r.length>0?this.drawDashedSegment(m,t,r):this.rayCache.push({r:m,color:t})}else if(r&&r.length>0){let n=0,i=!0,s=0;for(;s<l;){const a=r[n]*this.lengthScale;if(i){const n={x:e.p1.x+s*c,y:e.p1.y+s*u},r={x:e.p1.x+Math.min(s+a,l)*c,y:e.p1.y+Math.min(s+a,l)*u};this.segmentCache.push({s:{p1:n,p2:r},color:t})}s+=a,n=(n+1)%r.length,i=!i}}else if(this.msaaCount>1){const n=1/this.msaaCount,r=-u,i=c,s=[t[0],t[1],t[2],t[3]/this.msaaCount];for(let t=0;t<this.msaaCount;t++){const a=(t%2==0?1:-1)*(Math.floor(t/2)+.5)*n/this.scale,o={p1:{x:e.p1.x+a*r,y:e.p1.y+a*i},p2:{x:e.p1.x+c*l+a*r,y:e.p1.y+u*l+a*i}};this.rayCache.push({r:o,color:s})}}else this.rayCache.push({r:e,color:t});(this.rayCache.length>=s.MAX_CACHE_SIZE||this.segmentCache.length>=s.MAX_CACHE_SIZE||this.arrowCache.length>=s.MAX_CACHE_SIZE)&&this.flush()}drawDashedSegment(e,t,n){const r=e.p2.x-e.p1.x,i=e.p2.y-e.p1.y,s=Math.sqrt(r*r+i*i);if(s<1e-5*this.lengthScale)return;const a=r/s,o=i/s;let c=0,u=!0,l=0;for(;l<s;){const r=n[c]*this.lengthScale;if(u){const n={x:e.p1.x+l*a,y:e.p1.y+l*o},i={x:e.p1.x+Math.min(l+r,s)*a,y:e.p1.y+Math.min(l+r,s)*o};this.segmentCache.push({s:{p1:n,p2:i},color:t})}if(l+=r,c=(c+1)%n.length,u=!u,l>=s)break}}drawSegment(e,t=[0,0,0,1],n=!1,r=[]){const i=e.p2.x-e.p1.x,a=e.p2.y-e.p1.y,o=Math.sqrt(i*i+a*a),c=i/o,u=a/o;if(o<1e-5*this.lengthScale)return;t=this.preprocessColor(t);const l=Math.min(.15*o,5*this.lengthScale);if(n&&l>=1.2*this.lengthScale){const n=e.p1.x+.67*i,s=e.p1.y+.67*a,o={p1:e.p1,p2:{x:n-l/2*c,y:s-l/2*u}};r&&r.length>0?this.drawDashedSegment(o,t,r):this.segmentCache.push({s:o,color:t});const h=-u,p=c,d=this.lengthScale,f=l;this.arrowCache.push({points:[n-l/2*c-f/2*h,s-l/2*u-f/2*p,n-l/2*c+f/2*h,s-l/2*u+f/2*p,n+l/2*c+d/2*h,s+l/2*u+d/2*p,n+l/2*c-d/2*h,s+l/2*u-d/2*p],color:t});const m={p1:{x:n+l/2*c,y:s+l/2*u},p2:e.p2};r&&r.length>0?this.drawDashedSegment(m,t,r):this.segmentCache.push({s:m,color:t})}else if(r&&r.length>0)this.drawDashedSegment(e,t,r);else if(this.msaaCount>1){const n=1/this.msaaCount,r=-u,i=c,s=[t[0],t[1],t[2],t[3]/this.msaaCount];for(let t=0;t<this.msaaCount;t++){const a=(t%2==0?1:-1)*(Math.floor(t/2)+.5)*n/this.scale,o={p1:{x:e.p1.x+a*r,y:e.p1.y+a*i},p2:{x:e.p2.x+a*r,y:e.p2.y+a*i}};this.segmentCache.push({s:o,color:s})}}else this.segmentCache.push({s:e,color:t});(this.segmentCache.length>=s.MAX_CACHE_SIZE||this.arrowCache.length>=s.MAX_CACHE_SIZE)&&this.flush()}flush(){if(!this.rayProgram||!this.quadProgram||!this.pointProgram)return;const e=this.gl,t=e.canvas;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),e.viewport(0,0,t.width,t.height),this.hasFirstFlush||(e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),this.hasFirstFlush=!0),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE),this.pointCache.length>0&&(e.useProgram(this.pointProgram),e.uniform2f(this.pointResolutionUniformLocation,t.width,t.height),e.uniform2f(this.pointOriginUniformLocation,this.origin.x,this.origin.y),e.uniform1f(this.pointScaleUniformLocation,this.scale),e.bindBuffer(e.ARRAY_BUFFER,this.pointBuffer),e.enableVertexAttribArray(this.pointPositionAttributeLocation),e.vertexAttribPointer(this.pointPositionAttributeLocation,2,e.FLOAT,!1,0,0),this.pointCache.forEach((({p:t,color:n,size:r})=>{const[i,s,a,o]=n;e.uniform2f(this.pointPositionUniformLocation,t.x,t.y),e.uniform1f(this.pointSizeUniformLocation,r*this.lengthScale),e.uniform4f(this.pointColorUniformLocation,i*o,s*o,a*o,1),e.drawArrays(e.TRIANGLE_STRIP,0,4)}))),e.useProgram(this.rayProgram),e.uniform2f(this.resolutionUniformLocation,t.width,t.height),e.uniform2f(this.originUniformLocation,this.origin.x,this.origin.y),e.uniform1f(this.scaleUniformLocation,this.scale),e.bindBuffer(e.ARRAY_BUFFER,this.lineBuffer),e.enableVertexAttribArray(this.positionAttributeLocation),e.vertexAttribPointer(this.positionAttributeLocation,2,e.FLOAT,!1,0,0),e.uniform1i(this.isScreenSpaceLocation,!1),this.rayCache.forEach((({r:t,color:n})=>{const[r,i,s,a]=n;e.uniform4f(this.colorUniformLocation,r*a,i*a,s*a,1);const o=(Math.abs(t.p1.x+this.origin.x)+Math.abs(t.p1.y+this.origin.y)+this.canvas.height+this.canvas.width)/Math.min(1,this.scale),c={x:t.p1.x+(t.p2.x-t.p1.x)*o,y:t.p1.y+(t.p2.y-t.p1.y)*o},u=this.createRectangleFromLine(t.p1,c);e.bufferData(e.ARRAY_BUFFER,u,e.STATIC_DRAW),e.drawArrays(e.TRIANGLES,0,6)})),this.segmentCache.forEach((({s:t,color:n})=>{const[r,i,s,a]=n;e.uniform4f(this.colorUniformLocation,r*a,i*a,s*a,1);const o=this.createRectangleFromLine(t.p1,t.p2);e.bufferData(e.ARRAY_BUFFER,o,e.STATIC_DRAW),e.drawArrays(e.TRIANGLES,0,6)})),this.arrowCache.length>0&&(e.useProgram(this.rayProgram),e.bindBuffer(e.ARRAY_BUFFER,this.arrowBuffer),e.enableVertexAttribArray(this.positionAttributeLocation),e.vertexAttribPointer(this.positionAttributeLocation,2,e.FLOAT,!1,0,0),this.arrowCache.forEach((({points:t,color:n})=>{const[r,i,s,a]=n;e.uniform4f(this.colorUniformLocation,r*a,i*a,s*a,1),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.DYNAMIC_DRAW),e.drawArrays(e.TRIANGLE_FAN,0,4)}))),e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,t.width,t.height),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.disable(e.BLEND),e.useProgram(this.quadProgram),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.floatTexture),e.uniform1i(this.textureLocation,0),e.bindBuffer(e.ARRAY_BUFFER,this.quadBuffer),e.enableVertexAttribArray(this.quadPositionLocation),e.vertexAttribPointer(this.quadPositionLocation,2,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLE_STRIP,0,4),this.rayCache.length=0,this.segmentCache.length=0,this.pointCache.length=0,this.arrowCache.length=0}createRectangleFromLine(e,t,n=1){const r=t.x-e.x,i=t.y-e.y,s=Math.sqrt(r*r+i*i);if(s<1e-5*this.lengthScale)return new Float32Array(0);const a=r/s,o=-i/s*(n*this.lengthScale/2),c=a*(n*this.lengthScale/2);return new Float32Array([e.x+o,e.y+c,e.x-o,e.y-c,t.x+o,t.y+c,t.x+o,t.y+c,e.x-o,e.y-c,t.x-o,t.y-c])}preprocessColor(e){const t=e[0]*e[3],n=e[1]*e[3],r=e[2]*e[3];if(t+n+r==0)return[0,0,0,0];const i=Math.max(t,n,r);if("colorizedIntensity"===this.colorMode)return[i,i,i,1];{const e=Math.pow(t,2.2),s=Math.pow(n,2.2),a=Math.pow(r,2.2),o=i/Math.max(e,s,a);return[e*o,s*o,a*o,1]}}destroy(){const e=this.gl;e.deleteBuffer(this.lineBuffer),e.deleteBuffer(this.pointBuffer),e.deleteBuffer(this.arrowBuffer),e.deleteBuffer(this.quadBuffer),e.deleteTexture(this.floatTexture),e.deleteFramebuffer(this.framebuffer),e.deleteProgram(this.rayProgram),e.deleteProgram(this.pointProgram),e.deleteProgram(this.quadProgram)}applyColorTransformation(){}}const a=s;var o=n(6492),c=n(4536),u=n(3452),l=n(2635);class h{static MIN_RAY_SEGMENT_LENGTH=1e-6;static MIN_RAY_SEGMENT_LENGTH_SQUARED=h.MIN_RAY_SEGMENT_LENGTH*h.MIN_RAY_SEGMENT_LENGTH;static UNDEFINED_BEHAVIOR_THRESHOLD=.001;static UV_WAVELENGTH=380;static VIOLET_WAVELENGTH=420;static BLUE_WAVELENGTH=460;static CYAN_WAVELENGTH=500;static GREEN_WAVELENGTH=540;static YELLOW_WAVELENGTH=580;static RED_WAVELENGTH=620;static INFRARED_WAVELENGTH=700;constructor(e,t=null,n=null,i=null,s=null,a=null,c=!1,u=1/0,l=null,h=null){this.scene=e,this.scene.simulator=this,this.ctxMain=t,this.ctxBelowLight=n,this.ctxAboveLight=i,this.ctxGrid=s,this.ctxVirtual=a,void 0!==r&&t&&t.constructor===r&&(this.isSVG=!0),this.dpr=1,this.enableTimer=c,this.rayCountLimit=u,this.glMain=l,this.glVirtual=h,this.pendingRays=[],this.simulationTimerId=-1,this.shouldSimulatorStop=!1,this.simulationStartTime=null,this.totalTruncation=0,this.totalUndefinedBehavior=0,this.undefinedBehaviorObjs=[],this.brightnessScale=0,this.processedRayCount=0,this.manualLightRedraw=!1,this.isLightLayerSynced=!0,this.lastOrigin=o.A.point(0,0),this.lastScale=1,this.error=null,this.warning=null,this.eventListeners={},this.canvasRendererMain=null,this.canvasRendererBelowLight=null,this.canvasRendererAboveLight=null,this.canvasRendererGrid=null}getThemeRayColor(e,t){const n=this.scene.theme,r=n[e]?.color||n.ray.color;return[r.r,r.g,r.b,t]}getThemeRayDash(e){const t=this.scene.theme;return t[e]?.dash||t.ray.dash}getThemeImageColor(e,t){const n=this.scene.theme,r=n[e]?.color||n.realImage.color;return"virtualObject"===e&&.3===r.r&&.3===r.g&&.3===r.b&&"default"!==this.scene.colorMode?[.03,.03,.03,t]:[r.r,r.g,r.b,t]}getThemeImageSize(e){const t=this.scene.theme;return t[e]?.size||t.realImage.size||5}on(e,t){this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)}emit(e,t){this.eventListeners[e]&&this.eventListeners[e].forEach((e=>e(t)))}updateSimulation(e,t,n){this.emit("update",{skipLight:e,skipGrid:t,forceRedraw:n}),!e&&this.ctxMain?.canvas?.style&&(this.manualLightRedraw&&!n?(this.isLightLayerSynced=!1,this.emit("lightLayerSyncChange",{isSynced:!1})):(this.isLightLayerSynced=!0,this.emit("lightLayerSyncChange",{isSynced:!0})));let r=!1;if(this.lastScale==this.scene.scale&&this.lastOrigin.x==this.scene.origin.x&&this.lastOrigin.y==this.scene.origin.y||(r=!0),(e=e||this.manualLightRedraw&&!n)||(this.lastScale=this.scene.scale,this.lastOrigin.x=this.scene.origin.x,this.lastOrigin.y=this.scene.origin.y,this.totalTruncation=0,this.totalUndefinedBehavior=0,this.undefinedBehaviorObjs=[],this.brightnessScale=0,this.simulationStartTime=new Date,this.emit("simulationStart",null)),e||-1==this.simulationTimerId||(clearTimeout(this.simulationTimerId),this.simulationTimerId=-1),this.ctxBelowLight&&this.ctxAboveLight&&(this.canvasRendererBelowLight=new i(this.ctxBelowLight,{x:this.scene.origin.x*this.dpr,y:this.scene.origin.y*this.dpr},this.scene.scale*this.dpr,this.scene.lengthScale,this.scene.backgroundImage),this.canvasRendererAboveLight=new i(this.ctxAboveLight,{x:this.scene.origin.x*this.dpr,y:this.scene.origin.y*this.dpr},this.scene.scale*this.dpr,this.scene.lengthScale)),this.ctxMain&&"default"!=this.scene.colorMode&&!this.glMain&&(this.scene.colorMode="default",this.error=l.Ay.t("simulator:settings.correctBrightness.error"),this.emit("requestUpdateErrorAndWarning"),this.emit("webglContextLost")),this.canvasRendererMain&&this.canvasRendererMain.destroy&&"default"==this.scene.colorMode&&(this.canvasRendererMain.destroy(),this.canvasRendererMain=null),(!e||r)&&this.ctxMain){if("default"!=this.scene.colorMode){var s=this.scene.colorMode;this.canvasRendererMain&&this.canvasRendererMain.colorMode==s&&this.canvasRendererMain.scale==this.scene.scale*this.dpr&&this.canvasRendererMain.lengthScale==this.scene.lengthScale&&this.canvasRendererMain.origin.x==this.scene.origin.x*this.dpr&&this.canvasRendererMain.origin.y==this.scene.origin.y*this.dpr&&this.canvasRendererMain.width==this.ctxMain.canvas.width&&this.canvasRendererMain.height==this.ctxMain.canvas.height?this.canvasRendererMain.begin():(this.canvasRendererMain&&this.canvasRendererMain.destroy&&this.canvasRendererMain.destroy(),this.canvasRendererMain=new a(this.glMain,{x:this.scene.origin.x*this.dpr,y:this.scene.origin.y*this.dpr},this.scene.scale*this.dpr,this.scene.lengthScale,null,null,s))}else this.canvasRendererMain=new i(this.ctxMain,{x:this.scene.origin.x*this.dpr,y:this.scene.origin.y*this.dpr},this.scene.scale*this.dpr,this.scene.lengthScale,null,this.ctxVirtual);this.isSVG?(this.ctxMain.translate(this.scene.origin.x/(this.scene.scale*this.dpr),this.scene.origin.y/(this.scene.scale*this.dpr)),this.ctxMain.globalAlpha=1):this.ctxAboveLight&&(this.ctxAboveLight.globalAlpha=1)}if(!this.isLightLayerSynced&&r&&this.canvasRendererMain.flush&&this.canvasRendererMain.flush(),e||(this.pendingRays=[],this.processedRayCount=0),!t&&this.ctxGrid&&(this.canvasRendererGrid=new i(this.ctxGrid,{x:this.scene.origin.x*this.dpr,y:this.scene.origin.y*this.dpr},this.scene.scale*this.dpr,this.scene.lengthScale),this.scene.showGrid)){this.ctxGrid.save(),this.ctxGrid.setTransform(this.scene.scale*this.dpr,0,0,this.scene.scale*this.dpr,0,0);var o=this.scene.theme.grid.dash.map((e=>e*this.scene.lengthScale)),c=o.reduce(((e,t)=>e+t),0);this.ctxGrid.strokeStyle=`rgb(${Math.round(255*this.scene.theme.grid.color.r)},${Math.round(255*this.scene.theme.grid.color.g)},${Math.round(255*this.scene.theme.grid.color.b)},${this.scene.theme.grid.color.a})`,this.ctxGrid.lineWidth=this.scene.theme.grid.width*this.scene.lengthScale,c*this.scene.scale<=2&&(o=[]),this.ctxGrid.setLineDash(o),this.ctxGrid.beginPath();for(var u=this.scene.origin.x/this.scene.scale%this.scene.gridSize;u<=this.ctxGrid.canvas.width/(this.scene.scale*this.dpr);u+=this.scene.gridSize)this.ctxGrid.moveTo(u,this.scene.origin.y/this.scene.scale%this.scene.gridSize-this.scene.gridSize),this.ctxGrid.lineTo(u,this.ctxGrid.canvas.height/(this.scene.scale*this.dpr));this.ctxGrid.stroke(),this.ctxGrid.beginPath();for(var h=this.scene.origin.y/this.scene.scale%this.scene.gridSize;h<=this.ctxGrid.canvas.height/(this.scene.scale*this.dpr);h+=this.scene.gridSize)this.ctxGrid.moveTo(this.scene.origin.x/this.scene.scale%this.scene.gridSize-this.scene.gridSize,h),this.ctxGrid.lineTo(this.ctxGrid.canvas.width/(this.scene.scale*this.dpr),h);this.ctxGrid.stroke(),this.ctxGrid.setLineDash([]),this.ctxGrid.restore()}const p=this.ctxBelowLight||this.canvasRendererMain;if(p){var d=this.scene.objs.map((function(e,t){return{index:t,value:e.getZIndex()}}));d.sort((function(e,t){return e.value-t.value}));for(var f=0;f<this.scene.objs.length;f++){var m=d[f].index,g=!!this.scene.editor&&this.scene.editor.isObjHighlighted(m);this.scene.objs[m].draw(this.ctxBelowLight?this.canvasRendererBelowLight:this.canvasRendererMain,!1,g)}}if(!e)for(let e of this.scene.opticalObjs){const t=e.onSimulationStart();if(t){if(t.newRays)for(let e of t.newRays)this.pendingRays.push(e);t.truncation&&(this.totalTruncation+=t.truncation),t.brightnessScale&&(0==this.brightnessScale?this.brightnessScale=t.brightnessScale:this.brightnessScale!=t.brightnessScale&&(this.brightnessScale=-1))}}if(e||(this.leftRayCount=0,this.last_s_obj_index=-1,this.last_ray=null,this.last_intersection=null,this.pendingRaysIndex=-1,this.firstBreak=!0,this.processRays()),e&&p){for(m=0;m<this.scene.objs.length;m++)g=!!this.scene.editor&&this.scene.editor.isObjHighlighted(m),this.scene.objs[m].draw(this.ctxAboveLight?this.canvasRendererAboveLight:this.canvasRendererMain,!0,g);"observer"==this.scene.mode&&this.ctxAboveLight&&(this.ctxAboveLight.globalAlpha=1,this.ctxAboveLight.beginPath(),this.ctxAboveLight.fillStyle=`rgb(${Math.round(255*this.scene.theme.observer.color.r)},${Math.round(255*this.scene.theme.observer.color.g)},${Math.round(255*this.scene.theme.observer.color.b)})`,this.ctxAboveLight.arc(this.scene.observer.c.x,this.scene.observer.c.y,this.scene.observer.r,0,2*Math.PI,!1),this.ctxAboveLight.fill())}this.emit("requestUpdateErrorAndWarning")}processRays(){this.simulationTimerId=-1;var e,t,n,r,i,s,a,c=new Date;this.ctxMain&&(this.ctxMain.globalAlpha=1,this.scene.simulateColors?this.ctxMain.globalCompositeOperation="screen":this.ctxMain.globalCompositeOperation="source-over");var l,p,d,f=!1,m=[],g=[];const y=this.scene.opticalObjs;for(;;){if(new Date-c>50&&this.enableTimer)return this.simulationTimerId=setTimeout((()=>this.processRays()),this.firstBreak?100:1),this.firstBreak=!1,"default"!=this.scene.colorMode&&this.canvasRendererMain&&this.canvasRendererMain.flush(),this.emit("simulationPause",null),this.updateSimulation(!0,!0),void this.validate();if(this.processedRayCount>this.rayCountLimit){this.shouldSimulatorStop=!0;break}if(this.shouldSimulatorStop)break;if(this.pendingRaysIndex>=this.pendingRays.length){if(0==this.leftRayCount)break;this.leftRayCount=0,this.last_s_obj_index=-1,this.last_ray=null,this.last_intersection=null,this.pendingRaysIndex=-1}else{this.pendingRaysIndex++;var x=this.pendingRaysIndex;if(this.pendingRays[x]){t=null,n=-1,r=null,f=!1,m=[],g=[],s=1/0,e=!1;for(var v=0;v<y.length;v++)(i=y[v].checkRayIntersects(this.pendingRays[x]))&&(a=o.A.distanceSquared(this.pendingRays[x].p1,i),r&&o.A.distanceSquared(i,r)<h.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&(y[v]instanceof u.A||t instanceof u.A)?t instanceof u.A?y[v]instanceof u.A?g[g.length]=y[v]:(y[v].constructor.mergesWithGlass||(f=!0,m=[t,y[v]]),g[g.length]=t,t=y[v],n=v,r=i,s=a):(t.constructor.mergesWithGlass||(f=!0,m=[t,y[v]]),g[g.length]=y[v]):r&&o.A.distanceSquared(i,r)<h.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale?(f=!0,m=[t,y[v]]):a<s&&a>h.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&(t=y[v],n=v,r=i,s=a,f=!1,m=[],g=[]));if(f&&this.declareUndefinedBehavior(this.pendingRays[x],m),this.canvasRendererMain)if(this.scene.simulateColors)var b=h.wavelengthToColor(this.pendingRays[x].wavelength,this.pendingRays[x].brightness_s+this.pendingRays[x].brightness_p,!this.isSVG&&"default"==this.scene.colorMode);else var D=1*(this.pendingRays[x].brightness_s+this.pendingRays[x].brightness_p);if(s==1/0?(this.canvasRendererMain&&("rays"!=this.scene.mode&&"extended"!=this.scene.mode||(this.scene.simulateColors?this.canvasRendererMain.drawRay(this.pendingRays[x],b,this.scene.showRayArrows,this.getThemeRayDash("colorRay")):this.canvasRendererMain.drawRay(this.pendingRays[x],this.getThemeRayColor("ray",D),this.scene.showRayArrows,this.getThemeRayDash("ray"))),"extended"!=this.scene.mode||this.pendingRays[x].isNew||(this.scene.simulateColors?this.canvasRendererMain.drawRay(o.A.line(this.pendingRays[x].p1,o.A.point(2*this.pendingRays[x].p1.x-this.pendingRays[x].p2.x,2*this.pendingRays[x].p1.y-this.pendingRays[x].p2.y)),b,void 0,this.getThemeRayDash("colorExtendedRay")):this.canvasRendererMain.drawRay(o.A.line(this.pendingRays[x].p1,o.A.point(2*this.pendingRays[x].p1.x-this.pendingRays[x].p2.x,2*this.pendingRays[x].p1.y-this.pendingRays[x].p2.y)),this.getThemeRayColor("extendedRay",D),void 0,this.getThemeRayDash("extendedRay")))),"observer"==this.scene.mode&&(l=o.A.lineCircleIntersections(this.pendingRays[x],this.scene.observer)[2])&&o.A.intersectionIsOnRay(l,this.pendingRays[x])&&(e=!0)):(this.canvasRendererMain&&("rays"!=this.scene.mode&&"extended"!=this.scene.mode||(this.scene.simulateColors?this.canvasRendererMain.drawSegment(o.A.line(this.pendingRays[x].p1,r),b,this.scene.showRayArrows,this.getThemeRayDash("colorRay")):this.canvasRendererMain.drawSegment(o.A.line(this.pendingRays[x].p1,r),this.getThemeRayColor("ray",D),this.scene.showRayArrows,this.getThemeRayDash("ray"))),"extended"!=this.scene.mode||this.pendingRays[x].isNew||(this.scene.simulateColors?(this.canvasRendererMain.drawRay(o.A.line(this.pendingRays[x].p1,o.A.point(2*this.pendingRays[x].p1.x-this.pendingRays[x].p2.x,2*this.pendingRays[x].p1.y-this.pendingRays[x].p2.y)),b,void 0,this.getThemeRayDash("colorExtendedRay")),this.canvasRendererMain.drawRay(o.A.line(r,o.A.point(2*r.x-this.pendingRays[x].p1.x,2*r.y-this.pendingRays[x].p1.y)),b,void 0,this.getThemeRayDash("colorForwardExtendedRay"))):(this.canvasRendererMain.drawRay(o.A.line(this.pendingRays[x].p1,o.A.point(2*this.pendingRays[x].p1.x-this.pendingRays[x].p2.x,2*this.pendingRays[x].p1.y-this.pendingRays[x].p2.y)),this.getThemeRayColor("extendedRay",D),void 0,this.getThemeRayDash("extendedRay")),this.canvasRendererMain.drawRay(o.A.line(r,o.A.point(2*r.x-this.pendingRays[x].p1.x,2*r.y-this.pendingRays[x].p1.y)),this.getThemeRayColor("forwardExtendedRay",D),void 0,this.getThemeRayDash("forwardExtendedRay"))))),"observer"==this.scene.mode&&(l=o.A.lineCircleIntersections(this.pendingRays[x],this.scene.observer)[2])&&o.A.intersectionIsOnSegment(l,o.A.line(this.pendingRays[x].p1,r))&&(e=!0)),"observer"==this.scene.mode&&this.last_ray&&this.canvasRendererMain)if(this.pendingRays[x].gap)this.last_intersection=null;else{if(p=o.A.linesIntersection(this.pendingRays[x],this.last_ray),e)if(this.last_intersection&&o.A.distanceSquared(this.last_intersection,p)<25*this.scene.lengthScale*this.scene.lengthScale)if(o.A.intersectionIsOnRay(p,o.A.line(l,this.pendingRays[x].p1))&&o.A.distanceSquared(l,this.pendingRays[x].p1)>1e-5*this.scene.lengthScale*this.scene.lengthScale){if(this.scene.simulateColors)b=h.wavelengthToColor(this.pendingRays[x].wavelength,.5*(this.pendingRays[x].brightness_s+this.pendingRays[x].brightness_p),!this.isSVG&&"default"==this.scene.colorMode);else{const e=1*(this.pendingRays[x].brightness_s+this.pendingRays[x].brightness_p+(this.last_ray.brightness_s+this.last_ray.brightness_p))*.5;this.ctxMain.globalAlpha=e}(d=r?(p.x-this.pendingRays[x].p1.x)*(r.x-this.pendingRays[x].p1.x)+(p.y-this.pendingRays[x].p1.y)*(r.y-this.pendingRays[x].p1.y):(p.x-this.pendingRays[x].p1.x)*(this.pendingRays[x].p2.x-this.pendingRays[x].p1.x)+(p.y-this.pendingRays[x].p1.y)*(this.pendingRays[x].p2.y-this.pendingRays[x].p1.y))<0?this.scene.simulateColors?this.canvasRendererMain.drawPoint(p,b,this.getThemeImageSize("colorVirtualImage")):this.canvasRendererMain.drawPoint(p,this.getThemeImageColor("virtualImage",D),this.getThemeImageSize("virtualImage")):d<s&&(this.scene.simulateColors?this.canvasRendererMain.drawPoint(p,b,this.getThemeImageSize("colorRealImage")):this.canvasRendererMain.drawPoint(p,this.getThemeImageColor("realImage",D),this.getThemeImageSize("realImage"))),this.scene.simulateColors?this.canvasRendererMain.drawSegment(o.A.line(l,p),b,void 0,this.getThemeRayDash("colorObservedRay")):this.canvasRendererMain.drawSegment(o.A.line(l,p),this.getThemeRayColor("observedRay",D),void 0,this.getThemeRayDash("observedRay"))}else this.scene.simulateColors?this.canvasRendererMain.drawRay(o.A.line(l,this.pendingRays[x].p1),b,void 0,this.getThemeRayDash("colorObservedRay")):this.canvasRendererMain.drawRay(o.A.line(l,this.pendingRays[x].p1),this.getThemeRayColor("observedRay",D),void 0,this.getThemeRayDash("observedRay"));else this.last_intersection&&(this.scene.simulateColors?this.canvasRendererMain.drawRay(o.A.line(l,this.pendingRays[x].p1),b,void 0,this.getThemeRayDash("colorObservedRay")):this.canvasRendererMain.drawRay(o.A.line(l,this.pendingRays[x].p1),this.getThemeRayColor("observedRay",D),void 0,this.getThemeRayDash("observedRay")));this.last_intersection=p}if("images"==this.scene.mode&&this.last_ray&&this.canvasRendererMain&&!this.pendingRays[x].gap){if(p=o.A.linesIntersection(this.pendingRays[x],this.last_ray),this.last_intersection&&o.A.distanceSquared(this.last_intersection,p)<25*this.scene.lengthScale*this.scene.lengthScale){if(this.scene.simulateColors)b=h.wavelengthToColor(this.pendingRays[x].wavelength,.5*(this.pendingRays[x].brightness_s+this.pendingRays[x].brightness_p),!this.isSVG&&"default"==this.scene.colorMode);else{const e=1*(this.pendingRays[x].brightness_s+this.pendingRays[x].brightness_p+(this.last_ray.brightness_s+this.last_ray.brightness_p))*.5;this.ctxMain.globalAlpha=e}(d=r?(p.x-this.pendingRays[x].p1.x)*(r.x-this.pendingRays[x].p1.x)+(p.y-this.pendingRays[x].p1.y)*(r.y-this.pendingRays[x].p1.y):(p.x-this.pendingRays[x].p1.x)*(this.pendingRays[x].p2.x-this.pendingRays[x].p1.x)+(p.y-this.pendingRays[x].p1.y)*(this.pendingRays[x].p2.y-this.pendingRays[x].p1.y))<0?this.scene.simulateColors?this.canvasRendererMain.drawPoint(p,b,this.getThemeImageSize("colorVirtualImage")):this.canvasRendererMain.drawPoint(p,this.getThemeImageColor("virtualImage",D),this.getThemeImageSize("virtualImage")):d<s?this.scene.simulateColors?this.canvasRendererMain.drawPoint(p,b,this.getThemeImageSize("colorRealImage")):this.canvasRendererMain.drawPoint(p,this.getThemeImageColor("realImage",D),this.getThemeImageSize("realImage")):this.scene.simulateColors?this.canvasRendererMain.drawPoint(p,b,this.getThemeImageSize("colorVirtualObject")):this.canvasRendererMain.drawPoint(p,this.getThemeImageColor("virtualObject",D),this.getThemeImageSize("virtualObject"))}this.last_intersection=p}if(this.last_s_obj_index!=n&&(this.pendingRays[x].gap=!0),this.pendingRays[x].isNew=!1,this.last_ray={p1:this.pendingRays[x].p1,p2:this.pendingRays[x].p2},this.last_s_obj_index=n,t){const e=t.onRayIncident(this.pendingRays[x],x,r,g);if(e){if(e.isUndefinedBehavior&&this.declareUndefinedBehavior(this.pendingRays[x],[t]),e.isAbsorbed&&(this.pendingRays[x]=null),e.newRays)for(let t of e.newRays)this.pendingRays.push(t);e.truncation&&(this.totalTruncation+=e.truncation)}}else this.pendingRays[x]=null;this.processedRayCount=this.processedRayCount+1,this.pendingRays[x]&&(this.leftRayCount=this.leftRayCount+1)}}}this.canvasRendererMain&&(this.scene.simulateColors&&!this.isSVG&&(this.canvasRendererMain.applyColorTransformation(),this.ctxAboveLight&&this.ctxAboveLight.setTransform(this.scene.scale*this.dpr,0,0,this.scene.scale*this.dpr,this.scene.origin.x*this.dpr,this.scene.origin.y*this.dpr)),"default"!=this.scene.colorMode&&this.canvasRendererMain.flush(),this.ctxMain&&(this.ctxMain.globalAlpha=1)),this.updateSimulation(!0,!0),this.validate(),this.shouldSimulatorStop?(this.emit("simulationStop",null),this.shouldSimulatorStop=!1):this.emit("simulationComplete",null)}manualRedrawLightLayer(){this.updateSimulation(!1,!0,!0)}stopSimulation(){-1!=this.simulationTimerId&&(this.shouldSimulatorStop=!0)}declareUndefinedBehavior(e,t){this.totalUndefinedBehavior+=e.brightness_s+e.brightness_p,0==this.undefinedBehaviorObjs.length&&(this.undefinedBehaviorObjs=t)}validate(){if(this.totalUndefinedBehavior>h.UNDEFINED_BEHAVIOR_THRESHOLD){const e=this.undefinedBehaviorObjs.map((e=>e.constructor.type));1==e.length?this.warning=l.Ay.t("simulator:generalWarnings.undefinedBehaviorSingle",{involvedObj:e[0]}):this.warning=l.Ay.t("simulator:generalWarnings.undefinedBehaviorOverlapping",{involvedObj1:e[0],involvedObj2:e[1]})}else{if(!(this.scene.simulateColors||"default"===this.scene.colorMode||this.scene.theme.background.color.r<=.01&&this.scene.theme.background.color.g<=.01&&this.scene.theme.background.color.b<=.01)){const e={rays:["ray"],extended:["ray","extendedRay","forwardExtendedRay"],images:["realImage","virtualImage","virtualObject"],observer:["realImage","virtualImage","observedRay"]}[this.scene.mode];for(let t of e)if(Math.max(this.scene.theme[t].color.r,this.scene.theme[t].color.g,this.scene.theme[t].color.b)<.99)return void(this.warning=l.Ay.t("simulator:generalWarnings.blackBecomesTransparent"))}if(-1==this.brightnessScale){let e=!1;for(let t of this.scene.opticalObjs)if(t instanceof c.Detector){e=!0;break}e||this.scene.simulateColors?this.warning=l.Ay.t("simulator:generalWarnings.brightnessInconsistent"):this.warning=null}else this.warning=null}}static wavelengthToColor(e,t,n){var r,i,s,a,o=e;return o>=h.UV_WAVELENGTH&&o<h.VIOLET_WAVELENGTH?(r=.5,i=0,s=1):o>=h.VIOLET_WAVELENGTH&&o<h.BLUE_WAVELENGTH?(r=-.5*(o-h.BLUE_WAVELENGTH)/(h.BLUE_WAVELENGTH-h.VIOLET_WAVELENGTH),i=0,s=1):o>=h.BLUE_WAVELENGTH&&o<h.CYAN_WAVELENGTH?(r=0,i=(o-h.BLUE_WAVELENGTH)/(h.CYAN_WAVELENGTH-h.BLUE_WAVELENGTH),s=1):o>=h.CYAN_WAVELENGTH&&o<h.GREEN_WAVELENGTH?(r=0,i=1,s=-1*(o-h.GREEN_WAVELENGTH)/(h.GREEN_WAVELENGTH-h.CYAN_WAVELENGTH)):o>=h.GREEN_WAVELENGTH&&o<h.YELLOW_WAVELENGTH?(r=(o-h.GREEN_WAVELENGTH)/(h.YELLOW_WAVELENGTH-h.GREEN_WAVELENGTH),i=1,s=0):o>=h.YELLOW_WAVELENGTH&&o<h.RED_WAVELENGTH?(r=1,i=-1*(o-h.RED_WAVELENGTH)/(h.RED_WAVELENGTH-h.YELLOW_WAVELENGTH),s=0):o>=h.RED_WAVELENGTH&&o<=h.INFRARED_WAVELENGTH?(r=1,i=0,s=0):(r=0,i=0,s=0),r*=(a=o>h.INFRARED_WAVELENGTH||o<h.UV_WAVELENGTH?0:o>h.RED_WAVELENGTH?(h.INFRARED_WAVELENGTH-o)/(h.INFRARED_WAVELENGTH-h.RED_WAVELENGTH):o<h.VIOLET_WAVELENGTH?(o-h.UV_WAVELENGTH)/(h.VIOLET_WAVELENGTH-h.UV_WAVELENGTH):1)*t,i*=a*t,s*=a*t,n&&(r=1-Math.exp(-r),i=1-Math.exp(-i),s=1-Math.exp(-s)),[r,i,s,1]}}const p=h},1382:(e,t,n)=>{"use strict";n.d(t,{y:()=>i});var r=n(2014);function i(e){var t=e.replaceAll("\\cdot","*").replaceAll("\\pi","(PI)").replaceAll("\\log"," log").replaceAll("\\exp"," exp").replaceAll("\\arcsin"," asin").replaceAll("\\arccos"," acos").replaceAll("\\arctan"," atan").replaceAll("\\sinh"," sinh").replaceAll("\\cosh"," cosh").replaceAll("\\tanh"," tanh").replaceAll("\\operatorname{asin}"," asin").replaceAll("\\operatorname{acos}"," acos").replaceAll("\\operatorname{atan}"," atan").replaceAll("\\operatorname{asinh}"," asinh").replaceAll("\\operatorname{acosh}"," acosh").replaceAll("\\operatorname{atanh}"," atanh").replaceAll("\\operatorname{arcsinh}"," asinh").replaceAll("\\operatorname{arccosh}"," acosh").replaceAll("\\operatorname{arctanh}"," atanh").replaceAll("\\operatorname{floor}"," floor").replaceAll("\\operatorname{ceil}"," ceil").replaceAll("\\operatorname{round}"," round").replaceAll("\\operatorname{trunc}"," trunc").replaceAll("\\operatorname{sign}"," sign").replaceAll("\\operatorname{sgn}"," sign").replaceAll("\\max"," max").replaceAll("\\min"," min").replaceAll("\\operatorname{abs}"," abs").replaceAll("\\left|","|").replaceAll("\\right|","|").replaceAll("\\mathrm{sech}"," sech");return(0,r.A)(t,{pi:Math.PI,e:Math.E,sech:function(e){return 1/Math.cosh(e)}},{latex:!0})}},6492:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const r={point:function(e,t){return{x:e,y:t}},line:function(e,t){return{p1:e,p2:t}},circle:function(e,t){return"object"==typeof t?{c:e,r:r.line(e,t)}:{c:e,r:t}},dot:function(e,t){return e.x*t.x+e.y*t.y},cross:function(e,t){return e.x*t.y-e.y*t.x},linesIntersection:function(e,t){var n=e.p2.x*e.p1.y-e.p1.x*e.p2.y,i=t.p2.x*t.p1.y-t.p1.x*t.p2.y,s=e.p2.x-e.p1.x,a=t.p2.x-t.p1.x,o=e.p2.y-e.p1.y,c=t.p2.y-t.p1.y;return r.point((n*a-i*s)/(s*c-a*o),(n*c-i*o)/(s*c-a*o))},lineCircleIntersections:function(e,t){var n=e.p2.x-e.p1.x,i=e.p2.y-e.p1.y,s=t.c.x,a=t.c.y,o="object"==typeof t.r?(t.r.p1.x-t.r.p2.x)*(t.r.p1.x-t.r.p2.x)+(t.r.p1.y-t.r.p2.y)*(t.r.p1.y-t.r.p2.y):t.r*t.r,c=Math.sqrt(n*n+i*i),u=n/c,l=i/c,h=(s-e.p1.x)*u+(a-e.p1.y)*l,p=e.p1.x+h*u,d=e.p1.y+h*l,f=Math.sqrt(o-(p-s)*(p-s)-(d-a)*(d-a)),m=[];return m[1]=r.point(p+u*f,d+l*f),m[2]=r.point(p-u*f,d-l*f),m},lineCurveIntersections:function(e,t){return t.intersects(e)},intersectionIsOnRay:function(e,t){return(e.x-t.p1.x)*(t.p2.x-t.p1.x)+(e.y-t.p1.y)*(t.p2.y-t.p1.y)>=0},intersectionIsOnSegment:function(e,t){return(e.x-t.p1.x)*(t.p2.x-t.p1.x)+(e.y-t.p1.y)*(t.p2.y-t.p1.y)>=0&&(e.x-t.p2.x)*(t.p1.x-t.p2.x)+(e.y-t.p2.y)*(t.p1.y-t.p2.y)>=0},intersectionIsOnCurve:function(e,t,n){var i=t.project(r.point(e.x,e.y)).d;return Math.pow(i,2)<n},scaleRayForCurve:function(e,t){var n=t.bbox();n.x.min-=e.p1.x,n.x.max-=e.p1.x,n.y.min-=e.p1.y,n.y.max-=e.p1.y;var i=r.point(e.p2.x-e.p1.x,e.p2.y-e.p1.y),s={x:1/0,y:1/0};Math.abs(n.x.min)>Math.abs(n.x.max)?s.x=n.x.min:s.x=n.x.max,Math.abs(n.y.min)>Math.abs(n.y.max)?s.y=n.y.min:s.y=n.y.max;var a=Math.sqrt(s.x**2+s.y**2),o=Math.sqrt(i.x**2+i.y**2);return i.x=i.x/o*a*1.001,i.y=i.y/o*a*1.001,r.line(e.p1,r.point(i.x+e.p1.x,i.y+e.p1.y))},segmentLength:function(e){return Math.sqrt(r.segmentLengthSquared(e))},segmentLengthSquared:function(e){return r.distanceSquared(e.p1,e.p2)},distance:function(e,t){return Math.sqrt(r.distanceSquared(e,t))},distanceSquared:function(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},segmentMidpoint:function(e){var t=.5*(e.p1.x+e.p2.x),n=.5*(e.p1.y+e.p2.y);return r.point(t,n)},midpoint:function(e,t){var n=.5*(e.x+t.x),i=.5*(e.y+t.y);return r.point(n,i)},perpendicularBisector:function(e){return r.line(r.point(.5*(-e.p1.y+e.p2.y+e.p1.x+e.p2.x),.5*(e.p1.x-e.p2.x+e.p1.y+e.p2.y)),r.point(.5*(e.p1.y-e.p2.y+e.p1.x+e.p2.x),.5*(-e.p1.x+e.p2.x+e.p1.y+e.p2.y)))},parallelLineThroughPoint:function(e,t){var n=e.p2.x-e.p1.x,i=e.p2.y-e.p1.y;return r.line(t,r.point(t.x+n,t.y+i))},normalizeVec:function(e){var t=r.distance(r.point(0,0),e);return r.point(e.x/t,e.y/t)},rotateVec:function(e,t){return{x:e.x*Math.cos(t)-e.y*Math.sin(t),y:e.x*Math.sin(t)+e.y*Math.cos(t)}}},i=r},4536:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AngleSource:()=>a,Aperture:()=>T,ArcMirror:()=>c,Beam:()=>i,BeamSplitter:()=>f,Blocker:()=>E,CircleBlocker:()=>M,CircleGlass:()=>g,CircleGrinGlass:()=>A,ConcaveDiffractionGrating:()=>u,CropBox:()=>z,CurveGlass:()=>b,CurveGrinGlass:()=>C,CustomArcSurface:()=>q,CustomGlass:()=>x,CustomMirror:()=>h,CustomParamSurface:()=>k,CustomSurface:()=>j,Detector:()=>I,DiffractionGrating:()=>O,Drawing:()=>F,Glass:()=>y,GrinGlass:()=>S,Handle:()=>L,IdealLens:()=>D,IdealMirror:()=>d,LineArrow:()=>R,Mirror:()=>o,ModuleObj:()=>U,ParabolicMirror:()=>l,ParamGlass:()=>v,ParamGrinGlass:()=>N,ParamMirror:()=>p,PlaneGlass:()=>m,PointSource:()=>s,Protractor:()=>_,Ruler:()=>P,SingleRay:()=>r,SphericalLens:()=>w,TextLabel:()=>B});const r=n(6373).A,i=n(394).A,s=n(7166).A,a=n(7303).A,o=n(5568).A,c=n(4456).A,u=n(301).A,l=n(1071).A,h=n(1631).A,p=n(8785).A,d=n(5197).A,f=n(7743).A,m=n(6752).A,g=n(4052).A,y=n(6672).A,x=n(749).A,v=n(2881).A,b=n(967).A,D=n(5705).A,w=n(8195).A,A=n(6646).A,S=n(1762).A,N=n(6127).A,C=n(609).A,E=n(5824).A,M=n(120).A,T=n(5676).A,O=n(5707).A,P=n(7254).A,_=n(7060).A,I=n(3786).A,B=n(2741).A,R=n(1709).A,F=n(5468).A,j=n(9595).A,k=n(1660).A,q=n(2432).A,L=n(2929).A,z=n(6776).A,U=n(9633).A},8266:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(867),i=n(2635),s=n(6492),a=n(1382),o=n(7235);class c extends r.A{constructor(e,t){super(e,t);const n=["eqnTheta","eqnP"];for(let e=0;e<this.outRays.length;e++)for(const t in this.outRays[e])n.includes(t)||(this.scene.error=i.Ay.t("simulator:generalErrors.unknownObjectKey",{key:`outRays[${e}].${t}`,type:this.constructor.type}))}populateObjBar(e){e.createInfoBox("<ul><li>"+i.Ay.t("simulator:sceneObjs.BaseCustomSurface.info.angles",{theta_0:"θ<sub>0</sub> (<code>theta_0</code>)",theta_j:"θ<sub>j</sub>"})+"</li><li>"+i.Ay.t("simulator:sceneObjs.BaseCustomSurface.info.brightnesses",{P_0:"P<sub>0</sub> (<code>P_0</code>)",P_j:"P<sub>j</sub>"})+"</li><li>"+i.Ay.t("simulator:sceneObjs.common.eqnInfo.constants")+"<br><code>pi e</code></li><li>"+i.Ay.t("simulator:sceneObjs.common.eqnInfo.operators")+"<br><code>+ - * / ^</code></li><li>"+i.Ay.t("simulator:sceneObjs.common.eqnInfo.functions")+"<br><code>sqrt sin cos tan sec csc cot sinh cosh tanh log exp arcsin arccos arctan arcsinh arccosh arctanh floor round ceil trunc sgn max min abs</code></li><li>"+i.Ay.t("simulator:sceneObjs.BaseCustomSurface.info.previousFormulas")+"</li><li>"+i.Ay.t("simulator:sceneObjs.BaseCustomSurface.info.otherParams",{lambda:"<code>lambda</code>",p:"<code>p</code>"})+"</li><li>"+i.Ay.t(`simulator:sceneObjs.${this.constructor.type}.info.incidentPos`,{t:"<code>t</code>"})+"</li><li>"+i.Ay.t("simulator:sceneObjs.BaseCustomSurface.info.coating",{n_0:"<code>n_0</code>",n_1:"<code>n_1</code>"})+"</li><li>"+i.Ay.t("simulator:sceneObjs.BaseCustomSurface.info.twoSides")+"</li><li>"+i.Ay.t("simulator:sceneObjs.BaseCustomSurface.info.module")+"</li></ul>");for(let t=0;t<this.outRays.length;t++){const n=t+1,r=t;e.createEquation(`θ<sub>${n}</sub> =`,this.outRays[t].eqnTheta,(function(e,t){e.outRays[r].eqnTheta=t,e.initOutRayFns()})),e.createEquation(`P<sub>${n}</sub> =`,this.outRays[t].eqnP,(function(e,t){e.outRays[r].eqnP=t,e.initOutRayFns()}))}e.createButton(i.Ay.t("simulator:sceneObjs.BaseCustomSurface.addOutgoingRay"),(function(e){e.outRays.push({eqnTheta:"\\theta_0",eqnP:"P_0"}),e.initOutRayFns()}),!0,'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n      <path d="M2 7.5h5.5V2h1v5.5H14v1H8.5V14h-1V8.5H2v-1z"/>\n    </svg>\n    '),this.outRays.length>0&&e.createButton(i.Ay.t("simulator:sceneObjs.BaseCustomSurface.removeOutgoingRay"),(function(e){e.outRays.length>0&&(e.outRays.pop(),e.initOutRayFns())}),!0,'\n      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n        <path d="M2 7.5h12v1H2z"/>\n      </svg>\n      '),e.createBoolean(i.Ay.t("simulator:sceneObjs.BaseCustomSurface.twoSided"),this.twoSided,(function(e,t){e.twoSided=t}))}handleOutRays(e,t,n,r,a,c,u){if(this.fns||this.initOutRayFns(),0==this.fns.length)return{isAbsorbed:!0};const l=[],h=[];for(const t of c){let n=t.getIncidentType(e);if(1==n)l.push(t);else{if(-1!=n)return{isAbsorbed:!0,isUndefinedBehavior:!0};h.push(t)}}let p=1,d=1;for(const t of l)p*=t.getRefIndexAt(n,e);for(const t of h)d*=t.getRefIndexAt(n,e);const f=Math.atan2(r.y,r.x);let m=f-(Math.atan2(e.p2.y-e.p1.y,e.p2.x-e.p1.x)+Math.PI);m=(m+3*Math.PI)%(2*Math.PI)-Math.PI;const g=e.brightness_s,y=e.brightness_p,x=e.wavelength,v=u,b=e.gap,D=[];let w=!1,A=0;const S=[{theta0:m,P0:g,lambda:x||o.A.GREEN_WAVELENGTH,t:a,n0:p,n1:d,p:0},{theta0:m,P0:y,lambda:x||o.A.GREEN_WAVELENGTH,t:a,n0:p,n1:d,p:1}];for(let t=0;t<this.fns.length;t++){let r,i,a;try{r=[this.fns[t].angleFn(S[0]),this.fns[t].angleFn(S[1])]}catch(e){return this.error=`Error evaluating theta_${t+1}: ${e.toString()}`,{isAbsorbed:!0}}S[0][`theta${t+1}`]=r[0],S[1][`theta${t+1}`]=r[1];try{i=[this.fns[t].brightnessFn(S[0]),this.fns[t].brightnessFn(S[1])]}catch(e){return this.error=`Error evaluating P_${t+1}: ${e.toString()}`,{isAbsorbed:!0}}for(const e of[0,1])i[e]>0&&Number.isFinite(r[e])||(i[e]=0);S[0][`P${t+1}`]=i[0],S[1][`P${t+1}`]=i[1],a=r[0]===r[1]?1:2;for(let o=0;o<a;o++){let c;if(c=0==t&&0==o?e:{wavelength:x,bodyMergingObj:v,gap:b},r[o]=((r[o]+Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI)-Math.PI,r[o]>-Math.PI/2&&r[o]<Math.PI/2){for(const e of l)e.onRayExit(c);for(const e of h)e.onRayEnter(c)}const u=f+Math.PI-r[o];1==a?(c.brightness_s=i[0],c.brightness_p=i[1]):0==o?(c.brightness_s=i[0],c.brightness_p=0):(c.brightness_s=0,c.brightness_p=i[1]),c.p1=n,c.p2=s.A.point(n.x+Math.cos(u),n.y+Math.sin(u)),c.brightness_s+c.brightness_p>("default"!=this.scene.colorMode?1e-6:.01)?c!==e&&D.push(c):(A+=c.brightness_s+c.brightness_p,c===e&&(w=!0))}}if(this.warning=null,D.length>1){for(let e=0;e<D.length;e++)D[e].gap=!0;"images"!=this.scene.mode&&"observer"!=this.scene.mode||(this.warning=i.Ay.t("simulator:sceneObjs.common.imageDetectionWarning"))}return this.error=null,{newRays:D,isAbsorbed:w,truncation:A}}initOutRayFns(){const e=this;function t(t){const n=function(t){let n=t.replaceAll("\\theta_0","(theta0)").replaceAll("\\theta_{0}","(theta0)").replaceAll("P_0","(P0)").replaceAll("P_{0}","(P0)").replaceAll("\\lambda","(lambda)").replaceAll("n_0","(n0)").replaceAll("n_{0}","(n0)").replaceAll("n_1","(n1)").replaceAll("n_{1}","(n1)");for(let t=0;t<e.outRays.length;t++)t+1<10&&(n=n.replaceAll(`\\theta_${t+1}`,`(theta${t+1})`).replaceAll(`P_${t+1}`,`(P${t+1})`)),n=n.replaceAll(`\\theta_{${t+1}}`,`(theta${t+1})`).replaceAll(`P_{${t+1}}`,`(P${t+1})`);return n}(t),r=(0,a.y)(n),i=[];for(let t=0;t<e.outRays.length;t++)i.push(n.includes(`(theta${t+1})`));return function(t){for(let n=0;n<e.outRays.length;n++)if(`theta${n+1}`in t&&!Number.isFinite(t[`theta${n+1}`])&&i[n])return NaN;return r(t)}}this.error=null;try{this.fns=this.outRays.map((e=>({angleFn:t(e.eqnTheta),brightnessFn:t(e.eqnP)})))}catch(e){this.fns=[],this.error=e.toString()}}}const u=c},9472:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(867),i=n(7235),s=n(2635);class a extends r.A{populateObjBar(e){this.scene.simulateColors&&(e.createBoolean(s.Ay.t("simulator:sceneObjs.BaseFilter.filter"),this.filter,(function(e,t){e.filter=t,e.wavelength=e.wavelength,e.invert=e.invert,e.bandwidth=e.bandwidth}),null,!0),this.filter&&(e.createBoolean(s.Ay.t("simulator:sceneObjs.BaseFilter.invert"),this.invert,(function(e,t){e.filter&&(e.invert=t)})),e.createNumber(s.Ay.t("simulator:sceneObjs.common.wavelength")+" (nm)",i.A.UV_WAVELENGTH,i.A.INFRARED_WAVELENGTH,1,this.wavelength,(function(e,t){e.wavelength=t})),e.createNumber("± "+s.Ay.t("simulator:sceneObjs.BaseFilter.bandwidth")+" (nm)",0,i.A.INFRARED_WAVELENGTH-i.A.UV_WAVELENGTH,1,this.bandwidth,(function(e,t){e.bandwidth=t}))))}checkRayIntersectFilter(e){var t=this.scene.simulateColors&&this.filter&&this.wavelength,n=Math.abs(this.wavelength-e.wavelength)<=this.bandwidth;return!t||n!=this.invert}}const o=a},3452:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(867),i=n(2635),s=n(6492);class a extends r.A{populateObjBar(e){this.scene.simulateColors?(e.createNumber(i.Ay.t("simulator:sceneObjs.BaseGlass.cauchyCoeff")+" A",1,3,.01,this.refIndex,(function(e,t){e.refIndex=1*t}),"<p>*"+i.Ay.t("simulator:sceneObjs.BaseGlass.refIndexInfo.relative")+"</p><p>"+i.Ay.t("simulator:sceneObjs.BaseGlass.refIndexInfo.effective")+"</p>"),e.createNumber("B(μm²)",1e-4,.02,1e-4,this.cauchyB,(function(e,t){e.cauchyB=t}))):e.createNumber(i.Ay.t("simulator:sceneObjs.BaseGlass.refIndex")+"*",.5,2.5,.01,this.refIndex,(function(e,t){e.refIndex=1*t}),"<p>*"+i.Ay.t("simulator:sceneObjs.BaseGlass.refIndexInfo.relative")+"</p><p>"+i.Ay.t("simulator:sceneObjs.BaseGlass.refIndexInfo.effective")+"</p>")}getZIndex(){return-1*this.refIndex}fillGlass(e,t,n){const r=e.ctx,i=e.lengthScale,s=this.refIndex,a=!e.isSVG&&0===this.scene.theme.background.color.r&&0===this.scene.theme.background.color.g&&0===this.scene.theme.background.color.b;if(t)return r.globalAlpha=.1,r.fillStyle=n?this.scene.highlightColorCss:"transparent",r.fill("evenodd"),void(r.globalAlpha=1);const o=s<=-1?-1:1;if(s>=1||-1===o){var c=Math.log(s*o)/Math.log(1.5)*.2;a?(r.globalCompositeOperation="lighter",r.fillStyle=o<0?"rgb("+Math.round(c*this.scene.theme.glass.color.r*.75*255)+","+Math.round(c*this.scene.theme.glass.color.g*255)+","+Math.round(c*this.scene.theme.glass.color.b*.75*255)+")":"rgb("+Math.round(c*this.scene.theme.glass.color.r*255)+","+Math.round(c*this.scene.theme.glass.color.g*255)+","+Math.round(c*this.scene.theme.glass.color.b*255)+")"):(r.globalAlpha=c,r.fillStyle="rgb("+Math.round(255*this.scene.theme.glass.color.r)+","+Math.round(255*this.scene.theme.glass.color.g)+","+Math.round(255*this.scene.theme.glass.color.b)+")"),r.fill("evenodd"),r.globalAlpha=1,r.globalCompositeOperation="source-over"}else if(c=Math.log(1/(s*o))/Math.log(1.5)*.2,a){var u=r.getImageData(0,0,r.canvas.width,r.canvas.height);u.data,r.putImageData(u,0,0),r.globalCompositeOperation="difference",r.fillStyle="rgb("+c*this.scene.theme.glass.color.r*100+"%,0%,0%)",r.fill("evenodd"),r.setTransform(1,0,0,1,0,0),r.fillStyle="white",r.globalAlpha=1,r.fillRect(0,0,r.canvas.width,r.canvas.height),r.setTransform(e.scale,0,0,e.scale,e.origin.x,e.origin.y),r.globalCompositeOperation="lighter",r.fillStyle="rgb(0%,"+c*this.scene.theme.glass.color.g*100+"%,"+c*this.scene.theme.glass.color.b*100+"%)",r.fill("evenodd"),r.globalCompositeOperation="difference",r.setTransform(1,0,0,1,0,0),r.fillStyle="white",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.setTransform(e.scale,0,0,e.scale,e.origin.x,e.origin.y),r.globalCompositeOperation="source-over",r.globalAlpha=1}else r.globalAlpha=1,r.strokeStyle=n?this.scene.highlightColorCss:"rgb(70,70,70)",r.lineWidth=1*i,r.stroke()}refract(e,t,n,r,i,a,o){for(var c=0;c<a.length;c++){let t=a[c].getIncidentType(e);if(1==t)i*=a[c].getRefIndexAt(n,e),a[c].onRayExit(e);else if(-1==t)i/=a[c].getRefIndexAt(n,e),a[c].onRayEnter(e);else if(0!=t)return{isAbsorbed:!0,isUndefinedBehavior:!0}}var u=!1;i<0&&(i=-i,u=!0);var l=Math.sqrt(r.x*r.x+r.y*r.y),h=r.x/l,p=r.y/l,d=Math.sqrt((e.p2.x-e.p1.x)*(e.p2.x-e.p1.x)+(e.p2.y-e.p1.y)*(e.p2.y-e.p1.y)),f=(e.p2.x-e.p1.x)/d,m=(e.p2.y-e.p1.y)/d,g=-h*f-p*m,y=1-i*i*(1-g*g);if(!(y<0)){var x=Math.sqrt(y),v=Math.pow((i*g-x)/(i*g+x),2),b=Math.pow((i*x-g)/(i*x+g),2);let r=[],a=0;var D=s.A.line(n,s.A.point(n.x+f+2*g*h,n.y+m+2*g*p));if(D.brightness_s=e.brightness_s*v,D.brightness_p=e.brightness_p*b,D.wavelength=e.wavelength,D.gap=e.gap,o&&(D.bodyMergingObj=o),D.brightness_s+D.brightness_p>("default"!=this.scene.colorMode?1e-6:.01))r.push(D);else if(a+=D.brightness_s+D.brightness_p,!e.gap&&"default"!=!this.scene.colorMode){var w=Math.floor(.01/D.brightness_s+D.brightness_p)+1;t%w==0&&(D.brightness_s=D.brightness_s*w,D.brightness_p=D.brightness_p*w,r.push(D))}return u&&(i=-i,x=Math.cos(2*Math.PI-Math.acos(x))),e.p1=n,e.p2=s.A.point(n.x+i*f+(i*g-x)*h,n.y+i*m+(i*g-x)*p),e.brightness_s=e.brightness_s*(1-v),e.brightness_p=e.brightness_p*(1-b),e.brightness_s+e.brightness_p>("default"!=this.scene.colorMode?1e-6:0)?{newRays:r,truncation:a}:{isAbsorbed:!0,newRays:r,truncation:a+e.brightness_s+e.brightness_p}}e.p1=n,e.p2=s.A.point(n.x+f+2*g*h,n.y+m+2*g*p),o&&(e.bodyMergingObj=o)}getRefIndexAt(e,t){return this.scene.simulateColors?this.refIndex+this.cauchyB/(t.wavelength*t.wavelength*1e-6):this.refIndex}getIncidentType(e){}onRayEnter(e){}onRayExit(e){}}const o=a},3998:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(3452),i=n(6492),s=n(7235),a=n(2635),o=n(1382),c=n(5582),u=n(3886);class l extends r.A{constructor(e,t){super(e,t),this.initFns()}populateObjBar(e){this.fn_p||this.initFns(),e.createEquation("n(x,y) = ",this.refIndexFn,(function(e,t){e.refIndexFn=t,e.initFns()}),"<ul><li>"+a.Ay.t("simulator:sceneObjs.common.eqnInfo.constants")+"<br><code>pi e</code></li><li>"+a.Ay.t("simulator:sceneObjs.common.eqnInfo.operators")+"<br><code>+ - * / ^</code></li><li>"+a.Ay.t("simulator:sceneObjs.common.eqnInfo.functions")+"<br><code>sqrt sin cos tan sec csc cot sinh cosh tanh log arcsin arccos arctan</code></li><li>"+a.Ay.t("simulator:sceneObjs.BaseGrinGlass.refIndexFnInfo.lambda",{lambda:"<code>lambda</code>"})+"</li><li>"+a.Ay.t("simulator:sceneObjs.BaseGrinGlass.refIndexFnInfo.diff")+"</li><li>"+("ParamGrinGlass"===this.constructor.type?"":a.Ay.t("simulator:sceneObjs.BaseGrinGlass.refIndexFnInfo.origin")+"</li><li>")+a.Ay.t("simulator:sceneObjs.BaseGrinGlass.refIndexFnInfo.accuracy")+"</li><li>"+a.Ay.t("simulator:sceneObjs.common.eqnInfo.module")+"</li></ul>"),e.createEquation("α(x,y) = ",this.absorptionFn,(function(e,t){e.absorptionFn=t,e.initFns()}),"<ul><li>"+a.Ay.t("simulator:sceneObjs.BaseGrinGlass.absorptionFnInfo.absorption")+"<sup>Beta</sup></li><li>"+a.Ay.t("simulator:sceneObjs.common.eqnInfo.constants")+"<br><code>pi e</code></li><li>"+a.Ay.t("simulator:sceneObjs.common.eqnInfo.operators")+"<br><code>+ - * / ^</code></li><li>"+a.Ay.t("simulator:sceneObjs.common.eqnInfo.functions")+"<br><code>sqrt sin cos tan sec csc cot sinh cosh tanh log exp arcsin arccos arctan arcsinh arccosh arctanh floor round ceil trunc sgn max min abs</code></li><li>"+a.Ay.t("simulator:sceneObjs.common.eqnInfo.module")+"</li></ul>"),"ParamGrinGlass"!==this.constructor.type&&e.createTuple(a.Ay.t("simulator:sceneObjs.common.coordOrigin"),"("+this.origin.x+","+this.origin.y+")",(function(e,t){const n=t.indexOf(",");if(-1!=n){const r=parseFloat(t.slice(1,n)),s=parseFloat(t.slice(n+1,-1));e.origin=i.A.point(r,s),e.initFns()}})),e.showAdvanced(!this.arePropertiesDefault(["stepSize"]))&&e.createNumber(a.Ay.t("simulator:sceneObjs.BaseGrinGlass.stepSize"),.1*this.scene.lengthScale,1*this.scene.lengthScale,.1*this.scene.lengthScale,this.stepSize,(function(e,t){e.stepSize=parseFloat(t)}),"<p>"+a.Ay.t("simulator:sceneObjs.BaseGrinGlass.stepSizeInfo")+"</p>",!0),e.showAdvanced(!this.arePropertiesDefault(["intersectTol"]))&&e.createNumber(a.Ay.t("simulator:sceneObjs.BaseGrinGlass.intersectTol"),.001,.01,.001,this.intersectTol,(function(e,t){e.intersectTol=parseFloat(t)}),"<p>"+a.Ay.t(`simulator:sceneObjs.${this.constructor.type}.epsInfo.units`)+"</p><p>"+a.Ay.t(`simulator:sceneObjs.${this.constructor.type}.epsInfo.functions`)+"</p>",!0),e.showAdvanced(this.scene.symbolicBodyMerging)&&e.createBoolean(a.Ay.t("simulator:sceneObjs.BaseGrinGlass.symbolicBodyMerging"),this.scene.symbolicBodyMerging,(function(e,t){e.scene.symbolicBodyMerging=t}),"<p>"+a.Ay.t("simulator:sceneObjs.BaseGrinGlass.symbolicBodyMergingInfo.all")+"</p><p>"+a.Ay.t("simulator:sceneObjs.BaseGrinGlass.symbolicBodyMergingInfo.impl")+"</p><p>"+a.Ay.t("simulator:sceneObjs.BaseGrinGlass.symbolicBodyMergingInfo.implNote")+"</p>")}getZIndex(){return 0}fillGlass(e,t,n){const r=e.ctx;if(t)return r.globalAlpha=.1,r.fillStyle=n?this.scene.highlightColorCss:"transparent",r.fill("evenodd"),void(r.globalAlpha=1);r.fillStyle=e.rgbaToCssColor(this.scene.theme.grinGlass.color),r.fill("evenodd"),r.globalAlpha=1}getRefIndexAt(e,t){return this.fn_p({x:e.x,y:e.y,z:t.wavelength||s.A.GREEN_WAVELENGTH})}onRayEnter(e){e.bodyMergingObj||(e.bodyMergingObj=this.initRefIndex(e)),e.bodyMergingObj=this.multRefIndex(e.bodyMergingObj)}onRayExit(e){e.bodyMergingObj||(e.bodyMergingObj=this.initRefIndex(e)),e.bodyMergingObj=this.devRefIndex(e.bodyMergingObj)}initFns(){this.error=null;try{this.p=(0,c.parseTex)(this.refIndexFn.replaceAll("\\lambda","z")).toString().replaceAll("\\cdot","*").replaceAll("\\frac","/"),this.p_der_x=u.wx(this.p,"x").toString(),this.p_der_x_tex=u.qg(this.p_der_x).toTex().replaceAll("{+","{"),this.p_der_y=u.wx(this.p,"y").toString(),this.p_der_y_tex=u.qg(this.p_der_y).toTex().replaceAll("{+","{"),this.fn_p=(0,o.y)(this.shiftOrigin(this.refIndexFn.replaceAll("\\lambda","z"))),this.fn_p_der_x=(0,o.y)(this.shiftOrigin(this.p_der_x_tex)),this.fn_p_der_y=(0,o.y)(this.shiftOrigin(this.p_der_y_tex)),this.fn_alpha=(0,o.y)(this.shiftOrigin(this.absorptionFn.replaceAll("\\lambda","z")))}catch(e){delete this.fn_p,delete this.fn_p_der_x,delete this.fn_p_der_y,delete this.fn_alpha,this.error=e.toString()}}shiftOrigin(e){return e.replaceAll("x","(x-"+this.origin.x+")").replaceAll("y","(y-"+this.origin.y+")")}multRefIndex(e){if(this.scene.symbolicBodyMerging){let t=u.CR("("+e.p+")*("+this.shiftOrigin(this.p)+")").toString(),n=(0,o.y)(u.qg(t).toTex()),r=(0,o.y)(u.wx(t,"x").toTex()),i=(0,o.y)(u.wx(t,"y").toTex()),s="\\left("+e.alpha+"\\right) + \\left("+this.shiftOrigin(this.absorptionFn.replaceAll("\\lambda","z"))+"\\right)";return{p:t,fn_p:n,fn_p_der_x:r,fn_p_der_y:i,alpha:s,fn_alpha:(0,o.y)(s)}}{let[r,i,s,a,o,c]=[this.fn_p,this.fn_p_der_x,this.fn_p_der_y,e.fn_p,e.fn_p_der_x,e.fn_p_der_y],u=function(e,t){return function(n){return e(n)*t(n)}}(r,a),l=function(e,t,n,r){return function(i){return e(i)*r(i)+t(i)*n(i)}}(r,i,a,o),h=function(e,t,n,r){return function(i){return e(i)*r(i)+t(i)*n(i)}}(r,s,a,c);return{fn_p:u,fn_p_der_x:l,fn_p_der_y:h,fn_alpha:(t=this.fn_alpha,n=e.fn_alpha,function(e){return t(e)+n(e)})}}var t,n}devRefIndex(e){if(this.scene.symbolicBodyMerging){let t=u.CR("("+e.p+")/("+this.shiftOrigin(this.p)+")").toString(),n=(0,o.y)(u.qg(t).toTex()),r=(0,o.y)(u.wx(t,"x").toTex()),i=(0,o.y)(u.wx(t,"y").toTex()),s="\\left("+e.alpha+"\\right) - \\left("+this.shiftOrigin(this.absorptionFn.replaceAll("\\lambda","z"))+"\\right)";return{p:t,fn_p:n,fn_p_der_x:r,fn_p_der_y:i,alpha:s,fn_alpha:(0,o.y)(s)}}{let[r,i,s,a,o,c]=[this.fn_p,this.fn_p_der_x,this.fn_p_der_y,e.fn_p,e.fn_p_der_x,e.fn_p_der_y],u=function(e,t){return function(n){return t(n)/e(n)}}(r,a),l=function(e,t,n,r){return function(i){return r(i)/e(i)-n(i)*t(i)/e(i)**2}}(r,i,a,o),h=function(e,t,n,r){return function(i){return r(i)/e(i)-n(i)*t(i)/e(i)**2}}(r,s,a,c);return{fn_p:u,fn_p_der_x:l,fn_p_der_y:h,fn_alpha:(t=this.fn_alpha,n=e.fn_alpha,function(e){return n(e)-t(e)})}}var t,n}initRefIndex(e){let t;for(let n of this.scene.opticalObjs)n instanceof l&&(n.isOnBoundary(e.p1)||n.isInsideGlass(e.p1))&&(t?t=n.multRefIndex(t):(t={},t.p=n.shiftOrigin(n.p),t.fn_p=n.fn_p,t.fn_p_der_x=n.fn_p_der_x,t.fn_p_der_y=n.fn_p_der_y,t.alpha=n.shiftOrigin(n.absorptionFn.replaceAll("\\lambda","z")),t.fn_alpha=n.fn_alpha));return t||(t={p:1,fn_p:function(){return 1},fn_p_der_x:function(){return 0},fn_p_der_y:function(){return 0},alpha:"0",fn_alpha:function(){return 0}}),t}step(e,t,n){const r=i.A.distance(e,t),a=t.x,o=t.y,c=(t.x-e.x)/r,u=Math.sign(t.y-e.y)*Math.sqrt(1-c**2),l=c+this.stepSize*(n.bodyMergingObj.fn_p_der_x({x:a,y:o,z:n.wavelength||s.A.GREEN_WAVELENGTH})*(1-c**2)-n.bodyMergingObj.fn_p_der_y({x:a,y:o,z:n.wavelength||s.A.GREEN_WAVELENGTH})*c*u)/n.bodyMergingObj.fn_p({x:a,y:o,z:n.wavelength||s.A.GREEN_WAVELENGTH}),h=u+this.stepSize*(n.bodyMergingObj.fn_p_der_y({x:a,y:o,z:n.wavelength||s.A.GREEN_WAVELENGTH})*(1-u**2)-n.bodyMergingObj.fn_p_der_x({x:a,y:o,z:n.wavelength||s.A.GREEN_WAVELENGTH})*c*u)/n.bodyMergingObj.fn_p({x:a,y:o,z:n.wavelength||s.A.GREEN_WAVELENGTH}),p=a+this.stepSize*l,d=o+this.stepSize*h,f=n.bodyMergingObj.fn_alpha({x:a,y:o,z:n.wavelength||s.A.GREEN_WAVELENGTH}),m=Math.exp(-f*this.stepSize);return n.brightness_s*=m,n.brightness_p*=m,i.A.point(p,d)}isOutsideGlass(e){}isInsideGlass(e){}isOnBoundary(e){}}const h=l},867:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2635);const i=class{constructor(e,t){if(this.scene=e,this.error=null,this.warning=null,t){const e=this.constructor.serializableDefaults,n=["type",...Object.keys(e)];for(const e in t)n.includes(e)||(this.scene.error=r.Ay.t("simulator:generalErrors.unknownObjectKey",{key:e,type:this.constructor.type}));for(const n in e){const r=JSON.stringify(e[n]);if(t.hasOwnProperty(n)){const e=JSON.stringify(t[n]);this[n]=JSON.parse(e)}else this[n]=JSON.parse(r)}}else{const e=this.constructor.serializableDefaults;for(const t in e){const n=JSON.stringify(e[t]);this[t]=JSON.parse(n)}}}serialize(){const e={type:this.constructor.type},t=this.constructor.serializableDefaults;for(const n in t){const r=JSON.stringify(this[n]);r!==JSON.stringify(t[n])&&(e[n]=JSON.parse(r))}return e}arePropertiesDefault(e){const t=this.constructor.serializableDefaults;for(const n of e)if(JSON.stringify(this[n])!==JSON.stringify(t[n]))return!1;return!0}static type="";static serializableDefaults={};static isOptical=!1;static mergesWithGlass=!1;populateObjBar(e){}getZIndex(){return 0}draw(e,t,n){}move(e,t){return!1}rotate(e,t){return!1}scale(e,t){return!1}getDefaultCenter(){return null}onConstructMouseDown(e,t,n){}onConstructMouseMove(e,t,n){}onConstructMouseUp(e,t,n){}onConstructUndo(){return{isCancelled:!0}}checkMouseOver(e){return null}onDrag(e,t,n,r){}onSimulationStart(){}checkRayIntersects(e){return null}onRayIncident(e,t,n,r){}getError(){return this.error}getWarning(){return this.warning}}},2933:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(6492),i=n(7235);const s=e=>class extends e{move(e,t){return this.p1.x=this.p1.x+e,this.p1.y=this.p1.y+t,this.p2.x=this.p2.x+e,this.p2.y=this.p2.y+t,!0}rotate(e,t){const n=t||this.getDefaultCenter(),r=this.p1.x-n.x,i=this.p1.y-n.y,s=this.p2.x-n.x,a=this.p2.y-n.y;return this.p1.x=n.x+r*Math.cos(e)-i*Math.sin(e),this.p1.y=n.y+r*Math.sin(e)+i*Math.cos(e),this.p2.x=n.x+s*Math.cos(e)-a*Math.sin(e),this.p2.y=n.y+s*Math.sin(e)+a*Math.cos(e),!0}scale(e,t){const n=t||this.getDefaultCenter(),r=this.p1.x-n.x,i=this.p1.y-n.y,s=this.p2.x-n.x,a=this.p2.y-n.y;return this.p1.x=n.x+r*e,this.p1.y=n.y+i*e,this.p2.x=n.x+s*e,this.p2.y=n.y+a*e,!0}getDefaultCenter(){return this.p1}onConstructMouseDown(e,t,n){this.constructionPoint||(this.constructionPoint=e.getPosSnappedToGrid(),this.p1=this.constructionPoint,this.p2=this.constructionPoint),this.p2=n?e.getPosSnappedToDirection(this.constructionPoint,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid()}onConstructMouseMove(e,t,n){this.p2=n?e.getPosSnappedToDirection(this.constructionPoint,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid(),this.p1=this.constructionPoint}onConstructMouseUp(e,t,n){if(!e.snapsOnPoint(this.p1))return delete this.constructionPoint,{isDone:!0}}checkMouseOver(e){let t={};if(e.isOnPoint(this.p1)&&r.A.distanceSquared(e.pos,this.p1)<=r.A.distanceSquared(e.pos,this.p2))return t.part=1,t.targetPoint=r.A.point(this.p1.x,this.p1.y),t;if(e.isOnPoint(this.p2))return t.part=2,t.targetPoint=r.A.point(this.p2.x,this.p2.y),t;if(Math.abs(r.A.distance(this.p1,e.pos)-r.A.segmentLength(this))<e.getClickExtent()){const n=e.getPosSnappedToGrid();return t.part=0,t.mousePos0=n,t.mousePos1=n,t.snapContext={},t}}onDrag(e,t,n,r){if(1==t.part){const n=t.originalObj.p2;this.p1=r?e.getPosSnappedToDirection(n,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y}]):e.getPosSnappedToGrid(),this.p2=n}if(2==t.part){const n=t.originalObj.p1;this.p2=r?e.getPosSnappedToDirection(n,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y}]):e.getPosSnappedToGrid(),this.p1=n}if(0==t.part){if(r)var i=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y},{x:t.originalObj.p2.y-t.originalObj.p1.y,y:-(t.originalObj.p2.x-t.originalObj.p1.x)}],t.snapContext);else i=e.getPosSnappedToGrid(),t.snapContext={};const n=t.mousePos1.x-i.x,s=t.mousePos1.y-i.y;this.p1.x=this.p1.x-n,this.p1.y=this.p1.y-s,this.p2.x=this.p2.x-n,this.p2.y=this.p2.y-s,t.mousePos1=i}}checkRayIntersectsShape(e){const t=r.A.lineCircleIntersections(r.A.line(e.p1,e.p2),r.A.circle(this.p1,this.p2)),n=[],s=[];for(let a=1;a<=2;a++)n[a]=r.A.intersectionIsOnRay(t[a],e)&&r.A.distanceSquared(t[a],e.p1)>i.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale,s[a]=r.A.distanceSquared(e.p1,t[a]);return n[1]&&(!n[2]||s[1]<s[2])?t[1]:n[2]&&(!n[1]||s[2]<s[1])?t[2]:void 0}}},7791:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6492);n(867);const i=e=>class extends e{move(e,t){return this.p1.x=this.p1.x+e,this.p1.y=this.p1.y+t,this.p2.x=this.p2.x+e,this.p2.y=this.p2.y+t,!0}rotate(e,t){const n=t||this.getDefaultCenter(),r=this.p1.x-n.x,i=this.p1.y-n.y,s=this.p2.x-n.x,a=this.p2.y-n.y;return this.p1.x=n.x+r*Math.cos(e)-i*Math.sin(e),this.p1.y=n.y+r*Math.sin(e)+i*Math.cos(e),this.p2.x=n.x+s*Math.cos(e)-a*Math.sin(e),this.p2.y=n.y+s*Math.sin(e)+a*Math.cos(e),!0}scale(e,t){const n=t||this.getDefaultCenter(),r=this.p1.x-n.x,i=this.p1.y-n.y,s=this.p2.x-n.x,a=this.p2.y-n.y;return this.p1.x=n.x+r*e,this.p1.y=n.y+i*e,this.p2.x=n.x+s*e,this.p2.y=n.y+a*e,!0}getDefaultCenter(){return r.A.point((this.p1.x+this.p2.x)/2,(this.p1.y+this.p2.y)/2)}onConstructMouseDown(e,t,n){this.constructionPoint||(this.constructionPoint=e.getPosSnappedToGrid(),this.p1=this.constructionPoint,this.p2=this.constructionPoint),this.p2=n?e.getPosSnappedToDirection(this.constructionPoint,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid()}onConstructMouseMove(e,t,n){this.p2=n?e.getPosSnappedToDirection(this.constructionPoint,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid(),this.p1=t?r.A.point(2*this.constructionPoint.x-this.p2.x,2*this.constructionPoint.y-this.p2.y):this.constructionPoint}onConstructMouseUp(e,t,n){if(!e.snapsOnPoint(this.p1))return delete this.constructionPoint,{isDone:!0}}checkMouseOver(e){let t={};if(e.isOnPoint(this.p1)&&r.A.distanceSquared(e.pos,this.p1)<=r.A.distanceSquared(e.pos,this.p2))return t.part=1,t.targetPoint=r.A.point(this.p1.x,this.p1.y),t;if(e.isOnPoint(this.p2))return t.part=2,t.targetPoint=r.A.point(this.p2.x,this.p2.y),t;if(e.isOnSegment(this)){const n=e.getPosSnappedToGrid();return t.part=0,t.mousePos0=n,t.mousePos1=n,t.snapContext={},t}}onDrag(e,t,n,i){var s;if(1==t.part&&(s=n?r.A.segmentMidpoint(t.originalObj):t.originalObj.p2,this.p1=i?e.getPosSnappedToDirection(s,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y}]):e.getPosSnappedToGrid(),this.p2=n?r.A.point(2*s.x-this.p1.x,2*s.y-this.p1.y):s),2==t.part&&(s=n?r.A.segmentMidpoint(t.originalObj):t.originalObj.p1,this.p2=i?e.getPosSnappedToDirection(s,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y}]):e.getPosSnappedToGrid(),this.p1=n?r.A.point(2*s.x-this.p2.x,2*s.y-this.p2.y):s),0==t.part){if(i)var a=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y},{x:t.originalObj.p2.y-t.originalObj.p1.y,y:-(t.originalObj.p2.x-t.originalObj.p1.x)}],t.snapContext);else a=e.getPosSnappedToGrid(),t.snapContext={};var o=t.mousePos1.x-a.x,c=t.mousePos1.y-a.y;this.p1.x=this.p1.x-o,this.p1.y=this.p1.y-c,this.p2.x=this.p2.x-o,this.p2.y=this.p2.y-c,t.mousePos1=a}}checkRayIntersectsShape(e){var t=r.A.linesIntersection(r.A.line(e.p1,e.p2),r.A.line(this.p1,this.p2));return r.A.intersectionIsOnSegment(t,this)&&r.A.intersectionIsOnRay(t,e)?t:null}}},8753:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(6492),i=(n(867),n(1382)),s=n(2635);const a=e=>class extends e{constructor(e,t){super(e,t);const n=["eqnX","eqnY","tMin","tMax","tStep"];for(let e=0;e<this.pieces.length;e++)for(const t in this.pieces[e])n.includes(t)||(this.scene.error=s.Ay.t("simulator:generalErrors.unknownObjectKey",{key:`pieces[${e}].${t}`,type:this.constructor.type}))}move(e,t){return this.origin.x=this.origin.x+e,this.origin.y=this.origin.y+t,delete this.path,!0}rotate(e,t){const n=t||this.origin,r=this.origin.x-n.x,i=this.origin.y-n.y;return this.origin.x=n.x+r*Math.cos(e)-i*Math.sin(e),this.origin.y=n.y+r*Math.sin(e)+i*Math.cos(e),delete this.path,!1}scale(e,t){const n=t||this.origin,r=this.origin.x-n.x,i=this.origin.y-n.y;return this.origin.x=n.x+r*e,this.origin.y=n.y+i*e,delete this.path,!1}getDefaultCenter(){return this.origin}onConstructMouseDown(e,t,n){const r=e.getPosSnappedToGrid();this.origin.x=r.x,this.origin.y=r.y,delete this.path}onConstructMouseMove(e,t,n){delete this.path}onConstructMouseUp(e,t,n){return delete this.path,{isDone:!0}}checkMouseOver(e){let t={};if(this.pieces.length>0){if(!this.path&&!this.initPath()){if(e.isOnPoint(this.origin)){const n=e.getPosSnappedToGrid();return t.part=0,t.mousePos0=n,t.mousePos1=n,t.snapContext={},t}return null}let i=!0;if(this.path.length>1){const e=this.path[0];for(let t=1;t<this.path.length;t++)if(Math.abs(this.path[t].x-e.x)>1e-10||Math.abs(this.path[t].y-e.y)>1e-10){i=!1;break}}if(!i&&this.path.length>1){for(let i=0;i<this.path.length-1;i++){var n=r.A.line(this.path[i],this.path[i+1]);if(e.isOnSegment(n)){const n=e.getPosSnappedToGrid();return t.part=0,t.mousePos0=n,t.mousePos1=n,t.requiresObjBarUpdate=!0,t.snapContext={},t}}return null}}if(e.isOnPoint(this.origin)){const n=e.getPosSnappedToGrid();return t.part=0,t.mousePos0=n,t.mousePos1=n,t.requiresObjBarUpdate=!0,t.snapContext={},t}return null}onDrag(e,t,n,r){if(r)var i=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1}],t.snapContext);else i=e.getPosSnappedToGrid(),t.snapContext={};var s=t.mousePos1.x-i.x,a=t.mousePos1.y-i.y;this.origin.x=this.origin.x-s,this.origin.y=this.origin.y-a,t.mousePos1=i,delete this.path}initPath(){var e=[];try{for(let t=0;t<this.pieces.length;t++)e.push({fnX:(0,i.y)(this.pieces[t].eqnX),fnY:(0,i.y)(this.pieces[t].eqnY)})}catch(e){return delete this.path,this.error=e.toString(),!1}this.path=[];for(let t=0;t<this.pieces.length;t++){const n=this.pieces[t],r=e[t],i=n.tMin,a=n.tMax,o=n.tStep;if(!(o>0))return delete this.path,this.error=s.Ay.t("simulator:sceneObjs.ParamCurveObjMixin.error.invalidStepSize",{step:o}),!1;if(!(i<a))return delete this.path,this.error=s.Ay.t("simulator:sceneObjs.ParamCurveObjMixin.error.invalidRange",{tMin:i,tMax:a}),!1;try{const e=r.fnX({t:i}),n=r.fnY({t:i});if(!Number.isFinite(e)||!Number.isFinite(n))throw new Error(s.Ay.t("simulator:sceneObjs.ParamCurveObjMixin.error.nonFiniteCoords",{t:i,x:e,y:n}));this.path.push({x:this.origin.x+e,y:this.origin.y+n,pieceIndex:t,t:i})}catch(e){return delete this.path,this.error=s.Ay.t("simulator:sceneObjs.ParamCurveObjMixin.error.pieceError",{pieceIndex:t+1,t:i,error:e.toString()}),!1}for(let e=i+o;e<a;e+=o)try{const n=r.fnX({t:e}),i=r.fnY({t:e});if(!Number.isFinite(n)||!Number.isFinite(i))throw new Error(s.Ay.t("simulator:sceneObjs.ParamCurveObjMixin.error.nonFiniteCoords",{x:n,y:i}));this.path.push({x:this.origin.x+n,y:this.origin.y+i,pieceIndex:t,t:e})}catch(n){return delete this.path,this.error=s.Ay.t("simulator:sceneObjs.ParamCurveObjMixin.error.pieceError",{pieceIndex:t+1,t:e,error:n.toString()}),!1}if(a>i)try{const e=r.fnX({t:a}),n=r.fnY({t:a});if(!Number.isFinite(e)||!Number.isFinite(n))throw new Error(s.Ay.t("simulator:sceneObjs.ParamCurveObjMixin.error.nonFiniteCoords",{t:a,x:e,y:n}));this.path.push({x:this.origin.x+e,y:this.origin.y+n,pieceIndex:t,t:a})}catch(e){return delete this.path,this.error=s.Ay.t("simulator:sceneObjs.ParamCurveObjMixin.error.pieceError",{pieceIndex:t+1,t:a,error:e.toString()}),!1}}return this.error=null,!0}drawPath(e,t=0){const n=e.ctx;if(this.path&&0!==this.path.length)if(0===t){n.beginPath(),n.moveTo(this.path[0].x,this.path[0].y);for(let e=1;e<this.path.length;e++)n.lineTo(this.path[e].x,this.path[e].y)}else{n.beginPath();let e=!1;for(let r=0;r<this.path.length-1;r++){const i=this.path[r],s=this.path[r+1],a=s.x-i.x,o=s.y-i.y,c=Math.sqrt(a*a+o*o);if(c>1e-10){const r=-o/c,u=a/c,l=i.x+r*t,h=i.y+u*t,p=s.x+r*t,d=s.y+u*t;e||(n.moveTo(l,h),e=!0),n.lineTo(p,d)}}}}isClosed(){if(!this.path&&!this.initPath())return!1;if(this.path.length<2)return!1;const e=this.path[0],t=this.path[this.path.length-1],n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return n<1e-10&&r<1e-10}isPositivelyOriented(){if(!this.path&&!this.initPath())return!1;if(this.path.length<3)return!1;let e=0;for(let t=0;t<this.path.length-1;t++){const n=this.path[t],r=this.path[t+1];e+=(n.x-r.x)*(n.y+r.y)}return e>0}isOutside(e){return!(!this.path&&!this.initPath()||this.isOnBoundary(e)||this.countIntersections(e)%2!=0)}isInside(e){return!(!this.path&&!this.initPath()||this.isOnBoundary(e)||this.countIntersections(e)%2!=1)}isOnBoundary(e){if(!this.path&&!this.initPath())return!1;if(this.path.length<2)return!1;for(let t=0;t<this.path.length-1;t++){const n=this.path[t],i=this.path[t+1];if(r.A.distanceSquared(n,i)<1e-20)continue;const s=r.A.line(n,i);if(this.distancePointToSegment(e,s)<=this.intersectTol)return!0}return!1}distancePointToSegment(e,t){const n=t.p1,i=t.p2,s=i.x-n.x,a=i.y-n.y,o=s*s+a*a;if(o<1e-20)return r.A.distance(e,n);let c=((e.x-n.x)*s+(e.y-n.y)*a)/o;c=Math.max(0,Math.min(1,c));const u=n.x+c*s,l=n.y+c*a;return r.A.distance(e,r.A.point(u,l))}countIntersections(e){if(!this.path&&!this.initPath())return 0;if(this.path.length<2)return 0;var t=0;const n=e.y,i=e.x;for(let e=0;e<this.path.length-1;e++){let s,a=this.path[e],o=this.path[e+1];if(!(r.A.distanceSquared(a,o)<1e-20||(a.y>o.y&&([a,o]=[o,a]),n>o.y||n<=a.y||Math.abs(o.y-a.y)<1e-10))){{const e=(n-a.y)/(o.y-a.y);s=a.x+e*(o.x-a.x)}s>i&&t++}}return t}populateObjBarShape(e){const t=this.pieces.length>=2;for(let r=0;r<this.pieces.length;r++){const i=r+1,a=r,o=t?`x<sub>${i}</sub>(t) =`:"x(t) =",c=t?`y<sub>${i}</sub>(t) =`:"y(t) =";e.createEquation(o,this.pieces[r].eqnX,(function(e,t){e.pieces[a].eqnX=t,delete e.path})),e.createEquation(c,this.pieces[r].eqnY,(function(e,t){e.pieces[a].eqnY=t,delete e.path})),e.createNumber("",-1/0,1/0,.01,this.pieces[r].tMin,(function(e,t){e.pieces[a].tMin=t,delete e.path}),null,!0);var n=document.createElement("span");n.innerHTML=" &lt; t &lt;",e.elem.appendChild(n),e.createNumber("",-1/0,1/0,.01,this.pieces[r].tMax,(function(e,t){e.pieces[a].tMax=t,delete e.path}),null,!0),e.createNumber(s.Ay.t("simulator:sceneObjs.ParamCurveObjMixin.step"),.001,1,.001,this.pieces[r].tStep,(function(e,t){e.pieces[a].tStep=t,delete e.path}),null,!0)}e.createButton(s.Ay.t("simulator:sceneObjs.ParamCurveObjMixin.addPiece"),(function(e){e.pieces.push({eqnX:"0",eqnY:"0",tMin:0,tMax:1,tStep:.01}),delete e.path}),!0,'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n      <path d="M2 7.5h5.5V2h1v5.5H14v1H8.5V14h-1V8.5H2v-1z"/>\n    </svg>\n    '),this.pieces.length>=2&&e.createButton(s.Ay.t("simulator:sceneObjs.ParamCurveObjMixin.removePiece"),(function(e){e.pieces.length>0&&(e.pieces.pop(),delete e.path)}),!0,'\n      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n        <path d="M2 7.5h12v1H2z"/>\n      </svg>\n      '),e.createTuple(s.Ay.t("simulator:sceneObjs.common.coordOrigin"),"("+this.origin.x+","+this.origin.y+")",(function(e,t){const n=t.indexOf(",");if(-1!=n){const i=parseFloat(t.slice(1,n)),s=parseFloat(t.slice(n+1,-1));e.origin=r.A.point(i,s),delete e.path}}))}getRayIntersections(e){const t=[];if(!this.path&&!this.initPath())return t;if(this.path.length<2)return t;for(let m=0;m<this.path.length-1;m++){const g=this.path[m],y=this.path[m+1],x=r.A.linesIntersection(r.A.line(e.p1,e.p2),r.A.line(g,y));if(r.A.intersectionIsOnSegment(x,r.A.line(g,y))&&r.A.intersectionIsOnRay(x,e)&&r.A.distanceSquared(e.p1,x)>1e-10){const v=r.A.distance(g,y),b=r.A.distance(g,x),D=v>1e-10?b/v:0,w=g.t+(y.t-g.t)*D,A=y.x-g.x,S=y.y-g.y,N=Math.sqrt(A*A+S*S);let C,E;if(N>1e-10){const t=A/N,y=S/N,v=(e.p2.x-e.p1.x)*y-(e.p2.y-e.p1.y)*t;E=v>1e-10?1:v<-1e-10?-1:NaN;const b=(e.p2.x-e.p1.x)*t+(e.p2.y-e.p1.y)*y,D=b*t-(e.p2.x-e.p1.x),w=b*y-(e.p2.y-e.p1.y);var n;n=Math.abs(A)>Math.abs(S)?(x.x-g.x)/A:(x.y-g.y)/S;var i,s=D,a=w;if((m>0&&n<.5||m<this.path.length-2&&n>=.5)&&(n<.5&&m>0?i=r.A.line(this.path[m-1],this.path[m]):n>=.5&&m<this.path.length-2&&(i=r.A.line(this.path[m+1],this.path[m+2])),i)){var o=i.p2.x-i.p1.x,c=i.p2.y-i.p1.y,u=Math.sqrt(o*o+c*c);if(u/N<10&&N/u<10){var l=o/u,h=c/u,p=(e.p2.x-e.p1.x)*l+(e.p2.y-e.p1.y)*h,d=p*l-(e.p2.x-e.p1.x),f=p*h-(e.p2.y-e.p1.y);n<.5?(s=D*(.5+n)+d*(.5-n),a=w*(.5+n)+f*(.5-n)):(s=d*(n-.5)+D*(1.5-n),a=f*(n-.5)+w*(1.5-n))}}const M=Math.sqrt(s*s+a*a);C={x:s/M,y:a/M}}else E=NaN,C={x:NaN,y:NaN};t.push({s_point:r.A.point(x.x,x.y),normal:C,incidentType:E,incidentPiece:g.pieceIndex,incidentPos:w})}}return t}}},5676:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(9472),i=n(2635),s=n(7235),a=n(6492);class o extends r.A{static type="Aperture";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={p1:null,p2:null,p3:null,p4:null,filter:!1,invert:!1,wavelength:s.A.GREEN_WAVELENGTH,bandwidth:10};populateObjBar(e){e.setTitle(i.Ay.t("main:tools.Aperture.title"));var t=a.A.distance(this.p3,this.p4);e.createNumber(i.Ay.t("simulator:sceneObjs.Aperture.diameter"),0,100*this.scene.lengthScale,1*this.scene.lengthScale,t,(function(e,t){var n=.5*(1-t/a.A.distance(e.p1,e.p2));e.p3=a.A.point(e.p1.x*(1-n)+e.p2.x*n,e.p1.y*(1-n)+e.p2.y*n),e.p4=a.A.point(e.p1.x*n+e.p2.x*(1-n),e.p1.y*n+e.p2.y*(1-n))}),i.Ay.t("simulator:sceneObjs.common.lengthUnitInfo")),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return r.fillStyle="rgb(128,128,128)",void r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i);const a=s.A.wavelengthToColor(this.wavelength||s.A.GREEN_WAVELENGTH,1);r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.simulateColors&&this.wavelength&&this.filter?a:this.scene.theme.blocker.color),r.lineWidth=this.scene.theme.blocker.width*i,r.lineCap="butt",r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p3.x,this.p3.y),r.stroke(),r.beginPath(),r.moveTo(this.p2.x,this.p2.y),r.lineTo(this.p4.x,this.p4.y),r.stroke(),r.lineWidth=1*i,n&&(r.fillStyle="magenta",r.fillRect(this.p3.x-1.5*i,this.p3.y-1.5*i,3*i,3*i),r.fillRect(this.p4.x-1.5*i,this.p4.y-1.5*i,3*i,3*i))}move(e,t){return this.p1.x=this.p1.x+e,this.p1.y=this.p1.y+t,this.p2.x=this.p2.x+e,this.p2.y=this.p2.y+t,this.p3.x=this.p3.x+e,this.p3.y=this.p3.y+t,this.p4.x=this.p4.x+e,this.p4.y=this.p4.y+t,!0}rotate(e,t=null){t=t||this.getDefaultCenter();const n=Math.cos(e),r=Math.sin(e);let i=this.p1.x-t.x,s=this.p1.y-t.y;return this.p1.x=t.x+i*n-s*r,this.p1.y=t.y+i*r+s*n,i=this.p2.x-t.x,s=this.p2.y-t.y,this.p2.x=t.x+i*n-s*r,this.p2.y=t.y+i*r+s*n,i=this.p3.x-t.x,s=this.p3.y-t.y,this.p3.x=t.x+i*n-s*r,this.p3.y=t.y+i*r+s*n,i=this.p4.x-t.x,s=this.p4.y-t.y,this.p4.x=t.x+i*n-s*r,this.p4.y=t.y+i*r+s*n,!0}scale(e,t=null){return t=t||this.getDefaultCenter(),this.p1.x=t.x+(this.p1.x-t.x)*e,this.p1.y=t.y+(this.p1.y-t.y)*e,this.p2.x=t.x+(this.p2.x-t.x)*e,this.p2.y=t.y+(this.p2.y-t.y)*e,this.p3.x=t.x+(this.p3.x-t.x)*e,this.p3.y=t.y+(this.p3.y-t.y)*e,this.p4.x=t.x+(this.p4.x-t.x)*e,this.p4.y=t.y+(this.p4.y-t.y)*e,!0}getDefaultCenter(){return{x:(this.p1.x+this.p2.x)/2,y:(this.p1.y+this.p2.y)/2}}onConstructMouseDown(e,t,n){this.constructionPoint||(this.constructionPoint=e.getPosSnappedToGrid(),this.p1=this.constructionPoint,this.p2=this.constructionPoint),this.p2=n?e.getPosSnappedToDirection(this.p1,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid(),this.p3=a.A.point(.6*this.p1.x+.4*this.p2.x,.6*this.p1.y+.4*this.p2.y),this.p4=a.A.point(.4*this.p1.x+.6*this.p2.x,.4*this.p1.y+.6*this.p2.y)}onConstructMouseMove(e,t,n){return this.p2=n?e.getPosSnappedToDirection(this.constructionPoint,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid(),this.p1=t?a.A.point(2*this.constructionPoint.x-this.p2.x,2*this.constructionPoint.y-this.p2.y):this.constructionPoint,this.p3=a.A.point(.6*this.p1.x+.4*this.p2.x,.6*this.p1.y+.4*this.p2.y),this.p4=a.A.point(.4*this.p1.x+.6*this.p2.x,.4*this.p1.y+.6*this.p2.y),{requiresObjBarUpdate:!0}}onConstructMouseUp(e,t,n){if(!e.snapsOnPoint(this.p1))return delete this.constructionPoint,{isDone:!0,requiresObjBarUpdate:!0}}checkMouseOver(e){if(e.isOnPoint(this.p1)&&a.A.distanceSquared(e.pos,this.p1)<=a.A.distanceSquared(e.pos,this.p2))return{part:1,targetPoint:a.A.point(this.p1.x,this.p1.y)};if(e.isOnPoint(this.p2))return{part:2,targetPoint:a.A.point(this.p2.x,this.p2.y)};if(e.isOnPoint(this.p3)&&a.A.distanceSquared(e.pos,this.p3)<=a.A.distanceSquared(e.pos,this.p4))return{part:3,targetPoint:a.A.point(this.p3.x,this.p3.y),requiresObjBarUpdate:!0};if(e.isOnPoint(this.p4))return{part:4,targetPoint:a.A.point(this.p4.x,this.p4.y),requiresObjBarUpdate:!0};var t=a.A.line(this.p1,this.p3),n=a.A.line(this.p2,this.p4);if(e.isOnSegment(t)||e.isOnSegment(n)){const t=e.getPosSnappedToGrid();return{part:0,mousePos0:t,mousePos1:t,snapContext:{}}}}onDrag(e,t,n,r){var i,s=a.A.distance(this.p3,this.p4);if(1==t.part||2==t.part){1==t.part?(i=n?a.A.segmentMidpoint(t.originalObj):t.originalObj.p2,this.p1=r?e.getPosSnappedToDirection(i,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y}]):e.getPosSnappedToGrid(),this.p2=n?a.A.point(2*i.x-this.p1.x,2*i.y-this.p1.y):i):(i=n?a.A.segmentMidpoint(t.originalObj):t.originalObj.p1,this.p2=r?e.getPosSnappedToDirection(i,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y}]):e.getPosSnappedToGrid(),this.p1=n?a.A.point(2*i.x-this.p2.x,2*i.y-this.p2.y):i);var o=.5*(1-s/a.A.distance(this.p1,this.p2));this.p3=a.A.point(this.p1.x*(1-o)+this.p2.x*o,this.p1.y*(1-o)+this.p2.y*o),this.p4=a.A.point(this.p1.x*o+this.p2.x*(1-o),this.p1.y*o+this.p2.y*(1-o))}else if(3==t.part||4==t.part)3==t.part?(i=a.A.segmentMidpoint(this),this.p3=e.getPosSnappedToDirection(i,[{x:t.originalObj.p4.x-t.originalObj.p3.x,y:t.originalObj.p4.y-t.originalObj.p3.y}]),this.p4=a.A.point(2*i.x-this.p3.x,2*i.y-this.p3.y)):(i=a.A.segmentMidpoint(this),this.p4=e.getPosSnappedToDirection(i,[{x:t.originalObj.p4.x-t.originalObj.p3.x,y:t.originalObj.p4.y-t.originalObj.p3.y}]),this.p3=a.A.point(2*i.x-this.p4.x,2*i.y-this.p4.y));else if(0==t.part){if(r)var c=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y},{x:t.originalObj.p2.y-t.originalObj.p1.y,y:-(t.originalObj.p2.x-t.originalObj.p1.x)}],t.snapContext);else c=e.getPosSnappedToGrid(),t.snapContext={};var u=t.mousePos1.x-c.x,l=t.mousePos1.y-c.y;this.p1.x=this.p1.x-u,this.p1.y=this.p1.y-l,this.p2.x=this.p2.x-u,this.p2.y=this.p2.y-l,this.p3.x=this.p3.x-u,this.p3.y=this.p3.y-l,this.p4.x=this.p4.x-u,this.p4.y=this.p4.y-l,t.mousePos1=c}}checkRayIntersects(e){if(this.checkRayIntersectFilter(e)){var t=a.A.line(this.p1,this.p3),n=a.A.line(this.p2,this.p4),r=a.A.linesIntersection(a.A.line(e.p1,e.p2),t);if(a.A.intersectionIsOnSegment(r,t)&&a.A.intersectionIsOnRay(r,e))return r;var i=a.A.linesIntersection(a.A.line(e.p1,e.p2),n);if(a.A.intersectionIsOnSegment(i,n)&&a.A.intersectionIsOnRay(i,e))return i}return null}onRayIncident(e,t,n){return{isAbsorbed:!0}}}const c=o},5824:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(9472),i=n(7791),s=n(2635),a=n(7235);class o extends((0,i.A)(r.A)){static type="Blocker";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={p1:null,p2:null,filter:!1,invert:!1,wavelength:a.A.GREEN_WAVELENGTH,bandwidth:10};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.Blocker.title")),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return r.fillStyle="rgb(128,128,128)",void r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i);const s=a.A.wavelengthToColor(this.wavelength||a.A.GREEN_WAVELENGTH,1);r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.simulateColors&&this.wavelength&&this.filter?s:this.scene.theme.blocker.color),r.lineWidth=this.scene.theme.blocker.width*i,r.lineCap="butt",r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke(),r.lineWidth=1*i}checkRayIntersects(e){return this.checkRayIntersectFilter(e)?this.checkRayIntersectsShape(e):null}onRayIncident(e,t,n){return{isAbsorbed:!0}}}const c=o},120:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(9472),i=n(2933),s=n(2635),a=n(7235),o=n(6492);class c extends((0,i.A)(r.A)){static type="CircleBlocker";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={p1:null,p2:null,filter:!1,invert:!1,wavelength:a.A.GREEN_WAVELENGTH,bandwidth:10};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.CircleBlocker.title")),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;r.beginPath(),r.arc(this.p1.x,this.p1.y,o.A.segmentLength(this),0,2*Math.PI);const s=a.A.wavelengthToColor(this.wavelength||a.A.GREEN_WAVELENGTH,1);r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.simulateColors&&this.wavelength&&this.filter?s:this.scene.theme.blocker.color),r.lineWidth=this.scene.theme.blocker.width*i,r.stroke(),e.drawPoint(this.p1,this.scene.theme.centerPoint.color,this.scene.theme.centerPoint.size),r.lineWidth=1*i,n&&(r.fillStyle="magenta",r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i))}checkRayIntersects(e){return this.checkRayIntersectFilter(e)?this.checkRayIntersectsShape(e):null}onRayIncident(e,t,n){return{isAbsorbed:!0}}}const u=c},5707:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(7791),i=n(867),s=n(2635),a=n(7235),o=n(6492);class c extends((0,r.A)(i.A)){static type="DiffractionGrating";static isOptical=!0;static serializableDefaults={p1:null,p2:null,lineDensity:1e3,customBrightness:!1,brightnesses:[1,.5,.5],slitRatio:.5,mirrored:!1};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.DiffractionGrating.title")),e.createNumber(s.Ay.t("simulator:sceneObjs.DiffractionGrating.lineDensity",{lengthUnit:"mm"}),1,2500,5,this.lineDensity,(function(e,t){e.lineDensity=t})),e.createBoolean(s.Ay.t("simulator:sceneObjs.DiffractionGrating.customBrightness"),this.customBrightness,(function(e,t){e.customBrightness=t}),s.Ay.t("simulator:sceneObjs.DiffractionGrating.customBrightnessInfo"),!0),this.customBrightness?e.createTuple("",this.brightnesses.join(", "),(function(e,t){e.brightnesses=t.split(",").map(parseFloat)})):e.showAdvanced(!this.arePropertiesDefault(["slitRatio"]))&&e.createNumber(s.Ay.t("simulator:sceneObjs.DiffractionGrating.slitRatio"),0,1,.001,this.slitRatio,(function(e,t){e.slitRatio=t})),e.showAdvanced(!this.arePropertiesDefault(["mirrored"]))&&e.createBoolean(s.Ay.t("simulator:sceneObjs.DiffractionGrating.mirrored"),this.mirrored,(function(e,t){e.mirrored=t}))}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return r.fillStyle="rgb(128,128,128)",void r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i);this.mirrored&&(r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.mirror.color),r.lineWidth=this.scene.theme.mirror.width*i,r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke()),r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.diffractionGrating.color),r.lineWidth=this.scene.theme.diffractionGrating.width*i,r.lineCap="butt",r.beginPath(),this.customBrightness?r.setLineDash(this.scene.theme.diffractionGrating.dash.map((e=>e*i))):r.setLineDash([2*this.scene.theme.diffractionGrating.dash[0]*(1-this.slitRatio)*i,2*this.scene.theme.diffractionGrating.dash[1]*this.slitRatio*i]),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke(),r.setLineDash([]),r.lineWidth=1*i}onSimulationStart(){this.warning=null,"images"!=this.scene.mode&&"observer"!=this.scene.mode||(this.warning=(this.warning||"")+s.Ay.t("simulator:sceneObjs.common.imageDetectionWarning")),this.scene.simulateColors||(this.warning=(this.warning||"")+s.Ay.t("simulator:sceneObjs.common.nonSimulateColorsWarning"))}checkRayIntersects(e){return this.checkRayIntersectsShape(e)}onRayIncident(e,t,n){let r=0;var i=e.p1.x-n.x,s=e.p1.y-n.y,c=this.p2.x-this.p1.x,u=this.p2.y-this.p1.y,l=1e-6*(e.wavelength||a.A.GREEN_WAVELENGTH),h=1/this.lineDensity,p=h*this.slitRatio,d=i*u-s*c>0?this.p1:this.p2,f=this.mirrored?-1:1,m=Math.PI-Math.atan2(d.y-n.y,d.x-n.x),g=Math.PI-Math.atan2(s,i),y=Math.PI/2-(m<g?m+2*Math.PI-g:m-g),x=-Math.floor(h/l*(1-Math.sin(y))),v=-Math.ceil(h/l*(-1-Math.sin(y)));let b=[];for(var D=x;D<=v;D++){var w=Math.asin(Math.sin(y)-D*l/h),A=Math.cos(f*(-Math.PI/2-w)),S=Math.sin(f*(-Math.PI/2-w)),N=o.A.line(n,o.A.point(n.x+(d.x-n.x)*A-(d.y-n.y)*S,n.y+(d.x-n.x)*S+(d.y-n.y)*A));if(this.customBrightness)var C=this.brightnesses[D<=0?-2*D:2*D-1]||0;else{var E=2*Math.PI*p/l*(Math.sin(y)-Math.sin(w)),M=0==E?1:Math.sin(E/2)/(E/2);C=p*p/(h*h)*Math.pow(M,2)}0!=C&&(N.wavelength=e.wavelength,N.brightness_s=e.brightness_s*C,N.brightness_p=e.brightness_p*C,N.gap=!0,N.brightness_s+N.brightness_p>("default"!=this.scene.colorMode?1e-6:.01)?b.push(N):r+=N.brightness_s+N.brightness_p)}return{isAbsorbed:!0,newRays:b,truncation:r}}}const u=c},4052:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(3452),i=n(2933),s=n(2635),a=n(6492);class o extends((0,i.A)(r.A)){static type="CircleGlass";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={p1:null,p2:null,refIndex:1.5,cauchyB:.004};populateObjBar(e){e.setTitle(s.Ay.t("main:meta.parentheses",{main:s.Ay.t("main:tools.categories.glass"),sub:s.Ay.t("main:tools.CircleGlass.title")})),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;r.beginPath(),r.arc(this.p1.x,this.p1.y,a.A.segmentLength(this),0,2*Math.PI,!1),this.fillGlass(e,t,n),e.drawPoint(this.p1,this.scene.theme.centerPoint.color,this.scene.theme.centerPoint.size),n&&(r.fillStyle="magenta",r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i))}checkRayIntersects(e){if(!(this.refIndex<=0))return this.checkRayIntersectsShape(e)}onRayIncident(e,t,n,r){var i=a.A.segmentMidpoint(a.A.line(e.p1,n)),s=a.A.distanceSquared(this.p1,this.p2)-a.A.distanceSquared(this.p1,i);if(s>0)var o=this.getRefIndexAt(n,e),c={x:this.p1.x-n.x,y:this.p1.y-n.y};else{if(!(s<0))return{isAbsorbed:!0,isUndefinedBehavior:!0};o=1/this.getRefIndexAt(n,e),c={x:n.x-this.p1.x,y:n.y-this.p1.y}}return this.refract(e,t,n,c,o,r,e.bodyMergingObj)}getIncidentType(e){var t=a.A.segmentMidpoint(a.A.line(e.p1,this.checkRayIntersects(e))),n=a.A.distanceSquared(this.p1,this.p2)-a.A.distanceSquared(this.p1,t);return n>0?1:n<0?-1:NaN}}const c=o},6646:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(3998),i=n(2933),s=n(2635),a=n(6492);class o extends((0,i.A)(r.A)){static type="CircleGrinGlass";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={p1:null,p2:null,refIndexFn:"1+e^{-\\frac{x^2+y^2}{50^2}}",absorptionFn:"0",origin:{x:0,y:0},stepSize:1,intersectTol:.001};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.CircleGrinGlass.title")),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;r.beginPath(),r.arc(this.p1.x,this.p1.y,a.A.segmentLength(this),0,2*Math.PI,!1),this.fillGlass(e,t,n),e.drawPoint(this.p1,this.scene.theme.centerPoint.color,this.scene.theme.centerPoint.size),n&&(r.fillStyle="magenta",r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i))}move(e,t){return super.move(e,t),!1}rotate(e,t){return super.rotate(e,t),!1}scale(e,t){return super.scale(e,t),!1}onConstructMouseDown(e,t,n){super.onConstructMouseDown(e,t,n),this.origin=a.A.point(this.p1.x,this.p1.y),this.initFns()}checkRayIntersects(e){if(!this.notDone){if(this.fn_p||this.initFns(),this.isInsideGlass(e.p1)||this.isOnBoundary(e.p1)){let t=a.A.distance(e.p1,e.p2),n=e.p1.x+this.stepSize/t*(e.p2.x-e.p1.x),r=e.p1.y+this.stepSize/t*(e.p2.y-e.p1.y);const i=a.A.point(n,r);if(this.isInsideGlass(i))return i}return this.checkRayIntersectsShape(e)}}onRayIncident(e,t,n,r){if(!this.fn_p)return{isAbsorbed:!0};try{if(this.error=null,(this.isInsideGlass(e.p1)||this.isOutsideGlass(e.p1))&&this.isOnBoundary(n)){let u=e.bodyMergingObj;var i=a.A.segmentMidpoint(a.A.line(e.p1,n)),s=a.A.distanceSquared(this.p1,this.p2)-a.A.distanceSquared(this.p1,i);if(s>0){var o=this.getRefIndexAt(n,e),c={x:this.p1.x-n.x,y:this.p1.y-n.y};this.onRayExit(e)}else{if(!(s<0))return{isAbsorbed:!0,isUndefinedBehavior:!0};o=1/this.getRefIndexAt(n,e),c={x:n.x-this.p1.x,y:n.y-this.p1.y},this.onRayEnter(e)}return this.refract(e,t,n,c,o,r,u)}{void 0===e.bodyMergingObj&&(e.bodyMergingObj=this.initRefIndex(e));const t=this.step(e.p1,n,e);e.p1=n,e.p2=t}}catch(e){return this.error=e.toString(),{isAbsorbed:!0}}}getIncidentType(e){var t=a.A.segmentMidpoint(a.A.line(e.p1,this.checkRayIntersectsShape(e))),n=a.A.distanceSquared(this.p1,this.p2)-a.A.distanceSquared(this.p1,t);return n>0?1:n<0?-1:NaN}isOutsideGlass(e){const t=a.A.distanceSquared(this.p1,this.p2);return a.A.distanceSquared(this.p1,e)-t-this.intersectTol>0&&a.A.distanceSquared(this.p1,e)-t+this.intersectTol>0}isInsideGlass(e){const t=a.A.distanceSquared(this.p1,this.p2);return a.A.distanceSquared(this.p1,e)-t-this.intersectTol<0&&a.A.distanceSquared(this.p1,e)-t+this.intersectTol<0}isOnBoundary(e){const t=a.A.distanceSquared(this.p1,this.p2);return a.A.distanceSquared(this.p1,e)-t-this.intersectTol<0&&a.A.distanceSquared(this.p1,e)-t+this.intersectTol>0}}const c=o},967:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(3452),i=n(2635),s=n(7235),a=n(6492),o=n(4824);class c extends r.A{static type="CurveGlass";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={points:[],notDone:!1,refIndex:1.5,cauchyB:.004};constructor(e,t){if(super(e,t),this.curves=[],this.bboxes=[],t.points)for(let e=0;e<t.points.length;e++)this.newCurve([t.points[e].a1,t.points[e].c1,t.points[e].c2,t.points[(e+1)%t.points.length].a1],-1)}serialize(){let e=super.serialize();return this.curves?e.points=this.curves.map((e=>{const t=JSON.parse(JSON.stringify(e)).points.slice(0,3).map((e=>a.A.point(e.x,e.y)));return{a1:t[0],c1:t[1],c2:t[2]}})):e.points=[],delete e.curves,e.path&&delete e.path,e}populateObjBar(e){e.setTitle(i.Ay.t("main:meta.parentheses",{main:i.Ay.t("main:tools.categories.glass"),sub:i.Ay.t("main:tools.CurveGlass.title")})),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.notDone){if(this.path){if(2===this.path.length&&this.path[0].x===this.path[1].x&&this.path[0].y===this.path[1].y)return r.fillStyle="rgb(255,0,0)",void r.fillRect(this.path[0].x-1.5*i,this.path[0].y-1.5*i,3*i,3*i);r.beginPath(),r.moveTo(this.path[0].x,this.path[0].y);for(let t=0;t<this.path.length-1;t++)r.lineTo(this.path[t+1].x,this.path[t+1].y),r.fillStyle="rgb(255,0,0)",this.drawPoint(this.path[t],e);r.globalAlpha=1,r.strokeStyle="rgb(128,128,128)",r.lineWidth=1*i,r.setLineDash([5*i,5*i]),r.stroke(),r.setLineDash([])}}else{r.beginPath();let i=this.curves[0].points[0];r.moveTo(i.x,i.y);for(let t=0;t<this.curves.length;t++)this.drawCurve(this.curves[t],e,n);if(this.fillGlass(e,t,n),n){r.beginPath(),r.moveTo(this.curves[0].points[0].x,this.curves[0].points[0].y);for(let t=0;t<this.curves.length;t++){let n=this.curves[t].points;r.strokeStyle="rgb(255,0,0)",this.drawLine(n[0],n[1],e,r.strokeStyle),this.drawLine(n[2],n[3],e,r.strokeStyle),n.forEach((t=>this.drawPoint(t,e)))}}}r.lineWidth=1}move(e,t){for(let n=0;n<this.curves.length;n++){for(let r=0;r<this.curves[n].points.length;r++)this.curves[n].points[r].x+=e,this.curves[n].points[r].y+=t;this.newCurve(this.curves[n].points,n)}return!0}rotate(e,t){const n=t||this.getDefaultCenter();var r=0,i=0;for(let t=0;t<this.curves.length;t++){for(let s=0;s<4;s++)r=this.curves[t].points[s].x-n.x,i=this.curves[t].points[s].y-n.y,this.curves[t].points[s].x=n.x+r*Math.cos(e)-i*Math.sin(e),this.curves[t].points[s].y=n.y+r*Math.sin(e)+i*Math.cos(e);this.newCurve(this.curves[t].points,t)}return!0}scale(e,t){const n=t||this.getDefaultCenter();var r=0,i=0;for(let t=0;t<this.curves.length;t++){for(let s=0;s<4;s++)r=this.curves[t].points[s].x-n.x,i=this.curves[t].points[s].y-n.y,this.curves[t].points[s].x=n.x+r*e,this.curves[t].points[s].y=n.y+i*e;this.newCurve(this.curves[t].points,t)}return!0}getDefaultCenter(){var e=[];for(let t=0;t<this.curves.length;t++)e.push(this.curves[t].points[0]);return{x:Math.round(e.reduce(((e,t)=>e+t.x),0)/this.curves.length),y:Math.round(e.reduce(((e,t)=>e+t.y),0)/this.curves.length)}}onConstructMouseDown(e,t,n){const r=e.getPosSnappedToGrid();if(this.notDone||(this.notDone=!0,this.curves=[],this.bboxes=[],this.path=[{x:r.x,y:r.y}]),this.path.length>0){if(this.path.length>3&&e.snapsOnPoint(this.path[0]))return this.path.length--,this.notDone=!1,this.generatePolyBezier(),{isDone:!0};this.path.push({x:r.x,y:r.y})}}onConstructMouseMove(e,t,n){if(!this.notDone)return{isDone:!0};const r=e.getPosSnappedToGrid();this.path[this.path.length-1]={x:r.x,y:r.y}}onConstructMouseUp(e,t,n){if(!this.notDone)return{isDone:!0}}onConstructUndo(){if(this.path.length<=2)return{isCancelled:!0};this.curves?(this.curves.pop(),this.path.pop()):this.path.pop()}checkMouseOver(e){var t={},n=[];const r=e.getPosSnappedToGrid();t.mousePos0=r,t.mousePos1=r,t.snapContext={};for(let r=0;r<this.curves.length;r++){if(n=this.curves[r].points,e.isOnPoint(this.curves[r].points[0]))return t.part=1,t.targetPoint=this.curves[r].points[0],t.index=r,t;for(let i=1;i<n.length-1;i++)if(e.isOnPoint(n[i]))return t.part=i+1,t.targetPoint=n[i],t.index=r,t}for(let n=0;n<this.curves.length;n++)if(e.isOnCurve(this.curves[n]))return t.part=0,t}onDrag(e,t,n,r){var i,s=0;const a=(t.index-1+this.curves.length)%this.curves.length;if(r&&s++,n&&(s+=2),1===t.part){switch(s){default:i=e.getPosSnappedToGrid(),t.snapContext={};break;case 1:i=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1}],t.snapContext);break;case 2:i=e.getPosSnappedToGrid(),t.snapContext={};var o=i.x-this.curves[t.index].points[0].x,c=i.y-this.curves[t.index].points[0].y;this.curves[t.index].points[1].x+=o,this.curves[t.index].points[1].y+=c,this.curves[a].points[2].x+=o,this.curves[a].points[2].y+=c,this.newCurve(this.curves[t.index].points,t.index),this.newCurve(this.curves[a].points,a)}this.curves[t.index].points[0].x=i.x,this.curves[t.index].points[0].y=i.y,this.curves[a].points[3].x=i.x,this.curves[a].points[3].y=i.y,this.newCurve(this.curves[t.index].points,t.index),this.newCurve(this.curves[a].points,a)}else 2===t.part||3===t.part?(r?i=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1}],t.snapContext):(i=e.getPosSnappedToGrid(),t.snapContext={}),this.curves[t.index].points[t.part-1].x=i.x,this.curves[t.index].points[t.part-1].y=i.y,this.newCurve(this.curves[t.index].points,t.index)):0===t.part&&(r?i=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1}],t.snapContext):(i=e.getPosSnappedToGrid(),t.snapContext={}),this.move(i.x-t.mousePos1.x,i.y-t.mousePos1.y),t.mousePos1=i)}checkRayIntersects(e){if(!this.notDone)return this.countIntersections(e.p1,e.p2),this.curIntersections.shortest.i>-1&&this.curIntersections.shortest.j>-1?this.curves[this.curIntersections.shortest.i].get(this.curIntersections.curves[this.curIntersections.shortest.i][this.curIntersections.shortest.j]):void 0}onRayIncident(e,t,n,r){try{this.error=null;var i=this.getIncidentData(e),s=i.incidentType;if(1==s)var a=this.getRefIndexAt(n,e);else if(-1==s)a=1/this.getRefIndexAt(n,e);else{if(0!=s)return{isAbsorbed:!0,isUndefinedBehavior:!0};a=1}return this.refract(e,t,i.s_point,i.normal,a,r,e.bodyMergingObj)}catch(e){return this.error=e.toString(),console.log(this.error),{isAbsorbed:!0}}}getIncidentType(e){return this.getIncidentData(e).incidentType}isInsideGlass(e,t){return this.countIntersections(e,t)%2==1}getIncidentData(e){if(this.isInsideGlass(e.p1,e.p2))var t=1;else t=-1;const n=this.curIntersections.shortest.i,r=this.curIntersections.shortest.j;var i=this.curves[n].get(this.curIntersections.curves[n][r]);i.t=this.curIntersections.curves[n][r];var s=this.curves[n].normal(i.t);return(s=a.A.point(s.x,s.y)).x*(e.p2.x-e.p1.x)+s.y*(e.p2.y-e.p1.y)>0&&(s.x=-s.x,s.y=-s.y),{s_point:i,normal:a.A.point(s.x,s.y),incidentType:t}}countIntersections(e,t){var n=0;if(void 0===t){let t=1/0;for(let e=0;e<this.bboxes.length;e++)this.bboxes[e].x.min<t&&(t=this.bboxes[e].x.min);const r={x:t-this.scene.rng()-100,y:e.y+this.scene.rng()};for(let t=0;t<this.curves.length;t++)n+=this.curves[t].lineIntersects(a.A.line(a.A.point(e.x,e.y),r)).length}else{this.curIntersections={curves:[],shortest:{val:1/0,i:-1,j:-1}};let r=0;for(let e=0;e<this.bboxes.length;e++)r+=Math.abs(this.bboxes[e].x.max)>Math.abs(this.bboxes[e].y.max)?Math.abs(this.bboxes[e].x.max):Math.abs(this.bboxes[e].y.max);for(let i=0;i<this.curves.length;i++){this.curIntersections.curves.push(this.curves[i].lineIntersects(a.A.line(e,a.A.point(t.x+(t.x-e.x)*r,t.y+(t.y-e.y)*r))));for(let t=0;t<this.curIntersections.curves[i].length;t++)a.A.distanceSquared(e,this.curves[i].get(this.curIntersections.curves[i][t]))<s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&this.curIntersections.curves[i].splice(t,1);n+=this.curIntersections.curves[i].length;for(let t=0;t<this.curIntersections.curves[i].length;t++){let n=a.A.distanceSquared(e,this.curves[i].get(this.curIntersections.curves[i][t]));n<this.curIntersections.shortest.val&&(this.curIntersections.shortest={val:n,i,j:t})}}}return n}generateDefaultControlPoints(e){const t=a.A.normalizeVec(a.A.point(e[2].x-e[0].x,e[2].y-e[0].y)),n=a.A.normalizeVec(a.A.point(e[3].x-e[1].x,e[3].y-e[1].y));return[a.A.point(e[1].x+Math.floor(50*t.x+.5),e[1].y+Math.floor(50*t.y+.5)),a.A.point(e[2].x-Math.floor(50*n.x+.5),e[2].y-Math.floor(50*n.y+.5))]}generatePolyBezier(){for(var e=null,t=0;t<this.path.length;t++)e=this.generateDefaultControlPoints([this.path[(t-1+this.path.length)%this.path.length],this.path[t],this.path[(t+1)%this.path.length],this.path[(t+2)%this.path.length]]),this.newCurve([{x:this.path[t].x,y:this.path[t].y},{x:e[0].x,y:e[0].y},{x:e[1].x,y:e[1].y},{x:this.path[(t+1)%this.path.length].x,y:this.path[(t+1)%this.path.length].y}])}drawCurve(e,t){const n=t.ctx;var r=e.points;n.strokeStyle="rgb(128,128,128)",n.bezierCurveTo(r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y)}drawLine(e,t,n,r){const i=n.ctx;i.strokeStyle=r||"rgb(128,128,128)",i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.stroke(),i.closePath(),i.fillStyle="rgb(255,0,0)",[e,t].forEach((e=>this.drawPoint(e,n)))}drawPoint(e,t){const n=t.ctx,r=t.lengthScale;n.fillRect(e.x-1.5*r,e.y-1.5*r,3*r,3*r)}newCurve(e,t){return void 0===t||-1===t?(this.curves.push(new o.w(e)),this.bboxes.push(this.curves[this.curves.length-1].bbox()),this.curves[this.curves.length-1]):(this.curves[t]=new o.w(e),this.bboxes[t]=this.curves[t].bbox(),this.curves[t])}}const u=c},609:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(3998),i=n(2635),s=n(7235),a=n(6492),o=n(4824);class c extends r.A{static type="CurveGrinGlass";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={points:[],notDone:!1,refIndexFn:"1.1+0.1\\cdot\\cos\\left(0.1\\cdot y\\right)",absorptionFn:"0",origin:{x:0,y:0},stepSize:1,intersectTol:.05};constructor(e,t){if(super(e,t),this.curves=[],this.bboxes=[],t.points)for(let e=0;e<t.points.length;e++)this.newCurve([t.points[e].a1,t.points[e].c1,t.points[e].c2,t.points[(e+1)%t.points.length].a1],-1)}serialize(){let e=super.serialize();return this.curves?e.points=this.curves.map((e=>{const t=JSON.parse(JSON.stringify(e)).points.slice(0,3).map((e=>a.A.point(e.x,e.y)));return{a1:t[0],c1:t[1],c2:t[2]}})):e.points=[],delete e.curves,e.path&&delete e.path,e}populateObjBar(e){e.setTitle(i.Ay.t("main:tools.CurveGrinGlass.title")),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.notDone){if(this.path){if(2===this.path.length&&this.path[0].x===this.path[1].x&&this.path[0].y===this.path[1].y)return r.fillStyle="rgb(255,0,0)",void r.fillRect(this.path[0].x-1.5*i,this.path[0].y-1.5*i,3*i,3*i);r.beginPath(),r.moveTo(this.path[0].x,this.path[0].y);for(let t=0;t<this.path.length-1;t++)r.lineTo(this.path[t+1].x,this.path[t+1].y),r.fillStyle="rgb(255,0,0)",this.drawPoint(this.path[t],e);r.globalAlpha=1,r.strokeStyle="rgb(128,128,128)",r.lineWidth=1*i,r.setLineDash([5*i,5*i]),r.stroke(),r.setLineDash([])}}else{r.beginPath();let i=this.curves[0].points[0];r.moveTo(i.x,i.y);for(let t=0;t<this.curves.length;t++)this.drawCurve(this.curves[t],e,n);if(this.fillGlass(e,t,n),n){r.beginPath(),r.moveTo(this.curves[0].points[0].x,this.curves[0].points[0].y);for(let t=0;t<this.curves.length;t++){let n=this.curves[t].points;r.strokeStyle="rgb(255,0,0)",this.drawLine(n[0],n[1],e,r.strokeStyle),this.drawLine(n[2],n[3],e,r.strokeStyle),n.forEach((t=>this.drawPoint(t,e)))}}}r.lineWidth=1}move(e,t){for(let n=0;n<this.curves.length;n++){for(let r=0;r<this.curves[n].points.length;r++)this.curves[n].points[r].x+=e,this.curves[n].points[r].y+=t;this.newCurve(this.curves[n].points,n)}return!1}rotate(e,t){const n=t||this.getDefaultCenter();var r=0,i=0;for(let t=0;t<this.curves.length;t++){for(let s=0;s<4;s++)r=this.curves[t].points[s].x-n.x,i=this.curves[t].points[s].y-n.y,this.curves[t].points[s].x=n.x+r*Math.cos(e)-i*Math.sin(e),this.curves[t].points[s].y=n.y+r*Math.sin(e)+i*Math.cos(e);this.newCurve(this.curves[t].points,t)}return!1}scale(e,t){const n=t||this.getDefaultCenter();var r=0,i=0;for(let t=0;t<this.curves.length;t++){for(let s=0;s<4;s++)r=this.curves[t].points[s].x-n.x,i=this.curves[t].points[s].y-n.y,this.curves[t].points[s].x=n.x+r*e,this.curves[t].points[s].y=n.y+i*e;this.newCurve(this.curves[t].points,t)}return!1}getDefaultCenter(){var e=[];for(let t=0;t<this.curves.length;t++)e.push(this.curves[t].points[0]);return{x:Math.round(e.reduce(((e,t)=>e+t.x),0)/this.curves.length),y:Math.round(e.reduce(((e,t)=>e+t.y),0)/this.curves.length)}}onConstructMouseDown(e,t,n){const r=e.getPosSnappedToGrid();if(this.notDone||(this.notDone=!0,this.curves=[],this.bboxes=[],this.path=[{x:r.x,y:r.y}]),this.path.length>0){if(this.path.length>3&&e.snapsOnPoint(this.path[0]))return this.path.length--,this.notDone=!1,this.generatePolyBezier(),{isDone:!0};this.path.push({x:r.x,y:r.y})}}onConstructMouseMove(e,t,n){if(!this.notDone)return{isDone:!0};const r=e.getPosSnappedToGrid();this.path[this.path.length-1]={x:r.x,y:r.y}}onConstructMouseUp(e,t,n){if(!this.notDone)return{isDone:!0}}onConstructUndo(){if(this.path.length<=2)return{isCancelled:!0};this.curves?(this.curves.pop(),this.path.pop()):this.path.pop()}checkMouseOver(e){var t={},n=[];const r=e.getPosSnappedToGrid();t.mousePos0=r,t.mousePos1=r,t.snapContext={};for(let r=0;r<this.curves.length;r++){if(n=this.curves[r].points,e.isOnPoint(this.curves[r].points[0]))return t.part=1,t.targetPoint=this.curves[r].points[0],t.index=r,t;for(let i=1;i<n.length-1;i++)if(e.isOnPoint(n[i]))return t.part=i+1,t.targetPoint=n[i],t.index=r,t}for(let n=0;n<this.curves.length;n++)if(e.isOnCurve(this.curves[n]))return t.part=0,t}onDrag(e,t,n,r){var i,s=0;const a=(t.index-1+this.curves.length)%this.curves.length;if(r&&s++,n&&(s+=2),1===t.part){switch(s){default:i=e.getPosSnappedToGrid(),t.snapContext={};break;case 1:i=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1}],t.snapContext);break;case 2:i=e.getPosSnappedToGrid(),t.snapContext={};var o=i.x-this.curves[t.index].points[0].x,c=i.y-this.curves[t.index].points[0].y;this.curves[t.index].points[1].x+=o,this.curves[t.index].points[1].y+=c,this.curves[a].points[2].x+=o,this.curves[a].points[2].y+=c,this.newCurve(this.curves[t.index].points,t.index),this.newCurve(this.curves[a].points,a)}this.curves[t.index].points[0].x=i.x,this.curves[t.index].points[0].y=i.y,this.curves[a].points[3].x=i.x,this.curves[a].points[3].y=i.y,this.newCurve(this.curves[t.index].points,t.index),this.newCurve(this.curves[a].points,a)}else 2===t.part||3===t.part?(r?i=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1}],t.snapContext):(i=e.getPosSnappedToGrid(),t.snapContext={}),this.curves[t.index].points[t.part-1].x=i.x,this.curves[t.index].points[t.part-1].y=i.y,this.newCurve(this.curves[t.index].points,t.index)):0===t.part&&(r?i=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1}],t.snapContext):(i=e.getPosSnappedToGrid(),t.snapContext={}),this.move(i.x-t.mousePos1.x,i.y-t.mousePos1.y),t.mousePos1=i)}checkRayIntersects(e){if(this.fn_p||this.initFns(),!this.notDone){if(this.isInsideGlass(e.p1)||this.isOnBoundary(e.p1)){this.rayLen=a.A.distance(e.p1,e.p2);let t=e.p1.x+this.stepSize/this.rayLen*(e.p2.x-e.p1.x),n=e.p1.y+this.stepSize/this.rayLen*(e.p2.y-e.p1.y);const r=a.A.point(t,n);if(this.isInsideGlass(r))return r}if(this.countIntersections(e.p1,e.p2),this.curIntersections.shortest.i>-1&&this.curIntersections.shortest.j>-1){const e=this.curves[this.curIntersections.shortest.i].get(this.curIntersections.curves[this.curIntersections.shortest.i][this.curIntersections.shortest.j]);return a.A.point(e.x,e.y)}}}onRayIncident(e,t,n,r){if(!this.fn_p)return this.initFns(),{isAbsorbed:!0};this.error=null;try{var i=this.getIncidentData(e);if((this.isInsideGlass(e.p1)||this.isOutsideGlass(e.p1))&&this.isOnBoundary(n)){let n=e.bodyMergingObj;var s=i.incidentType;if(1===s){var a=this.getRefIndexAt(i.s_point,e);this.onRayExit(e)}else if(-1===s)a=1/this.getRefIndexAt(i.s_point,e),this.onRayEnter(e);else{if(0!==s)return{isAbsorbed:!0,isUndefinedBehavior:!0};a=1}return this.refract(e,t,i.s_point,i.normal,a,r,n)}{console.log("test"),void 0===e.bodyMergingObj&&(e.bodyMergingObj=this.initRefIndex(e));const t=this.step(e.p1,n,e);e.p1=n,e.p2=t}}catch(e){return this.error=e.toString(),console.log("Incident point is null!"),console.log(this.error),{isAbsorbed:!0}}}getIncidentType(e){return this.getIncidentData(e).incidentType}isOutsideGlass(e,t){return!(!t&&this.isOnBoundary(e))&&this.countIntersections(e,t)%2==0}isInsideGlass(e,t){return!(!t&&this.isOnBoundary(e))&&this.countIntersections(e,t)%2==1}isOnBoundary(e){for(let t=0;t<this.curves.length;t++)if(e.x<=this.bboxes[t].x.max&&e.x>=this.bboxes[t].x.min||e.y<=this.bboxes[t].y.max&&e.y>=this.bboxes[t].y.min){const n=this.curves[t].project({x:e.x,y:e.y}).d;if(Math.pow(n,2)<=this.intersectTol)return!0}return!1}getIncidentData(e){var t;if(t=this.isInsideGlass(e.p1,e.p2)?1:-1,-1===this.curIntersections.shortest.i)return{s_point:null,normal:{x:NaN,y:NaN},incidentType:0};const n=this.curIntersections.shortest.i,r=this.curIntersections.shortest.j;var i=this.curves[n].get(this.curIntersections.curves[n][r]);i.t=this.curIntersections.curves[n][r];let s=a.A.distance(e.p1,e.p2);if(1===t&&Math.pow(s,2)<this.curIntersections.shortest.val&&this.isInsideGlass(e.p2))return{s_point:a.A.point(e.p1.x+this.stepSize/s*(e.p2.x-e.p1.x),e.p1.y+this.stepSize/s*(e.p2.y-e.p1.y)),normal:{x:NaN,y:NaN},incidentType:2};var o=this.curves[n].normal(i.t);return(o=a.A.point(o.x,o.y)).x*(e.p2.x-e.p1.x)+o.y*(e.p2.y-e.p1.y)>0&&(o.x=-o.x,o.y=-o.y),{s_point:a.A.point(i.x,i.y),normal:a.A.point(o.x,o.y),incidentType:t}}countIntersections(e,t){var n=0;if(void 0===t){let t=1/0;for(let e=0;e<this.bboxes.length;e++)this.bboxes[e].x.min<t&&(t=this.bboxes[e].x.min);const r={x:t-1.23456789,y:e.y+1.23456789};for(let t=0;t<this.curves.length;t++)n+=this.curves[t].lineIntersects(a.A.line(a.A.point(e.x,e.y),r)).length}else{this.curIntersections={curves:[],shortest:{val:1/0,i:-1,j:-1}};let r=0;for(let e=0;e<this.bboxes.length;e++)r+=Math.abs(this.bboxes[e].x.max)>Math.abs(this.bboxes[e].y.max)?Math.abs(this.bboxes[e].x.max):Math.abs(this.bboxes[e].y.max);for(let i=0;i<this.curves.length;i++){this.curIntersections.curves.push(this.curves[i].lineIntersects(a.A.line(e,a.A.point(t.x+(t.x-e.x)*r,t.y+(t.y-e.y)*r))));for(let t=0;t<this.curIntersections.curves[i].length;t++)a.A.distanceSquared(e,this.curves[i].get(this.curIntersections.curves[i][t]))<s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&this.curIntersections.curves[i].splice(t,1);n+=this.curIntersections.curves[i].length;for(let t=0;t<this.curIntersections.curves[i].length;t++){let n=a.A.distanceSquared(e,this.curves[i].get(this.curIntersections.curves[i][t]));n<this.curIntersections.shortest.val&&(this.curIntersections.shortest={val:n,i,j:t})}}}return n}generateDefaultControlPoints(e){const t=a.A.normalizeVec(a.A.point(e[2].x-e[0].x,e[2].y-e[0].y)),n=a.A.normalizeVec(a.A.point(e[3].x-e[1].x,e[3].y-e[1].y));return[a.A.point(e[1].x+Math.floor(50*t.x+.5),e[1].y+Math.floor(50*t.y+.5)),a.A.point(e[2].x-Math.floor(50*n.x+.5),e[2].y-Math.floor(50*n.y+.5))]}generatePolyBezier(){for(var e=null,t=0;t<this.path.length;t++)e=this.generateDefaultControlPoints([this.path[(t-1+this.path.length)%this.path.length],this.path[t],this.path[(t+1)%this.path.length],this.path[(t+2)%this.path.length]]),this.newCurve([{x:this.path[t].x,y:this.path[t].y},{x:e[0].x,y:e[0].y},{x:e[1].x,y:e[1].y},{x:this.path[(t+1)%this.path.length].x,y:this.path[(t+1)%this.path.length].y}])}drawCurve(e,t){const n=t.ctx;var r=e.points;n.strokeStyle="rgb(128,128,128)",n.bezierCurveTo(r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y)}drawLine(e,t,n,r){const i=n.ctx;i.strokeStyle=r||"rgb(128,128,128)",i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.stroke(),i.closePath(),i.fillStyle="rgb(255,0,0)",[e,t].forEach((e=>this.drawPoint(e,n)))}drawPoint(e,t){const n=t.ctx,r=t.lengthScale;n.fillRect(e.x-1.5*r,e.y-1.5*r,3*r,3*r)}newCurve(e,t){return void 0===t||-1===t?(this.curves.push(new o.w(e)),this.bboxes.push(this.curves[this.curves.length-1].bbox()),this.curves[this.curves.length-1]):(this.curves[t]=new o.w(e),this.bboxes[t]=this.curves[t].bbox(),this.curves[t])}}const u=c},749:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(3452),i=n(7791),s=n(2635),a=n(7235),o=n(6492),c=n(1382);class u extends((0,i.A)(r.A)){static type="CustomGlass";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={p1:null,p2:null,eqn1:"0",eqn2:"0.5\\cdot\\sqrt{1-x^2}",refIndex:1.5,cauchyB:.004};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.categories.glass")),e.createEquation("",this.eqn1,(function(e,t){e.eqn1=t,delete e.path}),"<ul><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.constants")+"<br><code>pi e</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.operators")+"<br><code>+ - * / ^</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.functions")+"<br><code>sqrt sin cos tan sec csc cot sinh cosh tanh log exp arcsin arccos arctan arcsinh arccosh arctanh floor round ceil trunc sgn max min abs</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.module")+"</li></ul>"),e.createEquation(" < y < ",this.eqn2,(function(e,t){e.eqn2=t,delete e.path})),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return r.fillStyle="rgb(128,128,128)",void r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i);if(t)this.path&&this.drawGlass(e,t,n);else{if(!this.path&&!this.initPath())return r.fillStyle="red",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),void r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i);n&&(r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i)),this.drawGlass(e,t,n),this.error=null}}move(e,t){return super.move(e,t),delete this.path,!0}rotate(e,t=null){return super.rotate(e,t),delete this.path,!0}scale(e,t=null){return super.scale(e,t),delete this.path,!0}onConstructMouseDown(e,t,n){super.onConstructMouseDown(e,t,n),delete this.path}onConstructMouseMove(e,t,n){super.onConstructMouseMove(e,t,n),delete this.path}onConstructMouseUp(e,t,n){const r=super.onConstructMouseUp(e,t,n);return delete this.path,r}checkMouseOver(e){let t={};if(e.isOnPoint(this.p1)&&o.A.distanceSquared(e.pos,this.p1)<=o.A.distanceSquared(e.pos,this.p2))return t.part=1,t.targetPoint=o.A.point(this.p1.x,this.p1.y),t;if(e.isOnPoint(this.p2))return t.part=2,t.targetPoint=o.A.point(this.p2.x,this.p2.y),t;if(!this.path&&!this.initPath())return null;for(let n=0;n<this.path.length-1;n++)if(e.isOnSegment(o.A.line(this.path[n],this.path[(n+1)%this.path.length]))){const n=e.getPosSnappedToGrid();return t.part=0,t.mousePos0=n,t.mousePos1=n,t.snapContext={},t}return null}onDrag(e,t,n,r){super.onDrag(e,t,n,r),delete this.path}checkRayIntersects(e){if(this.path){if(this.refIndex<=0)return null}else if(!this.initPath()||this.refIndex<=0)return null;for(var t,n=1/0,r=null,i=null,s=-1,c=0;c<this.path.length;c++){i=null;var u=o.A.linesIntersection(o.A.line(e.p1,e.p2),o.A.line(this.path[c%this.path.length],this.path[(c+1)%this.path.length]));if(o.A.intersectionIsOnSegment(u,o.A.line(this.path[c%this.path.length],this.path[(c+1)%this.path.length]))&&o.A.intersectionIsOnRay(u,e)&&o.A.distanceSquared(e.p1,u)>a.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&(t=o.A.distanceSquared(e.p1,u),i=u),i){if(r&&o.A.distanceSquared(i,r)<a.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&s!=c-1)return null;t<n&&(n=t,r=i,s=c)}}return r?(this.tmp_i=s,r):null}onRayIncident(e,t,n,r){var i=this.getIncidentData(e),s=i.incidentType;if(1==s)var a=this.getRefIndexAt(n,e);else if(-1==s)a=1/this.getRefIndexAt(n,e);else{if(0!=s)return{isAbsorbed:!0,isUndefinedBehavior:!0};a=1}return this.refract(e,t,n,i.normal,a,r,e.bodyMergingObj)}getIncidentData(e){var t=this.tmp_i,n=this.path,r=o.A.linesIntersection(o.A.line(e.p1,e.p2),o.A.line(this.path[t%this.path.length],this.path[(t+1)%this.path.length])),i=r,s=(o.A.distanceSquared(e.p1,r),(e.p2.x-e.p1.x)*(this.path[(t+1)%this.path.length].x-this.path[t%this.path.length].x)+(e.p2.y-e.p1.y)*(this.path[(t+1)%this.path.length].y-this.path[t%this.path.length].y)),a=(e.p2.x-e.p1.x)*(this.path[(t+1)%this.path.length].y-this.path[t%this.path.length].y)-(e.p2.y-e.p1.y)*(this.path[(t+1)%this.path.length].x-this.path[t%this.path.length].x),c=(this.path[(t+1)%this.path.length].x-this.path[t%this.path.length].x)*(this.path[(t+1)%this.path.length].x-this.path[t%this.path.length].x)+(this.path[(t+1)%this.path.length].y-this.path[t%this.path.length].y)*(this.path[(t+1)%this.path.length].y-this.path[t%this.path.length].y),u=s*(this.path[(t+1)%this.path.length].x-this.path[t%this.path.length].x)-c*(e.p2.x-e.p1.x),l=s*(this.path[(t+1)%this.path.length].y-this.path[t%this.path.length].y)-c*(e.p2.y-e.p1.y);if(a<0)var h=1;else h=-1;var p,d,f=o.A.line(n[t%n.length],n[(t+1)%n.length]),m=(e.p1.x,i.x,e.p1.y,i.y,f.p2.x-f.p1.x),g=f.p2.y-f.p1.y;d=(p=Math.abs(m)>Math.abs(g)?(i.x-f.p1.x)/m:(i.y-f.p1.y)/g)<.5?o.A.line(n[(t-1+n.length)%n.length],n[t%n.length]):o.A.line(n[(t+1)%n.length],n[(t+2)%n.length]);var y,x,v=(e.p2.x-e.p1.x)*(d.p2.x-d.p1.x)+(e.p2.y-e.p1.y)*(d.p2.y-d.p1.y),b=(d.p2.x-d.p1.x)*(d.p2.x-d.p1.x)+(d.p2.y-d.p1.y)*(d.p2.y-d.p1.y),D=v*(d.p2.x-d.p1.x)-b*(e.p2.x-e.p1.x),w=v*(d.p2.y-d.p1.y)-b*(e.p2.y-e.p1.y);return p<.5?(y=u*(.5+p)+D*(.5-p),x=l*(.5+p)+w*(.5-p)):(y=D*(p-.5)+u*(1.5-p),x=w*(p-.5)+l*(1.5-p)),{s_point:r,normal:{x:y,y:x},incidentType:h}}getIncidentType(e){return this.getIncidentData(e).incidentType}drawGlass(e,t,n){const r=e.ctx;r.beginPath(),r.moveTo(this.path[0].x,this.path[0].y);for(var i=1;i<this.path.length;i++)r.lineTo(this.path[i].x,this.path[i].y);this.fillGlass(e,t,n)}initPath(){if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return delete this.path,!1;var e;try{e=[(0,c.y)(this.eqn1),(0,c.y)(this.eqn2)]}catch(e){return delete this.path,this.error=e.toString(),!1}this.path=[{x:this.p1.x,y:this.p1.y}];for(var t=0;t<=1;t++){var n,r=0==t?this.p1:this.p2,i=0==t?this.p2:this.p1,a=o.A.distance(r,i),u=[(i.x-r.x)/a,(i.y-r.y)/a],l=[u[1],-u[0]],h=a/2,p="",d=!1,f=!1;for(n=-.1000001*this.scene.lengthScale;n<a+.09*this.scene.lengthScale;n+=.1000001*this.scene.lengthScale){var m=n+.05*this.scene.lengthScale;m<0&&(m=0),m>a&&(m=a);var g,y=2*(m-h)/a;try{g=(0==t?1:-1)*e[t]({x:0==t?y:-y}),1==t&&-g<e[0]({x:-y})&&(p=s.Ay.t("simulator:sceneObjs.CustomGlass.curveGenerationError",{x:-y}),f=!0);var x=g*a*.5,v=o.A.point(r.x+u[0]*m+l[0]*x,r.y+u[1]*m+l[1]*x);this.path.push(v),d=!0}catch(e){p=e}}if(!d||f)return delete this.path,this.error=p.toString(),!1}return this.error=null,!0}}const l=u},6672:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(3452),i=n(2635),s=n(7235),a=n(6492);class o extends r.A{static type="Glass";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={path:[],notDone:!1,refIndex:1.5,cauchyB:.004};populateObjBar(e){e.setTitle(i.Ay.t("main:tools.categories.glass")),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;var s,o,c,u,l,h,p,d,f;if(this.notDone){if(2===this.path.length&&this.path[0].x===this.path[1].x&&this.path[0].y===this.path[1].y)return r.fillStyle="rgb(255,0,0)",void r.fillRect(this.path[0].x-1.5*i,this.path[0].y-1.5*i,3*i,3*i);r.beginPath(),r.moveTo(this.path[0].x,this.path[0].y);for(var m=0;m<this.path.length-1;m++)this.path[m+1].arc&&!this.path[m].arc&&m<this.path.length-2?(s=a.A.point(this.path[m].x,this.path[m].y),o=a.A.point(this.path[m+2].x,this.path[m+2].y),c=a.A.point(this.path[m+1].x,this.path[m+1].y),u=a.A.linesIntersection(a.A.perpendicularBisector(a.A.line(s,c)),a.A.perpendicularBisector(a.A.line(o,c))),isFinite(u.x)&&isFinite(u.y)?(l=a.A.distance(u,c),h=Math.atan2(s.y-u.y,s.x-u.x),f=(p=Math.atan2(o.y-u.y,o.x-u.x))<(d=Math.atan2(c.y-u.y,c.x-u.x))&&d<h||h<p&&p<d||d<h&&h<p,r.arc(u.x,u.y,l,h,p,f)):r.lineTo(this.path[m+2].x,this.path[m+2].y)):r.lineTo(this.path[m+1].x,this.path[m+1].y);r.globalAlpha=1,r.strokeStyle="rgb(128,128,128)",r.lineWidth=1*i,r.stroke()}else{for(r.beginPath(),r.moveTo(this.path[0].x,this.path[0].y),m=0;m<this.path.length;m++)this.path[(m+1)%this.path.length].arc&&!this.path[m%this.path.length].arc?(s=a.A.point(this.path[m%this.path.length].x,this.path[m%this.path.length].y),o=a.A.point(this.path[(m+2)%this.path.length].x,this.path[(m+2)%this.path.length].y),c=a.A.point(this.path[(m+1)%this.path.length].x,this.path[(m+1)%this.path.length].y),u=a.A.linesIntersection(a.A.perpendicularBisector(a.A.line(s,c)),a.A.perpendicularBisector(a.A.line(o,c))),isFinite(u.x)&&isFinite(u.y)?(l=a.A.distance(u,c),h=Math.atan2(s.y-u.y,s.x-u.x),f=(p=Math.atan2(o.y-u.y,o.x-u.x))<(d=Math.atan2(c.y-u.y,c.x-u.x))&&d<h||h<p&&p<d||d<h&&h<p,r.arc(u.x,u.y,l,h,p,f)):r.lineTo(this.path[(m+2)%this.path.length].x,this.path[(m+2)%this.path.length].y)):this.path[(m+1)%this.path.length].arc||this.path[m%this.path.length].arc||r.lineTo(this.path[(m+1)%this.path.length].x,this.path[(m+1)%this.path.length].y);this.fillGlass(e,t,n)}if(r.lineWidth=1,n)for(m=0;m<this.path.length;m++)void 0!==this.path[m].arc&&(this.path[m].arc?(r.fillStyle="rgb(255,0,255)",r.fillRect(this.path[m].x-1.5*i,this.path[m].y-1.5*i,3*i,3*i)):(r.fillStyle="rgb(255,0,0)",r.fillRect(this.path[m].x-1.5*i,this.path[m].y-1.5*i,3*i,3*i)))}move(e,t){for(var n=0;n<this.path.length;n++)this.path[n].x+=e,this.path[n].y+=t;return!0}rotate(e,t=null){t=t||this.getDefaultCenter();const n=Math.cos(e),r=Math.sin(e);for(var i=0;i<this.path.length;i++){const e=this.path[i].x-t.x,s=this.path[i].y-t.y;this.path[i].x=t.x+e*n-s*r,this.path[i].y=t.y+e*r+s*n}return!0}scale(e,t=null){t=t||this.getDefaultCenter();for(var n=0;n<this.path.length;n++)this.path[n].x=t.x+(this.path[n].x-t.x)*e,this.path[n].y=t.y+(this.path[n].y-t.y)*e;return!0}getDefaultCenter(){if(0===this.path.length)return{x:0,y:0};let e=0,t=0;for(var n=0;n<this.path.length;n++)e+=this.path[n].x,t+=this.path[n].y;return{x:e/this.path.length,y:t/this.path.length}}onConstructMouseDown(e,t,n){const r=e.getPosSnappedToGrid();if(this.notDone||(this.notDone=!0,this.path=[{x:r.x,y:r.y,arc:!1}]),this.path.length>1){if(this.path.length>3&&e.snapsOnPoint(this.path[0]))return this.path.length--,void(this.notDone=!1);this.path[this.path.length-1]={x:r.x,y:r.y},this.path[this.path.length-1].arc=!0}}onConstructMouseMove(e,t,n){if(!this.notDone)return;const r=e.getPosSnappedToGrid();void 0!==this.path[this.path.length-1].arc?this.path[this.path.length-1].arc&&Math.sqrt(Math.pow(this.path[this.path.length-1].x-r.x,2)+Math.pow(this.path[this.path.length-1].y-r.y,2))>=5*this.scene.lengthScale&&(this.path[this.path.length]=r):this.path[this.path.length-1]={x:r.x,y:r.y}}onConstructMouseUp(e,t,n){if(!this.notDone)return{isDone:!0};if(this.path.length>3&&e.snapsOnPoint(this.path[0]))return this.path.length--,this.notDone=!1,{isDone:!0};if(this.path[this.path.length-2]&&!this.path[this.path.length-2].arc&&e.snapsOnPoint(this.path[this.path.length-2]))delete this.path[this.path.length-1].arc;else{const t=e.getPosSnappedToGrid();this.path[this.path.length-1]={x:t.x,y:t.y},this.path[this.path.length-1].arc=!1,this.path[this.path.length]={x:t.x,y:t.y}}}onConstructUndo(){if(this.path.length<=2)return{isCancelled:!0};this.path.pop(),this.path[this.path.length-2].arc&&this.path.pop(),delete this.path[this.path.length-1].arc}checkMouseOver(e){let t={};for(var n,r,i,s,o,c,u,l,h,p=1/0,d=-1,f=0;f<this.path.length;f++)e.isOnPoint(this.path[f])&&(h=a.A.distanceSquared(e.pos,this.path[f]))<=p&&(p=h,d=f);if(-1!=d)return t.part=1,t.index=d,t.targetPoint=a.A.point(this.path[d].x,this.path[d].y),t;for(f=0;f<this.path.length;f++)if(this.path[(f+1)%this.path.length].arc&&!this.path[f%this.path.length].arc){if(n=a.A.point(this.path[f%this.path.length].x,this.path[f%this.path.length].y),r=a.A.point(this.path[(f+2)%this.path.length].x,this.path[(f+2)%this.path.length].y),i=a.A.point(this.path[(f+1)%this.path.length].x,this.path[(f+1)%this.path.length].y),s=a.A.linesIntersection(a.A.perpendicularBisector(a.A.line(n,i)),a.A.perpendicularBisector(a.A.line(r,i))),isFinite(s.x)&&isFinite(s.y)){o=a.A.distance(s,i),c=Math.atan2(n.y-s.y,n.x-s.x),u=Math.atan2(r.y-s.y,r.x-s.x),l=Math.atan2(i.y-s.y,i.x-s.x);var m=Math.atan2(e.pos.y-s.y,e.pos.x-s.x);if(Math.abs(a.A.distance(s,e.pos)-o)<e.getClickExtent()&&(u<l&&l<c||c<u&&u<l||l<c&&c<u)==(u<m&&m<c||c<u&&u<m||m<c&&c<u)){const n=e.getPosSnappedToGrid();return t.part=0,t.mousePos0=n,t.mousePos1=n,t.snapContext={},t}}else if(e.isOnSegment(a.A.line(this.path[f%this.path.length],this.path[(f+2)%this.path.length]))){const n=e.getPosSnappedToGrid();return t.part=0,t.mousePos0=n,t.mousePos1=n,t.snapContext={},t}}else if(!this.path[(f+1)%this.path.length].arc&&!this.path[f%this.path.length].arc&&e.isOnSegment(a.A.line(this.path[f%this.path.length],this.path[(f+1)%this.path.length]))){const n=e.getPosSnappedToGrid();return t.part=0,t.mousePos0=n,t.mousePos1=n,t.snapContext={},t}}onDrag(e,t,n,r){const i=e.getPosSnappedToGrid();if(1==t.part&&(this.path[t.index].x=i.x,this.path[t.index].y=i.y),0==t.part){if(r)var s=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1}],t.snapContext);else s=e.getPosSnappedToGrid(),t.snapContext={};this.move(s.x-t.mousePos1.x,s.y-t.mousePos1.y),t.mousePos1=s}}checkRayIntersects(e){if(!(this.notDone||this.refIndex<=0)){for(var t,n,r,i,o,c=1/0,u=null,l=null,h=[],p=[],d=0;d<this.path.length;d++){if(l=null,this.path[(d+1)%this.path.length].arc&&!this.path[d%this.path.length].arc)if(n=a.A.point(this.path[d%this.path.length].x,this.path[d%this.path.length].y),r=a.A.point(this.path[(d+2)%this.path.length].x,this.path[(d+2)%this.path.length].y),i=a.A.point(this.path[(d+1)%this.path.length].x,this.path[(d+1)%this.path.length].y),o=a.A.linesIntersection(a.A.perpendicularBisector(a.A.line(n,i)),a.A.perpendicularBisector(a.A.line(r,i))),isFinite(o.x)&&isFinite(o.y)){a.A.distance(o,i),m=a.A.lineCircleIntersections(a.A.line(e.p1,e.p2),a.A.circle(o,r));for(var f=1;f<=2;f++)h[f]=!a.A.intersectionIsOnSegment(a.A.linesIntersection(a.A.line(n,r),a.A.line(i,m[f])),a.A.line(i,m[f]))&&a.A.intersectionIsOnRay(m[f],e)&&a.A.distanceSquared(m[f],e.p1)>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale,p[f]=a.A.distanceSquared(e.p1,m[f]);h[1]&&(!h[2]||p[1]<p[2])&&p[1]>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&(l=m[1],t=p[1]),h[2]&&(!h[1]||p[2]<p[1])&&p[2]>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&(l=m[2],t=p[2])}else{var m=a.A.linesIntersection(a.A.line(e.p1,e.p2),a.A.line(this.path[d%this.path.length],this.path[(d+2)%this.path.length]));a.A.intersectionIsOnSegment(m,a.A.line(this.path[d%this.path.length],this.path[(d+2)%this.path.length]))&&a.A.intersectionIsOnRay(m,e)&&a.A.distanceSquared(e.p1,m)>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&(t=a.A.distanceSquared(e.p1,m),l=m)}else this.path[(d+1)%this.path.length].arc||this.path[d%this.path.length].arc||(m=a.A.linesIntersection(a.A.line(e.p1,e.p2),a.A.line(this.path[d%this.path.length],this.path[(d+1)%this.path.length])),a.A.intersectionIsOnSegment(m,a.A.line(this.path[d%this.path.length],this.path[(d+1)%this.path.length]))&&a.A.intersectionIsOnRay(m,e)&&a.A.distanceSquared(e.p1,m)>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&(t=a.A.distanceSquared(e.p1,m),l=m));l&&t<c&&(c=t,u=l)}return u||void 0}}onRayIncident(e,t,n,r){if(!this.notDone){var i=this.getIncidentData(e),s=i.incidentType;if(1==s)var a=this.getRefIndexAt(n,e);else if(-1==s)a=1/this.getRefIndexAt(n,e);else{if(0!=s)return{isAbsorbed:!0,isUndefinedBehavior:!0};a=1}return this.refract(e,t,n,i.normal,a,r,e.bodyMergingObj)}}getIncidentType(e){return this.getIncidentData(e).incidentType}getIncidentData(e){for(var t,n,r,i,o,c,u,l,h,p,d,f,m,g=1/0,y=null,x=null,v=1,b=[],D=[],w=[],A=[],S=[],N=!1,C=!1,E=a.A.line(e.p1,a.A.point(e.p2.x+1e-5*this.scene.rng(),e.p2.y+1e-5*this.scene.rng())),M=0,T=0;T<this.path.length;T++){if(x=null,C=!1,this.path[(T+1)%this.path.length].arc&&!this.path[T%this.path.length].arc)if(p=a.A.point(this.path[T%this.path.length].x,this.path[T%this.path.length].y),d=a.A.point(this.path[(T+2)%this.path.length].x,this.path[(T+2)%this.path.length].y),f=a.A.point(this.path[(T+1)%this.path.length].x,this.path[(T+1)%this.path.length].y),m=a.A.linesIntersection(a.A.perpendicularBisector(a.A.line(p,f)),a.A.perpendicularBisector(a.A.line(d,f))),isFinite(m.x)&&isFinite(m.y)){n=a.A.lineCircleIntersections(a.A.line(e.p1,e.p2),a.A.circle(m,d)),r=a.A.lineCircleIntersections(a.A.line(E.p1,E.p2),a.A.circle(m,d));for(var O=1;O<=2;O++)b[O]=a.A.intersectionIsOnRay(n[O],e),D[O]=b[O]&&!a.A.intersectionIsOnSegment(a.A.linesIntersection(a.A.line(p,d),a.A.line(f,n[O])),a.A.line(f,n[O]))&&a.A.distanceSquared(n[O],e.p1)>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale,w[O]=a.A.distanceSquared(e.p1,n[O]),A[O]=!a.A.intersectionIsOnSegment(a.A.linesIntersection(a.A.line(p,d),a.A.line(f,r[O])),a.A.line(f,r[O]))&&a.A.intersectionIsOnRay(r[O],E)&&a.A.distanceSquared(r[O],E.p1)>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale,S[O]=a.A.distanceSquared(E.p1,r[O]);D[1]&&(!D[2]||w[1]<w[2])&&w[1]>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&(x=n[1],t=w[1],b[2]&&w[1]<w[2]?(o=x.x-m.x,u=x.y-m.y):(o=m.x-x.x,u=m.y-x.y)),D[2]&&(!D[1]||w[2]<w[1])&&w[2]>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&(x=n[2],t=w[2],b[1]&&w[2]<w[1]?(o=x.x-m.x,u=x.y-m.y):(o=m.x-x.x,u=m.y-x.y)),A[1]&&S[1]>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&M++,A[2]&&S[2]>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&M++,x&&(a.A.distanceSquared(x,p)<s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale||a.A.distanceSquared(x,d)<s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale)&&(C=!0)}else n=a.A.linesIntersection(a.A.line(e.p1,e.p2),a.A.line(this.path[T%this.path.length],this.path[(T+2)%this.path.length])),r=a.A.linesIntersection(a.A.line(E.p1,E.p2),a.A.line(this.path[T%this.path.length],this.path[(T+2)%this.path.length])),a.A.intersectionIsOnSegment(n,a.A.line(this.path[T%this.path.length],this.path[(T+2)%this.path.length]))&&a.A.intersectionIsOnRay(n,e)&&a.A.distanceSquared(e.p1,n)>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&(t=a.A.distanceSquared(e.p1,n),x=n,l=(e.p2.x-e.p1.x)*(this.path[(T+2)%this.path.length].x-this.path[T%this.path.length].x)+(e.p2.y-e.p1.y)*(this.path[(T+2)%this.path.length].y-this.path[T%this.path.length].y),h=(this.path[(T+2)%this.path.length].x-this.path[T%this.path.length].x)*(this.path[(T+2)%this.path.length].x-this.path[T%this.path.length].x)+(this.path[(T+2)%this.path.length].y-this.path[T%this.path.length].y)*(this.path[(T+2)%this.path.length].y-this.path[T%this.path.length].y),o=l*(this.path[(T+2)%this.path.length].x-this.path[T%this.path.length].x)-h*(e.p2.x-e.p1.x),u=l*(this.path[(T+2)%this.path.length].y-this.path[T%this.path.length].y)-h*(e.p2.y-e.p1.y)),a.A.intersectionIsOnSegment(r,a.A.line(this.path[T%this.path.length],this.path[(T+2)%this.path.length]))&&a.A.intersectionIsOnRay(r,E)&&a.A.distanceSquared(E.p1,r)>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&M++,x&&(a.A.distanceSquared(x,this.path[T%this.path.length])<s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale||a.A.distanceSquared(x,this.path[(T+2)%this.path.length])<s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale)&&(C=!0);else this.path[(T+1)%this.path.length].arc||this.path[T%this.path.length].arc||(n=a.A.linesIntersection(a.A.line(e.p1,e.p2),a.A.line(this.path[T%this.path.length],this.path[(T+1)%this.path.length])),r=a.A.linesIntersection(a.A.line(E.p1,E.p2),a.A.line(this.path[T%this.path.length],this.path[(T+1)%this.path.length])),a.A.intersectionIsOnSegment(n,a.A.line(this.path[T%this.path.length],this.path[(T+1)%this.path.length]))&&a.A.intersectionIsOnRay(n,e)&&a.A.distanceSquared(e.p1,n)>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&(t=a.A.distanceSquared(e.p1,n),x=n,l=(e.p2.x-e.p1.x)*(this.path[(T+1)%this.path.length].x-this.path[T%this.path.length].x)+(e.p2.y-e.p1.y)*(this.path[(T+1)%this.path.length].y-this.path[T%this.path.length].y),h=(this.path[(T+1)%this.path.length].x-this.path[T%this.path.length].x)*(this.path[(T+1)%this.path.length].x-this.path[T%this.path.length].x)+(this.path[(T+1)%this.path.length].y-this.path[T%this.path.length].y)*(this.path[(T+1)%this.path.length].y-this.path[T%this.path.length].y),o=l*(this.path[(T+1)%this.path.length].x-this.path[T%this.path.length].x)-h*(e.p2.x-e.p1.x),u=l*(this.path[(T+1)%this.path.length].y-this.path[T%this.path.length].y)-h*(e.p2.y-e.p1.y)),a.A.intersectionIsOnSegment(r,a.A.line(this.path[T%this.path.length],this.path[(T+1)%this.path.length]))&&a.A.intersectionIsOnRay(r,E)&&a.A.distanceSquared(E.p1,r)>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&M++,x&&(a.A.distanceSquared(x,this.path[T%this.path.length])<s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale||a.A.distanceSquared(x,this.path[(T+1)%this.path.length])<s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale)&&(C=!0));x&&(y&&a.A.distanceSquared(x,y)<s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale?v++:t<g&&(g=t,y=x,i=o,c=u,N=C,v=1))}if(N)var P=NaN;else P=v%2==0?0:M%2==1?1:-1;return{s_point:y,normal:{x:i,y:c},incidentType:P}}}const c=o},1762:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(3998),i=n(2635),s=n(7235),a=n(6492);class o extends r.A{static type="GrinGlass";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={path:[],notDone:!1,refIndexFn:"1.1+0.1\\cdot\\cos\\left(0.1\\cdot y\\right)",absorptionFn:"0",origin:{x:0,y:0},stepSize:1,intersectTol:.001};populateObjBar(e){e.setTitle(i.Ay.t("main:tools.GrinGlass.title")),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.notDone){if(2===this.path.length&&this.path[0].x===this.path[1].x&&this.path[0].y===this.path[1].y)return r.fillStyle="rgb(255,0,0)",void r.fillRect(this.path[0].x-1.5*i,this.path[0].y-1.5*i,3*i,3*i);r.beginPath(),r.moveTo(this.path[0].x,this.path[0].y);for(var s=0;s<this.path.length-1;s++)r.lineTo(this.path[s+1].x,this.path[s+1].y);r.globalAlpha=1,r.strokeStyle="rgb(128,128,128)",r.lineWidth=1*i,r.stroke()}else{for(r.beginPath(),r.moveTo(this.path[0].x,this.path[0].y),s=0;s<this.path.length;s++)r.lineTo(this.path[(s+1)%this.path.length].x,this.path[(s+1)%this.path.length].y);this.fillGlass(e,t,n)}if(r.lineWidth=1,n)for(s=0;s<this.path.length;s++)r.fillStyle="rgb(255,0,0)",r.fillRect(this.path[s].x-1.5*i,this.path[s].y-1.5*i,3*i,3*i)}move(e,t){for(var n=0;n<this.path.length;n++)this.path[n].x+=e,this.path[n].y+=t;return!1}rotate(e,t=null){t=t||this.getDefaultCenter();const n=Math.cos(e),r=Math.sin(e);for(var i=0;i<this.path.length;i++){const e=this.path[i].x-t.x,s=this.path[i].y-t.y;this.path[i].x=t.x+e*n-s*r,this.path[i].y=t.y+e*r+s*n}return!1}scale(e,t=null){t=t||this.getDefaultCenter();for(var n=0;n<this.path.length;n++)this.path[n].x=t.x+(this.path[n].x-t.x)*e,this.path[n].y=t.y+(this.path[n].y-t.y)*e;return!1}getDefaultCenter(){if(0===this.path.length)return{x:0,y:0};let e=0,t=0;for(var n=0;n<this.path.length;n++)e+=this.path[n].x,t+=this.path[n].y;return{x:e/this.path.length,y:t/this.path.length}}onConstructMouseDown(e,t,n){const r=e.getPosSnappedToGrid();if(this.notDone||(this.notDone=!0,this.path=[{x:r.x,y:r.y}]),this.path.length>3&&e.snapsOnPoint(this.path[0]))return this.path.length--,this.notDone=!1,{isDone:!0};this.path.push({x:r.x,y:r.y})}onConstructMouseMove(e,t,n){const r=e.getPosSnappedToGrid();this.path[this.path.length-1]={x:r.x,y:r.y}}onConstructUndo(){if(this.path.length<=2)return{isCancelled:!0};this.path.pop()}checkMouseOver(e){let t={};for(var n,r=1/0,i=-1,s=0;s<this.path.length;s++)e.isOnPoint(this.path[s])&&(n=a.A.distanceSquared(e.pos,this.path[s]))<=r&&(r=n,i=s);if(-1!=i)return t.part=1,t.index=i,t.targetPoint=a.A.point(this.path[i].x,this.path[i].y),t;for(s=0;s<this.path.length;s++)if(e.isOnSegment(a.A.line(this.path[s%this.path.length],this.path[(s+1)%this.path.length]))){const n=e.getPosSnappedToGrid();return t.part=0,t.mousePos0=n,t.mousePos1=n,t.snapContext={},t}}onDrag(e,t,n,r){const i=e.getPosSnappedToGrid();if(1==t.part&&(this.path[t.index].x=i.x,this.path[t.index].y=i.y),0==t.part){if(r)var s=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1}],t.snapContext);else s=e.getPosSnappedToGrid(),t.snapContext={};this.move(s.x-t.mousePos1.x,s.y-t.mousePos1.y),t.mousePos1=s}}checkRayIntersects(e){if(!this.notDone){if(this.fn_p||this.initFns(),this.isInsideGlass(e.p1)||this.isOnBoundary(e.p1)){let t=a.A.distance(e.p1,e.p2),n=e.p1.x+this.stepSize/t*(e.p2.x-e.p1.x),r=e.p1.y+this.stepSize/t*(e.p2.y-e.p1.y);const i=a.A.point(n,r);if(this.isInsideGlass(i))return i}for(var t,n=1/0,r=null,i=null,o=0;o<this.path.length;o++){i=null;var c=a.A.linesIntersection(a.A.line(e.p1,e.p2),a.A.line(this.path[o%this.path.length],this.path[(o+1)%this.path.length]));a.A.intersectionIsOnSegment(c,a.A.line(this.path[o%this.path.length],this.path[(o+1)%this.path.length]))&&a.A.intersectionIsOnRay(c,e)&&a.A.distanceSquared(e.p1,c)>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&(t=a.A.distanceSquared(e.p1,c),i=c),i&&t<n&&(n=t,r=i)}return r||void 0}}onRayIncident(e,t,n,r){if(!this.fn_p)return{isAbsorbed:!0};try{if(this.error=null,(this.isInsideGlass(e.p1)||this.isOutsideGlass(e.p1))&&this.isOnBoundary(n)){let o=e.bodyMergingObj;var i=this.getIncidentData(e),s=i.incidentType;if(1==s){var a=this.getRefIndexAt(n,e);this.onRayExit(e)}else if(-1==s)a=1/this.getRefIndexAt(n,e),this.onRayEnter(e);else{if(0!=s)return{isAbsorbed:!0,isUndefinedBehavior:!0};a=1}return this.refract(e,t,i.s_point,i.normal,a,r,o)}{void 0===e.bodyMergingObj&&(e.bodyMergingObj=this.initRefIndex(e));const t=this.step(e.p1,n,e);e.p1=n,e.p2=t}}catch(e){return this.error=e.toString(),{isAbsorbed:!0}}}getIncidentType(e){return this.getIncidentData(e).incidentType}isOutsideGlass(e){return!this.isOnBoundary(e)&&this.countIntersections(e)%2==0}isInsideGlass(e){return!this.isOnBoundary(e)&&this.countIntersections(e)%2==1}isOnBoundary(e){for(let t=0;t<this.path.length;t++){let n=this.path[t],r=this.path[(t+1)%this.path.length],i=a.A.point(r.x-n.x,r.y-n.y),s=a.A.point(e.x-n.x,e.y-n.y);if(a.A.cross(i,s)-this.intersectTol<0&&a.A.cross(i,s)+this.intersectTol>0){let e=a.A.dot(i,s);if(a.A.distanceSquared(n,r)-e+this.intersectTol>=0&&e+this.intersectTol>=0)return!0}}return!1}getIncidentData(e){for(var t,n,r,i,o,c,u,l,h,p=1/0,d=null,f=null,m=1,g=!1,y=!1,x=a.A.line(e.p1,a.A.point(e.p2.x+1e-5*this.scene.rng(),e.p2.y+1e-5*this.scene.rng())),v=0,b=0;b<this.path.length;b++)f=null,y=!1,n=a.A.linesIntersection(a.A.line(e.p1,e.p2),a.A.line(this.path[b%this.path.length],this.path[(b+1)%this.path.length])),r=a.A.linesIntersection(a.A.line(x.p1,x.p2),a.A.line(this.path[b%this.path.length],this.path[(b+1)%this.path.length])),a.A.intersectionIsOnSegment(n,a.A.line(this.path[b%this.path.length],this.path[(b+1)%this.path.length]))&&a.A.intersectionIsOnRay(n,e)&&a.A.distanceSquared(e.p1,n)>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&(t=a.A.distanceSquared(e.p1,n),f=n,l=(e.p2.x-e.p1.x)*(this.path[(b+1)%this.path.length].x-this.path[b%this.path.length].x)+(e.p2.y-e.p1.y)*(this.path[(b+1)%this.path.length].y-this.path[b%this.path.length].y),h=(this.path[(b+1)%this.path.length].x-this.path[b%this.path.length].x)*(this.path[(b+1)%this.path.length].x-this.path[b%this.path.length].x)+(this.path[(b+1)%this.path.length].y-this.path[b%this.path.length].y)*(this.path[(b+1)%this.path.length].y-this.path[b%this.path.length].y),o=l*(this.path[(b+1)%this.path.length].x-this.path[b%this.path.length].x)-h*(e.p2.x-e.p1.x),u=l*(this.path[(b+1)%this.path.length].y-this.path[b%this.path.length].y)-h*(e.p2.y-e.p1.y)),a.A.intersectionIsOnSegment(r,a.A.line(this.path[b%this.path.length],this.path[(b+1)%this.path.length]))&&a.A.intersectionIsOnRay(r,x)&&a.A.distanceSquared(x.p1,r)>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale&&v++,f&&(a.A.distanceSquared(f,this.path[b%this.path.length])<s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale||a.A.distanceSquared(f,this.path[(b+1)%this.path.length])<s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale)&&(y=!0),f&&(d&&a.A.distanceSquared(f,d)<s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale?m++:t<p&&(p=t,d=f,i=o,c=u,g=y,m=1));if(g)var D=NaN;else D=m%2==0?0:v%2==1?1:-1;return{s_point:d,normal:{x:i,y:c},incidentType:D}}countIntersections(e){var t=0;for(let n=0;n<this.path.length;n++){let r=this.path[n],i=this.path[(n+1)%this.path.length],s=Math.max(r.y,i.y),a=Math.min(r.y,i.y);s-e.y-this.intersectTol>0&&s-e.y+this.intersectTol>0&&a-e.y-this.intersectTol<0&&a-e.y+this.intersectTol<0&&(r.x==i.x&&r.x-e.x+this.intersectTol>0&&r.x-e.x-this.intersectTol>0||r.x+(e.y-r.y)/(i.y-r.y)*(i.x-r.x)-e.x-this.intersectTol>0&&r.x+(e.y-r.y)/(i.y-r.y)*(i.x-r.x)-e.x+this.intersectTol>0)&&t++}return t}}const c=o},5705:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(867),i=n(7791),s=n(2635),a=n(6492);class o extends((0,i.A)(r.A)){static type="IdealLens";static isOptical=!0;static serializableDefaults={p1:null,p2:null,focalLength:100};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.IdealLens.title")),e.createNumber(s.Ay.t("simulator:sceneObjs.common.focalLength"),-1e3*this.scene.lengthScale,1e3*this.scene.lengthScale,1*this.scene.lengthScale,this.focalLength,(function(e,t){e.focalLength=t}),s.Ay.t("simulator:sceneObjs.common.lengthUnitInfo"))}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return r.fillStyle="rgb(128,128,128)",void r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i);var s=Math.sqrt((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y)),o=(this.p2.x-this.p1.x)/s,c=(this.p2.y-this.p1.y)/s,u=c,l=-o,h=this.scene.theme.idealCurveArrow.size/2*i,p=this.scene.theme.idealCurveArrow.size/2*i,d=this.scene.theme.idealCurveArrow.size/5*i;r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor([(this.scene.theme.glass.color.r+this.scene.theme.background.color.r)/2,(this.scene.theme.glass.color.g+this.scene.theme.background.color.g)/2,(this.scene.theme.glass.color.b+this.scene.theme.background.color.b)/2,1]),r.globalAlpha=1/(Math.abs(this.focalLength/this.scene.lengthScale)/100+1),r.lineWidth=this.scene.theme.idealCurveArrow.size/5*2*i,r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke(),r.lineWidth=1*i,r.globalAlpha=1,r.fillStyle=e.rgbaToCssColor(this.scene.theme.idealCurveArrow.color);var f=a.A.segmentMidpoint(this);if(r.strokeStyle=e.rgbaToCssColor(this.scene.theme.idealCurveCenter.color),r.beginPath(),r.moveTo(f.x-u*d,f.y-l*d),r.lineTo(f.x+u*d,f.y+l*d),r.stroke(),this.focalLength>0&&(r.beginPath(),r.moveTo(this.p1.x-o*p,this.p1.y-c*p),r.lineTo(this.p1.x+o*p+u*h,this.p1.y+c*p+l*h),r.lineTo(this.p1.x+o*p-u*h,this.p1.y+c*p-l*h),r.fill(),r.beginPath(),r.moveTo(this.p2.x+o*p,this.p2.y+c*p),r.lineTo(this.p2.x-o*p+u*h,this.p2.y-c*p+l*h),r.lineTo(this.p2.x-o*p-u*h,this.p2.y-c*p-l*h),r.fill()),this.focalLength<0&&(r.beginPath(),r.moveTo(this.p1.x+o*p,this.p1.y+c*p),r.lineTo(this.p1.x-o*p+u*h,this.p1.y-c*p+l*h),r.lineTo(this.p1.x-o*p-u*h,this.p1.y-c*p-l*h),r.fill(),r.beginPath(),r.moveTo(this.p2.x-o*p,this.p2.y-c*p),r.lineTo(this.p2.x+o*p+u*h,this.p2.y+c*p+l*h),r.lineTo(this.p2.x+o*p-u*h,this.p2.y+c*p-l*h),r.fill()),n){var m=a.A.segmentMidpoint(this);r.fillStyle="rgb(255,0,255)",r.fillRect(m.x+this.focalLength*u-1.5*i,m.y+this.focalLength*l-1.5*i,3*i,3*i),r.fillRect(m.x-this.focalLength*u-1.5*i,m.y-this.focalLength*l-1.5*i,3*i,3*i)}}scale(e,t){return super.scale(e,t),this.focalLength*=e,!0}checkRayIntersects(e){return this.checkRayIntersectsShape(e)}onRayIncident(e,t,n){var r,i,s=a.A.segmentLength(this),o=(-this.p1.y+this.p2.y)/s,c=(this.p1.x-this.p2.x)/s,u=a.A.segmentMidpoint(this),l=a.A.point(u.x+2*o*this.focalLength,u.y+2*c*this.focalLength),h=a.A.point(u.x-2*o*this.focalLength,u.y-2*c*this.focalLength);a.A.distanceSquared(e.p1,l)<a.A.distanceSquared(e.p1,h)?(r=a.A.parallelLineThroughPoint(this,l),i=a.A.parallelLineThroughPoint(this,h)):(r=a.A.parallelLineThroughPoint(this,h),i=a.A.parallelLineThroughPoint(this,l)),this.focalLength>0?(e.p2=a.A.linesIntersection(i,a.A.line(u,a.A.linesIntersection(r,e))),e.p1=n):(e.p2=a.A.linesIntersection(i,a.A.line(n,a.A.linesIntersection(r,a.A.line(u,a.A.linesIntersection(i,e))))),e.p1=n)}}const c=o},2881:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(3452),i=n(8753),s=n(2635),a=n(7235),o=n(6492);class c extends((0,i.A)(r.A)){static type="ParamGlass";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={origin:{x:0,y:0},pieces:[{eqnX:"50\\cdot\\cos\\left(t\\right)",eqnY:"50\\cdot\\sin\\left(t\\right)",tMin:0,tMax:2*Math.PI,tStep:.01}],refIndex:1.5,cauchyB:.004};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.categories.glass")),e.createInfoBox("<ul><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.constants")+"<br><code>pi e</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.operators")+"<br><code>+ - * / ^</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.functions")+"<br><code>sqrt sin cos tan sec csc cot sinh cosh tanh log exp arcsin arccos arctan arcsinh arccosh arctanh floor round ceil trunc sgn max min abs</code></li><li>"+s.Ay.t("simulator:sceneObjs.ParamGlass.eqnInfo.closedAndPositivelyOriented")+"</li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.module")+"</li></ul>"),this.populateObjBarShape(e),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(!this.path&&!this.initPath())return r.fillStyle="red",void r.fillRect(this.origin.x-1.5*i,this.origin.y-1.5*i,3*i,3*i);let s=!1;if(this.path.length<2)s=!0;else{const e=this.path[0];let t=!0;for(let n=1;n<this.path.length;n++)if(Math.abs(this.path[n].x-e.x)>1e-10||Math.abs(this.path[n].y-e.y)>1e-10){t=!1;break}s=t}if(s)return r.fillStyle=n?"rgb(255,0,0)":"rgb(128,128,128)",void r.fillRect(this.origin.x-1.5*i,this.origin.y-1.5*i,3*i,3*i);this.path&&this.path.length>2&&(this.drawPath(e),this.fillGlass(e,t,n))}checkRayIntersects(e){if(this.refIndex<=0)return null;var t=this.getIncidentData(e);return NaN!==t.incidentType&&t.s_point?t.s_point:NaN===t.incidentType?{isAbsorbed:!0,isUndefinedBehavior:!0}:null}onRayIncident(e,t,n,r){var i=this.getIncidentData(e),s=i.incidentType;if(1===s)var a=this.getRefIndexAt(n,e);else if(-1===s)a=1/this.getRefIndexAt(n,e);else{if(0!==s)return{isAbsorbed:!0,isUndefinedBehavior:!0};a=1}return this.refract(e,t,n,i.normal,a,r,e.bodyMergingObj)}getIncidentData(e){const t=this.getRayIntersections(e);if(0===t.length)return{s_point:null,normal:{x:NaN,y:NaN},incidentType:0};t.sort(((t,n)=>o.A.distanceSquared(e.p1,t.s_point)-o.A.distanceSquared(e.p1,n.s_point)));const n=a.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale;for(let e=0;e<t.length;e++){const r=t[e];if(isNaN(r.incidentType))return{s_point:r.s_point,normal:r.normal,incidentType:NaN};const i=t.filter(((t,i)=>i!==e&&o.A.distanceSquared(r.s_point,t.s_point)<n));if(0===i.length)return{s_point:r.s_point,normal:r.normal,incidentType:r.incidentType};if(1===i.length){const e=i[0];if(1===r.incidentType&&-1===e.incidentType||-1===r.incidentType&&1===e.incidentType)continue;return{s_point:r.s_point,normal:r.normal,incidentType:NaN}}return{s_point:r.s_point,normal:r.normal,incidentType:NaN}}return{s_point:null,normal:{x:NaN,y:NaN},incidentType:0}}getIncidentType(e){return this.getIncidentData(e).incidentType}validateCurve(){this.isClosed()?this.isPositivelyOriented()?this.warning=null:this.warning=s.Ay.t("simulator:sceneObjs.ParamGlass.warning.notPositivelyOriented"):this.warning=s.Ay.t("simulator:sceneObjs.ParamGlass.warning.notClosed")}initPath(){const e=super.initPath();return e&&this.validateCurve(),e}}const u=c},6127:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(3998),i=n(8753),s=n(2635),a=n(6492);class o extends((0,i.A)(r.A)){static type="ParamGrinGlass";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={origin:{x:0,y:0},pieces:[{eqnX:"50\\cdot\\cos\\left(t\\right)",eqnY:"50\\cdot\\sin\\left(t\\right)",tMin:0,tMax:2*Math.PI,tStep:.01}],refIndexFn:"1+e^{-\\frac{x^2+y^2}{50^2}}",absorptionFn:"0",stepSize:1,intersectTol:.001};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.ParamGrinGlass.title")),e.createInfoBox("<ul><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.constants")+"<br><code>pi e</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.operators")+"<br><code>+ - * / ^</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.functions")+"<br><code>sqrt sin cos tan sec csc cot sinh cosh tanh log exp arcsin arccos arctan arcsinh arccosh arctanh floor round ceil trunc sgn max min abs</code></li><li>"+s.Ay.t("simulator:sceneObjs.ParamGlass.eqnInfo.closedAndPositivelyOriented")+"</li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.module")+"</li></ul>"),this.populateObjBarShape(e),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(!this.path){if(!this.initPath())return r.fillStyle="red",void r.fillRect(this.origin.x-1.5*i,this.origin.y-1.5*i,3*i,3*i);this.validateCurve()}let s=!1;if(this.path.length<2)s=!0;else{const e=this.path[0];let t=!0;for(let n=1;n<this.path.length;n++)if(Math.abs(this.path[n].x-e.x)>1e-10||Math.abs(this.path[n].y-e.y)>1e-10){t=!1;break}s=t}if(s)return r.fillStyle=n?"rgb(255,0,0)":"rgb(128,128,128)",void r.fillRect(this.origin.x-1.5*i,this.origin.y-1.5*i,3*i,3*i);this.path&&this.path.length>2&&(this.drawPath(e),this.fillGlass(e,t,n))}move(e,t){return super.move(e,t),this.initFns(),!0}rotate(e,t){return super.rotate(e,t),this.initFns(),!1}scale(e,t){return super.scale(e,t),this.initFns(),!1}onConstructMouseDown(e,t,n){super.onConstructMouseDown(e,t,n),this.initFns()}onDrag(e,t,n,r){super.onDrag(e,t,n,r),this.initFns()}checkRayIntersects(e){if(console.log("checkRayIntersects",this.fn_p),this.fn_p||(console.log("initFns"),this.initFns()),this.isInsideGlass(e.p1)||this.isOnBoundary(e.p1)){let t=a.A.distance(e.p1,e.p2),n=e.p1.x+this.stepSize/t*(e.p2.x-e.p1.x),r=e.p1.y+this.stepSize/t*(e.p2.y-e.p1.y);const i=a.A.point(n,r);if(this.isInsideGlass(i))return i}var t=this.getIncidentData(e);return isNaN(t.incidentType)||!t.s_point?isNaN(t.incidentType)?{isAbsorbed:!0,isUndefinedBehavior:!0}:null:t.s_point}onRayIncident(e,t,n,r){if(!this.fn_p)return{isAbsorbed:!0};try{if(this.error=null,(this.isInsideGlass(e.p1)||this.isOutsideGlass(e.p1))&&this.isOnBoundary(n)){let c=e.bodyMergingObj;var i=this.getIncidentData(e),s=i.incidentType;if(1===s){var a=this.getRefIndexAt(n,e),o=i.normal;this.onRayExit(e)}else{if(-1!==s)return{isAbsorbed:!0,isUndefinedBehavior:!0};a=1/this.getRefIndexAt(n,e),o=i.normal,this.onRayEnter(e)}return this.refract(e,t,n,o,a,r,c)}{void 0===e.bodyMergingObj&&(e.bodyMergingObj=this.initRefIndex(e));const t=this.step(e.p1,n,e);e.p1=n,e.p2=t}}catch(e){return this.error=e.toString(),{isAbsorbed:!0}}}getIncidentData(e){const t=this.getRayIntersections(e);if(0===t.length)return{s_point:null,normal:{x:NaN,y:NaN},incidentType:0};let n=null,r=1/0;for(const i of t){if(isNaN(i.incidentType))return{s_point:i.s_point,normal:i.normal,incidentType:NaN};const t=a.A.distanceSquared(e.p1,i.s_point);t<r&&(r=t,n=i)}return n?{s_point:n.s_point,normal:n.normal,incidentType:n.incidentType}:{s_point:null,normal:{x:NaN,y:NaN},incidentType:0}}getIncidentType(e){return this.getIncidentData(e).incidentType}isOutsideGlass(e){return super.isOutside(e)}isInsideGlass(e){return super.isInside(e)}isOnBoundary(e){return super.isOnBoundary(e)}validateCurve(){this.isClosed()?this.isPositivelyOriented()?this.warning=null:this.warning=s.Ay.t("simulator:sceneObjs.ParamGlass.warning.notPositivelyOriented"):this.warning=s.Ay.t("simulator:sceneObjs.ParamGlass.warning.notClosed")}initPath(){const e=super.initPath();return e&&this.validateCurve(),e}}const c=o},6752:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(3452),i=n(7791),s=n(2635),a=n(6492);class o extends((0,i.A)(r.A)){static type="PlaneGlass";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={p1:null,p2:null,refIndex:1.5,cauchyB:.004};populateObjBar(e){e.setTitle(s.Ay.t("main:meta.parentheses",{main:s.Ay.t("main:tools.categories.glass"),sub:s.Ay.t("main:tools.PlaneGlass.title")})),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return r.fillStyle="rgb(128,128,128)",void r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i);var s=Math.sqrt((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y)),a=(this.p2.x-this.p1.x)/s,o=(this.p2.y-this.p1.y)/s,c=o,u=-a,l=(Math.abs(this.p1.x+this.scene.origin.x)+Math.abs(this.p1.y+this.scene.origin.y)+r.canvas.height+r.canvas.width)/Math.min(1,this.scene.scale);r.beginPath(),r.moveTo(this.p1.x-a*l,this.p1.y-o*l),r.lineTo(this.p1.x+a*l,this.p1.y+o*l),r.lineTo(this.p1.x+(a-c)*l,this.p1.y+(o-u)*l),r.lineTo(this.p1.x-(a+c)*l,this.p1.y-(o+u)*l),this.fillGlass(e,t,n),n&&(r.fillStyle="magenta",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i))}checkMouseOver(e){let t={};if(e.isOnPoint(this.p1)&&a.A.distanceSquared(e.pos,this.p1)<=a.A.distanceSquared(e.pos,this.p2))return t.part=1,t.targetPoint=a.A.point(this.p1.x,this.p1.y),t;if(e.isOnPoint(this.p2))return t.part=2,t.targetPoint=a.A.point(this.p2.x,this.p2.y),t;if(e.isOnLine(this)){const n=e.getPosSnappedToGrid();return t.part=0,t.mousePos0=n,t.mousePos1=n,t.snapContext={},t}}checkRayIntersects(e){if(!(this.refIndex<=0)){var t=a.A.linesIntersection(e,this);return a.A.intersectionIsOnRay(t,e)?t:void 0}}onRayIncident(e,t,n,r){var i=(e.p2.x-e.p1.x)*(this.p2.x-this.p1.x)+(e.p2.y-e.p1.y)*(this.p2.y-this.p1.y),s=(this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y),a={x:i*(this.p2.x-this.p1.x)-s*(e.p2.x-e.p1.x),y:i*(this.p2.y-this.p1.y)-s*(e.p2.y-e.p1.y)},o=this.getIncidentType(e);if(1==o)var c=this.getRefIndexAt(n,e);else{if(-1!=o)return{isAbsorbed:!0,isUndefinedBehavior:!0};c=1/this.getRefIndexAt(n,e)}return this.refract(e,t,n,a,c,r,e.bodyMergingObj)}getIncidentType(e){var t=(e.p2.x-e.p1.x)*(this.p2.y-this.p1.y)-(e.p2.y-e.p1.y)*(this.p2.x-this.p1.x);return t>0?1:t<0?-1:NaN}}const c=o},8195:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(6672),i=n(6492),s=n(2635);class a extends r.A{static type="SphericalLens";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={path:null,defBy:"DR1R2",p1:null,p2:null,params:null,refIndex:1.5,cauchyB:.004};constructor(e,t){super(e,t),!this.path&&this.p1&&this.p2&&("DR1R2"==this.defBy?this.createLensWithDR1R2(this.params.d,this.params.r1,this.params.r2):"DFfdBfd"==this.defBy&&this.createLensWithDFfdBfd(this.params.d,this.params.ffd,this.params.bfd))}populateObjBar(e){if(e.setTitle(s.Ay.t("main:tools.SphericalLens.title")),e.createDropdown("",this.defBy,{DR1R2:s.Ay.t("simulator:sceneObjs.SphericalLens.defBy.radiiOfCurvature"),DFfdBfd:s.Ay.t("simulator:sceneObjs.SphericalLens.defBy.focalDistances")},(function(e,t){e.defBy=t}),null,!0),"DR1R2"==this.defBy){var t=(i=this.getDR1R2()).r1,n=i.r2,r=i.d;e.createNumber("R<sub>1</sub>",0,100,1,t,(function(e,t){var n=e.getDR1R2(),r=n.r2,i=n.d;e.createLensWithDR1R2(i,t,r)}),null,!0),e.createNumber("R<sub>2</sub>",0,100,1,n,(function(e,t){var n=e.getDR1R2(),r=n.r1,i=n.d;e.createLensWithDR1R2(i,r,t)}),null,!0),e.createNumber("d",0,100,1,r,(function(e,t){var n=e.getDR1R2(),r=n.r1,i=n.r2;e.createLensWithDR1R2(t,r,i)}),null,!0)}else if("DFfdBfd"==this.defBy){e.createInfoBox('<img src="../img/FFD_BFD.svg" width=100%>'),r=(i=this.getDFfdBfd()).d;var i,a=i.ffd,o=i.bfd;e.createNumber("FFD",0,100,1,a,(function(e,t){var n=e.getDFfdBfd(),r=n.d,i=n.bfd;e.createLensWithDFfdBfd(r,t,i)}),null,!0),e.createNumber("BFD",0,100,1,o,(function(e,t){var n=e.getDFfdBfd(),r=n.d,i=n.ffd;e.createLensWithDFfdBfd(r,i,t)}),null,!0),e.createNumber("d",0,100,1,r,(function(e,t){var n=e.getDFfdBfd(),r=n.ffd,i=n.bfd;e.createLensWithDFfdBfd(t,r,i)}),null,!0)}this.scene.simulateColors?(e.createNumber(s.Ay.t("simulator:sceneObjs.BaseGlass.cauchyCoeff")+" A",1,3,.01,this.refIndex,(function(e,t){var n=e.getDFfdBfd();e.refIndex=1*t,"DFfdBfd"==e.defBy&&e.createLensWithDFfdBfd(n.d,n.ffd,n.bfd)}),"<p>*"+s.Ay.t("simulator:sceneObjs.BaseGlass.refIndexInfo.relative")+"</p><p>"+s.Ay.t("simulator:sceneObjs.BaseGlass.refIndexInfo.effective")+"</p>"),e.createNumber("B(μm²)",1e-4,.02,1e-4,this.cauchyB,(function(e,t){var n=e.getDFfdBfd();e.cauchyB=t,"DFfdBfd"==e.defBy&&e.createLensWithDFfdBfd(n.d,n.ffd,n.bfd)}))):e.createNumber(s.Ay.t("simulator:sceneObjs.BaseGlass.refIndex")+"*",.5,2.5,.01,this.refIndex,(function(e,t){var n=e.getDFfdBfd();e.refIndex=1*t,"DFfdBfd"==e.defBy&&e.createLensWithDFfdBfd(n.d,n.ffd,n.bfd)}),"<p>*"+s.Ay.t("simulator:sceneObjs.BaseGlass.refIndexInfo.relative")+"</p><p>"+s.Ay.t("simulator:sceneObjs.BaseGlass.refIndexInfo.effective")+"</p>")}draw(e,t,n){const r=e.ctx,s=e.lengthScale;if(this.p1&&this.p2&&this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return r.fillStyle="rgb(128,128,128)",void r.fillRect(this.p1.x-1.5*s,this.p1.y-1.5*s,3*s,3*s);if(this.path){super.draw(e,t,n);var a=i.A.midpoint(this.path[0],this.path[1]),o=i.A.midpoint(this.path[3],this.path[4]),c=Math.hypot(a.x-o.x,a.y-o.y),u=(o.x-a.x)/c,l=(o.y-a.y)/c,h=-u;if(n){var p=this.getDFfdBfd(),d=p.ffd,f=p.bfd;r.fillStyle="rgb(255,0,255)",r.fillRect(this.path[2].x+f*l-1.5*s,this.path[2].y+f*h-1.5*s,3*s,3*s),r.fillRect(this.path[5].x-d*l-1.5*s,this.path[5].y-d*h-1.5*s,3*s,3*s)}}else this.p1&&this.p2&&(r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*s,this.p1.y-1.5*s,3*s,3*s),r.fillRect(this.p2.x-1.5*s,this.p2.y-1.5*s,3*s,3*s))}move(e,t){return this.path?super.move(e,t):this.p1&&this.p2&&(this.p1.x+=e,this.p1.y+=t,this.p2.x+=e,this.p2.y+=t),!0}rotate(e,t=null){return!!this.path&&super.rotate(e,t)}scale(e,t=null){return!!this.path&&super.scale(e,t)}onConstructMouseDown(e,t,n){return this.constructionPoint||(this.constructionPoint=e.getPosSnappedToGrid(),this.p1=this.constructionPoint,this.p2=this.constructionPoint,this.path=null,this.params=null),this.p2=n?e.getPosSnappedToDirection(this.constructionPoint,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid(),this.createLens(),{requiresObjBarUpdate:!0}}onConstructMouseMove(e,t,n){return this.p2=n?e.getPosSnappedToDirection(this.constructionPoint,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid(),this.p1=t?i.A.point(2*this.constructionPoint.x-this.p2.x,2*this.constructionPoint.y-this.p2.y):this.constructionPoint,this.createLens(),{requiresObjBarUpdate:!0}}onConstructMouseUp(e,t,n){if(!e.snapsOnPoint(this.p1))return this.p1=null,this.p2=null,this.params=null,delete this.constructionPoint,{isDone:!0,requiresObjBarUpdate:!0}}onConstructUndo(){return{isCancelled:!0}}checkMouseOver(e){let t={};if(!this.path){if(this.p1&&this.p2){if(e.isOnPoint(this.p1))return t.part=-1,t.targetPoint=this.p1,t;if(e.isOnPoint(this.p2))return t.part=-1,t.targetPoint=this.p2,t}return null}if(t=super.checkMouseOver(e),t)return 0!=t.part&&(t.requiresObjBarUpdate=!0),t}onDrag(e,t,n,r){if(-1==t.part)return;var s,a,o=i.A.midpoint(this.path[0],this.path[1]),c=i.A.midpoint(this.path[3],this.path[4]),u=Math.hypot(o.x-c.x,o.y-c.y),l=(c.x-o.x)/u,h=(c.y-o.y)/u,p=h,d=-l,f=.5*(o.x+c.x),m=.5*(o.y+c.y),g=Math.hypot(this.path[0].x-o.x,this.path[0].y-o.y),y=Math.hypot(this.path[2].x-f,this.path[2].y-m),x=Math.hypot(this.path[5].x-f,this.path[5].y-m);if(1==t.part&&(s=this.path[t.index].x,a=this.path[t.index].y),super.onDrag(e,t,n,r),t.isByHandle)return;if(1!=t.part)return;const v=e.getPosSnappedToGrid();if(2==t.index||5==t.index){var b=(v.x-f)*p+(v.y-m)*d;this.path[t.index]={x:f+p*b,y:m+d*b,arc:!0}}else{var D=Math.abs((v.x-f)*p+(v.y-m)*d);y+=D-g,x+=D-g;var w=this.path[t.index],A=(w.x-s)*l+(w.y-a)*h;t.index<2?(o.x+=A*l,o.y+=A*h):(c.x+=A*l,c.y+=A*h),u=Math.hypot(o.x-c.x,o.y-c.y),l=(c.x-o.x)/u,p=h=(c.y-o.y)/u,d=-l,f=.5*(o.x+c.x),m=.5*(o.y+c.y),this.path[0]={x:o.x-p*D,y:o.y-d*D,arc:!1},this.path[1]={x:o.x+p*D,y:o.y+d*D,arc:!1},this.path[2]={x:f+p*y,y:m+d*y,arc:!0},this.path[3]={x:c.x+p*D,y:c.y+d*D,arc:!1},this.path[4]={x:c.x-p*D,y:c.y-d*D,arc:!1},this.path[5]={x:f-p*x,y:m-d*x,arc:!0}}}checkRayIntersects(e){return!!this.path&&super.checkRayIntersects(e)}createLens(){var e=this.p1||i.A.midpoint(this.path[0],this.path[1]),t=this.p2||i.A.midpoint(this.path[3],this.path[4]),n=Math.hypot(e.x-t.x,e.y-t.y),r=(t.x-e.x)/n,s=(t.y-e.y)/n,a=-r,o=.5*(e.x+t.x),c=.5*(e.y+t.y);const u=10*this.scene.lengthScale;this.path||(this.path=[]),this.path[0]={x:e.x-s*u,y:e.y-a*u,arc:!1},this.path[1]={x:e.x+s*u,y:e.y+a*u,arc:!1},this.path[2]={x:o+s*u*2,y:c+a*u*2,arc:!0},this.path[3]={x:t.x+s*u,y:t.y+a*u,arc:!1},this.path[4]={x:t.x-s*u,y:t.y-a*u,arc:!1},this.path[5]={x:o-s*u*2,y:c-a*u*2,arc:!0}}createLensWithDR1R2(e,t,n){if(this.error=null,this.path){var r=this.getDR1R2(),a=(f=i.A.midpoint(this.path[0],this.path[1]),m=i.A.midpoint(this.path[3],this.path[4]),r.d),o=r.r1,c=r.r2,u=Math.hypot(f.x-m.x,f.y-m.y);if(o<1/0&&o>-1/0)var l=o-Math.sqrt(o*o-u*u/4)*Math.sign(o);else l=0;if(c<1/0&&c>-1/0)var h=c-Math.sqrt(c*c-u*u/4)*Math.sign(c);else h=0;var p=a/2-l,d=a/2+h}else var f=this.p1,m=this.p2;var g=Math.hypot(f.x-m.x,f.y-m.y),y=(m.x-f.x)/g,x=(m.y-f.y)/g,v=-y;if(r){var b=(p-d)/2;f.x+=x*b,f.y+=v*b,m.x+=x*b,m.y+=v*b}var D=.5*(f.x+m.x),w=.5*(f.y+m.y);if(t<1/0&&t>-1/0)var A=t-Math.sqrt(t*t-g*g/4)*Math.sign(t);else A=0;if(n<1/0&&n>-1/0)var S=n-Math.sqrt(n*n-g*g/4)*Math.sign(n);else S=0;var N=e/2-A,C=e/2+S;isNaN(A)||isNaN(S)?(this.p1=f,this.p2=m,this.path=null,this.params={r1:t,r2:n,d:e},this.error=s.Ay.t("simulator:sceneObjs.SphericalLens.invalidParameters")):(this.path||(this.path=[]),this.path[0]={x:f.x-x*N,y:f.y-v*N,arc:!1},this.path[1]={x:f.x+x*C,y:f.y+v*C,arc:!1},this.path[2]={x:D+x*(e/2),y:w+v*(e/2),arc:!0},this.path[3]={x:m.x+x*C,y:m.y+v*C,arc:!1},this.path[4]={x:m.x-x*N,y:m.y-v*N,arc:!1},this.path[5]={x:D-x*(e/2),y:w-v*(e/2),arc:!0},this.p1&&(this.p1=null,this.p2=null),this.params&&(this.params=null))}createLensWithDFfdBfd(e,t,n){if(this.error=null,this.path){var r=this.getDR1R2(),a=(f=i.A.midpoint(this.path[0],this.path[1]),m=i.A.midpoint(this.path[3],this.path[4]),r.d),o=r.r1,c=r.r2,u=Math.hypot(f.x-m.x,f.y-m.y);if(o<1/0&&o>-1/0)var l=o-Math.sqrt(o*o-u*u/4)*Math.sign(o);else l=0;if(c<1/0&&c>-1/0)var h=c-Math.sqrt(c*c-u*u/4)*Math.sign(c);else h=0;var p=a/2-l,d=a/2+h}else var f=this.p1,m=this.p2;var g=Math.hypot(f.x-m.x,f.y-m.y),y=(m.x-f.x)/g,x=(m.y-f.y)/g,v=-y;if(r){var b=(p-d)/2;f.x+=x*b,f.y+=v*b,m.x+=x*b,m.y+=v*b}var D=this.getRefIndexAt(null,{wavelength:546}),w=e*(-1+D)*(e+2*t*D-Math.sqrt(e**2+4*n*t*D**2))/(2*D*(e+(-n+t)*D)),A=-e*(-1+D)*(e+2*n*D-Math.sqrt(e**2+4*n*t*D**2))/(2*D*(e+(n-t)*D)),S=e*(-1+D)*(e+2*t*D+Math.sqrt(e**2+4*n*t*D**2))/(2*D*(e+(-n+t)*D)),N=-e*(-1+D)*(e+2*n*D+Math.sqrt(e**2+4*n*t*D**2))/(2*D*(e+(n-t)*D));if(isNaN(w)||isNaN(A)||!isNaN(S)&&!isNaN(N))if(isNaN(S)||isNaN(N)||!isNaN(w)&&!isNaN(A)){if(isNaN(w)||isNaN(A)||isNaN(S)||isNaN(N))return this.p1=f,this.p2=m,this.path=null,this.params={d:e,ffd:t,bfd:n},void(this.error=s.Ay.t("simulator:sceneObjs.SphericalLens.invalidParameters"));if(r)if(Math.abs(o-w)+Math.abs(c-A)<Math.abs(o-S)+Math.abs(c-N))var C=w,E=A,M=S,T=N;else C=S,E=N,M=w,T=A;else Math.abs(w)+Math.abs(A)<Math.abs(S)+Math.abs(N)?(C=w,E=A,M=S,T=N):(C=S,E=N,M=w,T=A);O=C,P=E,this.createLensWithDR1R2(e,O,P),this.path||(O=M,P=T,this.createLensWithDR1R2(e,O,P),this.path||(this.params={d:e,ffd:t,bfd:n},this.error=s.Ay.t("simulator:sceneObjs.SphericalLens.invalidParameters")))}else{var O=S,P=N;this.createLensWithDR1R2(e,O,P),this.path||(this.params={d:e,ffd:t,bfd:n},this.error=s.Ay.t("simulator:sceneObjs.SphericalLens.invalidParameters"))}else{O=w,P=A;this.createLensWithDR1R2(e,O,P),this.path||(this.params={d:e,ffd:t,bfd:n},this.error=s.Ay.t("simulator:sceneObjs.SphericalLens.invalidParameters"))}}getDR1R2(){if(this.params)return this.params;var e=i.A.linesIntersection(i.A.perpendicularBisector(i.A.line(this.path[1],this.path[2])),i.A.perpendicularBisector(i.A.line(this.path[3],this.path[2]))),t=i.A.distance(e,this.path[2]),n=i.A.linesIntersection(i.A.perpendicularBisector(i.A.line(this.path[4],this.path[5])),i.A.perpendicularBisector(i.A.line(this.path[0],this.path[5]))),r=i.A.distance(n,this.path[5]),s=i.A.midpoint(this.path[0],this.path[1]),a=i.A.midpoint(this.path[3],this.path[4]),o=Math.hypot(s.x-a.x,s.y-a.y),c=(a.x-s.x)/o,u=(a.y-s.y)/o,l=-c,h=(s.x,a.x,s.y,a.y,i.A.distance(this.path[2],this.path[5]));return u*(e.x-this.path[2].x)+l*(e.y-this.path[2].y)<0&&(t=-t),u*(n.x-this.path[5].x)+l*(n.y-this.path[5].y)<0&&(r=-r),isNaN(r)&&(r=1/0),isNaN(t)&&(t=1/0),{d:h,r1:r,r2:t}}getDFfdBfd(){if(this.params)return this.params;var e=this.getDR1R2(),t=e.r1,n=e.r2,r=e.d,i=this.getRefIndexAt(null,{wavelength:546}),s=1/((i-1)*(1/t-1/n+(i-1)*r/(i*t*n)));return{d:r,ffd:s*(1+(i-1)*r/(i*n)),bfd:s*(1-(i-1)*r/(i*t))}}}const o=a},7303:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(867),i=n(7791),s=n(7235),a=n(6492),o=n(2635);class c extends((0,i.A)(r.A)){static type="AngleSource";static isOptical=!0;static serializableDefaults={p1:null,p2:null,brightness:.5,wavelength:s.A.GREEN_WAVELENGTH,emisAngle:36.001,symmetric:!0};populateObjBar(e){if("default"!==this.scene.colorMode)var t=o.Ay.t("simulator:sceneObjs.common.brightnessInfo.newColorModes");else t="<p>"+o.Ay.t("simulator:sceneObjs.common.brightnessInfo.rayDensity")+"</p><p>"+o.Ay.t("simulator:sceneObjs.common.brightnessInfo.rayDensitySlider")+"</p>";e.setTitle(o.Ay.t("main:tools.PointSource.title")+" (<360°)"),e.createNumber(o.Ay.t("simulator:sceneObjs.common.brightness"),.01,1,.01,this.brightness,(function(e,t){e.brightness=t}),t),this.scene.simulateColors&&e.createNumber(o.Ay.t("simulator:sceneObjs.common.wavelength")+" (nm)",s.A.UV_WAVELENGTH,s.A.INFRARED_WAVELENGTH,1,this.wavelength,(function(e,t){e.wavelength=t})),e.createNumber(o.Ay.t("simulator:sceneObjs.common.emisAngle")+" (°)",0,180,1,this.emisAngle,(function(e,t){e.emisAngle=t})),e.showAdvanced(!this.arePropertiesDefault(["symmetric"]))&&e.createBoolean(o.Ay.t("simulator:sceneObjs.AngleSource.symmetric"),this.symmetric,(function(e,t){e.symmetric=t}))}onConstructMouseDown(e,t,n){super.onConstructMouseDown(e,t,n),"default"!==this.scene.colorMode&&(this.brightness=.1)}draw(e,t,n){this.scene.simulateColors?(e.drawPoint(this.p1,s.A.wavelengthToColor(this.wavelength,1),this.scene.theme.lightSource.size),e.drawPoint(this.p1,n?this.scene.highlightColor:this.scene.theme.colorSourceCenter.color,this.scene.theme.colorSourceCenter.size)):e.drawPoint(this.p1,n?this.scene.highlightColor:this.scene.theme.lightSource.color,this.scene.theme.lightSource.size),e.drawPoint(this.p2,n?this.scene.highlightColor:this.scene.theme.directionPoint.color,this.scene.theme.directionPoint.size)}getDefaultCenter(){return this.p1}onSimulationStart(){let e=this.scene.rayDensity;do{var t=this.brightness/e;"default"!==this.scene.colorMode&&t>1&&(e+=.002)}while("default"!==this.scene.colorMode&&t>1);var n,r,i,s,o,c=2*Math.PI/parseInt(500*e),u="observer"==this.scene.mode?2*-c+1e-6:0;this.symmetric?(s=u-Math.PI/180*this.emisAngle/2,o=u+Math.PI/180*this.emisAngle/2-1e-5):(s=u,o=u+Math.PI/180*this.emisAngle-1e-5);let l=[];for(var h=s;h<o;h+=c){var p=Math.sqrt((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y));n=h+Math.atan2(this.p2.y-this.p1.y,this.p2.x-this.p1.x),r=this.p1.x+p*Math.cos(n),i=this.p1.y+p*Math.sin(n);var d=a.A.line(a.A.point(this.p1.x,this.p1.y),a.A.point(r,i));d.brightness_s=.5*Math.min(this.brightness/e,1),d.brightness_p=.5*Math.min(this.brightness/e,1),this.scene.simulateColors&&(d.wavelength=this.wavelength),d.isNew=!0,h==u&&(d.gap=!0),l.push(d)}return{newRays:l,brightnessScale:Math.min(this.brightness/e,1)/(this.brightness/e)}}}const u=c},394:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(867),i=n(7791),s=n(7235),a=n(6492),o=n(2635);class c extends((0,i.A)(r.A)){static type="Beam";static isOptical=!0;static serializableDefaults={p1:null,p2:null,brightness:.5,wavelength:s.A.GREEN_WAVELENGTH,emisAngle:0,lambert:!1,random:!1};populateObjBar(e){if("default"!==this.scene.colorMode)var t=o.Ay.t("simulator:sceneObjs.common.brightnessInfo.newColorModes");else t="<p>"+o.Ay.t("simulator:sceneObjs.common.brightnessInfo.rayDensity")+"</p><p>"+o.Ay.t("simulator:sceneObjs.common.brightnessInfo.rayDensitySlider")+"</p>";e.setTitle(o.Ay.t("main:tools.Beam.title")),e.createNumber(o.Ay.t("simulator:sceneObjs.common.brightness"),.01/this.scene.lengthScale,1/this.scene.lengthScale,.01/this.scene.lengthScale,this.brightness,(function(e,t){e.brightness=t}),t),this.scene.simulateColors&&e.createNumber(o.Ay.t("simulator:sceneObjs.common.wavelength")+" (nm)",s.A.UV_WAVELENGTH,s.A.INFRARED_WAVELENGTH,1,this.wavelength,(function(e,t){e.wavelength=t})),e.showAdvanced(!this.arePropertiesDefault(["emisAngle","lambert","random"]))&&(e.createNumber(o.Ay.t("simulator:sceneObjs.common.emisAngle")+" (°)",0,180,1,this.emisAngle,(function(e,t){e.emisAngle=t})),e.createBoolean(o.Ay.t("simulator:sceneObjs.common.lambert"),this.lambert,(function(e,t){e.lambert=t})),e.createBoolean(o.Ay.t("simulator:sceneObjs.common.random"),this.random,(function(e,t){e.random=t})))}onConstructMouseDown(e,t,n){super.onConstructMouseDown(e,t,n),"default"!==this.scene.colorMode&&(this.brightness=.1)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return r.fillStyle="rgb(128,128,128)",void r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i);var a=Math.atan2(this.p1.x-this.p2.x,this.p1.y-this.p2.y)-Math.PI/2;const o=s.A.wavelengthToColor(this.wavelength,1);r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.simulateColors?o:this.scene.theme.lightSource.color),r.lineWidth=4*this.scene.theme.lightSource.size/5*i,r.lineCap="butt",r.beginPath(),r.moveTo(this.p1.x+Math.sin(a)*this.scene.theme.lightSource.size*2/5*i,this.p1.y+Math.cos(a)*this.scene.theme.lightSource.size*2/5*i),r.lineTo(this.p2.x+Math.sin(a)*this.scene.theme.lightSource.size*2/5*i,this.p2.y+Math.cos(a)*this.scene.theme.lightSource.size*2/5*i),r.stroke(),r.strokeStyle=e.rgbaToCssColor(this.scene.theme.beamShield.color),r.lineWidth=this.scene.theme.beamShield.width*i,r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke(),r.lineWidth=1*i,r.lineCap="butt"}scale(e,t){return super.scale(e,t),this.brightness/=e,!0}onSimulationStart(){"images"!=this.scene.mode&&"observer"!=this.scene.mode||!(this.emisAngle>0||this.random)?this.warning=null:this.warning=o.Ay.t("simulator:sceneObjs.Beam.imageDetectionWarning");let e=this.scene.rayDensity;do{var t=a.A.segmentLength(this)*e/this.scene.lengthScale,n=(this.p2.x-this.p1.x)/t,r=(this.p2.y-this.p1.y)/t,i=2*Math.PI/parseInt(500*e),s=this.p2.x-this.p1.x,c=this.p2.y-this.p1.y,u=Math.atan2(n,r)+Math.PI/2,l=this.emisAngle/180*Math.PI*.5,h=1+2*Math.floor(l/i),p=1/h,d=this.brightness*this.scene.lengthScale/e*p;"default"!==this.scene.colorMode&&d>1&&(e+=.002)}while("default"!==this.scene.colorMode&&d>1);this.initRandom();let f=[];if(this.random)for(m=0;m<t*h;m++){const t=this.getRandom(2*m),n=this.getRandom(2*m+1);f.push(this.newRay(this.p1.x+t*s,this.p1.y+t*c,u,(2*n-1)*l,0==m,p,e))}else for(var m=.5;m<=t;m++){var g=this.p1.x+m*n,y=this.p1.y+m*r;f.push(this.newRay(g,y,u,0,0==m,p,e));for(var x=i;x<l;x+=i)f.push(this.newRay(g,y,u,x,0==m,p,e)),f.push(this.newRay(g,y,u,-x,0==m,p,e))}return{newRays:f,brightnessScale:Math.min(this.brightness*this.scene.lengthScale/e*p,1)/(this.brightness*this.scene.lengthScale/e*p)}}initRandom(){null!=this.randomNumbers&&this.random||this.clearRandom()}clearRandom(){this.randomNumbers=[]}getRandom(e){for(let t=this.randomNumbers.length;t<=e;t++)this.randomNumbers.push(this.scene.rng());return this.randomNumbers[e]}newRay(e,t,n,r,i,s=1,o=this.scene.rayDensity){var c=a.A.line(a.A.point(e,t),a.A.point(e+Math.sin(n+r),t+Math.cos(n+r)));if(c.brightness_s=.5*Math.min(this.brightness*this.scene.lengthScale/o*s,1),c.brightness_p=.5*Math.min(this.brightness*this.scene.lengthScale/o*s,1),this.lambert){const e=Math.cos(r);c.brightness_s*=e,c.brightness_p*=e}return c.isNew=!0,this.scene.simulateColors&&(c.wavelength=this.wavelength),c.gap=i,c}}const u=c},7166:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(867),i=n(7235),s=n(6492),a=n(2635);class o extends r.A{static type="PointSource";static isOptical=!0;static serializableDefaults={x:null,y:null,brightness:.5,wavelength:i.A.GREEN_WAVELENGTH};populateObjBar(e){if("default"!==this.scene.colorMode)var t=a.Ay.t("simulator:sceneObjs.common.brightnessInfo.newColorModes");else t="<p>"+a.Ay.t("simulator:sceneObjs.common.brightnessInfo.rayDensity")+"</p><p>"+a.Ay.t("simulator:sceneObjs.common.brightnessInfo.rayDensitySlider")+"</p>";e.setTitle(a.Ay.t("main:tools.PointSource.title")+" (360°)"),e.createNumber(a.Ay.t("simulator:sceneObjs.common.brightness"),.01,1,.01,this.brightness,(function(e,t){e.brightness=t}),t),this.scene.simulateColors&&e.createNumber(a.Ay.t("simulator:sceneObjs.common.wavelength")+" (nm)",i.A.UV_WAVELENGTH,i.A.INFRARED_WAVELENGTH,1,this.wavelength,(function(e,t){e.wavelength=t}))}draw(e,t,n){this.scene.simulateColors?(e.drawPoint(this,i.A.wavelengthToColor(this.wavelength,1),this.scene.theme.lightSource.size),e.drawPoint(this,n?this.scene.highlightColor:this.scene.theme.colorSourceCenter.color,this.scene.theme.colorSourceCenter.size)):e.drawPoint(this,n?this.scene.highlightColor:this.scene.theme.lightSource.color,this.scene.theme.lightSource.size)}move(e,t){return this.x+=e,this.y+=t,!0}rotate(e,t=null){t=t||this.getDefaultCenter();const n=this.x-t.x,r=this.y-t.y,i=Math.cos(e),s=Math.sin(e);return this.x=t.x+n*i-r*s,this.y=t.y+n*s+r*i,!0}scale(e,t=null){return t=t||this.getDefaultCenter(),this.x=t.x+(this.x-t.x)*e,this.y=t.y+(this.y-t.y)*e,!0}getDefaultCenter(){return{x:this.x,y:this.y}}onConstructMouseDown(e,t,n){const r=e.getPosSnappedToGrid();this.x=r.x,this.y=r.y,"default"!==this.scene.colorMode&&(this.brightness=.1)}onConstructMouseUp(e,t,n){return{isDone:!0}}checkMouseOver(e){let t={};if(e.isOnPoint(this))return t.part=0,t.targetPoint=s.A.point(this.x,this.y),t.snapContext={},t}onDrag(e,t,n,r){if(r)var i=e.getPosSnappedToDirection(t.targetPoint,[{x:1,y:0},{x:0,y:1}],t.snapContext);else i=e.getPosSnappedToGrid(),t.snapContext={};this.x=i.x,this.y=i.y}onSimulationStart(){let e=this.scene.rayDensity;do{var t=this.brightness/e;"default"!==this.scene.colorMode&&t>1&&(e+=.002)}while("default"!==this.scene.colorMode&&t>1);let n=[];for(var r=2*Math.PI/parseInt(500*e),i="observer"==this.scene.mode?2*-r+1e-6:0,a=i;a<2*Math.PI-1e-5;a+=r){var o=s.A.line(s.A.point(this.x,this.y),s.A.point(this.x+Math.sin(a),this.y+Math.cos(a)));o.brightness_s=.5*Math.min(this.brightness/e,1),o.brightness_p=.5*Math.min(this.brightness/e,1),o.isNew=!0,this.scene.simulateColors&&(o.wavelength=this.wavelength),a==i&&(o.gap=!0),n.push(o)}return{newRays:n,brightnessScale:Math.min(this.brightness/e,1)/(this.brightness/e)}}}const c=o},6373:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(867),i=n(7791),s=n(7235),a=n(6492),o=n(2635);class c extends((0,i.A)(r.A)){static type="SingleRay";static isOptical=!0;static serializableDefaults={p1:null,p2:null,brightness:1,wavelength:s.A.GREEN_WAVELENGTH};populateObjBar(e){e.setTitle(o.Ay.t("main:tools.SingleRay.title")),e.createNumber(o.Ay.t("simulator:sceneObjs.common.brightness"),.01,1,.01,this.brightness,(function(e,t){e.brightness=t})),this.scene.simulateColors&&e.createNumber(o.Ay.t("simulator:sceneObjs.common.wavelength")+" (nm)",s.A.UV_WAVELENGTH,s.A.INFRARED_WAVELENGTH,1,this.wavelength,(function(e,t){e.wavelength=t}))}draw(e,t,n){e.ctx,e.lengthScale;let r=this.scene.theme.sourcePoint.color,i=this.scene.theme.directionPoint.color;this.scene.simulateColors&&(r=s.A.wavelengthToColor(this.wavelength,1)),n&&(r=this.scene.highlightColor,i=this.scene.highlightColor),e.drawPoint(this.p1,r,this.scene.theme.sourcePoint.size),e.drawPoint(this.p2,i,this.scene.theme.directionPoint.size)}getDefaultCenter(){return this.p1}onSimulationStart(){var e=a.A.line(this.p1,this.p2);return e.brightness_s=.5*this.brightness,e.brightness_p=.5*this.brightness,this.scene.simulateColors&&(e.wavelength=this.wavelength),e.gap=!0,e.isNew=!0,{newRays:[e]}}}const u=c},4456:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(9472),i=n(2635),s=n(7235),a=n(6492);class o extends r.A{static type="ArcMirror";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={p1:null,p2:null,p3:null,filter:!1,invert:!1,wavelength:s.A.GREEN_WAVELENGTH,bandwidth:10};populateObjBar(e){e.setTitle(i.Ay.t("main:meta.parentheses",{main:i.Ay.t("main:tools.categories.mirror"),sub:i.Ay.t("main:tools.ArcMirror.title")})),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(r.fillStyle="rgb(255,0,255)",this.p3&&this.p2){var o=a.A.linesIntersection(a.A.perpendicularBisector(a.A.line(this.p1,this.p3)),a.A.perpendicularBisector(a.A.line(this.p2,this.p3)));if(isFinite(o.x)&&isFinite(o.y)){var c=a.A.distance(o,this.p3),u=Math.atan2(this.p1.y-o.y,this.p1.x-o.x),l=Math.atan2(this.p2.y-o.y,this.p2.x-o.x),h=Math.atan2(this.p3.y-o.y,this.p3.x-o.x);const t=s.A.wavelengthToColor(this.wavelength||s.A.GREEN_WAVELENGTH,1);r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.simulateColors&&this.wavelength&&this.filter?t:this.scene.theme.mirror.color),r.lineWidth=this.scene.theme.mirror.width*i,r.beginPath(),r.arc(o.x,o.y,c,u,l,l<h&&h<u||u<l&&l<h||h<u&&u<l),r.stroke(),n&&(r.fillRect(this.p3.x-1.5*i,this.p3.y-1.5*i,3*i,3*i),r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i))}else{const t=s.A.wavelengthToColor(this.wavelength||s.A.GREEN_WAVELENGTH,1);r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.simulateColors&&this.wavelength&&this.filter?t:this.scene.theme.mirror.color),r.lineWidth=this.scene.theme.mirror.width*i,r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke(),r.fillRect(this.p3.x-1.5*i,this.p3.y-1.5*i,3*i,3*i),r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i)}}else this.p2?(r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i)):(r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i))}move(e,t){return this.p1.x=this.p1.x+e,this.p1.y=this.p1.y+t,this.p2.x=this.p2.x+e,this.p2.y=this.p2.y+t,this.p3.x=this.p3.x+e,this.p3.y=this.p3.y+t,!0}rotate(e,t){const n=t||this.p3,r=this.p1.x-n.x,i=this.p1.y-n.y,s=this.p2.x-n.x,a=this.p2.y-n.y,o=this.p3.x-n.x,c=this.p3.y-n.y;return this.p1.x=n.x+r*Math.cos(e)-i*Math.sin(e),this.p1.y=n.y+r*Math.sin(e)+i*Math.cos(e),this.p2.x=n.x+s*Math.cos(e)-a*Math.sin(e),this.p2.y=n.y+s*Math.sin(e)+a*Math.cos(e),this.p3.x=n.x+o*Math.cos(e)-c*Math.sin(e),this.p3.y=n.y+o*Math.sin(e)+c*Math.cos(e),!0}scale(e,t){const n=t||this.p3,r=this.p1.x-n.x,i=this.p1.y-n.y,s=this.p2.x-n.x,a=this.p2.y-n.y,o=this.p3.x-n.x,c=this.p3.y-n.y;return this.p1.x=n.x+r*e,this.p1.y=n.y+i*e,this.p2.x=n.x+s*e,this.p2.y=n.y+a*e,this.p3.x=n.x+o*e,this.p3.y=n.y+c*e,!0}getDefaultCenter(){return this.p3}onConstructMouseDown(e,t,n){if(this.constructionPoint||(this.constructionPoint=e.getPosSnappedToGrid(),this.p1=this.constructionPoint,this.p2=null,this.p3=null),this.p2||this.p3)return!this.p2||this.p3||e.snapsOnPoint(this.p1)?void 0:(this.p2=n?e.getPosSnappedToDirection(this.p1,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid(),void(this.p3=e.getPosSnappedToGrid()));this.p2=e.getPosSnappedToGrid()}onConstructMouseMove(e,t,n){if(!this.p3&&!e.snapsOnPoint(this.p1))return this.p2=n?e.getPosSnappedToDirection(this.constructionPoint,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid(),void(this.p1=t?a.A.point(2*this.constructionPoint.x-this.p2.x,2*this.constructionPoint.y-this.p2.y):this.constructionPoint);this.p3&&(this.p3=e.getPosSnappedToGrid())}onConstructMouseUp(e,t,n){if(!this.p2||this.p3||e.snapsOnPoint(this.p1))return this.p3&&!e.snapsOnPoint(this.p2)?(this.p3=e.getPosSnappedToGrid(),delete this.constructionPoint,{isDone:!0}):void 0;this.p3=e.getPosSnappedToGrid()}checkMouseOver(e){let t={};if(e.isOnPoint(this.p1)&&a.A.distanceSquared(e.pos,this.p1)<=a.A.distanceSquared(e.pos,this.p2)&&a.A.distanceSquared(e.pos,this.p1)<=a.A.distanceSquared(e.pos,this.p3))return t.part=1,t.targetPoint=a.A.point(this.p1.x,this.p1.y),t;if(e.isOnPoint(this.p2)&&a.A.distanceSquared(e.pos,this.p2)<=a.A.distanceSquared(e.pos,this.p3))return t.part=2,t.targetPoint=a.A.point(this.p2.x,this.p2.y),t;if(e.isOnPoint(this.p3))return t.part=3,t.targetPoint=a.A.point(this.p3.x,this.p3.y),t;var n=a.A.linesIntersection(a.A.perpendicularBisector(a.A.line(this.p1,this.p3)),a.A.perpendicularBisector(a.A.line(this.p2,this.p3)));const r=e.getPosSnappedToGrid();if(isFinite(n.x)&&isFinite(n.y)){var i=a.A.distance(n,this.p3),s=Math.atan2(this.p1.y-n.y,this.p1.x-n.x),o=Math.atan2(this.p2.y-n.y,this.p2.x-n.x),c=Math.atan2(this.p3.y-n.y,this.p3.x-n.x),u=Math.atan2(e.pos.y-n.y,e.pos.x-n.x);if(Math.abs(a.A.distance(n,e.pos)-i)<e.getClickExtent()&&(o<c&&c<s||s<o&&o<c||c<s&&s<o)==(o<u&&u<s||s<o&&o<u||u<s&&s<o))return t.part=0,t.mousePos0=r,t.mousePos1=r,t.snapContext={},t}else if(e.isOnSegment(this))return t.part=0,t.mousePos0=r,t.mousePos1=r,t.snapContext={},t}onDrag(e,t,n,r){var i;if(1==t.part&&(i=n?a.A.segmentMidpoint(t.originalObj):t.originalObj.p2,this.p1=r?e.getPosSnappedToDirection(i,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y}]):e.getPosSnappedToGrid(),this.p2=n?a.A.point(2*i.x-this.p1.x,2*i.y-this.p1.y):i),2==t.part&&(i=n?a.A.segmentMidpoint(t.originalObj):t.originalObj.p1,this.p2=r?e.getPosSnappedToDirection(i,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y}]):e.getPosSnappedToGrid(),this.p1=n?a.A.point(2*i.x-this.p2.x,2*i.y-this.p2.y):i),3==t.part&&(this.p3=e.getPosSnappedToGrid()),0==t.part){if(r)var s=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y},{x:t.originalObj.p2.y-t.originalObj.p1.y,y:-(t.originalObj.p2.x-t.originalObj.p1.x)}],t.snapContext);else s=e.getPosSnappedToGrid(),t.snapContext={};var o=t.mousePos1.x-s.x,c=t.mousePos1.y-s.y;this.p1.x=this.p1.x-o,this.p1.y=this.p1.y-c,this.p2.x=this.p2.x-o,this.p2.y=this.p2.y-c,this.p3.x=this.p3.x-o,this.p3.y=this.p3.y-c,t.mousePos1=s}}checkRayIntersects(e){if(this.checkRayIntersectFilter(e)){if(!this.p3)return null;var t=a.A.linesIntersection(a.A.perpendicularBisector(a.A.line(this.p1,this.p3)),a.A.perpendicularBisector(a.A.line(this.p2,this.p3)));if(!isFinite(t.x)||!isFinite(t.y))return n=a.A.linesIntersection(a.A.line(e.p1,e.p2),a.A.line(this.p1,this.p2)),a.A.intersectionIsOnSegment(n,this)&&a.A.intersectionIsOnRay(n,e)?n:null;for(var n=a.A.lineCircleIntersections(a.A.line(e.p1,e.p2),a.A.circle(t,this.p2)),r=[],i=[],o=1;o<=2;o++)r[o]=!a.A.intersectionIsOnSegment(a.A.linesIntersection(a.A.line(this.p1,this.p2),a.A.line(this.p3,n[o])),a.A.line(this.p3,n[o]))&&a.A.intersectionIsOnRay(n[o],e)&&a.A.distanceSquared(n[o],e.p1)>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale,i[o]=a.A.distanceSquared(e.p1,n[o]);if(r[1]&&(!r[2]||i[1]<i[2]))return n[1];if(r[2]&&(!r[1]||i[2]<i[1]))return n[2]}}onRayIncident(e,t,n){var r=e.p1.x-n.x,i=e.p1.y-n.y,s=this.p2.x-this.p1.x,o=this.p2.y-this.p1.y,c=a.A.linesIntersection(a.A.perpendicularBisector(a.A.line(this.p1,this.p3)),a.A.perpendicularBisector(a.A.line(this.p2,this.p3)));if(isFinite(c.x)&&isFinite(c.y)){var u=c.x-n.x,l=c.y-n.y,h=u*u+l*l,p=r*u+i*l;e.p1=n,e.p2=a.A.point(n.x-h*r+2*p*u,n.y-h*i+2*p*l)}else r=e.p1.x-n.x,i=e.p1.y-n.y,s=this.p2.x-this.p1.x,o=this.p2.y-this.p1.y,e.p1=n,e.p2=a.A.point(n.x+r*(o*o-s*s)-2*i*s*o,n.y+i*(s*s-o*o)-2*r*s*o)}}const c=o},7743:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(9472),i=n(7791),s=n(2635),a=n(7235),o=n(6492);class c extends((0,i.A)(r.A)){static type="BeamSplitter";static isOptical=!0;static serializableDefaults={p1:null,p2:null,transRatio:.5,filter:!1,invert:!1,wavelength:a.A.GREEN_WAVELENGTH,bandwidth:10};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.BeamSplitter.title")),e.createNumber(s.Ay.t("simulator:sceneObjs.BeamSplitter.transRatio"),0,1,.01,this.transRatio,(function(e,t){e.transRatio=t})),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return r.fillStyle="rgb(128,128,128)",void r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i);if(r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.beamSplitter.color),r.lineWidth=this.scene.theme.beamSplitter.width*i,r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke(),this.scene.simulateColors&&this.wavelength&&this.filter){const t=a.A.wavelengthToColor(this.wavelength||a.A.GREEN_WAVELENGTH,1);r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(t),r.setLineDash([15*i,15*i]),r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke()}r.setLineDash([])}checkRayIntersects(e){return this.checkRayIntersectFilter(e)?this.checkRayIntersectsShape(e):null}onRayIncident(e,t,n){var r=e.p1.x-n.x,i=e.p1.y-n.y;e.p1=n;var s=this.p2.x-this.p1.x,a=this.p2.y-this.p1.y;e.p2=o.A.point(n.x+r*(a*a-s*s)-2*i*s*a,n.y+i*(s*s-a*a)-2*r*s*a);var c=o.A.line(n,o.A.point(n.x-r,n.y-i)),u=this.transRatio;return c.brightness_s=u*e.brightness_s,c.brightness_p=u*e.brightness_p,c.wavelength=e.wavelength,e.brightness_s*=1-u,e.brightness_p*=1-u,c.brightness_s+c.brightness_p>("default"!=this.scene.colorMode?1e-6:.01)?{newRays:[c]}:e.brightness_s+e.brightness_p>("default"!=this.scene.colorMode?1e-6:.01)?{truncation:c.brightness_s+c.brightness_p}:{isAbsorbed:!0,truncation:e.brightness_s+e.brightness_p+c.brightness_s+c.brightness_p}}}const u=c},301:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(2635),i=n(7235),s=n(6492),a=n(867);class o extends a.A{static type="ConcaveDiffractionGrating";static isOptical=!0;static serializableDefaults={p1:null,p2:null,p3:null,lineDensity:1e3,customBrightness:!1,brightnesses:[1,.5,.5],slitRatio:.5};populateObjBar(e){e.setTitle(r.Ay.t("main:tools.ConcaveDiffractionGrating.title")),e.createNumber(r.Ay.t("simulator:sceneObjs.DiffractionGrating.lineDensity",{lengthUnit:"mm"}),1,2500,5,this.lineDensity,(function(e,t){e.lineDensity=t})),e.createBoolean(r.Ay.t("simulator:sceneObjs.DiffractionGrating.customBrightness"),this.customBrightness,(function(e,t){e.customBrightness=t}),r.Ay.t("simulator:sceneObjs.DiffractionGrating.customBrightnessInfo"),!0),this.customBrightness?e.createTuple("",this.brightnesses.join(", "),(function(e,t){e.brightnesses=t.split(",").map(parseFloat)})):e.showAdvanced(!this.arePropertiesDefault(["slitRatio"]))&&e.createNumber(r.Ay.t("simulator:sceneObjs.DiffractionGrating.slitRatio"),0,1,.001,this.slitRatio,(function(e,t){e.slitRatio=t}))}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(r.fillStyle="rgb(255,0,255)",this.p3&&this.p2){var a=s.A.linesIntersection(s.A.perpendicularBisector(s.A.line(this.p1,this.p3)),s.A.perpendicularBisector(s.A.line(this.p2,this.p3)));if(isFinite(a.x)&&isFinite(a.y)){var o=s.A.distance(a,this.p3),c=Math.atan2(this.p1.y-a.y,this.p1.x-a.x),u=Math.atan2(this.p2.y-a.y,this.p2.x-a.x),l=Math.atan2(this.p3.y-a.y,this.p3.x-a.x);r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.mirror.color),r.lineWidth=this.scene.theme.mirror.width*i,r.beginPath(),r.arc(a.x,a.y,o,c,u,u<l&&l<c||c<u&&u<l||l<c&&c<u),r.stroke(),r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.diffractionGrating.color),r.lineWidth=this.scene.theme.diffractionGrating.width*i,r.lineCap="butt",r.beginPath(),this.customBrightness?r.setLineDash(this.scene.theme.diffractionGrating.dash.map((e=>e*i))):r.setLineDash([2*this.scene.theme.diffractionGrating.dash[0]*(1-this.slitRatio)*i,2*this.scene.theme.diffractionGrating.dash[1]*this.slitRatio*i]),r.arc(a.x,a.y,o,c,u,u<l&&l<c||c<u&&u<l||l<c&&c<u),r.stroke(),r.setLineDash([]),r.lineWidth=1*i,n&&(r.fillRect(this.p3.x-1.5*i,this.p3.y-1.5*i,3*i,3*i),r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i))}else r.fillRect(this.p3.x-1.5*i,this.p3.y-1.5*i,3*i,3*i),r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i)}else this.p2?(r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i)):(r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i))}move(e,t){return this.p1.x=this.p1.x+e,this.p1.y=this.p1.y+t,this.p2.x=this.p2.x+e,this.p2.y=this.p2.y+t,this.p3.x=this.p3.x+e,this.p3.y=this.p3.y+t,!0}rotate(e,t){const n=t||this.p3,r=this.p1.x-n.x,i=this.p1.y-n.y,s=this.p2.x-n.x,a=this.p2.y-n.y,o=this.p3.x-n.x,c=this.p3.y-n.y;return this.p1.x=n.x+r*Math.cos(e)-i*Math.sin(e),this.p1.y=n.y+r*Math.sin(e)+i*Math.cos(e),this.p2.x=n.x+s*Math.cos(e)-a*Math.sin(e),this.p2.y=n.y+s*Math.sin(e)+a*Math.cos(e),this.p3.x=n.x+o*Math.cos(e)-c*Math.sin(e),this.p3.y=n.y+o*Math.sin(e)+c*Math.cos(e),!0}scale(e,t){const n=t||this.p3,r=this.p1.x-n.x,i=this.p1.y-n.y,s=this.p2.x-n.x,a=this.p2.y-n.y,o=this.p3.x-n.x,c=this.p3.y-n.y;return this.p1.x=n.x+r*e,this.p1.y=n.y+i*e,this.p2.x=n.x+s*e,this.p2.y=n.y+a*e,this.p3.x=n.x+o*e,this.p3.y=n.y+c*e,!0}getDefaultCenter(){return this.p3}onConstructMouseDown(e,t,n){if(this.constructionPoint||(this.constructionPoint=e.getPosSnappedToGrid(),this.p1=this.constructionPoint,this.p2=null,this.p3=null),this.p2||this.p3)return!this.p2||this.p3||e.snapsOnPoint(this.p1)?void 0:(this.p2=n?e.getPosSnappedToDirection(this.p1,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid(),void(this.p3=e.getPosSnappedToGrid()));this.p2=e.getPosSnappedToGrid()}onConstructMouseMove(e,t,n){if(!this.p3&&!e.snapsOnPoint(this.p1))return this.p2=n?e.getPosSnappedToDirection(this.constructionPoint,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid(),void(this.p1=t?s.A.point(2*this.constructionPoint.x-this.p2.x,2*this.constructionPoint.y-this.p2.y):this.constructionPoint);this.p3&&(this.p3=e.getPosSnappedToGrid())}onConstructMouseUp(e,t,n){if(!this.p2||this.p3||e.snapsOnPoint(this.p1))return this.p3&&!e.snapsOnPoint(this.p2)?(this.p3=e.getPosSnappedToGrid(),delete this.constructionPoint,{isDone:!0}):void 0;this.p3=e.getPosSnappedToGrid()}checkMouseOver(e){let t={};if(e.isOnPoint(this.p1)&&s.A.distanceSquared(e.pos,this.p1)<=s.A.distanceSquared(e.pos,this.p2)&&s.A.distanceSquared(e.pos,this.p1)<=s.A.distanceSquared(e.pos,this.p3))return t.part=1,t.targetPoint=s.A.point(this.p1.x,this.p1.y),t;if(e.isOnPoint(this.p2)&&s.A.distanceSquared(e.pos,this.p2)<=s.A.distanceSquared(e.pos,this.p3))return t.part=2,t.targetPoint=s.A.point(this.p2.x,this.p2.y),t;if(e.isOnPoint(this.p3))return t.part=3,t.targetPoint=s.A.point(this.p3.x,this.p3.y),t;var n=s.A.linesIntersection(s.A.perpendicularBisector(s.A.line(this.p1,this.p3)),s.A.perpendicularBisector(s.A.line(this.p2,this.p3)));const r=e.getPosSnappedToGrid();if(isFinite(n.x)&&isFinite(n.y)){var i=s.A.distance(n,this.p3),a=Math.atan2(this.p1.y-n.y,this.p1.x-n.x),o=Math.atan2(this.p2.y-n.y,this.p2.x-n.x),c=Math.atan2(this.p3.y-n.y,this.p3.x-n.x),u=Math.atan2(e.pos.y-n.y,e.pos.x-n.x);if(Math.abs(s.A.distance(n,e.pos)-i)<e.getClickExtent()&&(o<c&&c<a||a<o&&o<c||c<a&&a<o)==(o<u&&u<a||a<o&&o<u||u<a&&a<o))return t.part=0,t.mousePos0=r,t.mousePos1=r,t.snapContext={},t}else if(e.isOnSegment(this))return t.part=0,t.mousePos0=r,t.mousePos1=r,t.snapContext={},t}onDrag(e,t,n,r){var i;if(1==t.part&&(i=n?s.A.segmentMidpoint(t.originalObj):t.originalObj.p2,this.p1=r?e.getPosSnappedToDirection(i,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y}]):e.getPosSnappedToGrid(),this.p2=n?s.A.point(2*i.x-this.p1.x,2*i.y-this.p1.y):i),2==t.part&&(i=n?s.A.segmentMidpoint(t.originalObj):t.originalObj.p1,this.p2=r?e.getPosSnappedToDirection(i,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y}]):e.getPosSnappedToGrid(),this.p1=n?s.A.point(2*i.x-this.p2.x,2*i.y-this.p2.y):i),3==t.part&&(this.p3=e.getPosSnappedToGrid()),0==t.part){if(r)var a=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y},{x:t.originalObj.p2.y-t.originalObj.p1.y,y:-(t.originalObj.p2.x-t.originalObj.p1.x)}],t.snapContext);else a=e.getPosSnappedToGrid(),t.snapContext={};var o=t.mousePos1.x-a.x,c=t.mousePos1.y-a.y;this.p1.x=this.p1.x-o,this.p1.y=this.p1.y-c,this.p2.x=this.p2.x-o,this.p2.y=this.p2.y-c,this.p3.x=this.p3.x-o,this.p3.y=this.p3.y-c,t.mousePos1=a}}onSimulationStart(){this.warning=null,"images"!=this.scene.mode&&"observer"!=this.scene.mode||(this.warning=(this.warning||"")+r.Ay.t("simulator:sceneObjs.common.imageDetectionWarning")),this.scene.simulateColors||(this.warning=(this.warning||"")+r.Ay.t("simulator:sceneObjs.common.nonSimulateColorsWarning"))}checkRayIntersects(e){if(!this.p3)return null;var t=s.A.linesIntersection(s.A.perpendicularBisector(s.A.line(this.p1,this.p3)),s.A.perpendicularBisector(s.A.line(this.p2,this.p3)));if(!isFinite(t.x)||!isFinite(t.y))return n=s.A.linesIntersection(s.A.line(e.p1,e.p2),s.A.line(this.p1,this.p2)),s.A.intersectionIsOnSegment(n,this)&&s.A.intersectionIsOnRay(n,e)?n:null;for(var n=s.A.lineCircleIntersections(s.A.line(e.p1,e.p2),s.A.circle(t,this.p2)),r=[],a=[],o=1;o<=2;o++)r[o]=!s.A.intersectionIsOnSegment(s.A.linesIntersection(s.A.line(this.p1,this.p2),s.A.line(this.p3,n[o])),s.A.line(this.p3,n[o]))&&s.A.intersectionIsOnRay(n[o],e)&&s.A.distanceSquared(n[o],e.p1)>i.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale,a[o]=s.A.distanceSquared(e.p1,n[o]);return r[1]&&(!r[2]||a[1]<a[2])?n[1]:r[2]&&(!r[1]||a[2]<a[1])?n[2]:void 0}onRayIncident(e,t,n){let r=0;const a=e.p1.x-n.x,o=e.p1.y-n.y,c=s.A.linesIntersection(s.A.perpendicularBisector(s.A.line(this.p1,this.p3)),s.A.perpendicularBisector(s.A.line(this.p2,this.p3))),u=1e-6*(e.wavelength||i.A.GREEN_WAVELENGTH),l=1/this.lineDensity,h=l*this.slitRatio;let p,d,f=[],m=Math.atan2(o,a);if(isFinite(c.x)&&isFinite(c.y))p=Math.atan2(n.y-c.y,n.x-c.x),d=a*(n.x-c.x)+o*(n.y-c.y);else{const e=this.p2.x-this.p1.x,t=this.p2.y-this.p1.y;d=a*e+o*t,p=Math.atan2(-e,t)}d<0&&(p+=Math.PI);let g=m-p;const y=Math.ceil((Math.sin(g)-1)*l/u),x=Math.floor((Math.sin(g)+1)*l/u);for(let t=y;t<=x;t++){const i=t*u/l-Math.sin(g);if(i<-1||i>1)continue;let a=Math.asin(i);const o=p+a,c=Math.cos(o),d=Math.sin(o),m=s.A.line(n,s.A.point(n.x+c,n.y+d));if(this.customBrightness)var v=this.brightnesses[t<=0?-2*t:2*t-1]||0;else{a=Math.asin(Math.sin(g)-t*u/l);var b=2*Math.PI*h/u*(Math.sin(g)-Math.sin(a)),D=0==b?1:Math.sin(b/2)/(b/2);v=h*h/(l*l)*Math.pow(D,2)}0!=v&&(m.wavelength=e.wavelength,m.brightness_s=e.brightness_s*v,m.brightness_p=e.brightness_p*v,m.gap=!0,m.brightness_s+m.brightness_p>("default"!=this.scene.colorMode?1e-6:.01)?f.push(m):r+=m.brightness_s+m.brightness_p)}return{isAbsorbed:!0,newRays:f,truncation:r}}}const c=o},1631:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(9472),i=n(7791),s=n(2635),a=n(7235),o=n(6492),c=n(1382);class u extends((0,i.A)(r.A)){static type="CustomMirror";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={p1:null,p2:null,eqn:"0.5\\cdot\\sqrt{1-x^2}",filter:!1,invert:!1,wavelength:a.A.GREEN_WAVELENGTH,bandwidth:10};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.categories.mirror")),e.createEquation("y = ",this.eqn,(function(e,t){e.eqn=t,delete e.tmp_points}),"<ul><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.constants")+"<br><code>pi e</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.operators")+"<br><code>+ - * / ^</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.functions")+"<br><code>sqrt sin cos tan sec csc cot sinh cosh tanh log exp arcsin arccos arctan arcsinh arccosh arctanh floor round ceil trunc sgn max min abs</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.module")+"</li></ul>"),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return r.fillStyle="rgb(128,128,128)",void r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i);if(!this.tmp_points&&!this.initPoints())return r.fillStyle="red",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),void r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i);const s=a.A.wavelengthToColor(this.wavelength||a.A.GREEN_WAVELENGTH,1);r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.simulateColors&&this.wavelength&&this.filter?s:this.scene.theme.mirror.color),r.lineWidth=this.scene.theme.mirror.width*i,r.beginPath();var o=this.tmp_points;r.moveTo(o[0].x,o[0].y);for(var c=1;c<o.length;c++)r.lineTo(o[c].x,o[c].y);r.stroke(),n&&(r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i))}move(e,t){return super.move(e,t),delete this.tmp_points,!0}rotate(e,t=null){return super.rotate(e,t),delete this.tmp_points,!0}scale(e,t=null){return super.scale(e,t),delete this.tmp_points,!0}onConstructMouseDown(e,t,n){super.onConstructMouseDown(e,t,n),delete this.tmp_points}onConstructMouseMove(e,t,n){super.onConstructMouseMove(e,t,n),delete this.tmp_points}onConstructMouseUp(e,t,n){const r=super.onConstructMouseUp(e,t,n);return delete this.tmp_points,r}checkMouseOver(e){let t={};if(e.isOnPoint(this.p1)&&o.A.distanceSquared(e.pos,this.p1)<=o.A.distanceSquared(e.pos,this.p2))return t.part=1,t.targetPoint=o.A.point(this.p1.x,this.p1.y),t;if(e.isOnPoint(this.p2))return t.part=2,t.targetPoint=o.A.point(this.p2.x,this.p2.y),t;if(this.tmp_points||this.initPoints()){var n,r=this.tmp_points;for(n=0;n<r.length-1;n++){var i=o.A.line(r[n],r[n+1]);if(e.isOnSegment(i)){const n=e.getPosSnappedToGrid();return t.part=0,t.mousePos0=n,t.mousePos1=n,t.snapContext={},t}}}}onDrag(e,t,n,r){super.onDrag(e,t,n,r),delete this.tmp_points}checkRayIntersects(e){if(this.tmp_points){if(!this.checkRayIntersectFilter(e))return}else if(!this.initPoints()||!this.checkRayIntersectFilter(e))return;var t,n,r,i=this.tmp_points,s=o.A.distance(this.p2,e.p1)>o.A.distance(this.p1,e.p1);for(n=0;n<i.length-1;n++){t=s?n:i.length-2-n;var c=o.A.linesIntersection(o.A.line(e.p1,e.p2),o.A.line(i[t],i[t+1])),u=o.A.line(i[t],i[t+1]);o.A.distance(e.p1,c)<a.A.MIN_RAY_SEGMENT_LENGTH*this.scene.lengthScale||o.A.intersectionIsOnSegment(c,u)&&o.A.intersectionIsOnRay(c,e)&&(!r||o.A.distance(e.p1,c)<o.A.distance(e.p1,r))&&(r=c,this.tmp_i=t)}if(r)return r}onRayIncident(e,t,n){var r,i=e.p1.x-n.x,s=e.p1.y-n.y,a=this.tmp_i,c=this.tmp_points,u=o.A.line(c[a],c[a+1]),l=u.p2.x-u.p1.x,h=u.p2.y-u.p1.y;if(e.p1=n,r=Math.abs(l)>Math.abs(h)?(n.x-u.p1.x)/l:(n.y-u.p1.y)/h,0==a&&r<.5||a==c.length-2&&r>=.5)e.p2=o.A.point(n.x+i*(h*h-l*l)-2*s*l*h,n.y+s*(l*l-h*h)-2*i*l*h);else{var p,d,f,m=n.x+i*(h*h-l*l)-2*s*l*h,g=n.y+s*(l*l-h*h)-2*i*l*h,y=(p=r<.5?o.A.line(c[a-1],c[a]):o.A.line(c[a+1],c[a+2])).p2.x-p.p1.x,x=p.p2.y-p.p1.y,v=n.x+i*(x*x-y*y)-2*s*y*x,b=n.y+s*(y*y-x*x)-2*i*y*x;r<.5?(d=m*(.5+r)+v*(.5-r),f=g*(.5+r)+b*(.5-r)):(d=v*(r-.5)+m*(1.5-r),f=b*(r-.5)+g*(1.5-r)),e.p2=o.A.point(d,f)}}initPoints(){if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return delete this.tmp_points,!1;var e;try{e=(0,c.y)(this.eqn)}catch(e){return delete this.tmp_points,this.error=e.toString(),!1}var t,n=o.A.distance(this.p1,this.p2),r=[(this.p2.x-this.p1.x)/n,(this.p2.y-this.p1.y)/n],i=[r[1],-r[0]],s=n/2;this.tmp_points=[];var a="";for(t=-.1000001*this.scene.lengthScale;t<n+.09*this.scene.lengthScale;t+=.1000001*this.scene.lengthScale){var u=t+.05*this.scene.lengthScale;u<0&&(u=0),u>n&&(u=n);var l=2*(u-s)/n;try{var h=e({x:l,pi:Math.PI})*n*.5,p=o.A.point(this.p1.x+r[0]*u+i[0]*h,this.p1.y+r[1]*u+i[1]*h);this.tmp_points.push(p)}catch(e){a=e}}return 0==this.tmp_points.length?(delete this.tmp_points,this.error=a.toString(),!1):(this.error=null,!0)}}const l=u},5197:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(9472),i=n(7791),s=n(2635),a=n(7235),o=n(6492);class c extends((0,i.A)(r.A)){static type="IdealMirror";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={p1:null,p2:null,focalLength:100,filter:!1,invert:!1,wavelength:a.A.GREEN_WAVELENGTH,bandwidth:10};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.IdealMirror.title"));var t=!1;localStorage&&localStorage.rayOpticsCartesianSign&&(t="true"==localStorage.rayOpticsCartesianSign),e.createNumber(s.Ay.t("simulator:sceneObjs.common.focalLength"),-1e3*this.scene.lengthScale,1e3*this.scene.lengthScale,1*this.scene.lengthScale,this.focalLength*(t?-1:1),(function(e,n){e.focalLength=n*(t?-1:1)}),s.Ay.t("simulator:sceneObjs.common.lengthUnitInfo")),e.showAdvanced(t)&&e.createBoolean(s.Ay.t("simulator:sceneObjs.IdealMirror.cartesianSign"),t,(function(e,t){localStorage.rayOpticsCartesianSign=t?"true":"false"}),null,!0),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return r.fillStyle="rgb(128,128,128)",void r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i);var s=Math.sqrt((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y)),c=(this.p2.x-this.p1.x)/s,u=(this.p2.y-this.p1.y)/s,l=u,h=-c,p=this.scene.theme.idealCurveArrow.size/2*i,d=this.scene.theme.idealCurveArrow.size/2*i,f=Math.max(1,this.scene.theme.mirror.width/2)*i;const m=a.A.wavelengthToColor(this.wavelength||a.A.GREEN_WAVELENGTH,1);r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.simulateColors&&this.wavelength&&this.filter?m:this.scene.theme.mirror.color),r.lineWidth=this.scene.theme.mirror.width*i,r.globalAlpha=1,r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke();var g=o.A.segmentMidpoint(this);r.strokeStyle=e.rgbaToCssColor(this.scene.theme.idealCurveCenter.color),r.lineWidth=this.scene.theme.idealCurveCenter.size*i,r.beginPath(),r.moveTo(g.x-l*f,g.y-h*f),r.lineTo(g.x+l*f,g.y+h*f),r.stroke(),r.fillStyle=e.rgbaToCssColor(this.scene.theme.idealCurveArrow.color),this.focalLength<0&&(r.beginPath(),r.moveTo(this.p1.x-c*d,this.p1.y-u*d),r.lineTo(this.p1.x+c*d+l*p,this.p1.y+u*d+h*p),r.lineTo(this.p1.x+c*d-l*p,this.p1.y+u*d-h*p),r.fill(),r.beginPath(),r.moveTo(this.p2.x+c*d,this.p2.y+u*d),r.lineTo(this.p2.x-c*d+l*p,this.p2.y-u*d+h*p),r.lineTo(this.p2.x-c*d-l*p,this.p2.y-u*d-h*p),r.fill()),this.focalLength>0&&(r.beginPath(),r.moveTo(this.p1.x+c*d,this.p1.y+u*d),r.lineTo(this.p1.x-c*d+l*p,this.p1.y-u*d+h*p),r.lineTo(this.p1.x-c*d-l*p,this.p1.y-u*d-h*p),r.fill(),r.beginPath(),r.moveTo(this.p2.x-c*d,this.p2.y-u*d),r.lineTo(this.p2.x+c*d+l*p,this.p2.y+u*d+h*p),r.lineTo(this.p2.x+c*d-l*p,this.p2.y+u*d-h*p),r.fill())}scale(e,t){return super.scale(e,t),this.focalLength*=e,!0}checkRayIntersects(e){return this.checkRayIntersectFilter(e)?this.checkRayIntersectsShape(e):null}onRayIncident(e,t,n){var r,i,s=o.A.segmentLength(this),a=(-this.p1.y+this.p2.y)/s,c=(this.p1.x-this.p2.x)/s,u=o.A.segmentMidpoint(this),l=o.A.point(u.x+2*a*this.focalLength,u.y+2*c*this.focalLength),h=o.A.point(u.x-2*a*this.focalLength,u.y-2*c*this.focalLength);o.A.distanceSquared(e.p1,l)<o.A.distanceSquared(e.p1,h)?(r=o.A.parallelLineThroughPoint(this,l),i=o.A.parallelLineThroughPoint(this,h)):(r=o.A.parallelLineThroughPoint(this,h),i=o.A.parallelLineThroughPoint(this,l)),this.focalLength>0?(e.p2=o.A.linesIntersection(i,o.A.line(u,o.A.linesIntersection(r,e))),e.p1=o.A.point(n.x,n.y)):(e.p2=o.A.linesIntersection(i,o.A.line(n,o.A.linesIntersection(r,o.A.line(u,o.A.linesIntersection(i,e))))),e.p1=o.A.point(n.x,n.y)),e.p1.x=2*e.p1.x-e.p2.x,e.p1.y=2*e.p1.y-e.p2.y;var p=e.p1.x-n.x,d=e.p1.y-n.y,f=this.p2.x-this.p1.x,m=this.p2.y-this.p1.y;e.p1=n,e.p2=o.A.point(n.x+p*(m*m-f*f)-2*d*f*m,n.y+d*(f*f-m*m)-2*p*f*m)}}const u=c},5568:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(9472),i=n(7791),s=n(2635),a=n(7235),o=n(6492);class c extends((0,i.A)(r.A)){static type="Mirror";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={p1:null,p2:null,filter:!1,invert:!1,wavelength:a.A.GREEN_WAVELENGTH,bandwidth:10};populateObjBar(e){e.setTitle(s.Ay.t("main:meta.parentheses",{main:s.Ay.t("main:tools.categories.mirror"),sub:s.Ay.t("main:tools.Mirror.title")})),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return r.fillStyle="rgb(128,128,128)",void r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i);const s=a.A.wavelengthToColor(this.wavelength||a.A.GREEN_WAVELENGTH,1);r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.simulateColors&&this.wavelength&&this.filter?s:this.scene.theme.mirror.color),r.lineWidth=this.scene.theme.mirror.width*i,r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke()}checkRayIntersects(e){return this.checkRayIntersectFilter(e)?this.checkRayIntersectsShape(e):null}onRayIncident(e,t,n){var r=e.p1.x-n.x,i=e.p1.y-n.y,s=this.p2.x-this.p1.x,a=this.p2.y-this.p1.y;e.p1=n,e.p2=o.A.point(n.x+r*(a*a-s*s)-2*i*s*a,n.y+i*(s*s-a*a)-2*r*s*a)}}const u=c},1071:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(9472),i=n(2635),s=n(7235),a=n(6492);class o extends r.A{static type="ParabolicMirror";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={p1:null,p2:null,p3:null,filter:!1,invert:!1,wavelength:s.A.GREEN_WAVELENGTH,bandwidth:10};populateObjBar(e){e.setTitle(i.Ay.t("main:meta.parentheses",{main:i.Ay.t("main:tools.categories.mirror"),sub:i.Ay.t("main:tools.ParabolicMirror.title")})),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(r.fillStyle="rgb(255,0,255)",this.p3&&this.p2){var o=a.A.distance(this.p1,this.p2),c=[(this.p2.x-this.p1.x)/o,(this.p2.y-this.p1.y)/o],u=[c[1],-c[0]],l=(this.p3.x-this.p1.x)*u[0]+(this.p3.y-this.p1.y)*u[1];this.p3=a.A.point(.5*(this.p1.x+this.p2.x)+u[0]*l,.5*(this.p1.y+this.p2.y)+u[1]*l);var h,p=o/2,d=l/(p*p);const t=s.A.wavelengthToColor(this.wavelength||s.A.GREEN_WAVELENGTH,1);for(r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.simulateColors&&this.wavelength&&this.filter?t:this.scene.theme.mirror.color),r.lineWidth=this.scene.theme.mirror.width*i,r.beginPath(),this.tmp_points=[a.A.point(this.p1.x,this.p1.y)],r.moveTo(this.p1.x,this.p1.y),h=.1*this.scene.lengthScale;h<o;h+=.1*this.scene.lengthScale){var f=h+.001*this.scene.lengthScale,m=f-p,g=l-d*m*m,y=a.A.point(this.p1.x+c[0]*f+u[0]*g,this.p1.y+c[1]*f+u[1]*g);r.lineTo(y.x,y.y),this.tmp_points.push(y)}if(r.stroke(),n){r.fillRect(this.p3.x-1.5*i,this.p3.y-1.5*i,3*i,3*i);var x=.5*(this.p1.x+this.p2.x)+u[0]*(l-1/(4*d)),v=.5*(this.p1.y+this.p2.y)+u[1]*(l-1/(4*d));r.fillRect(x-1.5*i,v-1.5*i,3*i,3*i),r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i)}}else this.p2?(r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i)):(r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i))}move(e,t){return this.p1.x=this.p1.x+e,this.p1.y=this.p1.y+t,this.p2.x=this.p2.x+e,this.p2.y=this.p2.y+t,this.p3.x=this.p3.x+e,this.p3.y=this.p3.y+t,!0}rotate(e,t){const n=t||this.p3,r=this.p1.x-n.x,i=this.p1.y-n.y,s=this.p2.x-n.x,a=this.p2.y-n.y,o=this.p3.x-n.x,c=this.p3.y-n.y;return this.p1.x=n.x+r*Math.cos(e)-i*Math.sin(e),this.p1.y=n.y+r*Math.sin(e)+i*Math.cos(e),this.p2.x=n.x+s*Math.cos(e)-a*Math.sin(e),this.p2.y=n.y+s*Math.sin(e)+a*Math.cos(e),this.p3.x=n.x+o*Math.cos(e)-c*Math.sin(e),this.p3.y=n.y+o*Math.sin(e)+c*Math.cos(e),!0}scale(e,t){const n=t||this.p3,r=this.p1.x-n.x,i=this.p1.y-n.y,s=this.p2.x-n.x,a=this.p2.y-n.y,o=this.p3.x-n.x,c=this.p3.y-n.y;return this.p1.x=n.x+r*e,this.p1.y=n.y+i*e,this.p2.x=n.x+s*e,this.p2.y=n.y+a*e,this.p3.x=n.x+o*e,this.p3.y=n.y+c*e,!0}getDefaultCenter(){return this.p3}onConstructMouseDown(e,t,n){if(this.constructionPoint||(this.constructionPoint=e.getPosSnappedToGrid(),this.p1=this.constructionPoint,this.p2=null,this.p3=null),this.p2||this.p3)return!this.p2||this.p3||e.snapsOnPoint(this.p1)?void 0:(this.p2=n?e.getPosSnappedToDirection(this.p1,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid(),void(this.p3=e.getPosSnappedToGrid()));this.p2=e.getPosSnappedToGrid()}onConstructMouseMove(e,t,n){if(!this.p3&&!e.snapsOnPoint(this.p1))return this.p2=n?e.getPosSnappedToDirection(this.constructionPoint,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid(),void(this.p1=t?a.A.point(2*this.constructionPoint.x-this.p2.x,2*this.constructionPoint.y-this.p2.y):this.constructionPoint);this.p3&&(this.p3=e.getPosSnappedToGrid())}onConstructMouseUp(e,t,n){if(!this.p2||this.p3||e.snapsOnPoint(this.p1))return this.p3&&!e.snapsOnPoint(this.p2)?(this.p3=e.getPosSnappedToGrid(),delete this.constructionPoint,{isDone:!0}):void 0;this.p3=e.getPosSnappedToGrid()}checkMouseOver(e){let t={};if(e.isOnPoint(this.p1)&&a.A.distanceSquared(e.pos,this.p1)<=a.A.distanceSquared(e.pos,this.p2)&&a.A.distanceSquared(e.pos,this.p1)<=a.A.distanceSquared(e.pos,this.p3))return t.part=1,t.targetPoint=a.A.point(this.p1.x,this.p1.y),t;if(this.p2&&e.isOnPoint(this.p2)&&a.A.distanceSquared(e.pos,this.p2)<=a.A.distanceSquared(e.pos,this.p3))return t.part=2,t.targetPoint=a.A.point(this.p2.x,this.p2.y),t;if(this.p3&&e.isOnPoint(this.p3))return t.part=3,t.targetPoint=a.A.point(this.p3.x,this.p3.y),t;if(this.tmp_points){var n,r=this.tmp_points;for(n=0;n<r.length-1;n++){var i=a.A.line(r[n],r[n+1]);if(e.isOnSegment(i)){const n=e.getPosSnappedToGrid();return t.part=0,t.mousePos0=n,t.mousePos1=n,t.snapContext={},t}}}}onDrag(e,t,n,r){var i;if(1==t.part&&(i=n?a.A.segmentMidpoint(t.originalObj):t.originalObj.p2,this.p1=r?e.getPosSnappedToDirection(i,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y}]):e.getPosSnappedToGrid(),this.p2=n?a.A.point(2*i.x-this.p1.x,2*i.y-this.p1.y):i),2==t.part&&(i=n?a.A.segmentMidpoint(t.originalObj):t.originalObj.p1,this.p2=r?e.getPosSnappedToDirection(i,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y}]):e.getPosSnappedToGrid(),this.p1=n?a.A.point(2*i.x-this.p2.x,2*i.y-this.p2.y):i),3==t.part&&(this.p3=e.getPosSnappedToGrid()),0==t.part){if(r)var s=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y},{x:t.originalObj.p2.y-t.originalObj.p1.y,y:-(t.originalObj.p2.x-t.originalObj.p1.x)}],t.snapContext);else s=e.getPosSnappedToGrid(),t.snapContext={};var o=t.mousePos1.x-s.x,c=t.mousePos1.y-s.y;this.p1.x=this.p1.x-o,this.p1.y=this.p1.y-c,this.p2.x=this.p2.x-o,this.p2.y=this.p2.y-c,this.p3.x=this.p3.x-o,this.p3.y=this.p3.y-c,t.mousePos1=s}}transformToLocal(e){const t=a.A.distance(this.p1,this.p2),n=[(this.p2.x-this.p1.x)/t,(this.p2.y-this.p1.y)/t],r=[n[1],-n[0]],i=e.x-this.p3.x,s=e.y-this.p3.y;return{x:i*n[0]+s*n[1],y:i*r[0]+s*r[1]}}transformToGlobal(e){const t=a.A.distance(this.p1,this.p2),n=[(this.p2.x-this.p1.x)/t,(this.p2.y-this.p1.y)/t],r=[n[1],-n[0]];return a.A.point(this.p3.x+e.x*n[0]+e.y*r[0],this.p3.y+e.x*n[1]+e.y*r[1])}getParabolaCoefficient(){a.A.distance(this.p1,this.p2);const e=this.transformToLocal(this.p1);return e.y/(e.x*e.x)}isDegenerate(){return Math.abs((this.p2.x-this.p1.x)*(this.p3.y-this.p1.y)-(this.p3.x-this.p1.x)*(this.p2.y-this.p1.y))<1e-10}checkRayIntersects(e){if(!this.p3||!this.checkRayIntersectFilter(e))return;if(this.isDegenerate()){const t=a.A.linesIntersection(a.A.line(e.p1,e.p2),a.A.line(this.p1,this.p2));return t&&a.A.intersectionIsOnSegment(t,a.A.line(this.p1,this.p2))&&a.A.intersectionIsOnRay(t,e)&&a.A.distance(e.p1,t)>=s.A.MIN_RAY_SEGMENT_LENGTH*this.scene.lengthScale?t:null}const t=this.transformToLocal(e.p1),n=this.transformToLocal(e.p2),r=n.x-t.x,i=n.y-t.y,o=Math.sqrt(r*r+i*i),c=r/o,u=i/o,l=this.getParabolaCoefficient();if(Math.abs(c)<1e-10){const e=t.x,n=l*e*e;return(n-t.y)/u>s.A.MIN_RAY_SEGMENT_LENGTH*this.scene.lengthScale&&Math.abs(e)<=a.A.distance(this.p1,this.p2)/2?this.transformToGlobal({x:e,y:n}):null}const h=l*c*c,p=2*l*t.x*c-u,d=l*t.x*t.x-t.y,f=p*p-4*h*d;if(f<0)return null;const m=Math.sqrt(f);let g,y;g=p>0?(-p-m)/(2*h):(-p+m)/(2*h),y=d/(h*g);const x=[];if(g>s.A.MIN_RAY_SEGMENT_LENGTH*this.scene.lengthScale){const e=t.x+g*c,n=t.y+g*u;Math.abs(e)<=a.A.distance(this.p1,this.p2)/2&&x.push({t:g,point:this.transformToGlobal({x:e,y:n})})}if(y>s.A.MIN_RAY_SEGMENT_LENGTH*this.scene.lengthScale){const e=t.x+y*c,n=t.y+y*u;Math.abs(e)<=a.A.distance(this.p1,this.p2)/2&&x.push({t:y,point:this.transformToGlobal({x:e,y:n})})}return 0===x.length?null:x.reduce(((e,t)=>t.t<e.t?t:e)).point}onRayIncident(e,t,n){if(this.isDegenerate()){const t=[this.p2.x-this.p1.x,this.p2.y-this.p1.y],r=Math.sqrt(t[0]*t[0]+t[1]*t[1]),i=-t[1]/r,s=t[0]/r,o=n.x-e.p1.x,c=n.y-e.p1.y,u=Math.sqrt(o*o+c*c),l=o/u,h=c/u,p=l*i+h*s,d=l-2*p*i,f=h-2*p*s;return e.p1=n,void(e.p2=a.A.point(n.x+d,n.y+f))}const r=this.transformToLocal(n),i=this.transformToLocal(e.p1),s=r.x-i.x,o=r.y-i.y,c=Math.sqrt(s*s+o*o),u=s/c,l=o/c,h=-2*this.getParabolaCoefficient()*r.x,p=Math.sqrt(h*h+1),d=h/p,f=1/p,m=u*d+l*f,g=u-2*m*d,y=l-2*m*f;e.p1=n;const x=this.transformToGlobal({x:r.x+g,y:r.y+y});e.p2=x}}const c=o},8785:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(9472),i=n(8753),s=n(2635),a=n(7235),o=n(6492);class c extends((0,i.A)(r.A)){static type="ParamMirror";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={origin:{x:0,y:0},pieces:[{eqnX:"50\\cdot\\cos\\left(t\\right)",eqnY:"50\\cdot\\sin\\left(t\\right)",tMin:0,tMax:2*Math.PI,tStep:.01}],filter:!1,invert:!1,wavelength:a.A.GREEN_WAVELENGTH,bandwidth:10};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.categories.mirror")),e.createInfoBox("<ul><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.constants")+"<br><code>pi e</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.operators")+"<br><code>+ - * / ^</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.functions")+"<br><code>sqrt sin cos tan sec csc cot sinh cosh tanh log exp arcsin arccos arctan arcsinh arccosh arctanh floor round ceil trunc sgn max min abs</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.module")+"</li></ul>"),this.populateObjBarShape(e),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(!this.path&&!this.initPath())return r.fillStyle="red",void r.fillRect(this.origin.x-1.5*i,this.origin.y-1.5*i,3*i,3*i);let s=!1;if(this.path.length<2)s=!0;else{const e=this.path[0];let t=!0;for(let n=1;n<this.path.length;n++)if(Math.abs(this.path[n].x-e.x)>1e-10||Math.abs(this.path[n].y-e.y)>1e-10){t=!1;break}s=t}if(s)return r.fillStyle=n?"rgb(255,0,0)":"rgb(128,128,128)",void r.fillRect(this.origin.x-1.5*i,this.origin.y-1.5*i,3*i,3*i);const o=a.A.wavelengthToColor(this.wavelength||a.A.GREEN_WAVELENGTH,1);r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.simulateColors&&this.wavelength&&this.filter?o:this.scene.theme.mirror.color),r.lineWidth=this.scene.theme.mirror.width*i,this.drawPath(e),r.stroke()}checkRayIntersects(e){if(!this.checkRayIntersectFilter(e))return null;const t=this.getRayIntersections(e);if(0===t.length)return null;let n=null,r=1/0;for(const i of t){if(isNaN(i.incidentType))return{isAbsorbed:!0,isUndefinedBehavior:!0};const t=o.A.distanceSquared(e.p1,i.s_point);t<r&&(r=t,n=i)}return n?n.s_point:null}onRayIncident(e,t,n){const r=this.getRayIntersections(e);let i=null;for(const e of r)if(o.A.distanceSquared(n,e.s_point)<1e-10){i=e;break}if(!i)return;if(isNaN(i.incidentType)||isNaN(i.normal.x)||isNaN(i.normal.y))return;const s=e.p2.x-e.p1.x,a=e.p2.y-e.p1.y,c=i.normal.x,u=i.normal.y,l=Math.sqrt(c*c+u*u);if(l<1e-10)return;const h=c/l,p=u/l,d=s*h+a*p,f=s-2*d*h,m=a-2*d*p;e.p1=n,e.p2=o.A.point(n.x+f,n.y+m)}}const u=c},2432:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(8266),i=n(2635),s=n(7235),a=n(6492);class o extends r.A{static type="CustomArcSurface";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={p1:null,p2:null,p3:null,outRays:[{eqnTheta:"\\theta_0",eqnP:"0.7\\cdot P_0"},{eqnTheta:"\\pi-\\theta_0",eqnP:"P_0-P_1"}],twoSided:!1};populateObjBar(e){e.setTitle(i.Ay.t("main:tools.CustomArcSurface.title")),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale,s=this.scene.theme.customSurface,o=n?this.scene.highlightColorCss:e.rgbaToCssColor(s.color),c=s.width*i;if(r.fillStyle="rgb(255,0,255)",this.p3&&this.p2){var u=a.A.linesIntersection(a.A.perpendicularBisector(a.A.line(this.p1,this.p3)),a.A.perpendicularBisector(a.A.line(this.p2,this.p3)));if(isFinite(u.x)&&isFinite(u.y)){var l=a.A.distance(u,this.p3),h=Math.atan2(this.p1.y-u.y,this.p1.x-u.x),p=Math.atan2(this.p2.y-u.y,this.p2.x-u.x),d=Math.atan2(this.p3.y-u.y,this.p3.x-u.x),f=p<d&&d<h||h<p&&p<d||d<h&&h<p;if(this.twoSided)r.strokeStyle=o,r.lineWidth=c,r.setLineDash([]),r.beginPath(),r.arc(u.x,u.y,l,h,p,f),r.stroke();else{const e=c/2;r.strokeStyle=o,r.lineWidth=e,r.setLineDash([]),r.beginPath(),r.arc(u.x,u.y,l,h,p,f),r.stroke();var m=l+((this.p1.x-this.p2.x)*(this.p3.y-this.p2.y)-(this.p1.y-this.p2.y)*(this.p3.x-this.p2.x)<0?-e:e);m>0&&(r.lineWidth=e,r.setLineDash(s.dash.map((e=>e*i))),r.beginPath(),r.arc(u.x,u.y,m,h,p,f),r.stroke())}n&&(r.fillRect(this.p3.x-1.5*i,this.p3.y-1.5*i,3*i,3*i),r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i))}else{if(this.twoSided)r.strokeStyle=o,r.lineWidth=c,r.setLineDash([]),r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke();else{const e=c/2;r.strokeStyle=o,r.lineWidth=e,r.setLineDash([]),r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke();const t=this.p2.x-this.p1.x,n=this.p2.y-this.p1.y,a=Math.sqrt(t*t+n*n);if(a>0){const o=-n/a,c=t/a,u=e,l=this.p1.x-o*u,h=this.p1.y-c*u,p=this.p2.x-o*u,d=this.p2.y-c*u;r.lineWidth=e,r.setLineDash(s.dash.map((e=>e*i))),r.beginPath(),r.moveTo(l,h),r.lineTo(p,d),r.stroke()}}n&&(r.fillRect(this.p3.x-1.5*i,this.p3.y-1.5*i,3*i,3*i),r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i))}}else this.p2?(r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i),r.fillRect(this.p2.x-1.5*i,this.p2.y-1.5*i,3*i,3*i)):(r.fillStyle="rgb(255,0,0)",r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i));r.setLineDash([])}move(e,t){return this.p1.x=this.p1.x+e,this.p1.y=this.p1.y+t,this.p2.x=this.p2.x+e,this.p2.y=this.p2.y+t,this.p3.x=this.p3.x+e,this.p3.y=this.p3.y+t,!0}rotate(e,t){const n=t||this.p3,r=this.p1.x-n.x,i=this.p1.y-n.y,s=this.p2.x-n.x,a=this.p2.y-n.y,o=this.p3.x-n.x,c=this.p3.y-n.y;return this.p1.x=n.x+r*Math.cos(e)-i*Math.sin(e),this.p1.y=n.y+r*Math.sin(e)+i*Math.cos(e),this.p2.x=n.x+s*Math.cos(e)-a*Math.sin(e),this.p2.y=n.y+s*Math.sin(e)+a*Math.cos(e),this.p3.x=n.x+o*Math.cos(e)-c*Math.sin(e),this.p3.y=n.y+o*Math.sin(e)+c*Math.cos(e),!0}scale(e,t){const n=t||this.p3,r=this.p1.x-n.x,i=this.p1.y-n.y,s=this.p2.x-n.x,a=this.p2.y-n.y,o=this.p3.x-n.x,c=this.p3.y-n.y;return this.p1.x=n.x+r*e,this.p1.y=n.y+i*e,this.p2.x=n.x+s*e,this.p2.y=n.y+a*e,this.p3.x=n.x+o*e,this.p3.y=n.y+c*e,!0}getDefaultCenter(){return this.p3}onConstructMouseDown(e,t,n){if(this.constructionPoint||(this.constructionPoint=e.getPosSnappedToGrid(),this.p1=this.constructionPoint,this.p2=null,this.p3=null),this.p2||this.p3)return!this.p2||this.p3||e.snapsOnPoint(this.p1)?void 0:(this.p2=n?e.getPosSnappedToDirection(this.p1,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid(),void(this.p3=e.getPosSnappedToGrid()));this.p2=e.getPosSnappedToGrid()}onConstructMouseMove(e,t,n){if(!this.p3&&!e.snapsOnPoint(this.p1))return this.p2=n?e.getPosSnappedToDirection(this.constructionPoint,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}]):e.getPosSnappedToGrid(),void(this.p1=t?a.A.point(2*this.constructionPoint.x-this.p2.x,2*this.constructionPoint.y-this.p2.y):this.constructionPoint);this.p3&&(this.p3=e.getPosSnappedToGrid())}onConstructMouseUp(e,t,n){if(!this.p2||this.p3||e.snapsOnPoint(this.p1))return this.p3&&!e.snapsOnPoint(this.p2)?(this.p3=e.getPosSnappedToGrid(),delete this.constructionPoint,{isDone:!0}):void 0;this.p3=e.getPosSnappedToGrid()}checkMouseOver(e){let t={};if(e.isOnPoint(this.p1)&&a.A.distanceSquared(e.pos,this.p1)<=a.A.distanceSquared(e.pos,this.p2)&&a.A.distanceSquared(e.pos,this.p1)<=a.A.distanceSquared(e.pos,this.p3))return t.part=1,t.targetPoint=a.A.point(this.p1.x,this.p1.y),t;if(e.isOnPoint(this.p2)&&a.A.distanceSquared(e.pos,this.p2)<=a.A.distanceSquared(e.pos,this.p3))return t.part=2,t.targetPoint=a.A.point(this.p2.x,this.p2.y),t;if(e.isOnPoint(this.p3))return t.part=3,t.targetPoint=a.A.point(this.p3.x,this.p3.y),t;var n=a.A.linesIntersection(a.A.perpendicularBisector(a.A.line(this.p1,this.p3)),a.A.perpendicularBisector(a.A.line(this.p2,this.p3)));const r=e.getPosSnappedToGrid();if(isFinite(n.x)&&isFinite(n.y)){var i=a.A.distance(n,this.p3),s=Math.atan2(this.p1.y-n.y,this.p1.x-n.x),o=Math.atan2(this.p2.y-n.y,this.p2.x-n.x),c=Math.atan2(this.p3.y-n.y,this.p3.x-n.x),u=Math.atan2(e.pos.y-n.y,e.pos.x-n.x);if(Math.abs(a.A.distance(n,e.pos)-i)<e.getClickExtent()&&(o<c&&c<s||s<o&&o<c||c<s&&s<o)==(o<u&&u<s||s<o&&o<u||u<s&&s<o))return t.part=0,t.mousePos0=r,t.mousePos1=r,t.snapContext={},t}else if(e.isOnSegment(this))return t.part=0,t.mousePos0=r,t.mousePos1=r,t.snapContext={},t}onDrag(e,t,n,r){var i;if(1==t.part&&(i=n?a.A.segmentMidpoint(t.originalObj):t.originalObj.p2,this.p1=r?e.getPosSnappedToDirection(i,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y}]):e.getPosSnappedToGrid(),this.p2=n?a.A.point(2*i.x-this.p1.x,2*i.y-this.p1.y):i),2==t.part&&(i=n?a.A.segmentMidpoint(t.originalObj):t.originalObj.p1,this.p2=r?e.getPosSnappedToDirection(i,[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y}]):e.getPosSnappedToGrid(),this.p1=n?a.A.point(2*i.x-this.p2.x,2*i.y-this.p2.y):i),3==t.part&&(this.p3=e.getPosSnappedToGrid()),0==t.part){if(r)var s=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1},{x:t.originalObj.p2.x-t.originalObj.p1.x,y:t.originalObj.p2.y-t.originalObj.p1.y},{x:t.originalObj.p2.y-t.originalObj.p1.y,y:-(t.originalObj.p2.x-t.originalObj.p1.x)}],t.snapContext);else s=e.getPosSnappedToGrid(),t.snapContext={};var o=t.mousePos1.x-s.x,c=t.mousePos1.y-s.y;this.p1.x=this.p1.x-o,this.p1.y=this.p1.y-c,this.p2.x=this.p2.x-o,this.p2.y=this.p2.y-c,this.p3.x=this.p3.x-o,this.p3.y=this.p3.y-c,t.mousePos1=s}}checkRayIntersects(e){if(!this.p3)return null;var t=this.getIncidentData(e);return this.twoSided||-1!=t.incidentType?t.s_point:null}onRayIncident(e,t,n,r){var i,s=this.getIncidentData(e),o=a.A.linesIntersection(a.A.perpendicularBisector(a.A.line(this.p1,this.p3)),a.A.perpendicularBisector(a.A.line(this.p2,this.p3)));if(isFinite(o.x)&&isFinite(o.y)){var c=Math.atan2(this.p1.y-o.y,this.p1.x-o.x),u=Math.atan2(this.p2.y-o.y,this.p2.x-o.x)-c,l=Math.atan2(n.y-o.y,n.x-o.x)-c;u<0&&(u+=2*Math.PI),l<0&&(l+=2*Math.PI),i=Math.abs(u)>1e-10?2*l/u-1:0}else{const e=a.A.distance(n,this.p1);i=2*e/(e+a.A.distance(n,this.p2))-1}return this.handleOutRays(e,t,n,s.normal,i,r,e.bodyMergingObj)}getIncidentData(e){var t=a.A.linesIntersection(a.A.perpendicularBisector(a.A.line(this.p1,this.p3)),a.A.perpendicularBisector(a.A.line(this.p2,this.p3)));if(isFinite(t.x)&&isFinite(t.y)){for(var n,r=a.A.lineCircleIntersections(a.A.line(e.p1,e.p2),a.A.circle(t,this.p2)),i=[],o=1;o<=2;o++)if(!a.A.intersectionIsOnSegment(a.A.linesIntersection(a.A.line(this.p1,this.p2),a.A.line(this.p3,r[o])),a.A.line(this.p3,r[o]))&&a.A.intersectionIsOnRay(r[o],e)&&a.A.distanceSquared(r[o],e.p1)>s.A.MIN_RAY_SEGMENT_LENGTH_SQUARED*this.scene.lengthScale*this.scene.lengthScale){var c=r[o].x-t.x,u=-(r[o].y-t.y),l=c,h=Math.atan2(this.p1.y-t.y,this.p1.x-t.x),p=Math.atan2(this.p2.y-t.y,this.p2.x-t.x),d=Math.atan2(this.p3.y-t.y,this.p3.x-t.x);(p<d&&d<h||h<p&&p<d||d<h&&h<p)&&(u=-u,l=-l);var f=(e.p2.x-e.p1.x)*l-(e.p2.y-e.p1.y)*u,m=NaN;f>0?m=1:f<0&&(m=-1);var g={x:t.x-r[o].x,y:t.y-r[o].y},y={x:e.p2.x-e.p1.x,y:e.p2.y-e.p1.y};y.x*g.x+y.y*g.y>0&&(g.x=-g.x,g.y=-g.y),i.push({point:r[o],distance:a.A.distanceSquared(e.p1,r[o]),incidentType:m,normal:g})}if(0===i.length)return{s_point:null,normal:null,incidentType:NaN};if(this.twoSided)i.sort(((e,t)=>e.distance-t.distance)),n=i[0];else{var x=i.filter((e=>1===e.incidentType));x.length>0?(x.sort(((e,t)=>e.distance-t.distance)),n=x[0]):(i.sort(((e,t)=>e.distance-t.distance)),n=i[0])}return{s_point:n.point,normal:n.normal,incidentType:n.incidentType}}if(r=a.A.linesIntersection(a.A.line(e.p1,e.p2),a.A.line(this.p1,this.p2)),a.A.intersectionIsOnSegment(r,this)&&a.A.intersectionIsOnRay(r,e)){var v=(e.p2.x-e.p1.x)*(this.p2.y-this.p1.y)-(e.p2.y-e.p1.y)*(this.p2.x-this.p1.x);m=v>0?1:v<0?-1:NaN;const t=(e.p2.x-e.p1.x)*(this.p2.x-this.p1.x)+(e.p2.y-e.p1.y)*(this.p2.y-this.p1.y),n=(this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y);return{s_point:r,normal:{x:t*(this.p2.x-this.p1.x)-n*(e.p2.x-e.p1.x),y:t*(this.p2.y-this.p1.y)-n*(e.p2.y-e.p1.y)},incidentType:m}}return{s_point:null,normal:null,incidentType:NaN}}}const c=o},1660:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(8753),i=n(8266),s=n(2635),a=n(6492);class o extends((0,r.A)(i.A)){static type="CustomParamSurface";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={origin:{x:0,y:0},pieces:[{eqnX:"50\\cdot\\cos(t)",eqnY:"50\\cdot\\sin(t)",tMin:0,tMax:2*Math.PI,tStep:.01}],outRays:[{eqnTheta:"\\theta_0",eqnP:"0.7\\cdot P_0"},{eqnTheta:"\\pi-\\theta_0",eqnP:"P_0-P_1"}],twoSided:!1};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.CustomParamSurface.title")),e.createInfoBox("<ul><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.constants")+"<br><code>pi e</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.operators")+"<br><code>+ - * / ^</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.functions")+"<br><code>sqrt sin cos tan sec csc cot sinh cosh tanh log exp arcsin arccos arctan arcsinh arccosh arctanh floor round ceil trunc sgn max min abs</code></li><li>"+s.Ay.t("simulator:sceneObjs.common.eqnInfo.module")+"</li></ul>"),this.populateObjBarShape(e),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(!this.path&&!this.initPath())return r.fillStyle="red",void r.fillRect(this.origin.x-1.5*i,this.origin.y-1.5*i,3*i,3*i);let s=!1;if(this.path.length<2)s=!0;else{const e=this.path[0];let t=!0;for(let n=1;n<this.path.length;n++)if(Math.abs(this.path[n].x-e.x)>1e-10||Math.abs(this.path[n].y-e.y)>1e-10){t=!1;break}s=t}if(s)return r.fillStyle=n?"rgb(255,0,0)":"rgb(128,128,128)",void r.fillRect(this.origin.x-1.5*i,this.origin.y-1.5*i,3*i,3*i);const a=this.scene.theme.customSurface,o=n?this.scene.highlightColorCss:e.rgbaToCssColor(a.color),c=a.width*i;if(this.twoSided)r.strokeStyle=o,r.lineWidth=c,r.setLineDash([]),this.drawPath(e),r.stroke();else{const t=c/2;r.strokeStyle=o,r.lineWidth=t,r.setLineDash([]),this.drawPath(e),r.stroke(),r.lineWidth=t,r.setLineDash(a.dash.map((e=>e*i))),this.drawPath(e,-t),r.stroke()}r.setLineDash([])}checkRayIntersects(e){const t=this.getRayIntersections(e);if(0===t.length)return null;let n=[];for(const r of t){if(isNaN(r.incidentType))return{isAbsorbed:!0,isUndefinedBehavior:!0};(this.twoSided||-1!==r.incidentType)&&n.push({intersection:r,distance:a.A.distanceSquared(e.p1,r.s_point)})}if(0===n.length)return null;if(this.twoSided)return n.sort(((e,t)=>e.distance-t.distance)),n[0].intersection.s_point;{const e=n.filter((e=>1===e.intersection.incidentType));return e.length>0?(e.sort(((e,t)=>e.distance-t.distance)),e[0].intersection.s_point):(n.sort(((e,t)=>e.distance-t.distance)),n[0].intersection.s_point)}}onRayIncident(e,t,n,r){const i=this.getRayIntersections(e);let s=null;for(const e of i)if(a.A.distanceSquared(n,e.s_point)<1e-10){s=e;break}if(!s)return{isAbsorbed:!0};if(isNaN(s.incidentType)||isNaN(s.normal.x)||isNaN(s.normal.y))return{isAbsorbed:!0,isUndefinedBehavior:!0};const o=s.incidentPos;return this.handleOutRays(e,t,n,s.normal,o,r,e.bodyMergingObj)}}const c=o},9595:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(7791),i=n(8266),s=n(2635),a=n(6492);class o extends((0,r.A)(i.A)){static type="CustomSurface";static isOptical=!0;static mergesWithGlass=!0;static serializableDefaults={p1:null,p2:null,outRays:[{eqnTheta:"\\theta_0",eqnP:"0.7\\cdot P_0"},{eqnTheta:"\\pi-\\theta_0",eqnP:"P_0-P_1"}],twoSided:!1};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.CustomSurface.title")),super.populateObjBar(e)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return r.fillStyle="rgb(128,128,128)",void r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i);const s=this.scene.theme.customSurface,a=n?this.scene.highlightColorCss:e.rgbaToCssColor(s.color),o=s.width*i;if(this.twoSided)r.strokeStyle=a,r.lineWidth=o,r.setLineDash([]),r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke();else{const e=o/2;r.strokeStyle=a,r.lineWidth=e,r.setLineDash([]),r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke();const t=this.p2.x-this.p1.x,n=this.p2.y-this.p1.y,c=Math.sqrt(t*t+n*n);if(c>0){const a=-n/c,o=t/c,u=e,l=this.p1.x-a*u,h=this.p1.y-o*u,p=this.p2.x-a*u,d=this.p2.y-o*u;r.lineWidth=e,r.setLineDash(s.dash.map((e=>e*i))),r.beginPath(),r.moveTo(l,h),r.lineTo(p,d),r.stroke()}}r.setLineDash([])}checkRayIntersects(e){return this.twoSided||-1!=this.getIncidentType(e)?this.checkRayIntersectsShape(e):null}onRayIncident(e,t,n,r){const i=a.A.distance(n,this.p1),s=2*i/(i+a.A.distance(n,this.p2))-1,o=(e.p2.x-e.p1.x)*(this.p2.x-this.p1.x)+(e.p2.y-e.p1.y)*(this.p2.y-this.p1.y),c=(this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y),u={x:o*(this.p2.x-this.p1.x)-c*(e.p2.x-e.p1.x),y:o*(this.p2.y-this.p1.y)-c*(e.p2.y-e.p1.y)};return this.handleOutRays(e,t,n,u,s,r,e.bodyMergingObj)}getIncidentType(e){var t=(e.p2.x-e.p1.x)*(this.p2.y-this.p1.y)-(e.p2.y-e.p1.y)*(this.p2.x-this.p1.x);return t>0?1:t<0?-1:NaN}}const c=o},3786:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(867),i=n(7791),s=n(2635),a=n(6492);class o extends((0,i.A)(r.A)){static type="Detector";static isOptical=!0;static serializableDefaults={p1:null,p2:null,irradMap:!1,binSize:1};constructor(e,t){super(e,t),this.power=0,this.normal=0,this.shear=0,this.binData=null}populateObjBar(e){if("default"!==this.scene.colorMode)var t=s.Ay.t("simulator:sceneObjs.Detector.info.sNewColorModes");else t=s.Ay.t("simulator:sceneObjs.Detector.info.s");if(e.setTitle(s.Ay.t("main:tools.Detector.title")),e.createInfoBox("<ul><li>"+s.Ay.t("simulator:sceneObjs.Detector.info.P")+"</li><li>"+s.Ay.t("simulator:sceneObjs.Detector.info.Fperp")+"</li><li>"+s.Ay.t("simulator:sceneObjs.Detector.info.Fpar")+"</li><li>"+s.Ay.t("simulator:sceneObjs.Detector.info.irradiance")+"</li><li>"+s.Ay.t("simulator:sceneObjs.Detector.info.length")+"</li><li>"+s.Ay.t("simulator:sceneObjs.Detector.info.B")+"</li><li>"+t+"</li><li>"+s.Ay.t("simulator:sceneObjs.Detector.info.truncation")+"</li></ul>"),e.createBoolean(s.Ay.t("simulator:sceneObjs.Detector.irradMap"),this.irradMap,(function(e,t){e.irradMap=t}),null,!0),this.irradMap){e.createNumber(s.Ay.t("simulator:sceneObjs.Detector.binSize"),.01*this.scene.lengthScale,10*this.scene.lengthScale,.01*this.scene.lengthScale,this.binSize,(function(e,t){e.binSize=t}),s.Ay.t("simulator:sceneObjs.common.lengthUnitInfo"));const t=this;e.createButton(s.Ay.t("simulator:sceneObjs.Detector.exportData"),(function(e){var n=e.binSize,r=Math.ceil(Math.sqrt((e.p2.x-e.p1.x)*(e.p2.x-e.p1.x)+(e.p2.y-e.p1.y)*(e.p2.y-e.p1.y))/n),i=e.binData,s="data:text/csv;charset=utf-8,";s+="Position,Irradiance\n";for(var a=0;a<r;a++)s+=a*n+","+i[a]/n+"\n";var o=encodeURI(s),c=document.createElement("a");c.setAttribute("href",o),c.setAttribute("download",(t.scene.name||"irradiance_map")+".csv"),document.body.appendChild(c),c.click()}))}}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(t){this.scene.simulator?.isLightLayerSynced||(r.globalAlpha=.5),r.globalCompositeOperation="lighter";var s=Math.sqrt((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y)),a=Math.max(-Math.floor(Math.log10(this.scene.simulator.totalTruncation)),0);if(this.scene.simulator.totalTruncation>0&&a<=2)var o="P="+this.power.toFixed(a)+"±"+this.scene.simulator.totalTruncation.toFixed(a),c="F⊥="+this.normal.toFixed(a)+"±"+this.scene.simulator.totalTruncation.toFixed(a),u="F∥="+this.shear.toFixed(a)+"±"+this.scene.simulator.totalTruncation.toFixed(a);else o="P="+this.power.toFixed(2),c="F⊥="+this.normal.toFixed(2),u="F∥="+this.shear.toFixed(2);if(r.font=this.scene.theme.detectorText.size*i+"px "+this.scene.theme.detectorText.font,r.textAlign="right",r.textBaseline="top",r.fillStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.detectorText.color),r.fillText(o,this.p2.x,this.p2.y),r.fillText(c,this.p2.x,this.p2.y+20*i),r.fillText(u,this.p2.x,this.p2.y+40*i),r.globalCompositeOperation="source-over",this.irradMap&&this.binData){s=Math.sqrt((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y));var l=(this.p2.x-this.p1.x)/s,h=(this.p2.y-this.p1.y)/s,p=h,d=-l;r.lineWidth=this.scene.theme.irradMapBorder.width*i,r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.irradMapBorder.color),r.fillStyle=e.rgbaToCssColor(this.scene.theme.irradMap.color),r.beginPath(),r.moveTo(this.p1.x,this.p1.y);for(var f=0;f<this.binData.length;f++)r.lineTo(this.p1.x+l*f*this.binSize+p*this.binData[f]/this.binSize*20*i*i,this.p1.y+h*f*this.binSize+d*this.binData[f]/this.binSize*20*i*i),r.lineTo(this.p1.x+l*(f+1)*this.binSize+p*this.binData[f]/this.binSize*20*i*i,this.p1.y+h*(f+1)*this.binSize+d*this.binData[f]/this.binSize*20*i*i);r.lineTo(this.p2.x,this.p2.y),r.fill(),r.stroke()}r.globalAlpha=1}else r.globalCompositeOperation="lighter",r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.detector.color),r.lineWidth=this.scene.theme.detector.width*i,r.setLineDash(this.scene.theme.detector.dash.map((e=>e*i))),r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke(),r.setLineDash([]),r.globalCompositeOperation="source-over"}scale(e,t){return super.scale(e,t),!1}onSimulationStart(){if(this.power=0,this.normal=0,this.shear=0,this.irradMap){for(var e=this.binSize,t=Math.ceil(Math.sqrt((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y))/e),n=[],r=0;r<t;r++)n[r]=0;this.binData=n}}checkRayIntersects(e){return this.checkRayIntersectsShape(e)}onRayIncident(e,t,n){var r=(e.p2.x-e.p1.x)*(this.p2.y-this.p1.y)-(e.p2.y-e.p1.y)*(this.p2.x-this.p1.x),i=r/Math.sqrt((e.p2.x-e.p1.x)*(e.p2.x-e.p1.x)+(e.p2.y-e.p1.y)*(e.p2.y-e.p1.y))/Math.sqrt((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y)),s=((e.p2.x-e.p1.x)*(this.p2.x-this.p1.x)+(e.p2.y-e.p1.y)*(this.p2.y-this.p1.y))/Math.sqrt((e.p2.x-e.p1.x)*(e.p2.x-e.p1.x)+(e.p2.y-e.p1.y)*(e.p2.y-e.p1.y))/Math.sqrt((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y));if(e.p2=a.A.point(n.x+e.p2.x-e.p1.x,n.y+e.p2.y-e.p1.y),e.p1=a.A.point(n.x,n.y),this.power+=Math.sign(r)*(e.brightness_s+e.brightness_p),this.normal+=Math.sign(r)*i*(e.brightness_s+e.brightness_p),this.shear-=Math.sign(r)*s*(e.brightness_s+e.brightness_p),this.irradMap&&this.binData){var o=this.binSize,c=(Math.ceil(Math.sqrt((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y))/o),Math.floor(Math.sqrt((n.x-this.p1.x)*(n.x-this.p1.x)+(n.y-this.p1.y)*(n.y-this.p1.y))/o));this.binData[c]+=Math.sign(r)*(e.brightness_s+e.brightness_p)}}}const c=o},5468:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(867),i=n(2635),s=n(6492);class a extends r.A{static type="Drawing";static serializableDefaults={strokes:[],isDrawing:!1};populateObjBar(e){e.setTitle(i.Ay.t("main:tools.Drawing.title")),this.isDrawing&&e.createButton(i.Ay.t("simulator:sceneObjs.Drawing.finishDrawing"),(function(e){e.isDrawing=!1,e.scene.editor.isConstructing&&(e.scene.editor.isConstructing=!1)}),!0)}draw(e,t,n){const r=e.ctx,i=e.lengthScale;r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.decoration.color),r.lineWidth=this.scene.theme.decoration.width*i,r.beginPath();for(const e of this.strokes){r.moveTo(e[0],e[1]);for(let t=2;t<e.length;t+=2)r.lineTo(e[t],e[t+1])}r.stroke()}move(e,t){for(const n of this.strokes)for(let r=0;r<n.length;r+=2)n[r]+=e,n[r+1]+=t;return!0}rotate(e,t=null){t=t||this.getDefaultCenter();const n=Math.cos(e),r=Math.sin(e);for(const e of this.strokes)for(let i=0;i<e.length;i+=2){const s=e[i],a=e[i+1],o=s-t.x,c=a-t.y;e[i]=t.x+o*n-c*r,e[i+1]=t.y+o*r+c*n}return!0}scale(e,t=null){t=t||this.getDefaultCenter();for(const n of this.strokes)for(let r=0;r<n.length;r+=2)n[r]=t.x+(n[r]-t.x)*e,n[r+1]=t.y+(n[r+1]-t.y)*e;return!0}getDefaultCenter(){if(0===this.strokes.length)return{x:0,y:0};let e=0,t=0,n=0;for(const r of this.strokes)for(let i=0;i<r.length;i+=2)e+=r[i],t+=r[i+1],n++;return 0===n?{x:0,y:0}:{x:e/n,y:t/n}}onConstructMouseDown(e,t,n){this.isDrawing||(this.isDrawing=!0,this.strokes=[]);const r=e.getPosSnappedToGrid();this.strokes.push([this.round(r.x),this.round(r.y)]),this.isMouseDown=!0}onConstructMouseMove(e,t,n){const r=e.getPosSnappedToGrid();this.isMouseDown&&(0===this.strokes.length||this.strokes[this.strokes.length-1].length<2||(this.strokes[this.strokes.length-1][this.strokes[this.strokes.length-1].length-2]-r.x)**2+(this.strokes[this.strokes.length-1][this.strokes[this.strokes.length-1].length-1]-r.y)**2<4*this.scene.lengthScale*this.scene.lengthScale||this.strokes[this.strokes.length-1].push(this.round(r.x),this.round(r.y)))}onConstructMouseUp(e,t,n){this.isMouseDown=!1}onConstructUndo(){if(this.strokes.length<2)return{isCancelled:!0};this.strokes.pop()}checkMouseOver(e){let t={};for(const n of this.strokes)for(let r=0;r<n.length-2;r+=2)if(e.isOnSegment(s.A.line(s.A.point(n[r],n[r+1]),s.A.point(n[r+2],n[r+3])))){const n=e.getPosSnappedToGrid(),r=s.A.point(this.round(n.x),this.round(n.y));return t.part=0,t.mousePos0=r,t.mousePos1=r,t.snapContext={},t}}onDrag(e,t,n,r){if(r)var i=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1}],t.snapContext);else i=e.getPosSnappedToGrid(),t.snapContext={};const a=s.A.point(this.round(i.x),this.round(i.y));var o=t.mousePos1.x-a.x,c=t.mousePos1.y-a.y;if(0==t.part)for(const e of this.strokes)for(let t=0;t<e.length;t+=2)e[t]-=o,e[t+1]-=c;t.mousePos1=a}round(e){return Math.round(e/this.scene.lengthScale)*this.scene.lengthScale}}const o=a},1709:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(867),i=n(7791),s=n(2635);class a extends((0,i.A)(r.A)){static type="LineArrow";static serializableDefaults={p1:null,p2:null,arrow:!1,backArrow:!1};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.LineArrow.title")),e.createBoolean(s.Ay.t("simulator:sceneObjs.LineArrow.arrow"),this.arrow,(function(e,t){e.arrow=t})),e.createBoolean(s.Ay.t("simulator:sceneObjs.LineArrow.backArrow"),this.backArrow,(function(e,t){e.backArrow=t}))}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return r.fillStyle="rgb(128,128,128)",void r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i);r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.decoration.color),r.lineWidth=this.scene.theme.decoration.width*i,r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.stroke(),this.arrow&&this.drawArrow(e,this.p1,this.p2),this.backArrow&&this.drawArrow(e,this.p2,this.p1)}drawArrow(e,t,n){const r=e.ctx,i=e.lengthScale,s=Math.atan2(n.y-t.y,n.x-t.x),a=Math.max(5*this.scene.theme.decoration.width*i,10*i);r.beginPath(),r.moveTo(n.x,n.y),r.lineTo(n.x-a*Math.cos(s-Math.PI/6),n.y-a*Math.sin(s-Math.PI/6)),r.moveTo(n.x,n.y),r.lineTo(n.x-a*Math.cos(s+Math.PI/6),n.y-a*Math.sin(s+Math.PI/6)),r.stroke()}}const o=a},7060:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(867),i=n(2635),s=n(2933);class a extends((0,s.A)(r.A)){static type="Protractor";static serializableDefaults={p1:null,p2:null};populateObjBar(e){e.setTitle(i.Ay.t("main:tools.Protractor.title"))}draw(e,t,n){const r=e.ctx,i=e.lengthScale;if(!t){0==this.scene.theme.background.color.r&&0==this.scene.theme.background.color.g&&0==this.scene.theme.background.color.b?r.globalCompositeOperation="lighter":r.globalCompositeOperation="source-over";var s,a,o,c=Math.sqrt((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y)),u=5*i,l=1,h=5,p=10,d=10*i,f=15*i,m=20*i;r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.ruler.color),r.font="bold "+this.scene.theme.rulerText.size*i+"px "+this.scene.theme.rulerText.font,r.fillStyle=e.rgbaToCssColor(this.scene.theme.rulerText.color),c*l*Math.PI/180<u&&(l=2,h=10,p=30),c*l*Math.PI/180<u&&(l=5,h=10,p=30,d=5*i,f=8*i,m=10*i,r.font="bold "+10*this.scene.theme.rulerText.size/14*i+"px "+this.scene.theme.rulerText.font),c*l*Math.PI/180<u&&(l=10,h=30,p=90),r.textAlign="center",r.textBaseline="top",r.lineWidth=this.scene.theme.ruler.width*i,r.beginPath(),r.arc(this.p1.x,this.p1.y,c,0,2*Math.PI,!1);for(var g=0;g<360;g+=l)s=g*Math.PI/180+Math.atan2(this.p2.y-this.p1.y,this.p2.x-this.p1.x),r.moveTo(this.p1.x+c*Math.cos(s),this.p1.y+c*Math.sin(s)),g%p==0?(a=this.p1.x+(c-m)*Math.cos(s),o=this.p1.y+(c-m)*Math.sin(s),r.lineTo(a,o),e.isSVG&&r.stroke(),r.save(),r.translate(a,o),r.rotate(s+.5*Math.PI),r.fillText(g>180?360-g:g,0,0),r.restore()):g%h==0?r.lineTo(this.p1.x+(c-f)*Math.cos(s),this.p1.y+(c-f)*Math.sin(s)):r.lineTo(this.p1.x+(c-d)*Math.cos(s),this.p1.y+(c-d)*Math.sin(s));r.stroke(),r.globalCompositeOperation="source-over"}e.drawPoint(this.p1,this.scene.theme.centerPoint.color,this.scene.theme.centerPoint.size),n&&(r.fillStyle="magenta",r.fillRect(this.p2.x-2.5*i,this.p2.y-2.5*i,5*i,5*i))}}const o=a},7254:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(867),i=n(7791),s=n(2635);class a extends((0,i.A)(r.A)){static type="Ruler";static serializableDefaults={p1:null,p2:null,scaleInterval:10};populateObjBar(e){e.setTitle(s.Ay.t("main:tools.Ruler.title")),e.createNumber(s.Ay.t("simulator:sceneObjs.Ruler.scaleInterval"),0,10,1,this.scaleInterval,(function(e,t){e.scaleInterval=t}),s.Ay.t("simulator:sceneObjs.common.lengthUnitInfo"),!0)}draw(e,t,n){if(t)return;const r=e.ctx,i=e.lengthScale;if(this.p1.x==this.p2.x&&this.p1.y==this.p2.y)return r.fillStyle="rgb(128,128,128)",void r.fillRect(this.p1.x-1.5*i,this.p1.y-1.5*i,3*i,3*i);0==this.scene.theme.background.color.r&&0==this.scene.theme.background.color.g&&0==this.scene.theme.background.color.b?r.globalCompositeOperation="lighter":r.globalCompositeOperation="source-over";var s,a,o=Math.sqrt((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y)),c=(this.p2.x-this.p1.x)/o,u=(this.p2.y-this.p1.y)/o,l=u,h=-c,p=Math.atan2(this.p2.y-this.p1.y,this.p2.x-this.p1.x),d=this.scaleInterval,f=5*d,m=10*d,g=10*i,y=15*i;if(r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.ruler.color),r.font=this.scene.theme.rulerText.size*i+"px "+this.scene.theme.rulerText.font,r.fillStyle=e.rgbaToCssColor(this.scene.theme.rulerText.color),p>-.25*Math.PI&&p<=.25*Math.PI){var x=-1,v=20*i,b=p;r.textAlign="center",r.textBaseline="top"}else p>-.75*Math.PI&&p<=-.25*Math.PI?(x=1,v=15*i,b=p- -.5*Math.PI,r.textAlign="right",r.textBaseline="middle"):p>.75*Math.PI||p<=-.75*Math.PI?(x=1,v=20*i,b=p-Math.PI,r.textAlign="center",r.textBaseline="top"):(x=-1,v=15*i,b=p-.5*Math.PI,r.textAlign="right",r.textBaseline="middle");r.lineWidth=this.scene.theme.ruler.width*i,r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y);for(var D=0;D<=o;D+=d)r.moveTo(this.p1.x+D*c,this.p1.y+D*u),D%m==0?(s=this.p1.x+D*c+x*v*l,a=this.p1.y+D*u+x*v*h,r.lineTo(s,a),e.isSVG&&r.stroke(),r.save(),r.translate(s,a),r.rotate(b),r.fillText(D,0,0),r.restore()):D%f==0?r.lineTo(this.p1.x+D*c+x*y*l,this.p1.y+D*u+x*y*h):r.lineTo(this.p1.x+D*c+x*g*l,this.p1.y+D*u+x*g*h);r.stroke(),r.globalCompositeOperation="source-over"}scale(e,t){return super.scale(e,t),!1}getDefaultCenter(){return this.p1}}const o=a},2741:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(867),i=n(2635),s=n(6492);class a extends r.A{static type="TextLabel";static serializableDefaults={x:null,y:null,text:"",fontSize:24,font:"Serif",fontStyle:"Normal",alignment:"left",smallCaps:!1,angle:0};static fonts=["Serif","Arial","Helvetica","Times New Roman","Georgia","Courier New","Verdana","Tahoma","Trebuchet MS","Impact","Lucida Sans"];populateObjBar(e){e.setTitle(i.Ay.t("main:tools.TextLabel.title")),e.createText("",this.text,(function(e,t){e.text=t})),e.showAdvanced(!this.arePropertiesDefault(["fontSize"]))&&e.createNumber(i.Ay.t("simulator:sceneObjs.TextLabel.fontSize"),6,96,1,this.fontSize,(function(e,t){e.fontSize=t}),null,!0),e.showAdvanced(!this.arePropertiesDefault(["font"]))&&e.createDropdown(i.Ay.t("simulator:sceneObjs.TextLabel.font"),this.font,this.constructor.fonts,(function(e,t){e.font=t})),e.showAdvanced(!this.arePropertiesDefault(["fontStyle"]))&&e.createDropdown(i.Ay.t("simulator:sceneObjs.TextLabel.fontStyle"),this.fontStyle,{Normal:i.Ay.t("simulator:sceneObjs.TextLabel.fontStyles.normal"),Bold:i.Ay.t("simulator:sceneObjs.TextLabel.fontStyles.bold"),Italic:i.Ay.t("simulator:sceneObjs.TextLabel.fontStyles.italic"),"Bold Italic":i.Ay.t("simulator:sceneObjs.TextLabel.fontStyles.boldItalic"),Oblique:i.Ay.t("simulator:sceneObjs.TextLabel.fontStyles.oblique"),"Bold Oblique":i.Ay.t("simulator:sceneObjs.TextLabel.fontStyles.boldOblique")},(function(e,t){e.fontStyle=t})),e.showAdvanced(!this.arePropertiesDefault(["alignment"]))&&e.createDropdown(i.Ay.t("simulator:sceneObjs.TextLabel.alignment"),this.alignment,{left:i.Ay.t("simulator:sceneObjs.TextLabel.alignments.left"),center:i.Ay.t("simulator:sceneObjs.TextLabel.alignments.center"),right:i.Ay.t("simulator:sceneObjs.TextLabel.alignments.right")},(function(e,t){e.alignment=t})),e.showAdvanced(!this.arePropertiesDefault(["smallCaps"]))&&e.createBoolean(i.Ay.t("simulator:sceneObjs.TextLabel.smallCaps"),this.smallCaps,(function(e,t){e.smallCaps=t})),e.showAdvanced(!this.arePropertiesDefault(["angle"]))&&e.createNumber(i.Ay.t("simulator:sceneObjs.TextLabel.angle")+" (°)",0,360,1,this.angle,(function(e,t){e.angle=t}),null,!0)}draw(e,t,n){const r=e.ctx;e.lengthScale,r.fillStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.decoration.color),r.textAlign=this.alignment,r.textBaseline="bottom";let i="";this.fontStyle&&"Normal"!=this.fontStyle&&(i+=this.fontStyle+" "),this.smallCaps&&(i+="small-caps "),i+=this.fontSize+"px "+this.font,r.font=i,r.save(),r.translate(this.x,this.y),r.rotate(-this.angle/180*Math.PI);let s=0;this.left=0,this.right=0,this.up=0,this.down=0,this.text.toString().split("\n").forEach((e=>{r.fillText(e,0,s);let t=r.measureText(e);this.left=Math.max(this.left,t.actualBoundingBoxLeft),this.right=Math.max(this.right,t.actualBoundingBoxRight),this.up=Math.max(this.up,t.actualBoundingBoxAscent-s),this.down=Math.max(this.down,-t.actualBoundingBoxDescent+s),t.fontBoundingBoxAscent?s+=t.fontBoundingBoxAscent+t.fontBoundingBoxDescent:s+=1.5*this.fontSize})),r.restore(),this.sin_angle=Math.sin(this.angle/180*Math.PI),this.cos_angle=Math.cos(this.angle/180*Math.PI)}move(e,t){return this.x=this.x+e,this.y=this.y+t,!0}rotate(e,t=null){const n=180*-e/Math.PI;if((t=t||{x:this.x,y:this.y}).x!==this.x||t.y!==this.y){const n=this.x-t.x,r=this.y-t.y,i=Math.sqrt(n*n+r*r),s=Math.atan2(r,n)+e;this.x=t.x+i*Math.cos(s),this.y=t.y+i*Math.sin(s)}return this.angle=(this.angle+n)%360,this.angle<0&&(this.angle+=360),!0}scale(e,t=null){return(t=t||{x:this.x,y:this.y}).x===this.x&&t.y===this.y||(this.x=t.x+(this.x-t.x)*e,this.y=t.y+(this.y-t.y)*e),this.fontSize*=e,!0}getDefaultCenter(){return{x:this.x,y:this.y}}onConstructMouseDown(e,t,n){const r=e.getPosSnappedToGrid();this.x=r.x,this.y=r.y,this.text=i.Ay.t("simulator:sceneObjs.TextLabel.textHere")}onConstructMouseUp(e,t,n){return{isDone:!0}}checkMouseOver(e){let t={},n=e.pos.x-this.x,r=e.pos.y-this.y,i=n*this.cos_angle-r*this.sin_angle,a=r*this.cos_angle+n*this.sin_angle;if(i>=-this.left&&i<=this.right&&a<=this.down&&a>=-this.up)return t.part=0,t.mousePos0=s.A.point(e.pos.x,e.pos.y),t.mousePos0Snapped=e.getPosSnappedToGrid(),t.targetPoint_=s.A.point(this.x,this.y),t.snapContext={},t}onDrag(e,t,n,r){if(r)var i=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1}],t.snapContext);else i=e.getPosSnappedToGrid(),t.snapContext={};this.x=i.x+t.targetPoint_.x-t.mousePos0Snapped.x,this.y=i.y+t.targetPoint_.y-t.mousePos0Snapped.y}}const o=a},6776:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(867),i=n(6492),s=n(2635);class a extends r.A{static type="CropBox";static serializableDefaults={p1:null,p4:null,format:"png",width:1920,rayCountLimit:null,transparent:!1};constructor(e,t){super(e,t),this.p1&&this.p4&&(this.p2=i.A.point(this.p4.x,this.p1.y),this.p3=i.A.point(this.p1.x,this.p4.y))}populateObjBar(e){e.setTitle(s.Ay.t("simulator:sceneObjs.CropBox.title"));var t=i.A.distance(this.p1,this.p2),n=i.A.distance(this.p1,this.p3);e.createNumber(s.Ay.t("simulator:sceneObjs.CropBox.cropBoxSize"),0,1e3,1,t,(function(e,t){e.p2=i.A.point(e.p1.x+1*t,e.p2.y),e.p4=i.A.point(e.p3.x+1*t,e.p4.y)}),null,!0),e.createNumber("x",0,1e3,1,n,(function(e,t){e.p3=i.A.point(e.p3.x,e.p1.y+1*t),e.p4=i.A.point(e.p4.x,e.p2.y+1*t)}),null,!0),e.createDropdown(s.Ay.t("simulator:sceneObjs.CropBox.format"),this.format,{png:"PNG",svg:"SVG"},(function(e,t){e.format=t}),null,!0),"svg"!=this.format&&e.createNumber(s.Ay.t("simulator:sceneObjs.CropBox.width"),0,1e3,1,this.width,(function(e,t){e.width=1*t}),null,!0);const r=this.rayCountLimit||("svg"===this.format?1e4:1e7);e.showAdvanced(!this.arePropertiesDefault(["rayCountLimit","transparent"]))&&(e.createNumber(s.Ay.t("simulator:sceneObjs.CropBox.rayCountLimit"),0,1e7,1,r,(function(e,t){e.rayCountLimit=t,e.scene.simulator.processedRayCount>e.rayCountLimit?e.warning=s.Ay.t("simulator:sceneObjs.CropBox.rayCountWarning"):e.warning=null}),null,!0),e.createBoolean(s.Ay.t("simulator:sceneObjs.CropBox.transparent"),this.transparent,(function(e,t){e.transparent=t})));const a=this;if(e.createButton(s.Ay.t("simulator:common.saveButton"),(function(e){a.warning=null,a.scene.editor.confirmCrop(e)})),e.createButton(s.Ay.t("simulator:common.cancelButton"),(function(e){a.warning=null,a.scene.editor.cancelCrop()})),this.warning=null,"svg"===this.format)for(var o of((this.scene.simulateColors||"default"!==this.scene.colorMode)&&(this.warning=s.Ay.t("simulator:sceneObjs.CropBox.svgWarning")),this.scene.opticalObjs))if(o.refIndex&&o.refIndex<1){this.warning=s.Ay.t("simulator:sceneObjs.CropBox.svgWarning");break}this.scene.simulator.processedRayCount>r&&(this.warning=s.Ay.t("simulator:sceneObjs.CropBox.rayCountWarning"))}draw(e,t,n){if(!this.scene.editor||!this.scene.editor.isInCropMode)return;const r=e.ctx,i=e.lengthScale;r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.decoration.color),r.lineWidth=1*i,r.beginPath(),r.moveTo(this.p1.x,this.p1.y),r.lineTo(this.p2.x,this.p2.y),r.lineTo(this.p4.x,this.p4.y),r.lineTo(this.p3.x,this.p3.y),r.lineTo(this.p1.x,this.p1.y),r.stroke(),r.fillStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.decoration.color),r.beginPath(),r.arc(this.p1.x,this.p1.y,5*i,0,2*Math.PI),r.fill(),r.beginPath(),r.arc(this.p2.x,this.p2.y,5*i,0,2*Math.PI),r.fill(),r.beginPath(),r.arc(this.p3.x,this.p3.y,5*i,0,2*Math.PI),r.fill(),r.beginPath(),r.arc(this.p4.x,this.p4.y,5*i,0,2*Math.PI),r.fill()}move(e,t){return this.p1.x+=e,this.p1.y+=t,this.p2.x+=e,this.p2.y+=t,this.p3.x+=e,this.p3.y+=t,this.p4.x+=e,this.p4.y+=t,!0}scale(e,t=null){return t=t||this.getDefaultCenter(),this.p1.x=t.x+(this.p1.x-t.x)*e,this.p1.y=t.y+(this.p1.y-t.y)*e,this.p2.x=t.x+(this.p2.x-t.x)*e,this.p2.y=t.y+(this.p2.y-t.y)*e,this.p3.x=t.x+(this.p3.x-t.x)*e,this.p3.y=t.y+(this.p3.y-t.y)*e,this.p4.x=t.x+(this.p4.x-t.x)*e,this.p4.y=t.y+(this.p4.y-t.y)*e,!0}getDefaultCenter(){return{x:(this.p1.x+this.p2.x+this.p3.x+this.p4.x)/4,y:(this.p1.y+this.p2.y+this.p3.y+this.p4.y)/4}}checkMouseOver(e){if(!this.scene.editor||!this.scene.editor.isInCropMode)return!1;if(e.isOnPoint(this.p1))return{part:1,targetPoint:i.A.point(this.p1.x,this.p1.y),cursor:"nwse-resize",requiresObjBarUpdate:!0};if(e.isOnPoint(this.p2))return{part:2,targetPoint:i.A.point(this.p2.x,this.p2.y),cursor:"nesw-resize",requiresObjBarUpdate:!0};if(e.isOnPoint(this.p3))return{part:3,targetPoint:i.A.point(this.p3.x,this.p3.y),cursor:"nesw-resize",requiresObjBarUpdate:!0};if(e.isOnPoint(this.p4))return{part:4,targetPoint:i.A.point(this.p4.x,this.p4.y),cursor:"nwse-resize",requiresObjBarUpdate:!0};if(e.isOnSegment(i.A.line(this.p1,this.p2)))return{part:5,cursor:"ns-resize",requiresObjBarUpdate:!0};if(e.isOnSegment(i.A.line(this.p2,this.p4)))return{part:6,cursor:"ew-resize",requiresObjBarUpdate:!0};if(e.isOnSegment(i.A.line(this.p3,this.p4)))return{part:7,cursor:"ns-resize",requiresObjBarUpdate:!0};if(e.isOnSegment(i.A.line(this.p1,this.p3)))return{part:8,cursor:"ew-resize",requiresObjBarUpdate:!0};const t=e.getPosSnappedToGrid();return this.p1.x<t.x&&t.x<this.p2.x&&this.p1.y<t.y&&t.y<this.p3.y?{part:0,mousePos0:t,mousePos1:t,snapContext:{}}:void 0}onDrag(e,t,n,r){const i=e.getPosSnappedToGrid();if(1==t.part)this.p1.x=i.x,this.p1.y=i.y,this.p2.y=i.y,this.p3.x=i.x;else if(2==t.part)this.p2.x=i.x,this.p2.y=i.y,this.p1.y=i.y,this.p4.x=i.x;else if(3==t.part)this.p3.x=i.x,this.p3.y=i.y,this.p1.x=i.x,this.p4.y=i.y;else if(4==t.part)this.p4.x=i.x,this.p4.y=i.y,this.p2.x=i.x,this.p3.y=i.y;else if(5==t.part)this.p1.y=i.y,this.p2.y=i.y;else if(6==t.part)this.p2.x=i.x,this.p4.x=i.x;else if(7==t.part)this.p3.y=i.y,this.p4.y=i.y;else if(8==t.part)this.p1.x=i.x,this.p3.x=i.x;else if(0==t.part){const n=r?e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1}],t.snapContext):e.getPosSnappedToGrid(),i=t.mousePos1.x-n.x,s=t.mousePos1.y-n.y;this.p1.x-=i,this.p1.y-=s,this.p2.x-=i,this.p2.y-=s,this.p3.x-=i,this.p3.y-=s,this.p4.x-=i,this.p4.y-=s,t.mousePos1=n}}}const o=a},2929:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(867),i=n(6492),s=n(7389),a=n(2635);class o extends r.A{static type="Handle";static isOptical=!0;static serializableDefaults={p1:null,p2:null,objIndices:[],controlPoints:[],transformation:"default",moveStep:0,rotateStep:0,scaleStep:0,notDone:!1};serialize(){let e=super.serialize();return e.controlPoints&&(e.controlPoints=e.controlPoints.map((e=>{let t=JSON.parse(JSON.stringify(e));return delete t.dragContext.originalObj,delete t.dragContext.hasDuplicated,delete t.dragContext.isByHandle,delete t.dragContext.targetPoint,delete t.dragContext.snapContext,t}))),e}populateObjBar(e){switch(e.setTitle(a.Ay.t("simulator:sceneObjs.Handle.handle")),e.createDropdown(a.Ay.t("simulator:sceneObjs.Handle.transformation"),this.transformation,{default:a.Ay.t("simulator:common.defaultOption"),translation:a.Ay.t("simulator:sceneObjs.Handle.transformations.translation"),xTranslation:a.Ay.t("simulator:sceneObjs.Handle.transformations.xTranslation"),yTranslation:a.Ay.t("simulator:sceneObjs.Handle.transformations.yTranslation"),rotation:a.Ay.t("simulator:sceneObjs.Handle.transformations.rotation"),scaling:a.Ay.t("simulator:sceneObjs.Handle.transformations.scaling")},(function(e,t){e.transformation=t}),null,!0),this.transformation){case"xTranslation":case"yTranslation":e.showAdvanced(!this.arePropertiesDefault(["moveStep"]))&&e.createNumber(a.Ay.t("simulator:sceneObjs.Handle.step"),0,100,1,this.moveStep,(function(e,t){e.moveStep=Math.abs(t)}),a.Ay.t("simulator:sceneObjs.common.lengthUnitInfo"),!0);break;case"rotation":e.showAdvanced(!this.arePropertiesDefault(["rotateStep"]))&&e.createNumber(a.Ay.t("simulator:sceneObjs.Handle.step")+" (°)",0,360,1,this.rotateStep,(function(e,t){e.rotateStep=Math.abs(t)}),null,!0);break;case"scaling":e.showAdvanced(!this.arePropertiesDefault(["scaleStep"]))&&e.createNumber(a.Ay.t("simulator:sceneObjs.Handle.step")+" (%)",1,200,1,this.scaleStep,(function(e,t){e.scaleStep=t}),null,!0)}}getZIndex(){return-1/0}draw(e,t,n){const r=e.ctx,s=e.lengthScale;if(r.lineWidth=1*s,"default"==this.transformation||n)for(var a in this.controlPoints)r.globalAlpha=1,r.beginPath(),r.strokeStyle=this.notDone||n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.handlePoint.color),r.setLineDash([2*s,2*s]),r.arc(this.controlPoints[a].newPoint.x,this.controlPoints[a].newPoint.y,5*s,0,2*Math.PI,!1),r.stroke(),r.setLineDash([]);const o=this.scene.theme.handleArrow.size/24*5*s,c=this.scene.theme.handleArrow.size/24*8*s,u=this.scene.theme.handleArrow.size/24*30*s,l=this.scene.theme.handleArrow.size/24*28*s,h=this.scene.theme.handleArrow.size/24*8*s,p=this.scene.theme.handleArrow.size/24*12*s;if(this.notDone)this.p1&&(r.beginPath(),r.strokeStyle=this.scene.highlightColorCss,r.beginPath(),r.arc(this.p1.x,this.p1.y,2*s,0,2*Math.PI,!1),r.stroke(),r.beginPath(),r.arc(this.p1.x,this.p1.y,5*s,0,2*Math.PI,!1),r.stroke());else{switch(r.globalAlpha=1,this.transformation){case"default":r.beginPath(),r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.handlePoint.color),r.arc(this.p1.x,this.p1.y,2*s,0,2*Math.PI,!1),r.stroke(),r.beginPath(),r.arc(this.p1.x,this.p1.y,5*s,0,2*Math.PI,!1),r.stroke();break;case"translation":r.beginPath(),r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.handleArrow.color),r.fillStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.handleArrow.color),r.lineWidth=o,r.moveTo(this.p1.x-u/2,this.p1.y),r.lineTo(this.p1.x+u/2,this.p1.y),r.stroke(),r.beginPath(),r.moveTo(this.p1.x,this.p1.y-u/2),r.lineTo(this.p1.x,this.p1.y+u/2),r.stroke(),this.drawArrowHead(e,this.p1.x+(u+h)/2,this.p1.y,0,h),this.drawArrowHead(e,this.p1.x,this.p1.y+(u+h)/2,Math.PI/2,h),this.drawArrowHead(e,this.p1.x-(u+h)/2,this.p1.y,Math.PI,h),this.drawArrowHead(e,this.p1.x,this.p1.y-(u+h)/2,-Math.PI/2,h);break;case"xTranslation":r.beginPath(),r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.handleArrow.color),r.fillStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.handleArrow.color),r.lineWidth=c,r.moveTo(this.p1.x-l/2,this.p1.y),r.lineTo(this.p1.x+l/2,this.p1.y),r.stroke(),this.drawArrowHead(e,this.p1.x+(l+p)/2,this.p1.y,0,p),this.drawArrowHead(e,this.p1.x-(l+p)/2,this.p1.y,Math.PI,p);break;case"yTranslation":r.beginPath(),r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.handleArrow.color),r.fillStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.handleArrow.color),r.lineWidth=c,r.moveTo(this.p1.x,this.p1.y-l/2),r.lineTo(this.p1.x,this.p1.y+l/2),r.stroke(),this.drawArrowHead(e,this.p1.x,this.p1.y+(l+p)/2,Math.PI/2,p),this.drawArrowHead(e,this.p1.x,this.p1.y-(l+p)/2,-Math.PI/2,p);break;case"rotation":r.beginPath(),r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.handleArrow.color),r.fillStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.handleArrow.color),r.lineWidth=c;const t=40*s,a=Math.atan2(this.p1.y-this.p2.y,this.p1.x-this.p2.x),d=i.A.point(this.p1.x-t*Math.cos(a),this.p1.y-t*Math.sin(a)),f=a-l/t/2,m=a-(l+p)/t/2,g=a+l/t/2,y=a+(l+p)/t/2;r.arc(d.x,d.y,t,f,g),r.stroke(),this.drawArrowHead(e,d.x+t*Math.cos(y),d.y+t*Math.sin(y),g+Math.PI/2,p),this.drawArrowHead(e,d.x+t*Math.cos(m),d.y+t*Math.sin(m),f-Math.PI/2,p);break;case"scaling":r.beginPath(),r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.handleArrow.color),r.fillStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.handleArrow.color),r.lineWidth=c;const x=Math.atan2(this.p1.y-this.p2.y,this.p1.x-this.p2.x),v=this.scene.theme.handleArrow.size/24*14*s,b=this.scene.theme.handleArrow.size/24*10*s;r.beginPath(),r.moveTo(this.p1.x-l/2*Math.cos(x),this.p1.y-l/2*Math.sin(x)),r.lineTo(this.p1.x+l/2*Math.cos(x),this.p1.y+l/2*Math.sin(x)),r.stroke(),this.drawArrowHead(e,this.p1.x+(l+v)/2*Math.cos(x),this.p1.y+(l+v)/2*Math.sin(x),x,v),this.drawArrowHead(e,this.p1.x-(l+b)/2*Math.cos(x),this.p1.y-(l+b)/2*Math.sin(x),x+Math.PI,b)}r.lineWidth=1*s,"default"!=this.transformation&&"rotation"!=this.transformation&&"scaling"!=this.transformation||(r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.handlePoint.color),r.beginPath(),r.moveTo(this.p2.x-5*s,this.p2.y),r.lineTo(this.p2.x+5*s,this.p2.y),r.stroke(),r.beginPath(),r.moveTo(this.p2.x,this.p2.y-5*s),r.lineTo(this.p2.x,this.p2.y+5*s),r.stroke())}}move(e,t){if(this.notDone)return;this.p1.x=this.p1.x+e,this.p1.y=this.p1.y+t,this.p2.x=this.p2.x+e,this.p2.y=this.p2.y+t;let n=!0,r=null;for(var i in this.objIndices){const s=this.scene.objs[this.objIndices[i]];s.move(e,t)||(r=s.constructor.type,n=!1)}for(var i in this.controlPoints)this.controlPoints[i].dragContext.originalObj=this.scene.objs[this.controlPoints[i].targetObjIndex].serialize(),this.controlPoints[i].dragContext.isByHandle=!0,this.controlPoints[i].dragContext.hasDuplicated=!1,this.controlPoints[i].dragContext.targetPoint={x:this.controlPoints[i].newPoint.x,y:this.controlPoints[i].newPoint.y},this.controlPoints[i].dragContext.snapContext={},this.controlPoints[i].newPoint.x=this.controlPoints[i].newPoint.x+e,this.controlPoints[i].newPoint.y=this.controlPoints[i].newPoint.y+t,this.scene.objs[this.controlPoints[i].targetObjIndex].onDrag(new s.A(JSON.parse(JSON.stringify(this.controlPoints[i].newPoint)),this.scene,!1,2),JSON.parse(JSON.stringify(this.controlPoints[i].dragContext)),!1,!1);return this.warning=n?null:a.Ay.t("simulator:sceneObjs.Handle.transformationWarning",{obj:r,transformation:a.Ay.t("simulator:sceneObjs.Handle.transformations.translation")}),n}rotate(e,t=null){if(this.notDone)return;t=t||this.p2;let n=this.p1.x-t.x,r=this.p1.y-t.y;this.p1.x=Math.cos(e)*n-Math.sin(e)*r+t.x,this.p1.y=Math.sin(e)*n+Math.cos(e)*r+t.y,t!==this.p2&&(n=this.p2.x-t.x,r=this.p2.y-t.y,this.p2.x=Math.cos(e)*n-Math.sin(e)*r+t.x,this.p2.y=Math.sin(e)*n+Math.cos(e)*r+t.y);let i=!0,o=null;for(var c in this.objIndices){const n=this.scene.objs[this.objIndices[c]];n.rotate(e,t)||(o=n.constructor.type,i=!1)}for(var c in this.controlPoints)this.controlPoints[c].dragContext.originalObj=this.scene.objs[this.controlPoints[c].targetObjIndex].serialize(),this.controlPoints[c].dragContext.isByHandle=!0,this.controlPoints[c].dragContext.hasDuplicated=!1,this.controlPoints[c].dragContext.targetPoint={x:this.controlPoints[c].newPoint.x,y:this.controlPoints[c].newPoint.y},this.controlPoints[c].dragContext.snapContext={},n=this.controlPoints[c].newPoint.x-t.x,r=this.controlPoints[c].newPoint.y-t.y,this.controlPoints[c].newPoint.x=Math.cos(e)*n-Math.sin(e)*r+t.x,this.controlPoints[c].newPoint.y=Math.sin(e)*n+Math.cos(e)*r+t.y,this.scene.objs[this.controlPoints[c].targetObjIndex].onDrag(new s.A(JSON.parse(JSON.stringify(this.controlPoints[c].newPoint)),this.scene,!1,2),JSON.parse(JSON.stringify(this.controlPoints[c].dragContext)),!1,!1);return this.warning=i?null:a.Ay.t("simulator:sceneObjs.Handle.transformationWarning",{obj:o,transformation:a.Ay.t("simulator:sceneObjs.Handle.transformations.rotation")}),i}scale(e,t=null){if(this.notDone)return;t=t||this.p2,this.p1.x=(this.p1.x-t.x)*e+t.x,this.p1.y=(this.p1.y-t.y)*e+t.y,t!==this.p2&&(this.p2.x=(this.p2.x-t.x)*e+t.x,this.p2.y=(this.p2.y-t.y)*e+t.y);let n=!0,r=null;for(var i in this.objIndices){const s=this.scene.objs[this.objIndices[i]];s.scale(e,t)||(r=s.constructor.type,n=!1)}for(var i in this.controlPoints)this.controlPoints[i].dragContext.originalObj=this.scene.objs[this.controlPoints[i].targetObjIndex].serialize(),this.controlPoints[i].dragContext.isByHandle=!0,this.controlPoints[i].dragContext.hasDuplicated=!1,this.controlPoints[i].dragContext.targetPoint={x:this.controlPoints[i].newPoint.x,y:this.controlPoints[i].newPoint.y},this.controlPoints[i].dragContext.snapContext={},this.controlPoints[i].newPoint.x=(this.controlPoints[i].newPoint.x-t.x)*e+t.x,this.controlPoints[i].newPoint.y=(this.controlPoints[i].newPoint.y-t.y)*e+t.y,this.scene.objs[this.controlPoints[i].targetObjIndex].onDrag(new s.A(JSON.parse(JSON.stringify(this.controlPoints[i].newPoint)),this.scene,!1,2),JSON.parse(JSON.stringify(this.controlPoints[i].dragContext)),!1,!1);return this.warning=n?null:a.Ay.t("simulator:sceneObjs.Handle.transformationWarning",{obj:r,transformation:a.Ay.t("simulator:sceneObjs.Handle.transformations.scaling")}),n}checkMouseOver(e){let t={};if(!this.notDone)return e.isOnPoint(this.p1)||"default"!=this.transformation&&i.A.distance(this.p1,e.pos)<this.scene.theme.handleArrow.size/24*20*this.scene.lengthScale?(t.part=1,t.targetPoint_=i.A.point(this.p1.x,this.p1.y),t.mousePos0=i.A.point(this.p1.x,this.p1.y),t.snapContext={},t):"default"!=this.transformation&&"rotation"!=this.transformation&&"scaling"!=this.transformation||!e.isOnPoint(this.p2)?void 0:(t.part=2,t.targetPoint=i.A.point(this.p2.x,this.p2.y),t.mousePos0=i.A.point(this.p2.x,this.p2.y),t.snapContext={},t)}onDrag(e,t,n,r){if(!this.notDone){if(r)var s=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1}],t.snapContext);else s=e.getPosSnappedToGrid(),t.snapContext={};if(1==t.part){if(n&&r||"scaling"==this.transformation){var a=i.A.distance(this.p2,e.pos)/i.A.distance(this.p2,t.targetPoint_);if(a<1e-5)return;if(0!==this.scaleStep){const e=this.scaleStep>0?1+this.scaleStep/100:1/(1-Math.abs(this.scaleStep)/100),t=Math.round(Math.log(a)/Math.log(e));a=Math.pow(e,t)}this.scale(a,this.p2)}else if(n||"rotation"==this.transformation){var o=Math.atan2(this.p2.y-e.pos.y,this.p2.x-e.pos.x)-Math.atan2(this.p2.y-t.targetPoint_.y,this.p2.x-t.targetPoint_.x);if(this.rotateStep>0){const e=this.rotateStep*Math.PI/180;for(;o>Math.PI;)o-=2*Math.PI;for(;o<=-Math.PI;)o+=2*Math.PI;o=Math.round(o/e)*e}this.rotate(o,this.p2)}else{var c="yTranslation"==this.transformation?0:s.x-t.targetPoint_.x,u="xTranslation"==this.transformation?0:s.y-t.targetPoint_.y;if(this.moveStep>0){const e=this.moveStep*this.scene.lengthScale;c=Math.round(c/e)*e,u=Math.round(u/e)*e}this.move(c,u)}t.targetPoint_.x=this.p1.x,t.targetPoint_.y=this.p1.y}2==t.part&&(this.p2.x=s.x,this.p2.y=s.y)}}addControlPoint(e){e.dragContext.originalObj=this.scene.objs[e.targetObjIndex],e.dragContext.isByHandle=!0,e.dragContext.hasDuplicated=!1,e.newPoint=e.dragContext.targetPoint,e=JSON.parse(JSON.stringify(e)),this.controlPoints.push(e)}addObject(e){this.objIndices.includes(e)||this.objIndices.push(e)}finishHandle(e){this.p1=e;let t=0,n=0,r=0;for(let e in this.controlPoints)t+=this.controlPoints[e].newPoint.x,n+=this.controlPoints[e].newPoint.y,r++;for(let e in this.objIndices){const i=this.scene.objs[this.objIndices[e]],s=i.getDefaultCenter&&i.getDefaultCenter();s&&(t+=s.x,n+=s.y,r++)}if(r>0)this.p2=i.A.point(t/r,n/r);else{const e=(.5*this.scene.width-this.scene.origin.x)/this.scene.scale,t=(.5*this.scene.height-this.scene.origin.y)/this.scene.scale;this.p2=i.A.point(e,t)}this.notDone=!1}drawArrowHead(e,t,n,r,i){const s=e.ctx;s.save(),s.translate(t,n),s.rotate(r),s.beginPath(),s.moveTo(0,0),s.lineTo(-i,-i),s.lineTo(-i,i),s.closePath(),s.fill(),s.restore()}}const c=o},9633:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(867),i=n(6492),s=n(2635),a=n(4536),o=n(3886);class c extends r.A{static type="ModuleObj";static isOptical=!0;static serializableDefaults={module:null,points:null,params:null,notDone:!1};constructor(e,t){if(super(e,t),!this.module)return;this.moduleDef=this.scene.modules[this.module],this.moduleDef||(this.scene.error=s.Ay.t("simulator:generalErrors.unknownModule",{module:this.module}),this.moduleDef={numPoints:0,params:[],objs:[]});const n=["numPoints","params","vars","objs","maxLoopLength"];for(const e in this.moduleDef)n.includes(e)||(this.scene.error=s.Ay.t("simulator:generalErrors.unknownModuleKey",{key:e,module:this.module}));if(!this.points){this.points=[];for(let e=0;e<this.moduleDef.numPoints;e++)this.points.push(i.A.point(0,0))}if(!this.params){this.params={};for(let e of this.moduleDef.params){const t=this.parseVariableRange(e,{});this.params[t.name]=t.defaultVal}}this.objs=[],this.expandObjs()}populateObjBar(e){if(e.setTitle(s.Ay.t("main:meta.colon",{name:s.Ay.t("simulator:sceneObjs.ModuleObj.module"),value:'<span style="font-family: monospace; padding-right:2px">'+this.module+"</span>"})),!this.notDone){try{for(let t of this.moduleDef.params){const n=this.parseVariableRange(t,{});e.createNumber('<span style="font-family: monospace;">'+n.name+"</span>",n.start,n.end,n.step,this.params[n.name],(function(e,t){e.params[n.name]=t,e.expandObjs()}))}}catch(e){this.error=e}e.createButton(s.Ay.t("simulator:sceneObjs.ModuleObj.demodulize"),(function(e){e.demodulize()}),!1,'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-down-left" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M7.364 12.5a.5.5 0 0 0 .5.5H14.5a1.5 1.5 0 0 0 1.5-1.5v-10A1.5 1.5 0 0 0 14.5 0h-10A1.5 1.5 0 0 0 3 1.5v6.636a.5.5 0 1 0 1 0V1.5a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v10a.5.5 0 0 1-.5.5H7.864a.5.5 0 0 0-.5.5"/>\n      <path fill-rule="evenodd" d="M0 15.5a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 0-1H1.707l8.147-8.146a.5.5 0 0 0-.708-.708L1 14.293V10.5a.5.5 0 0 0-1 0z"/>\n    </svg>\n    ')}}draw(e,t,n){const r=e.ctx,i=e.lengthScale;let s=this.objs.map((function(e,t){return{index:t,value:e.getZIndex()}}));s.sort((function(e,t){return e.value-t.value}));for(let r=0;r<this.objs.length;r++){let i=s[r].index;this.objs[i].draw(e,t,n)}if(!this.isInModule){r.lineWidth=1*i;for(let t of this.points)r.beginPath(),r.strokeStyle=n?this.scene.highlightColorCss:e.rgbaToCssColor(this.scene.theme.handlePoint.color),r.arc(t.x,t.y,2*i,0,2*Math.PI,!1),r.stroke(),r.beginPath(),r.arc(t.x,t.y,5*i,0,2*Math.PI,!1),r.stroke()}}move(e,t){if(0!==this.points.length){for(let n of this.points)n.x+=e,n.y+=t;return this.expandObjs(),!1}}rotate(e,t=null){if(0===this.points.length)return!1;t=t||this.getDefaultCenter();const n=Math.cos(e),r=Math.sin(e);for(let e of this.points){const i=e.x-t.x,s=e.y-t.y;e.x=t.x+i*n-s*r,e.y=t.y+i*r+s*n}return this.expandObjs(),!1}scale(e,t=null){if(0===this.points.length)return!1;t=t||this.getDefaultCenter();for(let n of this.points)n.x=t.x+(n.x-t.x)*e,n.y=t.y+(n.y-t.y)*e;return this.expandObjs(),!1}getDefaultCenter(){if(0===this.points.length)return;let e=0,t=0;for(const n of this.points)e+=n.x,t+=n.y;return{x:e/this.points.length,y:t/this.points.length}}onConstructMouseDown(e,t,n){const r=e.getPosSnappedToGrid();if(!this.notDone){if(this.notDone=!0,this.module!==this.scene.editor.addingModuleName){this.module=this.scene.editor.addingModuleName,this.moduleDef=this.scene.modules[this.module],this.params={};for(let e of this.moduleDef.params){const t=this.parseVariableRange(e,{});this.params[t.name]=t.defaultVal}}this.points=[],this.objs=[]}if(this.points.length<this.moduleDef.numPoints&&this.points.push({x:r.x,y:r.y}),this.points.length==this.moduleDef.numPoints)return this.notDone=!1,this.expandObjs(),{requiresObjBarUpdate:!0}}onConstructMouseUp(e,t,n){if(this.points.length==this.moduleDef.numPoints)return{isDone:!0}}checkMouseOver(e){let t,n={},r=1/0,s=-1;for(var a=0;a<this.points.length;a++)e.isOnPoint(this.points[a])&&(t=i.A.distanceSquared(e.pos,this.points[a]),t<=r&&(r=t,s=a));if(-1!=s)return n.part=1,n.index=s,n.targetPoint=i.A.point(this.points[s].x,this.points[s].y),n;for(let t of this.objs){let r=t.checkMouseOver(e);if(r){if(0===this.points.length)return n.part=-1,r.targetPoint?n.cursor="not-allowed":n.cursor="pointer",n;{const t=e.getPosSnappedToGrid();return n.part=0,n.mousePos0=t,n.mousePos1=t,n.snapContext={},n}}}return null}onDrag(e,t,n,r){const i=e.getPosSnappedToGrid();if(1==t.part&&(this.points[t.index].x=i.x,this.points[t.index].y=i.y),0==t.part){if(r)var s=e.getPosSnappedToDirection(t.mousePos0,[{x:1,y:0},{x:0,y:1}],t.snapContext);else s=e.getPosSnappedToGrid(),t.snapContext={};this.move(s.x-t.mousePos1.x,s.y-t.mousePos1.y),t.mousePos1=s}this.expandObjs()}getError(){if(this.error)return this.error;{let e=[];for(let t in this.objs){let n=this.objs[t].getError();n&&e.push(`obj.objs[${t}] ${this.objs[t].constructor.type}: ${n}`)}if(e.length>0)return"In expanded objects:\n"+e.join("\n")}return null}getWarning(){if(this.warning)return this.warning;{let e=[];for(let t in this.objs){let n=this.objs[t].getWarning();n&&e.push(`obj.objs[${t}] ${this.objs[t].constructor.type}: ${n}`)}if(e.length>0)return"In expanded objects:\n"+e.join("\n")}return null}parseVariableRange(e,t){try{let n=e.split("="),r=n[0].trim(),i=n[1].split(":"),s=i[0],a=i[1],c=i[2],u=4==i.length?i[3]:null,l=o._3(s,t);return{name:r,start:l,step:o._3(a,t),end:o._3(c,t),defaultVal:null===u?l:o._3(u,t)}}catch(n){throw s.Ay.t("simulator:sceneObjs.ModuleObj.variableRangeError",{str:e,params:JSON.stringify(t),error:n})}}expandString(e,t){try{let n=e.split("`");if(3==n.length&&""==n[0]&&""==n[2]||2==n.length&&""==n[0])return 2==n.length&&(this.warning=s.Ay.t("simulator:sceneObjs.ModuleObj.unclosedMathBlock",{str:"`"+n[1]})),o._3(n[1],t);{let e="",r=!0;for(let i=0;i<n.length;i++){if(r)e+=n[i];else if(""===n[i]&&i<n.length-1){if(!(i<n.length-3&&""===n[i+2]))throw new Error(s.Ay.t("simulator:sceneObjs.ModuleObj.unclosedMathBlock",{str:"``"+n[i+1]}));e+=this.expandEquation(n[i+1],t),i+=2}else e+=o._3(n[i],t),i==n.length-1&&(this.warning=s.Ay.t("simulator:sceneObjs.ModuleObj.unclosedMathBlock",{str:"`"+n[i]}));r=!r}return e}}catch(n){throw s.Ay.t("simulator:sceneObjs.ModuleObj.stringExpansionError",{str:e,params:JSON.stringify(t),error:n})}}expandEquation(e,t){const n=o.qg(e),r=function(e,n,i){if(e.isSymbolNode&&t.hasOwnProperty(e.name)){const n=t[e.name];if("number"==typeof n)return o.qg(n.toString());if("string"==typeof n)return o.qg(n)}else if(e.isFunctionNode&&this.funcDefs&&this.funcDefs.hasOwnProperty(e.fn.name)){const n=this.funcDefs[e.fn.name];if(e.args&&e.args.length>0){let i=o.qg(n.body);return i=i.transform((function(r){if(r.isSymbolNode){const i=n.params.indexOf(r.name);if(-1!==i&&i<e.args.length)return e.args[i].clone();if(t.hasOwnProperty(r.name)){const e=t[r.name];if("number"==typeof e)return o.qg(e.toString())}}return r})),i.transform(r)}}return e}.bind(this);return n.transform(r).toTex({handler:function(e,t){if("SymbolNode"===e.type){let t=e.name;if(t.includes("_")){const e=t.split("_"),n=e[0],r=e.slice(1).join("_");return(1===n.length?" "+n:"\\"+n)+"_{"+r+"}"}return 1===t.length?" "+t:"\\"+t}if("FunctionNode"!==e.type);else{const n=e.fn.name||e.fn,r=e.args||[];switch(n){case"log":return"\\log\\left("+r[0].toTex(t)+"\\right)";case"asin":return"\\arcsin\\left("+r[0].toTex(t)+"\\right)";case"acos":return"\\arccos\\left("+r[0].toTex(t)+"\\right)";case"atan":return"\\arctan\\left("+r[0].toTex(t)+"\\right)";case"asinh":return"\\operatorname{asinh}\\left("+r[0].toTex(t)+"\\right)";case"acosh":return"\\operatorname{acosh}\\left("+r[0].toTex(t)+"\\right)";case"atanh":return"\\operatorname{atanh}\\left("+r[0].toTex(t)+"\\right)";case"floor":return"\\operatorname{floor}\\left("+r[0].toTex(t)+"\\right)";case"ceil":return"\\operatorname{ceil}\\left("+r[0].toTex(t)+"\\right)";case"round":return"\\operatorname{round}\\left("+r[0].toTex(t)+"\\right)";case"sign":return"\\operatorname{sign}\\left("+r[0].toTex(t)+"\\right)"}}}})}expandObject(e,t){let n={};for(let r in e)"for"!==r&&"if"!==r&&("string"==typeof e[r]?n[r]=this.expandString(e[r],t):Array.isArray(e[r])?n[r]=this.expandArray(e[r],t):"object"==typeof e[r]?n[r]=this.expandObject(e[r],t):n[r]=e[r]);return n}expandArray(e,t){let n=[];for(let r of e)try{if("for"in r){let i=r.for,a=[];if("string"==typeof i)a.push(this.parseVariableRange(i,t));else if(Array.isArray(i))for(let h of i)a.push(this.parseVariableRange(h,t));const c=this;function u(e){if(0==e.length)return[t];{let t=[],n=e.slice(1);if((e[0].end-e[0].start)/e[0].step+1>(c.moduleDef.maxLoopLength||1e3))throw s.Ay.t("simulator:sceneObjs.ModuleObj.loopVariableTooLarge",{name:e[0].name});for(let r=e[0].start;r<=e[0].end;r+=e[0].step)for(let i of u(n)){let n=Object.assign({},i);n[e[0].name]=r,t.push(n)}return t}}const l=u(a);if(l.length>(this.moduleDef.maxLoopLength||1e3))throw s.Ay.t("simulator:sceneObjs.ModuleObj.loopTooLarge");for(let p of l)"if"in r&&!o._3(r.if,p)||n.push(this.expandObject(r,p))}else"if"in r?o._3(r.if,t)&&n.push(this.expandObject(r,t)):"string"==typeof r?n.push(this.expandString(r,t)):Array.isArray(r)?n.push(this.expandArray(r,t)):"object"==typeof r?n.push(this.expandObject(r,t)):n.push(r)}catch(d){throw s.Ay.t("simulator:sceneObjs.ModuleObj.objectExpansionError",{obj:JSON.stringify(r),params:JSON.stringify(t),error:d})}return n}expandObjs(){const e={};for(let t in this.params)e[t]=this.params[t];for(let t=0;t<this.points.length;t++)e["x_"+(t+1)]=this.points[t].x,e["y_"+(t+1)]=this.points[t].y;if(e.random=this.scene.rng,this.moduleDef.vars&&Array.isArray(this.moduleDef.vars))try{this.funcDefs={};for(const t of this.moduleDef.vars){const n=t.match(/^(\w+)\s*\(\s*([^)]+)\s*\)\s*=\s*(.+)$/);if(n){const[,e,t,r]=n,i=t.split(",").map((e=>e.trim()));this.funcDefs[e]={params:i,body:r}}o._3(t,e)}}catch(t){return void(this.error=s.Ay.t("simulator:sceneObjs.ModuleObj.variableDefinitionError",{params:JSON.stringify(e),error:t}))}this.warning=null,this.error=null;try{const t=this.expandArray(this.moduleDef.objs,e);this.objs=[];for(const e of t){if(!a[e.type])return void(this.error=s.Ay.t("simulator:generalErrors.unknownObjectType",{type:e.type}));this.objs.push(new a[e.type](this.scene,e)),this.objs[this.objs.length-1].isInModule=!0}}catch(e){this.error=e}}demodulize(){this.scene.removeObj(this.scene.objs.indexOf(this));for(let e of this.objs)e.isInModule=!1,this.scene.objs.push(e),this.scene.editor&&this.scene.editor.selectObj(-1)}}const u=c},6982:e=>{"use strict";e.exports=require("crypto")},3693:(e,t,n)=>{var r=n(7736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},9045:(e,t,n)=>{var r=n(3738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7736:(e,t,n)=>{var r=n(3738).default,i=n(9045);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4824:(e,n,r)=>{"use strict";r.d(n,{w:()=>M});const{abs:i,cos:s,sin:a,acos:o,atan2:c,sqrt:u,pow:l}=Math;function h(e){return e<0?-l(-e,1/3):l(e,1/3)}const p=Math.PI,d=2*p,f=p/2,m=Number.MAX_SAFE_INTEGER||9007199254740991,g=Number.MIN_SAFE_INTEGER||-9007199254740991,y={x:0,y:0,z:0},x={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,t){const n=t(e);let r=n.x*n.x+n.y*n.y;return void 0!==n.z&&(r+=n.z*n.z),u(r)},compute:function(e,t,n){if(0===e)return t[0].t=0,t[0];const r=t.length-1;if(1===e)return t[r].t=1,t[r];const i=1-e;let s=t;if(0===r)return t[0].t=e,t[0];if(1===r){const t={x:i*s[0].x+e*s[1].x,y:i*s[0].y+e*s[1].y,t:e};return n&&(t.z=i*s[0].z+e*s[1].z),t}if(r<4){let t,a,o,c=i*i,u=e*e,l=0;2===r?(s=[s[0],s[1],s[2],y],t=c,a=i*e*2,o=u):3===r&&(t=c*i,a=c*e*3,o=i*u*3,l=e*u);const h={x:t*s[0].x+a*s[1].x+o*s[2].x+l*s[3].x,y:t*s[0].y+a*s[1].y+o*s[2].y+l*s[3].y,t:e};return n&&(h.z=t*s[0].z+a*s[1].z+o*s[2].z+l*s[3].z),h}const a=JSON.parse(JSON.stringify(t));for(;a.length>1;){for(let t=0;t<a.length-1;t++)a[t]={x:a[t].x+(a[t+1].x-a[t].x)*e,y:a[t].y+(a[t+1].y-a[t].y)*e},void 0!==a[t].z&&(a[t].z=a[t].z+(a[t+1].z-a[t].z)*e);a.splice(a.length-1,1)}return a[0].t=e,a[0]},computeWithRatios:function(e,t,n,r){const i=1-e,s=n,a=t;let o,c=s[0],u=s[1],l=s[2],h=s[3];return c*=i,u*=e,2===a.length?(o=c+u,{x:(c*a[0].x+u*a[1].x)/o,y:(c*a[0].y+u*a[1].y)/o,z:!!r&&(c*a[0].z+u*a[1].z)/o,t:e}):(c*=i,u*=2*i,l*=e*e,3===a.length?(o=c+u+l,{x:(c*a[0].x+u*a[1].x+l*a[2].x)/o,y:(c*a[0].y+u*a[1].y+l*a[2].y)/o,z:!!r&&(c*a[0].z+u*a[1].z+l*a[2].z)/o,t:e}):(c*=i,u*=1.5*i,l*=3*i,h*=e*e*e,4===a.length?(o=c+u+l+h,{x:(c*a[0].x+u*a[1].x+l*a[2].x+h*a[3].x)/o,y:(c*a[0].y+u*a[1].y+l*a[2].y+h*a[3].y)/o,z:!!r&&(c*a[0].z+u*a[1].z+l*a[2].z+h*a[3].z)/o,t:e}):void 0))},derive:function(e,t){const n=[];for(let r=e,i=r.length,s=i-1;i>1;i--,s--){const e=[];for(let n,i=0;i<s;i++)n={x:s*(r[i+1].x-r[i].x),y:s*(r[i+1].y-r[i].y)},t&&(n.z=s*(r[i+1].z-r[i].z)),e.push(n);n.push(e),r=e}return n},between:function(e,t,n){return t<=e&&e<=n||x.approximately(e,t)||x.approximately(e,n)},approximately:function(e,t,n){return i(e-t)<=(n||1e-6)},length:function(e){const t=x.Tvalues.length;let n=0;for(let r,i=0;i<t;i++)r=.5*x.Tvalues[i]+.5,n+=x.Cvalues[i]*x.arcfn(r,e);return.5*n},map:function(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)},lerp:function(e,t,n){const r={x:t.x+e*(n.x-t.x),y:t.y+e*(n.y-t.y)};return void 0!==t.z&&void 0!==n.z&&(r.z=t.z+e*(n.z-t.z)),r},pointToString:function(e){let t=e.x+"/"+e.y;return void 0!==e.z&&(t+="/"+e.z),t},pointsToString:function(e){return"["+e.map(x.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,t,n){const r=t.x-e.x,i=t.y-e.y,s=n.x-e.x,a=n.y-e.y;return c(r*a-i*s,r*s+i*a)},round:function(e,t){const n=""+e,r=n.indexOf(".");return parseFloat(n.substring(0,r+1+t))},dist:function(e,t){const n=e.x-t.x,r=e.y-t.y;return u(n*n+r*r)},closest:function(e,t){let n,r,i=l(2,63);return e.forEach((function(e,s){r=x.dist(t,e),r<i&&(i=r,n=s)})),{mdist:i,mpos:n}},abcratio:function(e,t){if(2!==t&&3!==t)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;const n=l(e,t)+l(1-e,t);return i((n-1)/n)},projectionratio:function(e,t){if(2!==t&&3!==t)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;const n=l(1-e,t);return n/(l(e,t)+n)},lli8:function(e,t,n,r,i,s,a,o){const c=(e-n)*(s-o)-(t-r)*(i-a);return 0!=c&&{x:((e*r-t*n)*(i-a)-(e-n)*(i*o-s*a))/c,y:((e*r-t*n)*(s-o)-(t-r)*(i*o-s*a))/c}},lli4:function(e,t,n,r){const i=e.x,s=e.y,a=t.x,o=t.y,c=n.x,u=n.y,l=r.x,h=r.y;return x.lli8(i,s,a,o,c,u,l,h)},lli:function(e,t){return x.lli4(e,e.c,t,t.c)},makeline:function(e,t){return new M(e.x,e.y,(e.x+t.x)/2,(e.y+t.y)/2,t.x,t.y)},findbbox:function(e){let t=m,n=m,r=g,i=g;return e.forEach((function(e){const s=e.bbox();t>s.x.min&&(t=s.x.min),n>s.y.min&&(n=s.y.min),r<s.x.max&&(r=s.x.max),i<s.y.max&&(i=s.y.max)})),{x:{min:t,mid:(t+r)/2,max:r,size:r-t},y:{min:n,mid:(n+i)/2,max:i,size:i-n}}},shapeintersections:function(e,t,n,r,i){if(!x.bboxoverlap(t,r))return[];const s=[],a=[e.startcap,e.forward,e.back,e.endcap],o=[n.startcap,n.forward,n.back,n.endcap];return a.forEach((function(t){t.virtual||o.forEach((function(r){if(r.virtual)return;const a=t.intersects(r,i);a.length>0&&(a.c1=t,a.c2=r,a.s1=e,a.s2=n,s.push(a))}))})),s},makeshape:function(e,t,n){const r=t.points.length,i=e.points.length,s=x.makeline(t.points[r-1],e.points[0]),a=x.makeline(e.points[i-1],t.points[0]),o={startcap:s,forward:e,back:t,endcap:a,bbox:x.findbbox([s,e,t,a]),intersections:function(e){return x.shapeintersections(o,o.bbox,e,e.bbox,n)}};return o},getminmax:function(e,t,n){if(!n)return{min:0,max:0};let r,i,s=m,a=g;-1===n.indexOf(0)&&(n=[0].concat(n)),-1===n.indexOf(1)&&n.push(1);for(let o=0,c=n.length;o<c;o++)r=n[o],i=e.get(r),i[t]<s&&(s=i[t]),i[t]>a&&(a=i[t]);return{min:s,mid:(s+a)/2,max:a,size:a-s}},align:function(e,t){const n=t.p1.x,r=t.p1.y,i=-c(t.p2.y-r,t.p2.x-n);return e.map((function(e){return{x:(e.x-n)*s(i)-(e.y-r)*a(i),y:(e.x-n)*a(i)+(e.y-r)*s(i)}}))},roots:function(e,t){t=t||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=e.length-1,r=x.align(e,t),i=function(e){return 0<=e&&e<=1};if(2===n){const e=r[0].y,t=r[1].y,n=r[2].y,s=e-2*t+n;if(0!==s){const r=-u(t*t-e*n),a=-e+t;return[-(r+a)/s,-(-r+a)/s].filter(i)}return t!==n&&0===s?[(2*t-n)/(2*t-2*n)].filter(i):[]}const a=r[0].y,c=r[1].y,l=r[2].y;let p=3*c-a-3*l+r[3].y,f=3*a-6*c+3*l,m=-3*a+3*c,g=a;if(x.approximately(p,0)){if(x.approximately(f,0))return x.approximately(m,0)?[]:[-g/m].filter(i);const e=u(m*m-4*f*g),t=2*f;return[(e-m)/t,(-m-e)/t].filter(i)}f/=p,m/=p,g/=p;const y=(3*m-f*f)/3,v=y/3,b=(2*f*f*f-9*f*m+27*g)/27,D=b/2,w=D*D+v*v*v;let A,S,N,C,E;if(w<0){const e=-y/3,t=u(e*e*e),n=-b/(2*t),r=o(n<-1?-1:n>1?1:n),a=2*h(t);return N=a*s(r/3)-f/3,C=a*s((r+d)/3)-f/3,E=a*s((r+2*d)/3)-f/3,[N,C,E].filter(i)}if(0===w)return A=D<0?h(-D):-h(D),N=2*A-f/3,C=-A-f/3,[N,C].filter(i);{const e=u(w);return A=h(-D+e),S=h(D+e),[A-S-f/3].filter(i)}},droots:function(e){if(3===e.length){const t=e[0],n=e[1],r=e[2],i=t-2*n+r;if(0!==i){const e=-u(n*n-t*r),s=-t+n;return[-(e+s)/i,-(-e+s)/i]}return n!==r&&0===i?[(2*n-r)/(2*(n-r))]:[]}if(2===e.length){const t=e[0],n=e[1];return t!==n?[t/(t-n)]:[]}return[]},curvature:function(e,t,n,r,s){let a,o,c,h,p=0,d=0;const f=x.compute(e,t),m=x.compute(e,n),g=f.x*f.x+f.y*f.y;if(r?(a=u(l(f.y*m.z-m.y*f.z,2)+l(f.z*m.x-m.z*f.x,2)+l(f.x*m.y-m.x*f.y,2)),o=l(g+f.z*f.z,1.5)):(a=f.x*m.y-f.y*m.x,o=l(g,1.5)),0===a||0===o)return{k:0,r:0};if(p=a/o,d=o/a,!s){const s=x.curvature(e-.001,t,n,r,!0).k,a=x.curvature(e+.001,t,n,r,!0).k;h=(a-p+(p-s))/2,c=(i(a-p)+i(p-s))/2}return{k:p,r:d,dk:h,adk:c}},inflections:function(e){if(e.length<4)return[];const t=x.align(e,{p1:e[0],p2:e.slice(-1)[0]}),n=t[2].x*t[1].y,r=t[3].x*t[1].y,i=t[1].x*t[2].y,s=18*(-3*n+2*r+3*i-t[3].x*t[2].y),a=18*(3*n-r-3*i),o=18*(i-n);if(x.approximately(s,0)){if(!x.approximately(a,0)){let e=-o/a;if(0<=e&&e<=1)return[e]}return[]}const c=2*s;if(x.approximately(c,0))return[];const u=a*a-4*s*o;if(u<0)return[];const l=Math.sqrt(u);return[(l-a)/c,-(a+l)/c].filter((function(e){return 0<=e&&e<=1}))},bboxoverlap:function(e,t){const n=["x","y"],r=n.length;for(let s,a,o,c,u=0;u<r;u++)if(s=n[u],a=e[s].mid,o=t[s].mid,c=(e[s].size+t[s].size)/2,i(a-o)>=c)return!1;return!0},expandbox:function(e,t){t.x.min<e.x.min&&(e.x.min=t.x.min),t.y.min<e.y.min&&(e.y.min=t.y.min),t.z&&t.z.min<e.z.min&&(e.z.min=t.z.min),t.x.max>e.x.max&&(e.x.max=t.x.max),t.y.max>e.y.max&&(e.y.max=t.y.max),t.z&&t.z.max>e.z.max&&(e.z.max=t.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,t,n){const r=e.bbox(),i=t.bbox(),s=1e5,a=n||.5;if(r.x.size+r.y.size<a&&i.x.size+i.y.size<a)return[(s*(e._t1+e._t2)/2|0)/s+"/"+(s*(t._t1+t._t2)/2|0)/s];let o=e.split(.5),c=t.split(.5),u=[{left:o.left,right:c.left},{left:o.left,right:c.right},{left:o.right,right:c.right},{left:o.right,right:c.left}];u=u.filter((function(e){return x.bboxoverlap(e.left.bbox(),e.right.bbox())}));let l=[];return 0===u.length||(u.forEach((function(e){l=l.concat(x.pairiteration(e.left,e.right,a))})),l=l.filter((function(e,t){return l.indexOf(e)===t}))),l},getccenter:function(e,t,n){const r=t.x-e.x,i=t.y-e.y,o=n.x-t.x,u=n.y-t.y,l=r*s(f)-i*a(f),h=r*a(f)+i*s(f),p=o*s(f)-u*a(f),m=o*a(f)+u*s(f),g=(e.x+t.x)/2,y=(e.y+t.y)/2,v=(t.x+n.x)/2,b=(t.y+n.y)/2,D=g+l,w=y+h,A=v+p,S=b+m,N=x.lli8(g,y,D,w,v,b,A,S),C=x.dist(N,e);let E,M=c(e.y-N.y,e.x-N.x),T=c(t.y-N.y,t.x-N.x),O=c(n.y-N.y,n.x-N.x);return M<O?((M>T||T>O)&&(M+=d),M>O&&(E=O,O=M,M=E)):O<T&&T<M?(E=O,O=M,M=E):O+=d,N.s=M,N.e=O,N.r=C,N},numberSort:function(e,t){return e-t}};class v{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map((function(e){return x.pointsToString(e.points)})).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map((function(e){return e.length()})).reduce((function(e,t){return e+t}))}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var t=e[0].bbox(),n=1;n<e.length;n++)x.expandbox(t,e[n].bbox());return t}offset(e){const t=[];return this.curves.forEach((function(n){t.push(...n.offset(e))})),new v(t)}}const{abs:b,min:D,max:w,cos:A,sin:S,acos:N,sqrt:C}=Math,E=Math.PI;class M{constructor(e){let t=e&&e.forEach?e:Array.from(arguments).slice(),n=!1;if("object"==typeof t[0]){n=t.length;const e=[];t.forEach((function(t){["x","y","z"].forEach((function(n){void 0!==t[n]&&e.push(t[n])}))})),t=e}let r=!1;const i=t.length;if(n){if(n>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");r=!0}}else if(6!==i&&8!==i&&9!==i&&12!==i&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const s=this._3d=!r&&(9===i||12===i)||e&&e[0]&&void 0!==e[0].z,a=this.points=[];for(let e=0,n=s?3:2;e<i;e+=n){var o={x:t[e],y:t[e+1]};s&&(o.z=t[e+2]),a.push(o)}const c=this.order=a.length-1,u=this.dims=["x","y"];s&&u.push("z"),this.dimlen=u.length;const l=x.align(a,{p1:a[0],p2:a[c]}),h=x.dist(a[0],a[c]);this._linear=l.reduce(((e,t)=>e+b(t.y)),0)<h/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,t,n,r){if(void 0===r&&(r=.5),0===r)return new M(t,t,n);if(1===r)return new M(e,t,t);const i=M.getABC(2,e,t,n,r);return new M(e,i.A,n)}static cubicFromPoints(e,t,n,r,i){void 0===r&&(r=.5);const s=M.getABC(3,e,t,n,r);void 0===i&&(i=x.dist(t,s.C));const a=i*(1-r)/r,o=x.dist(e,n),c=(n.x-e.x)/o,u=(n.y-e.y)/o,l=i*c,h=i*u,p=a*c,d=a*u,f=t.x-l,m=t.y-h,g=t.x+p,y=t.y+d,v=s.A,b=v.x+(f-v.x)/(1-r),D=v.y+(m-v.y)/(1-r),w=v.x+(g-v.x)/r,A=v.y+(y-v.y)/r,S={x:e.x+(b-e.x)/r,y:e.y+(D-e.y)/r},N={x:n.x+(w-n.x)/(1-r),y:n.y+(A-n.y)/(1-r)};return new M(e,S,N,n)}static getUtils(){return x}getUtils(){return M.getUtils()}static get PolyBezier(){return v}valueOf(){return this.toString()}toString(){return x.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,t=["M",e[0].x,e[0].y,2===this.order?"Q":"C"];for(let n=1,r=e.length;n<r;n++)t.push(e[n].x),t.push(e[n].y);return t.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map((function(e,t){return""+t+e.x+e.y+(e.z?e.z:0)})).join("")}update(){this._lut=[],this.dpoints=x.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,t=x.angle(e[0],e[this.order],e[1]);this.clockwise=t>0}length(){return x.length(this.derivative.bind(this))}static getABC(e=2,t,n,r,i=.5){const s=x.projectionratio(i,e),a=1-s,o={x:s*t.x+a*r.x,y:s*t.y+a*r.y},c=x.abcratio(i,e);return{A:{x:n.x+(n.x-o.x)/c,y:n.y+(n.y-o.y)/c},B:n,C:o,S:t,E:r}}getABC(e,t){t=t||this.get(e);let n=this.points[0],r=this.points[this.order];return M.getABC(this.order,n,t,r,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let t,n,r=0;r<e;r++)n=r/(e-1),t=this.compute(n),t.t=n,this._lut.push(t);return this._lut}on(e,n){n=n||5;const r=this.getLUT(),i=[];for(let t,s=0,a=0;s<r.length;s++)t=r[s],x.dist(t,e)<n&&(i.push(t),a+=s/r.length);return!!i.length&&(t/=i.length)}project(e){const t=this.getLUT(),n=t.length-1,r=x.closest(t,e),i=r.mpos,s=(i-1)/n,a=(i+1)/n,o=.1/n;let c,u=r.mdist,l=s,h=l;u+=1;for(let t;l<a+o;l+=o)c=this.compute(l),t=x.dist(e,c),t<u&&(u=t,h=l);return h=h<0?0:h>1?1:h,c=this.compute(h),c.t=h,c.d=u,c}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?x.computeWithRatios(e,this.points,this.ratios,this._3d):x.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,t=[e[0]],n=e.length;for(let r,i,s=1;s<n;s++)r=e[s],i=e[s-1],t[s]={x:(n-s)/n*r.x+s/n*i.x,y:(n-s)/n*r.y+s/n*i.y};return t[n]=e[n-1],new M(t)}derivative(e){return x.compute(e,this.dpoints[0],this._3d)}dderivative(e){return x.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new M(x.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return x.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return x.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const t=this.derivative(e),n=C(t.x*t.x+t.y*t.y);return{t:e,x:-t.y/n,y:t.x/n}}__normal3(e){const t=this.derivative(e),n=this.derivative(e+.01),r=C(t.x*t.x+t.y*t.y+t.z*t.z),i=C(n.x*n.x+n.y*n.y+n.z*n.z);t.x/=r,t.y/=r,t.z/=r,n.x/=i,n.y/=i,n.z/=i;const s={x:n.y*t.z-n.z*t.y,y:n.z*t.x-n.x*t.z,z:n.x*t.y-n.y*t.x},a=C(s.x*s.x+s.y*s.y+s.z*s.z);s.x/=a,s.y/=a,s.z/=a;const o=[s.x*s.x,s.x*s.y-s.z,s.x*s.z+s.y,s.x*s.y+s.z,s.y*s.y,s.y*s.z-s.x,s.x*s.z-s.y,s.y*s.z+s.x,s.z*s.z];return{t:e,x:o[0]*t.x+o[1]*t.y+o[2]*t.z,y:o[3]*t.x+o[4]*t.y+o[5]*t.z,z:o[6]*t.x+o[7]*t.y+o[8]*t.z}}hull(e){let t=this.points,n=[],r=[],i=0;for(r[i++]=t[0],r[i++]=t[1],r[i++]=t[2],3===this.order&&(r[i++]=t[3]);t.length>1;){n=[];for(let s,a=0,o=t.length-1;a<o;a++)s=x.lerp(e,t[a],t[a+1]),r[i++]=s,n.push(s);t=n}return r}split(e,t){if(0===e&&t)return this.split(t).left;if(1===t)return this.split(e).right;const n=this.hull(e),r={left:2===this.order?new M([n[0],n[3],n[5]]):new M([n[0],n[4],n[7],n[9]]),right:2===this.order?new M([n[5],n[4],n[2]]):new M([n[9],n[8],n[6],n[3]]),span:n};return r.left._t1=x.map(0,0,1,this._t1,this._t2),r.left._t2=x.map(e,0,1,this._t1,this._t2),r.right._t1=x.map(e,0,1,this._t1,this._t2),r.right._t2=x.map(1,0,1,this._t1,this._t2),t?(t=x.map(t,e,1,0,1),r.right.split(t).left):r}extrema(){const e={};let t=[];return this.dims.forEach(function(n){let r=function(e){return e[n]},i=this.dpoints[0].map(r);e[n]=x.droots(i),3===this.order&&(i=this.dpoints[1].map(r),e[n]=e[n].concat(x.droots(i))),e[n]=e[n].filter((function(e){return e>=0&&e<=1})),t=t.concat(e[n].sort(x.numberSort))}.bind(this)),e.values=t.sort(x.numberSort).filter((function(e,n){return t.indexOf(e)===n})),e}bbox(){const e=this.extrema(),t={};return this.dims.forEach(function(n){t[n]=x.getminmax(this,n,e[n])}.bind(this)),t}overlaps(e){const t=this.bbox(),n=e.bbox();return x.bboxoverlap(t,n)}offset(e,t){if(void 0!==t){const n=this.get(e),r=this.normal(e),i={c:n,n:r,x:n.x+r.x*t,y:n.y+r.y*t};return this._3d&&(i.z=n.z+r.z*t),i}if(this._linear){const t=this.normal(0),n=this.points.map((function(n){const r={x:n.x+e*t.x,y:n.y+e*t.y};return n.z&&t.z&&(r.z=n.z+e*t.z),r}));return[new M(n)]}return this.reduce().map((function(t){return t._linear?t.offset(e)[0]:t.scale(e)}))}simple(){if(3===this.order){const e=x.angle(this.points[0],this.points[3],this.points[1]),t=x.angle(this.points[0],this.points[3],this.points[2]);if(e>0&&t<0||e<0&&t>0)return!1}const e=this.normal(0),t=this.normal(1);let n=e.x*t.x+e.y*t.y;return this._3d&&(n+=e.z*t.z),b(N(n))<E/3}reduce(){let e,t,n=0,r=0,i=.01,s=[],a=[],o=this.extrema().values;for(-1===o.indexOf(0)&&(o=[0].concat(o)),-1===o.indexOf(1)&&o.push(1),n=o[0],e=1;e<o.length;e++)r=o[e],t=this.split(n,r),t._t1=n,t._t2=r,s.push(t),n=r;return s.forEach((function(e){for(n=0,r=0;r<=1;)for(r=n+i;r<=1.01;r+=i)if(t=e.split(n,r),!t.simple()){if(r-=i,b(n-r)<i)return[];t=e.split(n,r),t._t1=x.map(n,0,1,e._t1,e._t2),t._t2=x.map(r,0,1,e._t1,e._t2),a.push(t),n=r;break}n<1&&(t=e.split(n,1),t._t1=x.map(n,0,1,e._t1,e._t2),t._t2=e._t2,a.push(t))})),a}translate(e,t,n){n="number"==typeof n?n:t;const r=this.order;let i=this.points.map(((e,i)=>(1-i/r)*t+i/r*n));return new M(this.points.map(((t,n)=>({x:t.x+e.x*i[n],y:t.y+e.y*i[n]}))))}scale(e){const t=this.order;let n=!1;if("function"==typeof e&&(n=e),n&&2===t)return this.raise().scale(n);const r=this.clockwise,i=this.points;if(this._linear)return this.translate(this.normal(0),n?n(0):e,n?n(1):e);const s=n?n(0):e,a=n?n(1):e,o=[this.offset(0,10),this.offset(1,10)],c=[],u=x.lli4(o[0],o[0].c,o[1],o[1].c);if(!u)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach((function(e){const n=c[e*t]=x.copy(i[e*t]);n.x+=(e?a:s)*o[e].n.x,n.y+=(e?a:s)*o[e].n.y})),n?([0,1].forEach((function(s){if(2!==t||!s){var a=i[s+1],o={x:a.x-u.x,y:a.y-u.y},l=n?n((s+1)/t):e;n&&!r&&(l=-l);var h=C(o.x*o.x+o.y*o.y);o.x/=h,o.y/=h,c[s+1]={x:a.x+l*o.x,y:a.y+l*o.y}}})),new M(c)):([0,1].forEach((e=>{if(2===t&&e)return;const n=c[e*t],r=this.derivative(e),s={x:n.x+r.x,y:n.y+r.y};c[e+1]=x.lli4(n,s,u,i[e+1])})),new M(c))}outline(e,t,n,r){if(t=void 0===t?e:t,this._linear){const i=this.normal(0),s=this.points[0],a=this.points[this.points.length-1];let o,c,u;void 0===n&&(n=e,r=t),o={x:s.x+i.x*e,y:s.y+i.y*e},u={x:a.x+i.x*n,y:a.y+i.y*n},c={x:(o.x+u.x)/2,y:(o.y+u.y)/2};const l=[o,c,u];o={x:s.x-i.x*t,y:s.y-i.y*t},u={x:a.x-i.x*r,y:a.y-i.y*r},c={x:(o.x+u.x)/2,y:(o.y+u.y)/2};const h=[u,c,o],p=x.makeline(h[2],l[0]),d=x.makeline(l[2],h[0]),f=[p,new M(l),d,new M(h)];return new v(f)}const i=this.reduce(),s=i.length,a=[];let o,c=[],u=0,l=this.length();const h=void 0!==n&&void 0!==r;function p(e,t,n,r,i){return function(s){const a=r/n,o=(r+i)/n,c=t-e;return x.map(s,0,1,e+a*c,e+o*c)}}i.forEach((function(i){const s=i.length();h?(a.push(i.scale(p(e,n,l,u,s))),c.push(i.scale(p(-t,-r,l,u,s)))):(a.push(i.scale(e)),c.push(i.scale(-t))),u+=s})),c=c.map((function(e){return o=e.points,o[3]?e.points=[o[3],o[2],o[1],o[0]]:e.points=[o[2],o[1],o[0]],e})).reverse();const d=a[0].points[0],f=a[s-1].points[a[s-1].points.length-1],m=c[s-1].points[c[s-1].points.length-1],g=c[0].points[0],y=x.makeline(m,d),b=x.makeline(f,g),D=[y].concat(a).concat([b]).concat(c);return new v(D)}outlineshapes(e,t,n){t=t||e;const r=this.outline(e,t).curves,i=[];for(let e=1,t=r.length;e<t/2;e++){const s=x.makeshape(r[e],r[t-e],n);s.startcap.virtual=e>1,s.endcap.virtual=e<t/2-1,i.push(s)}return i}intersects(e,t){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof M&&(e=e.reduce()),this.curveintersects(this.reduce(),e,t)):this.selfintersects(t)}lineIntersects(e){const t=D(e.p1.x,e.p2.x),n=D(e.p1.y,e.p2.y),r=w(e.p1.x,e.p2.x),i=w(e.p1.y,e.p2.y);return x.roots(this.points,e).filter((e=>{var s=this.get(e);return x.between(s.x,t,r)&&x.between(s.y,n,i)}))}selfintersects(e){const t=this.reduce(),n=t.length-2,r=[];for(let i,s,a,o=0;o<n;o++)s=t.slice(o,o+1),a=t.slice(o+2),i=this.curveintersects(s,a,e),r.push(...i);return r}curveintersects(e,t,n){const r=[];e.forEach((function(e){t.forEach((function(t){e.overlaps(t)&&r.push({left:e,right:t})}))}));let i=[];return r.forEach((function(e){const t=x.pairiteration(e.left,e.right,n);t.length>0&&(i=i.concat(t))})),i}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,t,n,r){const i=(r-n)/4,s=this.get(n+i),a=this.get(r-i),o=x.dist(e,t),c=x.dist(e,s),u=x.dist(e,a);return b(c-o)+b(u-o)}_iterate(e,t){let n,r=0,i=1;do{n=0,i=1;let s,a,o,c,u,l=this.get(r),h=!1,p=!1,d=i,f=1,m=0;do{if(p=h,c=o,d=(r+i)/2,m++,s=this.get(d),a=this.get(i),o=x.getccenter(l,s,a),o.interval={start:r,end:i},h=this._error(o,l,r,i)<=e,u=p&&!h,u||(f=i),h){if(i>=1){if(o.interval.end=f=1,c=o,i>1){let e={x:o.x+o.r*A(o.e),y:o.y+o.r*S(o.e)};o.e+=x.angle({x:o.x,y:o.y},e,this.get(1))}break}i+=(i-r)/2}else i=d}while(!u&&n++<100);if(n>=100)break;c=c||o,t.push(c),r=f}while(i<1);return t}}},6582:(e,t,n)=>{"use strict";n.d(t,{A:()=>Le});var r,i,s=9e15,a=1e9,o="0123456789abcdef",c="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",u="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",l={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-s,maxE:s,crypto:!1},h=!0,p="[DecimalError] ",d=p+"Invalid argument: ",f=p+"Precision limit exceeded",m=p+"crypto unavailable",g="[object Decimal]",y=Math.floor,x=Math.pow,v=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,b=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,D=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,w=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,A=1e7,S=7,N=c.length-1,C=u.length-1,E={toStringTag:g};function M(e){var t,n,r,i=e.length-1,s="",a=e[0];if(i>0){for(s+=a,t=1;t<i;t++)r=e[t]+"",(n=S-r.length)&&(s+=q(n)),s+=r;a=e[t],(n=S-(r=a+"").length)&&(s+=q(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return s+a}function T(e,t,n){if(e!==~~e||e<t||e>n)throw Error(d+e)}function O(e,t,n,r){var i,s,a,o;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=S,i=0):(i=Math.ceil((t+1)/S),t%=S),s=x(10,S-t),o=e[i]%s|0,null==r?t<3?(0==t?o=o/100|0:1==t&&(o=o/10|0),a=n<4&&99999==o||n>3&&49999==o||5e4==o||0==o):a=(n<4&&o+1==s||n>3&&o+1==s/2)&&(e[i+1]/s/100|0)==x(10,t-2)-1||(o==s/2||0==o)&&!(e[i+1]/s/100|0):t<4?(0==t?o=o/1e3|0:1==t?o=o/100|0:2==t&&(o=o/10|0),a=(r||n<4)&&9999==o||!r&&n>3&&4999==o):a=((r||n<4)&&o+1==s||!r&&n>3&&o+1==s/2)&&(e[i+1]/s/1e3|0)==x(10,t-3)-1,a}function P(e,t,n){for(var r,i,s=[0],a=0,c=e.length;a<c;){for(i=s.length;i--;)s[i]*=t;for(s[0]+=o.indexOf(e.charAt(a++)),r=0;r<s.length;r++)s[r]>n-1&&(void 0===s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}E.absoluteValue=E.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),I(e)},E.ceil=function(){return I(new this.constructor(this),this.e+1,2)},E.clampedTo=E.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(d+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},E.comparedTo=E.cmp=function(e){var t,n,r,i,s=this,a=s.d,o=(e=new s.constructor(e)).d,c=s.s,u=e.s;if(!a||!o)return c&&u?c!==u?c:a===o?0:!a^c<0?1:-1:NaN;if(!a[0]||!o[0])return a[0]?c:o[0]?-u:0;if(c!==u)return c;if(s.e!==e.e)return s.e>e.e^c<0?1:-1;for(t=0,n=(r=a.length)<(i=o.length)?r:i;t<n;++t)if(a[t]!==o[t])return a[t]>o[t]^c<0?1:-1;return r===i?0:r>i^c<0?1:-1},E.cosine=E.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+S,r.rounding=1,n=function(e,t){var n,r,i;if(t.isZero())return t;(r=t.d.length)<32?i=(1/Q(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=Y(e,1,t.times(i),new e(1));for(var s=n;s--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=n,t}(r,Z(r,n)),r.precision=e,r.rounding=t,I(2==i||3==i?n.neg():n,e,t,!0)):new r(1):new r(NaN)},E.cubeRoot=E.cbrt=function(){var e,t,n,r,i,s,a,o,c,u,l=this,p=l.constructor;if(!l.isFinite()||l.isZero())return new p(l);for(h=!1,(s=l.s*x(l.s*l,1/3))&&Math.abs(s)!=1/0?r=new p(s.toString()):(n=M(l.d),(s=((e=l.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=x(n,1/3),e=y((e+1)/3)-(e%3==(e<0?-1:2)),(r=new p(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=l.s),a=(e=p.precision)+3;;)if(u=(c=(o=r).times(o).times(o)).plus(l),r=_(u.plus(l).times(o),u.plus(c),a+2,1),M(o.d).slice(0,a)===(n=M(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(I(r,e+1,1),t=!r.times(r).times(r).eq(l));break}if(!i&&(I(o,e+1,0),o.times(o).times(o).eq(l))){r=o;break}a+=4,i=1}return h=!0,I(r,e,p.rounding,t)},E.decimalPlaces=E.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=((e=t.length-1)-y(this.e/S))*S,e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},E.dividedBy=E.div=function(e){return _(this,new this.constructor(e))},E.dividedToIntegerBy=E.divToInt=function(e){var t=this.constructor;return I(_(this,new t(e),0,1,1),t.precision,t.rounding)},E.equals=E.eq=function(e){return 0===this.cmp(e)},E.floor=function(){return I(new this.constructor(this),this.e+1,3)},E.greaterThan=E.gt=function(e){return this.cmp(e)>0},E.greaterThanOrEqualTo=E.gte=function(e){var t=this.cmp(e);return 1==t||0===t},E.hyperbolicCosine=E.cosh=function(){var e,t,n,r,i,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;n=a.precision,r=a.rounding,a.precision=n+Math.max(s.e,s.sd())+4,a.rounding=1,(i=s.d.length)<32?t=(1/Q(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),s=Y(a,1,s.times(t),new a(1),!0);for(var c,u=e,l=new a(8);u--;)c=s.times(s),s=o.minus(c.times(l.minus(c.times(l))));return I(s,a.precision=n,a.rounding=r,!0)},E.hyperbolicSine=E.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,(r=i.d.length)<3)i=Y(s,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=Y(s,2,i=i.times(1/Q(5,e)),i,!0);for(var a,o=new s(5),c=new s(16),u=new s(20);e--;)a=i.times(i),i=i.times(o.plus(a.times(c.times(a).plus(u))))}return s.precision=t,s.rounding=n,I(i,t,n,!0)},E.hyperbolicTangent=E.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,_(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},E.inverseCosine=E.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,s=n.rounding;return-1!==r?0===r?t.isNeg()?j(n,i,s):new n(0):new n(NaN):t.isZero()?j(n,i+4,s).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=j(n,i+4,s).times(.5),n.precision=i,n.rounding=s,e.minus(t))},E.inverseHyperbolicCosine=E.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,h=!1,n=n.times(n).minus(1).sqrt().plus(n),h=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},E.inverseHyperbolicSine=E.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,h=!1,n=n.times(n).plus(1).sqrt().plus(n),h=!0,r.precision=e,r.rounding=t,n.ln())},E.inverseHyperbolicTangent=E.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?I(new s(i),e,t,!0):(s.precision=n=r-i.e,i=_(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)},E.inverseSine=E.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,-1!==t?0===t?((e=j(s,n+4,r).times(.5)).s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))},E.inverseTangent=E.atan=function(){var e,t,n,r,i,s,a,o,c,u=this,l=u.constructor,p=l.precision,d=l.rounding;if(u.isFinite()){if(u.isZero())return new l(u);if(u.abs().eq(1)&&p+4<=C)return(a=j(l,p+4,d).times(.25)).s=u.s,a}else{if(!u.s)return new l(NaN);if(p+4<=C)return(a=j(l,p+4,d).times(.5)).s=u.s,a}for(l.precision=o=p+10,l.rounding=1,e=n=Math.min(28,o/S+2|0);e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(h=!1,t=Math.ceil(o/S),r=1,c=u.times(u),a=new l(u),i=u;-1!==e;)if(i=i.times(c),s=a.minus(i.div(r+=2)),i=i.times(c),void 0!==(a=s.plus(i.div(r+=2))).d[t])for(e=t;a.d[e]===s.d[e]&&e--;);return n&&(a=a.times(2<<n-1)),h=!0,I(a,l.precision=p,l.rounding=d,!0)},E.isFinite=function(){return!!this.d},E.isInteger=E.isInt=function(){return!!this.d&&y(this.e/S)>this.d.length-2},E.isNaN=function(){return!this.s},E.isNegative=E.isNeg=function(){return this.s<0},E.isPositive=E.isPos=function(){return this.s>0},E.isZero=function(){return!!this.d&&0===this.d[0]},E.lessThan=E.lt=function(e){return this.cmp(e)<0},E.lessThanOrEqualTo=E.lte=function(e){return this.cmp(e)<1},E.logarithm=E.log=function(e){var t,n,r,i,s,a,o,c,u=this,l=u.constructor,p=l.precision,d=l.rounding;if(null==e)e=new l(10),t=!0;else{if(n=(e=new l(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new l(NaN);t=e.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new l(n&&!n[0]?-1/0:1!=u.s?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10==0;)i/=10;s=1!==i}if(h=!1,a=$(u,o=p+5),r=t?F(l,o+10):$(e,o),O((c=_(a,r,o,1)).d,i=p,d))do{if(a=$(u,o+=10),r=t?F(l,o+10):$(e,o),c=_(a,r,o,1),!s){+M(c.d).slice(i+1,i+15)+1==1e14&&(c=I(c,p+1,0));break}}while(O(c.d,i+=10,d));return h=!0,I(c,p,d)},E.minus=E.sub=function(e){var t,n,r,i,s,a,o,c,u,l,p,d,f=this,m=f.constructor;if(e=new m(e),!f.d||!e.d)return f.s&&e.s?f.d?e.s=-e.s:e=new m(e.d||f.s!==e.s?f:NaN):e=new m(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.plus(e);if(u=f.d,d=e.d,o=m.precision,c=m.rounding,!u[0]||!d[0]){if(d[0])e.s=-e.s;else{if(!u[0])return new m(3===c?-0:0);e=new m(f)}return h?I(e,o,c):e}if(n=y(e.e/S),l=y(f.e/S),u=u.slice(),s=l-n){for((p=s<0)?(t=u,s=-s,a=d.length):(t=d,n=l,a=u.length),s>(r=Math.max(Math.ceil(o/S),a)+2)&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for((p=(r=u.length)<(a=d.length))&&(a=r),r=0;r<a;r++)if(u[r]!=d[r]){p=u[r]<d[r];break}s=0}for(p&&(t=u,u=d,d=t,e.s=-e.s),a=u.length,r=d.length-a;r>0;--r)u[a++]=0;for(r=d.length;r>s;){if(u[--r]<d[r]){for(i=r;i&&0===u[--i];)u[i]=A-1;--u[i],u[r]+=A}u[r]-=d[r]}for(;0===u[--a];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(e.d=u,e.e=R(u,n),h?I(e,o,c):e):new m(3===c?-0:0)},E.modulo=E.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?I(new r(n),r.precision,r.rounding):(h=!1,9==r.modulo?(t=_(n,e.abs(),0,3,1)).s*=e.s:t=_(n,e,0,r.modulo,1),t=t.times(e),h=!0,n.minus(t))},E.naturalExponential=E.exp=function(){return G(this)},E.naturalLogarithm=E.ln=function(){return $(this)},E.negated=E.neg=function(){var e=new this.constructor(this);return e.s=-e.s,I(e)},E.plus=E.add=function(e){var t,n,r,i,s,a,o,c,u,l,p=this,d=p.constructor;if(e=new d(e),!p.d||!e.d)return p.s&&e.s?p.d||(e=new d(e.d||p.s===e.s?p:NaN)):e=new d(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.minus(e);if(u=p.d,l=e.d,o=d.precision,c=d.rounding,!u[0]||!l[0])return l[0]||(e=new d(p)),h?I(e,o,c):e;if(s=y(p.e/S),r=y(e.e/S),u=u.slice(),i=s-r){for(i<0?(n=u,i=-i,a=l.length):(n=l,r=s,a=u.length),i>(a=(s=Math.ceil(o/S))>a?s+1:a+1)&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((a=u.length)-(i=l.length)<0&&(i=a,n=l,l=u,u=n),t=0;i;)t=(u[--i]=u[i]+l[i]+t)/A|0,u[i]%=A;for(t&&(u.unshift(t),++r),a=u.length;0==u[--a];)u.pop();return e.d=u,e.e=R(u,r),h?I(e,o,c):e},E.precision=E.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(d+e);return n.d?(t=k(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},E.round=function(){var e=this,t=e.constructor;return I(new t(e),e.e+1,t.rounding)},E.sine=E.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+S,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:Y(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=Y(e,2,t=t.times(1/Q(5,n)),t);for(var i,s=new e(5),a=new e(16),o=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(a.times(i).minus(o))));return t}(r,Z(r,n)),r.precision=e,r.rounding=t,I(i>2?n.neg():n,e,t,!0)):new r(NaN)},E.squareRoot=E.sqrt=function(){var e,t,n,r,i,s,a=this,o=a.d,c=a.e,u=a.s,l=a.constructor;if(1!==u||!o||!o[0])return new l(!u||u<0&&(!o||o[0])?NaN:o?a:1/0);for(h=!1,0==(u=Math.sqrt(+a))||u==1/0?(((t=M(o)).length+c)%2==0&&(t+="0"),u=Math.sqrt(t),c=y((c+1)/2)-(c<0||c%2),r=new l(t=u==1/0?"5e"+c:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+c)):r=new l(u.toString()),n=(c=l.precision)+3;;)if(r=(s=r).plus(_(a,s,n+2,1)).times(.5),M(s.d).slice(0,n)===(t=M(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(I(r,c+1,1),e=!r.times(r).eq(a));break}if(!i&&(I(s,c+1,0),s.times(s).eq(a))){r=s;break}n+=4,i=1}return h=!0,I(r,c,l.rounding,e)},E.tangent=E.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=_(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,I(2==i||4==i?n.neg():n,e,t,!0)):new r(NaN)},E.times=E.mul=function(e){var t,n,r,i,s,a,o,c,u,l=this,p=l.constructor,d=l.d,f=(e=new p(e)).d;if(e.s*=l.s,!(d&&d[0]&&f&&f[0]))return new p(!e.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:d&&f?0*e.s:e.s/0);for(n=y(l.e/S)+y(e.e/S),(c=d.length)<(u=f.length)&&(s=d,d=f,f=s,a=c,c=u,u=a),s=[],r=a=c+u;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)o=s[i]+f[r]*d[i-r-1]+t,s[i--]=o%A|0,t=o/A|0;s[i]=(s[i]+t)%A|0}for(;!s[--a];)s.pop();return t?++n:s.shift(),e.d=s,e.e=R(s,n),h?I(e,p.precision,p.rounding):e},E.toBinary=function(e,t){return J(this,2,e,t)},E.toDecimalPlaces=E.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(T(e,0,a),void 0===t?t=r.rounding:T(t,0,8),I(n,e+n.e+1,t))},E.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=B(r,!0):(T(e,0,a),void 0===t?t=i.rounding:T(t,0,8),n=B(r=I(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},E.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return void 0===e?n=B(i):(T(e,0,a),void 0===t?t=s.rounding:T(t,0,8),n=B(r=I(new s(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},E.toFraction=function(e){var t,n,r,i,s,a,o,c,u,l,p,f,m=this,g=m.d,y=m.constructor;if(!g)return new y(m);if(u=n=new y(1),r=c=new y(0),a=(s=(t=new y(r)).e=k(g)-m.e-1)%S,t.d[0]=x(10,a<0?S+a:a),null==e)e=s>0?t:u;else{if(!(o=new y(e)).isInt()||o.lt(u))throw Error(d+o);e=o.gt(t)?s>0?t:u:o}for(h=!1,o=new y(M(g)),l=y.precision,y.precision=s=g.length*S*2;p=_(o,t,0,1,1),1!=(i=n.plus(p.times(r))).cmp(e);)n=r,r=i,i=u,u=c.plus(p.times(i)),c=i,i=t,t=o.minus(p.times(i)),o=i;return i=_(e.minus(n),r,0,1,1),c=c.plus(i.times(u)),n=n.plus(i.times(r)),c.s=u.s=m.s,f=_(u,r,s,1).minus(m).abs().cmp(_(c,n,s,1).minus(m).abs())<1?[u,r]:[c,n],y.precision=l,h=!0,f},E.toHexadecimal=E.toHex=function(e,t){return J(this,16,e,t)},E.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:T(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(h=!1,n=_(n,e,0,t,1).times(e),h=!0,I(n)):(e.s=n.s,n=e),n},E.toNumber=function(){return+this},E.toOctal=function(e,t){return J(this,8,e,t)},E.toPower=E.pow=function(e){var t,n,r,i,s,a,o=this,c=o.constructor,u=+(e=new c(e));if(!(o.d&&e.d&&o.d[0]&&e.d[0]))return new c(x(+o,u));if((o=new c(o)).eq(1))return o;if(r=c.precision,s=c.rounding,e.eq(1))return I(o,r,s);if((t=y(e.e/S))>=e.d.length-1&&(n=u<0?-u:u)<=9007199254740991)return i=L(c,o,n,r),e.s<0?new c(1).div(i):I(i,r,s);if((a=o.s)<0){if(t<e.d.length-1)return new c(NaN);if(1&e.d[t]||(a=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=a,o}return(t=0!=(n=x(+o,u))&&isFinite(n)?new c(n+"").e:y(u*(Math.log("0."+M(o.d))/Math.LN10+o.e+1)))>c.maxE+1||t<c.minE-1?new c(t>0?a/0:0):(h=!1,c.rounding=o.s=1,n=Math.min(12,(t+"").length),(i=G(e.times($(o,r+n)),r)).d&&O((i=I(i,r+5,1)).d,r,s)&&(t=r+10,+M((i=I(G(e.times($(o,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=I(i,r+1,0))),i.s=a,h=!0,c.rounding=s,I(i,r,s))},E.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=B(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(T(e,1,a),void 0===t?t=i.rounding:T(t,0,8),n=B(r=I(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},E.toSignificantDigits=E.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(T(e,1,a),void 0===t?t=n.rounding:T(t,0,8)),I(new n(this),e,t)},E.toString=function(){var e=this,t=e.constructor,n=B(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},E.truncated=E.trunc=function(){return I(new this.constructor(this),this.e+1,1)},E.valueOf=E.toJSON=function(){var e=this,t=e.constructor,n=B(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var _=function(){function e(e,t,n){var r,i=0,s=e.length;for(e=e.slice();s--;)r=e[s]*t+i,e[s]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,s;if(n!=r)s=n>r?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(i,s,a,o,c,u){var l,h,p,d,f,m,g,x,v,b,D,w,N,C,E,M,T,O,P,_,B=i.constructor,R=i.s==s.s?1:-1,F=i.d,j=s.d;if(!(F&&F[0]&&j&&j[0]))return new B(i.s&&s.s&&(F?!j||F[0]!=j[0]:j)?F&&0==F[0]||!j?0*R:R/0:NaN);for(u?(f=1,h=i.e-s.e):(u=A,f=S,h=y(i.e/f)-y(s.e/f)),P=j.length,T=F.length,b=(v=new B(R)).d=[],p=0;j[p]==(F[p]||0);p++);if(j[p]>(F[p]||0)&&h--,null==a?(C=a=B.precision,o=B.rounding):C=c?a+(i.e-s.e)+1:a,C<0)b.push(1),m=!0;else{if(C=C/f+2|0,p=0,1==P){for(d=0,j=j[0],C++;(p<T||d)&&C--;p++)E=d*u+(F[p]||0),b[p]=E/j|0,d=E%j|0;m=d||p<T}else{for((d=u/(j[0]+1)|0)>1&&(j=e(j,d,u),F=e(F,d,u),P=j.length,T=F.length),M=P,w=(D=F.slice(0,P)).length;w<P;)D[w++]=0;(_=j.slice()).unshift(0),O=j[0],j[1]>=u/2&&++O;do{d=0,(l=t(j,D,P,w))<0?(N=D[0],P!=w&&(N=N*u+(D[1]||0)),(d=N/O|0)>1?(d>=u&&(d=u-1),1==(l=t(g=e(j,d,u),D,x=g.length,w=D.length))&&(d--,n(g,P<x?_:j,x,u))):(0==d&&(l=d=1),g=j.slice()),(x=g.length)<w&&g.unshift(0),n(D,g,w,u),-1==l&&(l=t(j,D,P,w=D.length))<1&&(d++,n(D,P<w?_:j,w,u)),w=D.length):0===l&&(d++,D=[0]),b[p++]=d,l&&D[0]?D[w++]=F[M]||0:(D=[F[M]],w=1)}while((M++<T||void 0!==D[0])&&C--);m=void 0!==D[0]}b[0]||b.shift()}if(1==f)v.e=h,r=m;else{for(p=1,d=b[0];d>=10;d/=10)p++;v.e=p+h*f-1,I(v,c?a+v.e+1:a,o,m)}return v}}();function I(e,t,n,r){var i,s,a,o,c,u,l,p,d,f=e.constructor;e:if(null!=t){if(!(p=e.d))return e;for(i=1,o=p[0];o>=10;o/=10)i++;if((s=t-i)<0)s+=S,a=t,c=(l=p[d=0])/x(10,i-a-1)%10|0;else if((d=Math.ceil((s+1)/S))>=(o=p.length)){if(!r)break e;for(;o++<=d;)p.push(0);l=c=0,i=1,a=(s%=S)-S+1}else{for(l=o=p[d],i=1;o>=10;o/=10)i++;c=(a=(s%=S)-S+i)<0?0:l/x(10,i-a-1)%10|0}if(r=r||t<0||void 0!==p[d+1]||(a<0?l:l%x(10,i-a-1)),u=n<4?(c||r)&&(0==n||n==(e.s<0?3:2)):c>5||5==c&&(4==n||r||6==n&&(s>0?a>0?l/x(10,i-a):0:p[d-1])%10&1||n==(e.s<0?8:7)),t<1||!p[0])return p.length=0,u?(t-=e.e+1,p[0]=x(10,(S-t%S)%S),e.e=-t||0):p[0]=e.e=0,e;if(0==s?(p.length=d,o=1,d--):(p.length=d+1,o=x(10,S-s),p[d]=a>0?(l/x(10,i-a)%x(10,a)|0)*o:0),u)for(;;){if(0==d){for(s=1,a=p[0];a>=10;a/=10)s++;for(a=p[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(e.e++,p[0]==A&&(p[0]=1));break}if(p[d]+=o,p[d]!=A)break;p[d--]=0,o=1}for(s=p.length;0===p[--s];)p.pop()}return h&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function B(e,t,n){if(!e.isFinite())return H(e);var r,i=e.e,s=M(e.d),a=s.length;return t?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+q(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+q(-i-1)+s,n&&(r=n-a)>0&&(s+=q(r))):i>=a?(s+=q(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+q(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=q(r))),s}function R(e,t){var n=e[0];for(t*=S;n>=10;n/=10)t++;return t}function F(e,t,n){if(t>N)throw h=!0,n&&(e.precision=n),Error(f);return I(new e(c),t,1,!0)}function j(e,t,n){if(t>C)throw Error(f);return I(new e(u),t,n,!0)}function k(e){var t=e.length-1,n=t*S+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function q(e){for(var t="";e--;)t+="0";return t}function L(e,t,n,r){var i,s=new e(1),a=Math.ceil(r/S+4);for(h=!1;;){if(n%2&&K((s=s.times(t)).d,a)&&(i=!0),0===(n=y(n/2))){n=s.d.length-1,i&&0===s.d[n]&&++s.d[n];break}K((t=t.times(t)).d,a)}return h=!0,s}function z(e){return 1&e.d[e.d.length-1]}function U(e,t,n){for(var r,i=new e(t[0]),s=0;++s<t.length;){if(!(r=new e(t[s])).s){i=r;break}i[n](r)&&(i=r)}return i}function G(e,t){var n,r,i,s,a,o,c,u=0,l=0,p=0,d=e.constructor,f=d.rounding,m=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(h=!1,c=m):c=t,o=new d(.03125);e.e>-2;)e=e.times(o),p+=5;for(c+=r=Math.log(x(2,p))/Math.LN10*2+5|0,n=s=a=new d(1),d.precision=c;;){if(s=I(s.times(e),c,1),n=n.times(++l),M((o=a.plus(_(s,n,c,1))).d).slice(0,c)===M(a.d).slice(0,c)){for(i=p;i--;)a=I(a.times(a),c,1);if(null!=t)return d.precision=m,a;if(!(u<3&&O(a.d,c-r,f,u)))return I(a,d.precision=m,f,h=!0);d.precision=c+=10,n=s=o=new d(1),l=0,u++}a=o}}function $(e,t){var n,r,i,s,a,o,c,u,l,p,d,f=1,m=e,g=m.d,y=m.constructor,x=y.rounding,v=y.precision;if(m.s<0||!g||!g[0]||!m.e&&1==g[0]&&1==g.length)return new y(g&&!g[0]?-1/0:1!=m.s?NaN:g?0:m);if(null==t?(h=!1,l=v):l=t,y.precision=l+=10,r=(n=M(g)).charAt(0),!(Math.abs(s=m.e)<15e14))return u=F(y,l+2,v).times(s+""),m=$(new y(r+"."+n.slice(1)),l-10).plus(u),y.precision=v,null==t?I(m,v,x,h=!0):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=M((m=m.times(e)).d)).charAt(0),f++;for(s=m.e,r>1?(m=new y("0."+n),s++):m=new y(r+"."+n.slice(1)),p=m,c=a=m=_(m.minus(1),m.plus(1),l,1),d=I(m.times(m),l,1),i=3;;){if(a=I(a.times(d),l,1),M((u=c.plus(_(a,new y(i),l,1))).d).slice(0,l)===M(c.d).slice(0,l)){if(c=c.times(2),0!==s&&(c=c.plus(F(y,l+2,v).times(s+""))),c=_(c,new y(f),l,1),null!=t)return y.precision=v,c;if(!O(c.d,l-10,x,o))return I(c,y.precision=v,x,h=!0);y.precision=l+=10,u=a=m=_(p.minus(1),p.plus(1),l,1),d=I(m.times(m),l,1),i=o=1}c=u,i+=2}}function H(e){return String(e.s*e.s/0)}function W(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%S,n<0&&(r+=S),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=S;r<i;)e.d.push(+t.slice(r,r+=S));t=t.slice(r),r=S-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),h&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function V(e,t){var n,r,i,s,a,o,c,u,l;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),w.test(t))return W(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(b.test(t))n=16,t=t.toLowerCase();else if(v.test(t))n=2;else{if(!D.test(t))throw Error(d+t);n=8}for((s=t.search(/p/i))>0?(c=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),a=(s=t.indexOf("."))>=0,r=e.constructor,a&&(s=(o=(t=t.replace(".","")).length)-s,i=L(r,new r(n),s,2*s)),s=l=(u=P(t,n,A)).length-1;0===u[s];--s)u.pop();return s<0?new r(0*e.s):(e.e=R(u,l),e.d=u,h=!1,a&&(e=_(e,i,4*o)),c&&(e=e.times(Math.abs(c)<54?x(2,c):qe.pow(2,c))),h=!0,e)}function Y(e,t,n,r,i){var s,a,o,c,u=e.precision,l=Math.ceil(u/S);for(h=!1,c=n.times(n),o=new e(r);;){if(a=_(o.times(c),new e(t++*t++),u,1),o=i?r.plus(a):r.minus(a),r=_(a.times(c),new e(t++*t++),u,1),void 0!==(a=o.plus(r)).d[l]){for(s=l;a.d[s]===o.d[s]&&s--;);if(-1==s)break}s=o,o=r,r=a,a=s}return h=!0,a.d.length=l+1,a}function Q(e,t){for(var n=e;--t;)n*=e;return n}function Z(e,t){var n,r=t.s<0,s=j(e,e.precision,1),a=s.times(.5);if((t=t.abs()).lte(a))return i=r?4:1,t;if((n=t.divToInt(s)).isZero())i=r?3:2;else{if((t=t.minus(n.times(s))).lte(a))return i=z(n)?r?2:3:r?4:1,t;i=z(n)?r?1:4:r?3:2}return t.minus(s).abs()}function J(e,t,n,i){var s,c,u,l,h,p,d,f,m,g=e.constructor,y=void 0!==n;if(y?(T(n,1,a),void 0===i?i=g.rounding:T(i,0,8)):(n=g.precision,i=g.rounding),e.isFinite()){for(y?(s=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):s=t,(u=(d=B(e)).indexOf("."))>=0&&(d=d.replace(".",""),(m=new g(1)).e=d.length-u,m.d=P(B(m),10,s),m.e=m.d.length),c=h=(f=P(d,10,s)).length;0==f[--h];)f.pop();if(f[0]){if(u<0?c--:((e=new g(e)).d=f,e.e=c,f=(e=_(e,m,n,i,0,s)).d,c=e.e,p=r),u=f[n],l=s/2,p=p||void 0!==f[n+1],p=i<4?(void 0!==u||p)&&(0===i||i===(e.s<0?3:2)):u>l||u===l&&(4===i||p||6===i&&1&f[n-1]||i===(e.s<0?8:7)),f.length=n,p)for(;++f[--n]>s-1;)f[n]=0,n||(++c,f.unshift(1));for(h=f.length;!f[h-1];--h);for(u=0,d="";u<h;u++)d+=o.charAt(f[u]);if(y){if(h>1)if(16==t||8==t){for(u=16==t?4:3,--h;h%u;h++)d+="0";for(h=(f=P(d,s,t)).length;!f[h-1];--h);for(u=1,d="1.";u<h;u++)d+=o.charAt(f[u])}else d=d.charAt(0)+"."+d.slice(1);d=d+(c<0?"p":"p+")+c}else if(c<0){for(;++c;)d="0"+d;d="0."+d}else if(++c>h)for(c-=h;c--;)d+="0";else c<h&&(d=d.slice(0,c)+"."+d.slice(c))}else d=y?"0p+0":"0";d=(16==t?"0x":2==t?"0b":8==t?"0o":"")+d}else d=H(e);return e.s<0?"-"+d:d}function K(e,t){if(e.length>t)return e.length=t,!0}function X(e){return new this(e).abs()}function ee(e){return new this(e).acos()}function te(e){return new this(e).acosh()}function ne(e,t){return new this(e).plus(t)}function re(e){return new this(e).asin()}function ie(e){return new this(e).asinh()}function se(e){return new this(e).atan()}function ae(e){return new this(e).atanh()}function oe(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?j(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=j(this,s,1).times(.5)).s=e.s:t.s<0?(this.precision=s,this.rounding=1,n=this.atan(_(e,t,s,1)),t=j(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(_(e,t,s,1)):(n=j(this,s,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function ce(e){return new this(e).cbrt()}function ue(e){return I(e=new this(e),e.e+1,2)}function le(e,t,n){return new this(e).clamp(t,n)}function he(e){if(!e||"object"!=typeof e)throw Error(p+"Object expected");var t,n,r,i=!0===e.defaults,o=["precision",1,a,"rounding",0,8,"toExpNeg",-s,0,"toExpPos",0,s,"maxE",0,s,"minE",-s,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],i&&(this[n]=l[n]),void 0!==(r=e[n])){if(!(y(r)===r&&r>=o[t+1]&&r<=o[t+2]))throw Error(d+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=l[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(d+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(m);this[n]=!0}else this[n]=!1}return this}function pe(e){return new this(e).cos()}function de(e){return new this(e).cosh()}function fe(e,t){return new this(e).div(t)}function me(e){return new this(e).exp()}function ge(e){return I(e=new this(e),e.e+1,3)}function ye(){var e,t,n=new this(0);for(h=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return h=!0,new this(1/0);n=t}return h=!0,n.sqrt()}function xe(e){return e instanceof qe||e&&e.toStringTag===g||!1}function ve(e){return new this(e).ln()}function be(e,t){return new this(e).log(t)}function De(e){return new this(e).log(2)}function we(e){return new this(e).log(10)}function Ae(){return U(this,arguments,"lt")}function Se(){return U(this,arguments,"gt")}function Ne(e,t){return new this(e).mod(t)}function Ce(e,t){return new this(e).mul(t)}function Ee(e,t){return new this(e).pow(t)}function Me(e){var t,n,r,i,s=0,o=new this(1),c=[];if(void 0===e?e=this.precision:T(e,1,a),r=Math.ceil(e/S),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)(i=t[s])>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:c[s++]=i%1e7;else{if(!crypto.randomBytes)throw Error(m);for(t=crypto.randomBytes(r*=4);s<r;)(i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((127&t[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,s):(c.push(i%1e7),s+=4);s=r/4}else for(;s<r;)c[s++]=1e7*Math.random()|0;for(r=c[--s],e%=S,r&&e&&(i=x(10,S-e),c[s]=(r/i|0)*i);0===c[s];s--)c.pop();if(s<0)n=0,c=[0];else{for(n=-1;0===c[0];n-=S)c.shift();for(r=1,i=c[0];i>=10;i/=10)r++;r<S&&(n-=S-r)}return o.e=n,o.d=c,o}function Te(e){return I(e=new this(e),e.e+1,this.rounding)}function Oe(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Pe(e){return new this(e).sin()}function _e(e){return new this(e).sinh()}function Ie(e){return new this(e).sqrt()}function Be(e,t){return new this(e).sub(t)}function Re(){var e=0,t=arguments,n=new this(t[e]);for(h=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return h=!0,I(n,this.precision,this.rounding)}function Fe(e){return new this(e).tan()}function je(e){return new this(e).tanh()}function ke(e){return I(e=new this(e),e.e+1,1)}E[Symbol.for("nodejs.util.inspect.custom")]=E.toString,E[Symbol.toStringTag]="Decimal";var qe=E.constructor=function e(t){var n,r,i;function s(e){var t,n,r,i=this;if(!(i instanceof s))return new s(e);if(i.constructor=s,xe(e))return i.s=e.s,void(h?!e.d||e.e>s.maxE?(i.e=NaN,i.d=null):e.e<s.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"==(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(h?t>s.maxE?(i.e=NaN,i.d=null):t<s.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):W(i,e.toString())}if("string"!==r)throw Error(d+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),w.test(e)?W(i,e):V(i,e)}if(s.prototype=E,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=he,s.clone=e,s.isDecimal=xe,s.abs=X,s.acos=ee,s.acosh=te,s.add=ne,s.asin=re,s.asinh=ie,s.atan=se,s.atanh=ae,s.atan2=oe,s.cbrt=ce,s.ceil=ue,s.clamp=le,s.cos=pe,s.cosh=de,s.div=fe,s.exp=me,s.floor=ge,s.hypot=ye,s.ln=ve,s.log=be,s.log10=we,s.log2=De,s.max=Ae,s.min=Se,s.mod=Ne,s.mul=Ce,s.pow=Ee,s.random=Me,s.round=Te,s.sign=Oe,s.sin=Pe,s.sinh=_e,s.sqrt=Ie,s.sub=Be,s.sum=Re,s.tan=Fe,s.tanh=je,s.trunc=ke,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return s.config(t),s}(l);c=new qe(c),u=new qe(u);const Le=qe},2635:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>W});const r=e=>"string"==typeof e,i=()=>{let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n},s=e=>null==e?"":""+e,a=/###/g,o=e=>e&&e.indexOf("###")>-1?e.replace(a,"."):e,c=e=>!e||r(e),u=(e,t,n)=>{const i=r(t)?t.split("."):t;let s=0;for(;s<i.length-1;){if(c(e))return{};const t=o(i[s]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++s}return c(e)?{}:{obj:e,k:o(i[s])}},l=(e,t,n)=>{const{obj:r,k:i}=u(e,t,Object);if(void 0!==r||1===t.length)return void(r[i]=n);let s=t[t.length-1],a=t.slice(0,t.length-1),o=u(e,a,Object);for(;void 0===o.obj&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=u(e,a,Object),o&&o.obj&&void 0!==o.obj[`${o.k}.${s}`]&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=n},h=(e,t)=>{const{obj:n,k:r}=u(e,t);if(n)return n[r]},p=(e,t,n)=>{for(const i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?r(e[i])||e[i]instanceof String||r(t[i])||t[i]instanceof String?n&&(e[i]=t[i]):p(e[i],t[i],n):e[i]=t[i]);return e},d=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const m=e=>r(e)?e.replace(/[&<>"'\/]/g,(e=>f[e])):e,g=[" ",",","?","!",";"],y=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),x=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let i=e;for(let e=0;e<r.length;){if(!i||"object"!=typeof i)return;let t,s="";for(let a=e;a<r.length;++a)if(a!==e&&(s+=n),s+=r[a],t=i[s],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&a<r.length-1)continue;e+=a-e+1;break}i=t}return i},v=e=>e&&e.replace("_","-"),b={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class D{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||b,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,i){return i&&!this.debug?null:(r(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new D(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new D(this.logger,e)}}var w=new D;class A{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&Array.from(this.observers[e].entries()).forEach((e=>{let[t,r]=e;for(let e=0;e<r;e++)t(...n)})),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach((t=>{let[r,i]=t;for(let t=0;t<i;t++)r.apply(r,[e,...n])}))}}class S extends A{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,a=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):r(n)&&s?o.push(...n.split(s)):o.push(n)));const c=h(this.data,o);return!c&&!t&&!n&&e.indexOf(".")>-1&&(e=o[0],t=o[1],n=o.slice(2).join(".")),!c&&a&&r(n)?x(this.data&&this.data[e]&&this.data[e][t],n,s):c}addResource(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const s=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator;let a=[e,t];n&&(a=a.concat(s?n.split(s):n)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),l(this.data,a,r),i.silent||this.emit("added",e,t,n,r)}addResources(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const i in n)(r(n[i])||Array.isArray(n[i]))&&this.addResource(e,t,i,n[i],{silent:!0});i.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=n,n=t,t=a[1]),this.addNamespaces(t);let o=h(this.data,a)||{};s.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?p(o,n,i):o={...o,...n},l(this.data,a,o),s.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var N={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach((e=>{this.processors[e]&&(t=this.processors[e].process(t,n,r,i))})),t}};const C={};class E extends A{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,n)=>{["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach((e=>{t[e]&&(n[e]=t[e])}))})(0,e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=w.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const a=n&&e.indexOf(n)>-1,o=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const r=g.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===r.length)return!0;const i=y.getRegExp(`(${r.map((e=>"?"===e?"\\?":e)).join("|")})`);let s=!i.test(e);if(!s){const t=e.indexOf(n);t>0&&!i.test(e.substring(0,t))&&(s=!0)}return s})(e,n,i));if(a&&!o){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:r(s)?[s]:s};const a=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(a[0])>-1)&&(s=a.shift()),e=a.join(i)}return{key:e,namespaces:r(s)?[s]:s}}translate(e,t,n){if("object"!=typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof t&&(t={...t}),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const i=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,s=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),c=o[o.length-1],u=t.lng||this.language,l=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(l){const e=t.nsSeparator||this.options.nsSeparator;return i?{res:`${c}${e}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:`${c}${e}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:a}const h=this.resolve(e,t);let p=h&&h.res;const d=h&&h.usedKey||a,f=h&&h.exactUsedKey||a,m=Object.prototype.toString.apply(p),g=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,x=!r(p)&&"boolean"!=typeof p&&"number"!=typeof p;if(!(y&&p&&x&&["[object Number]","[object Function]","[object RegExp]"].indexOf(m)<0)||r(g)&&Array.isArray(p))if(y&&r(g)&&Array.isArray(p))p=p.join(g),p&&(p=this.extendTranslation(p,e,t,n));else{let i=!1,o=!1;const l=void 0!==t.count&&!r(t.count),d=E.hasDefaultValue(t),f=l?this.pluralResolver.getSuffix(u,t.count,t):"",m=t.ordinal&&l?this.pluralResolver.getSuffix(u,t.count,{ordinal:!1}):"",g=l&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),y=g&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${f}`]||t[`defaultValue${m}`]||t.defaultValue;!this.isValidLookup(p)&&d&&(i=!0,p=y),this.isValidLookup(p)||(o=!0,p=a);const x=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&o?void 0:p,v=d&&y!==p&&this.options.updateMissing;if(o||i||v){if(this.logger.log(v?"updateKey":"missingKey",u,c,a,v?y:p),s){const e=this.resolve(a,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let t=0;t<n.length;t++)e.push(n[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const r=(e,n,r)=>{const i=d&&r!==p?r:x;this.options.missingKeyHandler?this.options.missingKeyHandler(e,c,n,i,v,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,c,n,i,v,t),this.emit("missingKey",e,c,n,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&l?e.forEach((e=>{const n=this.pluralResolver.getSuffixes(e,t);g&&t[`defaultValue${this.options.pluralSeparator}zero`]&&n.indexOf(`${this.options.pluralSeparator}zero`)<0&&n.push(`${this.options.pluralSeparator}zero`),n.forEach((n=>{r([e],a+n,t[`defaultValue${n}`]||y)}))})):r(e,a,y))}p=this.extendTranslation(p,e,t,h,n),o&&p===a&&this.options.appendNamespaceToMissingKey&&(p=`${c}:${a}`),(o||i)&&this.options.parseMissingKeyHandler&&(p="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${a}`:a,i?p:void 0):this.options.parseMissingKeyHandler(p))}else{if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(d,p,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(h.res=e,h.usedParams=this.getUsedParamsDetails(t),h):e}if(s){const e=Array.isArray(p),n=e?[]:{},r=e?f:d;for(const e in p)if(Object.prototype.hasOwnProperty.call(p,e)){const i=`${r}${s}${e}`;n[e]=this.translate(i,{...t,joinArrays:!1,ns:o}),n[e]===i&&(n[e]=p[e])}p=n}}return i?(h.res=p,h.usedParams=this.getUsedParamsDetails(t),h):p}extendTranslation(e,t,n,i,s){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const o=r(e)&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(o){const t=e.match(this.interpolator.nestingRegexp);c=t&&t.length}let u=n.replace&&!r(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(u={...this.options.interpolation.defaultVariables,...u}),e=this.interpolator.interpolate(e,u,n.lng||this.language||i.usedLng,n),o){const t=e.match(this.interpolator.nestingRegexp);c<(t&&t.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&i&&i.res&&(n.lng=this.language||i.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return s&&s[0]===r[0]&&!n.context?(a.logger.warn(`It seems you are nesting recursively key: ${r[0]} in key: ${t[0]}`),null):a.translate(...r,t)}),n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,c=r(o)?[o]:o;return null!=e&&c&&c.length&&!1!==n.applyPostProcessor&&(e=N.handle(c,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t,n,i,s,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const c=this.extractFromKey(e,o),u=c.key;n=u;let l=c.namespaces;this.options.fallbackNS&&(l=l.concat(this.options.fallbackNS));const h=void 0!==o.count&&!r(o.count),p=h&&!o.ordinal&&0===o.count&&this.pluralResolver.shouldUseIntlApi(),d=void 0!==o.context&&(r(o.context)||"number"==typeof o.context)&&""!==o.context,f=o.lngs?o.lngs:this.languageUtils.toResolveHierarchy(o.lng||this.language,o.fallbackLng);l.forEach((e=>{this.isValidLookup(t)||(a=e,!C[`${f[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(C[`${f[0]}-${e}`]=!0,this.logger.warn(`key "${n}" for languages "${f.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach((n=>{if(this.isValidLookup(t))return;s=n;const r=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(r,u,n,e,o);else{let e;h&&(e=this.pluralResolver.getSuffix(n,o.count,o));const t=`${this.options.pluralSeparator}zero`,i=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(r.push(u+e),o.ordinal&&0===e.indexOf(i)&&r.push(u+e.replace(i,this.options.pluralSeparator)),p&&r.push(u+t)),d){const n=`${u}${this.options.contextSeparator}${o.context}`;r.push(n),h&&(r.push(n+e),o.ordinal&&0===e.indexOf(i)&&r.push(n+e.replace(i,this.options.pluralSeparator)),p&&r.push(n+t))}}let a;for(;a=r.pop();)this.isValidLookup(t)||(i=a,t=this.getResource(n,e,a,o))})))}))})),{res:t,usedKey:n,exactUsedKey:i,usedLng:s,usedNS:a}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!r(e.replace);let i=n?e.replace:e;if(n&&void 0!==e.count&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const e of t)delete i[e]}return i}static hasDefaultValue(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&"defaultValue"===t.substring(0,12)&&void 0!==e[t])return!0;return!1}}const M=e=>e.charAt(0).toUpperCase()+e.slice(1);class T{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=w.create("languageUtils")}getScriptPartFromCode(e){if(!(e=v(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=v(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(r(e)&&e.indexOf("-")>-1){if("undefined"!=typeof Intl&&void 0!==Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(e){}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map((e=>e.toLowerCase())):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=M(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=M(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=M(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find((e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),r(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],s=e=>{e&&(this.isSupportedCode(e)?i.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return r(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):r(e)&&s(this.formatLanguageCode(e)),n.forEach((e=>{i.indexOf(e)<0&&s(this.formatLanguageCode(e))})),i}}let O=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],P={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const _=["v1","v2","v3"],I=["v4"],B={zero:0,one:1,two:2,few:3,many:4,other:5};class R{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=w.create("pluralResolver"),this.options.compatibilityJSON&&!I.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const e={};return O.forEach((t=>{t.lngs.forEach((n=>{e[n]={numbers:t.nr,plurals:P[t.fc]}}))})),e})(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{const n=v("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];const s=new Intl.PluralRules(n,{type:r});return this.pluralRulesCache[i]=s,s}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((e=>`${t}${e}`))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort(((e,t)=>B[e]-B[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):n.numbers.map((n=>this.getSuffix(e,n,t))):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:this.getSuffixRetroCompatible(r,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let r=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));const i=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?`_plural_${r.toString()}`:i():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!_.includes(this.options.compatibilityJSON)}}const F=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=((e,t,n)=>{const r=h(e,n);return void 0!==r?r:h(t,n)})(e,t,n);return!a&&s&&r(n)&&(a=x(e,n,i),void 0===a&&(a=x(t,n,i))),a},j=e=>e.replace(/\$/g,"$$$$");class k{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=w.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:s,suffix:a,suffixEscaped:o,formatSeparator:c,unescapeSuffix:u,unescapePrefix:l,nestingPrefix:h,nestingPrefixEscaped:p,nestingSuffix:f,nestingSuffixEscaped:g,nestingOptionsSeparator:y,maxReplaces:x,alwaysFormat:v}=e.interpolation;this.escape=void 0!==t?t:m,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=i?d(i):s||"{{",this.suffix=a?d(a):o||"}}",this.formatSeparator=c||",",this.unescapePrefix=u?"":l||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=h?d(h):p||d("$t("),this.nestingSuffix=f?d(f):g||d(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=x||1e3,this.alwaysFormat=void 0!==v&&v,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,i){let a,o,c;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=e=>{if(e.indexOf(this.formatSeparator)<0){const r=F(t,u,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(r,void 0,n,{...i,...t,interpolationkey:e}):r}const r=e.split(this.formatSeparator),s=r.shift().trim(),a=r.join(this.formatSeparator).trim();return this.format(F(t,u,s,this.options.keySeparator,this.options.ignoreJSONStructure),a,n,{...i,...t,interpolationkey:s})};this.resetRegExp();const h=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,p=i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>j(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?j(this.escape(e)):j(e)}].forEach((t=>{for(c=0;a=t.regex.exec(e);){const n=a[1].trim();if(o=l(n),void 0===o)if("function"==typeof h){const t=h(e,a,i);o=r(t)?t:""}else if(i&&Object.prototype.hasOwnProperty.call(i,n))o="";else{if(p){o=a[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),o=""}else r(o)||this.useRawValueToEscape||(o=s(o));const u=t.safeValue(o);if(e=e.replace(a[0],u),p?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=a[0].length):t.regex.lastIndex=0,c++,c>=this.maxReplaces)break}})),e}nest(e,t){let n,i,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const c=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const r=e.split(new RegExp(`${n}[ ]*{`));let i=`{${r[1]}`;e=r[0],i=this.interpolate(i,a);const s=i.match(/'/g),o=i.match(/"/g);(s&&s.length%2==0&&!o||o.length%2!=0)&&(i=i.replace(/'/g,'"'));try{a=JSON.parse(i),t&&(a={...t,...a})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${n}${i}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let u=[];a={...o},a=a.replace&&!r(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map((e=>e.trim()));n[1]=e.shift(),u=e,l=!0}if(i=t(c.call(this,n[1].trim(),a),a),i&&n[0]===e&&!r(i))return i;r(i)||(i=s(i)),i||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),i=""),l&&(i=u.reduce(((e,t)=>this.format(e,t,o.lng,{...o,interpolationkey:n[1].trim()})),i.trim())),e=e.replace(n[0],i),this.regexp.lastIndex=0}return e}}const q=e=>{const t={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const a=r+JSON.stringify(s);let o=t[a];return o||(o=e(v(r),i),t[a]=o),o(n)}};class L{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=w.create("formatter"),this.options=e,this.formats={number:q(((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)})),currency:q(((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)})),datetime:q(((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)})),relativetime:q(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")})),list:q(((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)}))},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=q(t)}format(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find((e=>e.indexOf(")")>-1))){const e=i.findIndex((e=>e.indexOf(")")>-1));i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}return i.reduce(((e,t)=>{const{formatName:i,formatOptions:s}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach((e=>{if(e){const[t,...r]=e.split(":"),i=r.join(":").trim().replace(/^'+|'+$/g,""),s=t.trim();n[s]||(n[s]=i),"false"===i&&(n[s]=!1),"true"===i&&(n[s]=!0),isNaN(i)||(n[s]=parseInt(i,10))}}))}return{formatName:t,formatOptions:n}})(t);if(this.formats[i]){let t=e;try{const a=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},o=a.locale||a.lng||r.locale||r.lng||n;t=this.formats[i](e,o,{...s,...r,...a})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${i}`),e}),e)}}class z extends A{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=w.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,r.backend,r)}queueLoad(e,t,n,r){const i={},s={},a={},o={};return e.forEach((e=>{let r=!0;t.forEach((t=>{const a=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[a]=2:this.state[a]<0||(1===this.state[a]?void 0===s[a]&&(s[a]=!0):(this.state[a]=1,r=!1,void 0===s[a]&&(s[a]=!0),void 0===i[a]&&(i[a]=!0),void 0===o[t]&&(o[t]=!0)))})),r||(a[e]=!0)})),(Object.keys(i).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(o)}}loaded(e,t,n){const r=e.split("|"),i=r[0],s=r[1];t&&this.emit("failedLoading",i,s,t),!t&&n&&this.store.addResourceBundle(i,s,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const a={};this.queue.forEach((n=>{((e,t,n)=>{const{obj:r,k:i}=u(e,t,Object);r[i]=r[i]||[],r[i].push(n)})(n.loaded,[i],s),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{a[e]||(a[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===a[e][t]&&(a[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:i,callback:s});this.readingCalls++;const a=(a,o)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}a&&o&&r<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,r+1,2*i,s)}),i):s(a,o)},o=this.backend[n].bind(this.backend);if(2!==o.length)return o(e,t,a);try{const n=o(e,t);n&&"function"==typeof n.then?n.then((e=>a(null,e))).catch(a):a(null,n)}catch(e){a(e)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();r(e)&&(e=this.languageUtils.toResolveHierarchy(e)),r(t)&&(t=[t]);const s=this.queueLoad(e,t,n,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),r=n[0],i=n[1];this.read(r,i,"read",void 0,void 0,((n,s)=>{n&&this.logger.warn(`${t}loading namespace ${i} for language ${r} failed`,n),!n&&s&&this.logger.log(`${t}loaded namespace ${i} for language ${r}`,s),this.loaded(e,n,s)}))}saveMissing(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=n&&""!==n){if(this.backend&&this.backend.create){const o={...s,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let i;i=5===c.length?c(e,t,n,r,o):c(e,t,n,r),i&&"function"==typeof i.then?i.then((e=>a(null,e))).catch(a):a(null,i)}catch(e){a(e)}else c(e,t,n,r,a,o)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}const U=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),r(e[1])&&(t.defaultValue=e[1]),r(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),G=e=>(r(e.ns)&&(e.ns=[e.ns]),r(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),r(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),$=()=>{};class H extends A{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=G(e),this.services={},this.logger=w,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&(r(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=U();this.options={...s,...this.options,...G(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const a=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?w.init(a(this.modules.logger),this.options):w.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!=typeof Intl&&(t=L);const n=new T(this.options);this.store=new S(this.options.resources,this.options);const r=this.services;r.logger=w,r.resourceStore=this.store,r.languageUtils=n,r.pluralResolver=new R(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format||(r.formatter=a(t),r.formatter.init(r,this.options),this.options.interpolation.format=r.formatter.format.bind(r.formatter)),r.interpolator=new k(this.options),r.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},r.backendConnector=new z(a(this.modules.backend),r.resourceStore,r,this.options),r.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)})),this.modules.languageDetector&&(r.languageDetector=a(this.modules.languageDetector),r.languageDetector.init&&r.languageDetector.init(r,this.options.detection,this.options)),this.modules.i18nFormat&&(r.i18nFormat=a(this.modules.i18nFormat),r.i18nFormat.init&&r.i18nFormat.init(this)),this.translator=new E(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,n||(n=$),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}})),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const o=i(),c=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(t),n(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),o}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$;const n=r(e)?e:this.language;if("function"==typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],r=t=>{t&&"cimode"!==t&&this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};n?r(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>r(e))),this.options.preload&&this.options.preload.forEach((e=>r(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,n){const r=i();return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=$),this.services.backendConnector.reload(e,t,(e=>{r.resolve(),n(e)})),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&N.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const s=i();this.emit("languageChanging",e);const a=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},o=(e,r)=>{r?(a(r),this.translator.changeLanguage(r),this.isLanguageChangingTo=void 0,this.emit("languageChanged",r),this.logger.log("languageChanged",r)):this.isLanguageChangingTo=void 0,s.resolve((function(){return n.t(...arguments)})),t&&t(e,(function(){return n.t(...arguments)}))},c=t=>{e||t||!this.services.languageDetector||(t=[]);const n=r(t)?t:this.services.languageUtils.getBestMatchFromCodes(t);n&&(this.language||a(n),this.translator.language||this.translator.changeLanguage(n),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(n)),this.loadResources(n,(e=>{o(e,n)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e):c(this.services.languageDetector.detect()),s}getFixedT(e,t,n){var i=this;const s=function(e,t){let r;if("object"!=typeof t){for(var a=arguments.length,o=new Array(a>2?a-2:0),c=2;c<a;c++)o[c-2]=arguments[c];r=i.options.overloadTranslationOptionHandler([e,t].concat(o))}else r={...t};r.lng=r.lng||s.lng,r.lngs=r.lngs||s.lngs,r.ns=r.ns||s.ns,""!==r.keyPrefix&&(r.keyPrefix=r.keyPrefix||n||s.keyPrefix);const u=i.options.keySeparator||".";let l;return l=r.keyPrefix&&Array.isArray(e)?e.map((e=>`${r.keyPrefix}${u}${e}`)):r.keyPrefix?`${r.keyPrefix}${u}${e}`:e,i.t(l,r)};return r(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=n,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const s=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,s);if(void 0!==e)return e}return!(!this.hasResourceBundle(n,e)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!s(n,e)||r&&!s(i,e)))}loadNamespaces(e,t){const n=i();return this.options.ns?(r(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=i();r(e)&&(e=[e]);const s=this.options.preload||[],a=e.filter((e=>s.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return a.length?(this.options.preload=s.concat(a),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new T(U());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new H(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new H(r);return void 0===e.debug&&void 0===e.prefix||(i.logger=i.logger.clone(e)),["store","services","language"].forEach((e=>{i[e]=this[e]})),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new S(this.store.data,r),i.services.resourceStore=i.store),i.translator=new E(i.services,r),i.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit(e,...n)})),i.init(r,t),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const W=H.createInstance();W.createInstance=H.createInstance,W.createInstance,W.dir,W.init,W.loadResources,W.reloadResources,W.use,W.changeLanguage,W.getFixedT,W.t,W.exists,W.setDefaultNamespace,W.hasLoadedNamespace,W.loadNamespaces,W.loadLanguages},2284:(e,t,n)=>{"use strict";n.d(t,{UN:()=>m,i0:()=>u,GM:()=>A,Xd:()=>h,ad:()=>x,l7:()=>y,fi:()=>b,C8:()=>v,SV:()=>p,Er:()=>l,Ah:()=>g,GD:()=>d,j2:()=>D,RJ:()=>w,hI:()=>f,L7:()=>c,OL:()=>N,ol:()=>S,BB:()=>C});var r=n(8321),i=n(7506),s=Math.PI,a=2*Math.PI,o=Math.E,c=(0,r.P9)("true",[],(()=>!0)),u=(0,r.P9)("false",[],(()=>!1)),l=(0,r.P9)("null",[],(()=>null)),h=E("Infinity",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(1/0):1/0})),p=E("NaN",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(NaN):NaN})),d=E("pi",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?(0,i.R3)(n):s})),f=E("tau",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?(0,i.OP)(n):a})),m=E("e",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?(0,i.t9)(n):o})),g=E("phi",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?(0,i.pb)(n):1.618033988749895})),y=E("LN2",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(2).ln():Math.LN2})),x=E("LN10",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(10).ln():Math.LN10})),v=E("LOG2E",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(1).div(new n(2).ln()):Math.LOG2E})),b=E("LOG10E",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(1).div(new n(10).ln()):Math.LOG10E})),D=E("SQRT1_2",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n("0.5").sqrt():Math.SQRT1_2})),w=E("SQRT2",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(2).sqrt():Math.SQRT2})),A=E("i",["Complex"],(e=>{var{Complex:t}=e;return t.I})),S=(0,r.P9)("PI",["pi"],(e=>{var{pi:t}=e;return t})),N=(0,r.P9)("E",["e"],(e=>{var{e:t}=e;return t})),C=(0,r.P9)("version",[],(()=>"13.2.0"));function E(e,t,n){return(0,r.P9)(e,t,n,{recreateOnConfigChange:!0})}},4719:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});var r={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null}},5662:(e,t,n)=>{"use strict";n.d(t,{hZ:()=>o,n$:()=>a,t:()=>s});var r=n(3140),i=n(4719),s=["Matrix","Array"],a=["number","BigNumber","Fraction"];function o(e,t){function n(i){if(i){if(void 0!==i.epsilon){console.warn('Warning: The configuration option "epsilon" is deprecated. Use "relTol" and "absTol" instead.');var o=(0,r.o8)(i);return o.relTol=i.epsilon,o.absTol=.001*i.epsilon,delete o.epsilon,n(o)}var u=(0,r.o8)(e);c(i,"matrix",s),c(i,"number",a),(0,r.zw)(e,i);var l=(0,r.o8)(e),h=(0,r.o8)(i);return t("config",l,u,h),l}return(0,r.o8)(e)}return n.MATRIX_OPTIONS=s,n.NUMBER_OPTIONS=a,Object.keys(i.P).forEach((t=>{Object.defineProperty(n,t,{get:()=>e[t],enumerable:!0,configurable:!0})})),n}function c(e,t,n){void 0===e[t]||n.includes(e[t])||console.warn('Warning: Unknown value "'+e[t]+'" for configuration option "'+t+'". Available options: '+n.map((e=>JSON.stringify(e))).join(", ")+".")}},434:(e,t,n)=>{"use strict";n.d(t,{B:()=>u});var r=n(6627),i=n(8321),s=n(4943),a=n(1106),o=function(){return o=r.A.create,r.A},c=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],u=(0,i.P9)("typed",c,(function(e){var{BigNumber:t,Complex:n,DenseMatrix:r,Fraction:i}=e,c=o();return c.clear(),c.addTypes([{name:"number",test:s.Et},{name:"Complex",test:s.Zd},{name:"BigNumber",test:s.C4},{name:"bigint",test:s.sI},{name:"Fraction",test:s.fU},{name:"Unit",test:s.vO},{name:"identifier",test:e=>s.Kg&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(e)},{name:"string",test:s.Kg},{name:"Chain",test:s.o_},{name:"Array",test:s.cy},{name:"Matrix",test:s.OA},{name:"DenseMatrix",test:s.zR},{name:"SparseMatrix",test:s.AF},{name:"Range",test:s._Z},{name:"Index",test:s.nw},{name:"boolean",test:s.Lm},{name:"ResultSet",test:s.eW},{name:"Help",test:s.gS},{name:"function",test:s.Tn},{name:"Date",test:s.$P},{name:"RegExp",test:s.gd},{name:"null",test:s.kZ},{name:"undefined",test:s.b0},{name:"AccessorNode",test:s.AS},{name:"ArrayNode",test:s.gO},{name:"AssignmentNode",test:s.qM},{name:"BlockNode",test:s.CD},{name:"ConditionalNode",test:s.PO},{name:"ConstantNode",test:s.BA},{name:"FunctionNode",test:s.Px},{name:"FunctionAssignmentNode",test:s.m2},{name:"IndexNode",test:s.$I},{name:"Node",test:s.Ll},{name:"ObjectNode",test:s.GJ},{name:"OperatorNode",test:s.$$},{name:"ParenthesisNode",test:s.tv},{name:"RangeNode",test:s.Ye},{name:"RelationalNode",test:s.iu},{name:"SymbolNode",test:s.li},{name:"Map",test:s.jh},{name:"Object",test:s.Gv}]),c.addConversions([{from:"number",to:"BigNumber",convert:function(e){if(t||l(e),(0,a.vm)(e)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t(e)}},{from:"number",to:"Complex",convert:function(e){return n||h(e),new n(e,0)}},{from:"BigNumber",to:"Complex",convert:function(e){return n||h(e),new n(e.toNumber(),0)}},{from:"bigint",to:"number",convert:function(e){if(e>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+e+")");return Number(e)}},{from:"bigint",to:"BigNumber",convert:function(e){return t||l(e),new t(e.toString())}},{from:"bigint",to:"Fraction",convert:function(e){return i||p(e),new i(e.toString())}},{from:"Fraction",to:"BigNumber",convert:function(e){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return n||h(e),new n(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){i||p(e);var t=new i(e);if(t.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t}},{from:"string",to:"BigNumber",convert:function(e){t||l(e);try{return new t(e)}catch(t){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(e){try{return BigInt(e)}catch(t){throw new Error('Cannot convert "'+e+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(e){i||p(e);try{return new i(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){n||h(e);try{return new n(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(e){return t||l(e),new t(+e)}},{from:"boolean",to:"bigint",convert:function(e){return BigInt(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return i||p(e),new i(+e)}},{from:"boolean",to:"string",convert:function(e){return String(e)}},{from:"Array",to:"Matrix",convert:function(e){return r||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new r(e)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}]),c.onMismatch=(e,t,n)=>{var r=c.createError(e,t,n);if(["wrongType","mismatch"].includes(r.data.category)&&1===t.length&&(0,s.P3)(t[0])&&n.some((e=>!e.params.includes(",")))){var i=new TypeError("Function '".concat(e,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(e,")'."));throw i.data=r.data,i}throw r},c.onMismatch=(e,t,n)=>{var r=c.createError(e,t,n);if(["wrongType","mismatch"].includes(r.data.category)&&1===t.length&&(0,s.P3)(t[0])&&n.some((e=>!e.params.includes(",")))){var i=new TypeError("Function '".concat(e,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(e,")'."));throw i.data=r.data,i}throw r},c}));function l(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function h(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function p(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}},972:(e,t,n)=>{"use strict";n.d(t,{$:()=>a});var r=n(4634),i=n(4719),s=n(5662),a=function(e){if(e)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(i.P)};r(a,i.P,{MATRIX_OPTIONS:s.t,NUMBER_OPTIONS:s.n$})},3886:(e,t,n)=>{"use strict";n.d(t,{CR:()=>ze,Do:()=>Me,FE:()=>_e,G6:()=>Ge,I9:()=>Ce,JL:()=>ye,K:()=>Oe,K3:()=>$e,Kv:()=>me,Lz:()=>Pe,Q4:()=>Ae,RH:()=>Ue,S5:()=>Te,_3:()=>ke,_7:()=>ve,_V:()=>qe,aT:()=>Re,bP:()=>fe,cy:()=>Ee,eD:()=>Se,h$:()=>He,hd:()=>Be,ht:()=>De,iX:()=>Le,lA:()=>je,mN:()=>le.e,od:()=>xe,qg:()=>Ie,sW:()=>Ne,ub:()=>be,wE:()=>Fe,wx:()=>We,yj:()=>Ve,zX:()=>ge,zf:()=>we});var r=n(4634),i=n(972),s=n(2613),a=n(5926),o=n(6917),c=n(9973),u=n(88),l=n(1668),h=n(4544),p=n(4813),d=n(7413),f=n(2808),m=n(1189),g=n(1653),y=n(1860),x=n(624),v=n(5937),b=n(9126),D=n(3876),w=n(245),A=n(561),S=n(7827),N=n(6017),C=n(2506),E=n(3192),M=n(2237),T=n(7578),O=n(7741),P=n(4165),_=n(4170),I=n(5945),B=n(4274),R=n(4289),F=n(5833),j=n(3792),k=n(2342),q=n(7971),L=n(463),z=n(8876),U=n(5797),G=n(5136),$=n(7492),H=n(5633),W=n(8791),V=n(3810),Y=n(3277),Q=n(3493),Z=n(2298),J=n(9459),K=n(6955),X=n(5671),ee=n(941),te=n(4414),ne=n(9832),re=n(5973),ie=n(6363),se=n(4092),ae=n(3881),oe=n(3094),ce=n(7764),ue=n(5900),le=n(9284),he={},pe={},de={},fe=(0,s.R)({mathWithTransform:pe}),me=(0,a.Q)({Node:fe}),ge=(0,o.r)({Node:fe}),ye=(0,c.n)({Node:fe}),xe=(0,u.G)({Node:fe}),ve=(0,l.W)({Node:fe}),be=(0,h.E)({Node:fe,ResultSet:ue.A3A}),De=(0,p.h)({Node:fe}),we=(0,d.b)({Node:fe}),Ae=(0,f.u)({Node:fe}),Se=(0,m.m)({classes:de}),Ne=(0,g.k)({math:he,typed:ue.nE2}),Ce=(0,y.I)({Node:fe,typed:ue.nE2}),Ee=(0,x.U)({Chain:Ne,typed:ue.nE2}),Me=(0,v.r)({Node:fe,size:ue.EjY}),Te=(0,b.C)({Node:fe,subset:ue.LEQ}),Oe=(0,D.y)({matrix:ue.UPj,Node:fe,subset:ue.LEQ}),Pe=(0,w.F)({Unit:ue.NfE,Node:fe,math:he}),_e=(0,A.N)({Node:fe,SymbolNode:Pe,math:he}),Ie=(0,S.U)({AccessorNode:Te,ArrayNode:ve,AssignmentNode:Oe,BlockNode:be,ConditionalNode:De,ConstantNode:we,FunctionAssignmentNode:Ce,FunctionNode:_e,IndexNode:Me,ObjectNode:me,OperatorNode:ge,ParenthesisNode:ye,RangeNode:Ae,RelationalNode:xe,SymbolNode:Pe,config:i.$,numeric:ue.sHn,typed:ue.nE2}),Be=(0,N.x)({ConstantNode:we,FunctionNode:_e,OperatorNode:ge,ParenthesisNode:ye,parse:Ie,typed:ue.nE2}),Re=(0,C.E)({bignumber:ue.miF,fraction:ue.zO$,AccessorNode:Te,ArrayNode:ve,ConstantNode:we,FunctionNode:_e,IndexNode:Me,ObjectNode:me,OperatorNode:ge,SymbolNode:Pe,config:i.$,mathWithTransform:pe,matrix:ue.UPj,typed:ue.nE2}),Fe=(0,E.Q)({parse:Ie,typed:ue.nE2}),je=(0,M.x)({AccessorNode:Te,ArrayNode:ve,ConstantNode:we,FunctionNode:_e,IndexNode:Me,ObjectNode:me,OperatorNode:ge,ParenthesisNode:ye,SymbolNode:Pe,add:ue.WQq,divide:ue.Qrk,equal:ue.LCg,isZero:ue.beD,multiply:ue.lwT,parse:Ie,pow:ue.n7C,subtract:ue.ReH,typed:ue.nE2}),ke=(0,T.u)({parse:Ie,typed:ue.nE2}),qe=(0,O.G)({evaluate:ke}),Le=(0,P.m)({evaluate:ke}),ze=(0,_.U)({bignumber:ue.miF,fraction:ue.zO$,AccessorNode:Te,ArrayNode:ve,ConstantNode:we,FunctionNode:_e,IndexNode:Me,ObjectNode:me,OperatorNode:ge,ParenthesisNode:ye,SymbolNode:Pe,add:ue.WQq,config:i.$,divide:ue.Qrk,equal:ue.LCg,isZero:ue.beD,mathWithTransform:pe,matrix:ue.UPj,multiply:ue.lwT,parse:Ie,pow:ue.n7C,resolve:Be,simplifyConstant:Re,simplifyCore:je,subtract:ue.ReH,typed:ue.nE2}),Ue=(0,I.N)({OperatorNode:ge,parse:Ie,simplify:ze,typed:ue.nE2}),Ge=(0,B.C)({parse:Ie,typed:ue.nE2}),$e=(0,R.C)({Parser:Le,typed:ue.nE2}),He=(0,F.L)({bignumber:ue.miF,fraction:ue.zO$,AccessorNode:Te,ArrayNode:ve,ConstantNode:we,FunctionNode:_e,IndexNode:Me,ObjectNode:me,OperatorNode:ge,ParenthesisNode:ye,SymbolNode:Pe,add:ue.WQq,config:i.$,divide:ue.Qrk,equal:ue.LCg,isZero:ue.beD,mathWithTransform:pe,matrix:ue.UPj,multiply:ue.lwT,parse:Ie,pow:ue.n7C,simplify:ze,simplifyConstant:Re,simplifyCore:je,subtract:ue.ReH,typed:ue.nE2}),We=(0,j.s)({ConstantNode:we,FunctionNode:_e,OperatorNode:ge,ParenthesisNode:ye,SymbolNode:Pe,config:i.$,equal:ue.LCg,isZero:ue.beD,numeric:ue.sHn,parse:Ie,simplify:ze,typed:ue.nE2}),Ve=(0,k.q)({Help:qe,mathWithTransform:pe,typed:ue.nE2});r(he,{e:ue.e,false:ue.PHr,fineStructure:ue.GVI,i:ue.i,Infinity:ue.aNc,LN10:ue.I0I,LOG10E:ue.RZC,NaN:ue.Jlw,null:ue.jwX,phi:ue.U1u,SQRT1_2:ue.ddC,sackurTetrode:ue.j59,tau:ue.FA6,true:ue._Jp,E:ue.e,version:ue.rEp,efimovFactor:ue.Qe0,LN2:ue.XEz,pi:ue.pi,replacer:ue.$Uf,reviver:Se,SQRT2:ue.$qA,typed:ue.nE2,PI:ue.pi,weakMixingAngle:ue.IYe,abs:ue.tnl,acos:ue.HQu,acot:ue.ONU,acsc:ue.J97,addScalar:ue.G0T,arg:ue.JR0,asech:ue.lXS,asinh:ue.yHs,atan:ue.rYl,atanh:ue.rfv,bigint:ue.oad,bitNot:ue.FMv,boolean:ue.zMY,clone:ue.o8B,combinations:ue.vjN,complex:ue.faB,conj:ue.xJb,cos:ue.gnS,cot:ue.n15,csc:ue.mov,cube:ue.KYz,equalScalar:ue.Lg8,erf:ue.Y12,exp:ue.oNF,expm1:ue.IYd,filter:ue.pbD,flatten:ue.Bqz,forEach:ue.jJl,format:ue.GPZ,getMatrixDataType:ue.Ob2,hex:ue.uhr,im:ue.im,isInteger:ue.FqJ,isNegative:ue.cIo,isPositive:ue.epS,isZero:ue.beD,LOG2E:ue.QdK,lgamma:ue.ayJ,log10:ue.YLo,log2:ue.p67,map:ue.TjK,multiplyScalar:ue.NyO,not:ue.AU6,number:ue.aig,oct:ue.zJI,pickRandom:ue.BBI,print:ue.yyV,random:ue.yTv,re:ue.re,sec:ue.aPs,sign:ue._SZ,sin:ue.F8e,splitUnit:ue.hg5,square:ue.EwI,string:ue.YjP,subtractScalar:ue.hkw,tan:ue.Mlm,typeOf:ue.QPs,acosh:ue.FqL,acsch:ue.dC_,apply:ue.Bb6,asec:ue.f9Q,bignumber:ue.miF,chain:Ee,combinationsWithRep:ue.I5N,cosh:ue.yIG,csch:ue.u_e,isNaN:ue.yrW,isPrime:ue.A59,randomInt:ue.HO1,sech:ue.uPJ,sinh:ue.L0l,sparse:ue.lMo,sqrt:ue.RZD,squeeze:ue.r2V,tanh:ue.ymU,unaryMinus:ue.gBK,acoth:ue.mZ7,bin:ue.e5v,coth:ue.vwV,fraction:ue.zO$,isNumeric:ue.kf$,matrix:ue.UPj,matrixFromFunction:ue.IZ4,mode:ue.MqS,numeric:ue.sHn,prod:ue._eU,reshape:ue.tQQ,size:ue.EjY,transpose:ue.mgz,xgcd:ue.bU5,zeros:ue.Ul9,asin:ue.qRo,cbrt:ue._nN,concat:ue.xWs,count:ue.U9N,ctranspose:ue.Ptl,diag:ue.smy,divideScalar:ue.Yly,dotDivide:ue.TDS,equal:ue.LCg,hasNumericValue:ue.xr2,identity:ue.D_O,kron:ue.bBq,largerEq:ue.I7f,leftShift:ue.eSP,lsolve:ue.IWu,matrixFromColumns:ue.dFU,nthRoot:ue.$Vg,ones:ue.SaS,qr:ue.qr,resize:ue.XRe,rightArithShift:ue.$Kb,round:ue.LIG,smaller:ue.dL7,subtract:ue.ReH,to:ue.to,unaryPlus:ue.WOv,usolve:ue.F$N,xor:ue.I86,add:ue.WQq,atan2:ue.FPz,bitAnd:ue.nfS,bitOr:ue.puf,bitXor:ue.hCf,catalan:ue.bX8,compare:ue.UDF,compareText:ue.n6D,cumsum:ue.rCv,deepEqual:ue.bDM,diff:ue.Ui2,distance:ue.IoC,dot:ue.Omf,equalText:ue.UpA,floor:ue.RIf,gcd:ue.p_i,hypot:ue.dYR,larger:ue.yfX,log:ue.Rm2,lsolveAll:ue.vNC,matrixFromRows:ue.$bG,min:ue.jkA,mod:ue.ziu,multiply:ue.lwT,nthRoots:ue.c2c,or:ue.or,partitionSelect:ue.$TU,rightLogShift:ue.BXq,slu:ue.tok,subset:ue.LEQ,sum:ue.czq,trace:ue.uPA,usolveAll:ue.y3r,zpk2tf:ue.K4A,ceil:ue.mkO,compareNatural:ue.dkM,composition:ue.RG1,cross:ue.$An,det:ue.yT6,dotMultiply:ue.KQr,fix:ue.Up4,index:ue.Pe0,intersect:ue.y$5,invmod:ue.U5$,lcm:ue.lJL,log1p:ue.Kko,max:ue.T9B,setCartesian:ue.f4J,setDistinct:ue.nel,setIsSubset:ue.BqJ,setPowerset:ue.UHQ,smallerEq:ue.$9q,sort:ue.diJ,unequal:ue._P7,and:ue.Uo6,range:ue.y17,row:ue.nME,setDifference:ue._iM,setMultiplicity:ue.ELq,setSymDifference:ue.du0,column:ue.fiJ,inv:ue.WCD,lup:ue._bA,pinv:ue.oUd,pow:ue.n7C,setIntersect:ue.MZk,setUnion:ue.gGC,sqrtm:ue.ooS,vacuumImpedance:ue.gAZ,wienDisplacement:ue.BSO,atomicMass:ue.Mhd,bohrMagneton:ue.tTI,boltzmann:ue.M85,conductanceQuantum:ue.jPu,coulomb:ue.Kwo,deuteronMass:ue.D3g,dotPow:ue.WFY,electricConstant:ue.GZl,elementaryCharge:ue.xFU,expm:ue.BJ6,faraday:ue.nl4,fft:ue.hVP,gamma:ue.uN6,gravitationConstant:ue.NpQ,hartreeEnergy:ue.ykU,ifft:ue.KGM,klitzing:ue.DTk,loschmidt:ue.aaT,magneticConstant:ue.N95,molarMass:ue.CSd,molarPlanckConstant:ue.ZQO,neutronMass:ue.SI4,nuclearMagneton:ue.Ium,planckCharge:ue.WkS,planckLength:ue.ETO,planckTemperature:ue._RZ,protonMass:ue.pIl,quantumOfCirculation:ue.cAv,reducedPlanckConstant:ue.mYI,rydberg:ue.oC_,secondRadiation:ue.iuU,speedOfLight:ue.ZLl,stefanBoltzmann:ue.ZL$,thomsonCrossSection:ue.Ml9,avogadro:ue.m7d,bohrRadius:ue.Au7,createUnit:ue.Dqv,divide:ue.Qrk,electronMass:ue.zMe,factorial:ue.QnG,firstRadiation:ue.OsG,gravity:ue.fpm,inverseConductanceQuantum:ue.BBP,lusolve:ue.nZk,magneticFluxQuantum:ue.Db7,molarMassC12:ue.O90,multinomial:ue.OjQ,parse:Ie,permutations:ue.yW1,planckMass:ue.SI8,polynomialRoot:ue.tpt,resolve:Be,setSize:ue.SpT,simplifyConstant:Re,solveODE:ue.kMp,stirlingS2:ue.yo9,unit:ue.zAA,bellNumbers:ue.yZD,compile:Fe,eigs:ue.Ros,fermiCoupling:ue.NFB,gasConstant:ue.UC4,kldivergence:ue.ucg,mean:ue.i2o,molarVolume:ue.ONk,planckConstant:ue.g9c,quantileSeq:ue.hRg,simplifyCore:je,variance:ue.GVr,classicalElectronRadius:ue.irF,evaluate:ke,median:ue.JZy,simplify:ze,symbolicEqual:Ue,corr:ue.PsA,freqz:ue.ZR8,leafCount:Ge,mad:ue.FmW,parser:$e,rationalize:He,std:ue.wiE,zeta:ue.Poe,derivative:We,norm:ue.xbf,rotationMatrix:ue.o8M,help:Ve,planckTime:ue.b7H,schur:ue.epK,rotate:ue.e$E,sylvester:ue.UoP,lyap:ue.pvw,config:i.$}),r(pe,he,{filter:(0,q.p)({typed:ue.nE2}),forEach:(0,L.D)({typed:ue.nE2}),map:(0,z.t)({typed:ue.nE2}),apply:(0,U.D)({isInteger:ue.FqJ,typed:ue.nE2}),or:(0,G.O)({DenseMatrix:ue.JK5,concat:ue.xWs,equalScalar:ue.Lg8,matrix:ue.UPj,typed:ue.nE2}),and:(0,$.i)({add:ue.WQq,concat:ue.xWs,equalScalar:ue.Lg8,matrix:ue.UPj,not:ue.AU6,typed:ue.nE2,zeros:ue.Ul9}),concat:(0,H.V)({isInteger:ue.FqJ,matrix:ue.UPj,typed:ue.nE2}),max:(0,W.t)({config:i.$,larger:ue.yfX,numeric:ue.sHn,typed:ue.nE2}),print:(0,V.Q)({add:ue.WQq,matrix:ue.UPj,typed:ue.nE2,zeros:ue.Ul9}),bitAnd:(0,Y.H)({add:ue.WQq,concat:ue.xWs,equalScalar:ue.Lg8,matrix:ue.UPj,not:ue.AU6,typed:ue.nE2,zeros:ue.Ul9}),diff:(0,Q.S)({bignumber:ue.miF,matrix:ue.UPj,number:ue.aig,subtract:ue.ReH,typed:ue.nE2}),min:(0,Z.X)({config:i.$,numeric:ue.sHn,smaller:ue.dL7,typed:ue.nE2}),subset:(0,J.R)({add:ue.WQq,matrix:ue.UPj,typed:ue.nE2,zeros:ue.Ul9}),bitOr:(0,K.f)({DenseMatrix:ue.JK5,concat:ue.xWs,equalScalar:ue.Lg8,matrix:ue.UPj,typed:ue.nE2}),cumsum:(0,X.p)({add:ue.WQq,typed:ue.nE2,unaryPlus:ue.WOv}),index:(0,ee.p)({Index:ue.jKy,getMatrixDataType:ue.Ob2}),sum:(0,te.o)({add:ue.WQq,config:i.$,numeric:ue.sHn,typed:ue.nE2}),range:(0,ne.G)({bignumber:ue.miF,matrix:ue.UPj,add:ue.WQq,config:i.$,isPositive:ue.epS,larger:ue.yfX,largerEq:ue.I7f,smaller:ue.dL7,smallerEq:ue.$9q,typed:ue.nE2}),row:(0,re.J)({Index:ue.jKy,matrix:ue.UPj,range:ue.y17,typed:ue.nE2}),column:(0,ie.B)({Index:ue.jKy,matrix:ue.UPj,range:ue.y17,typed:ue.nE2}),mean:(0,se.y)({add:ue.WQq,divide:ue.Qrk,typed:ue.nE2}),quantileSeq:(0,ae.b)({add:ue.WQq,bignumber:ue.miF,compare:ue.UDF,divide:ue.Qrk,isInteger:ue.FqJ,larger:ue.yfX,multiply:ue.lwT,partitionSelect:ue.$TU,smaller:ue.dL7,smallerEq:ue.$9q,subtract:ue.ReH,typed:ue.nE2}),variance:(0,oe.M)({add:ue.WQq,apply:ue.Bb6,divide:ue.Qrk,isNaN:ue.yrW,multiply:ue.lwT,subtract:ue.ReH,typed:ue.nE2}),std:(0,ce.E)({map:ue.TjK,sqrt:ue.RZD,typed:ue.nE2,variance:ue.GVr})}),r(de,{BigNumber:ue.gHh,Complex:ue.pr3,Fraction:ue.fwM,Matrix:ue.uqu,Node:fe,ObjectNode:me,OperatorNode:ge,ParenthesisNode:ye,Range:ue.Q6t,RelationalNode:xe,ResultSet:ue.A3A,ArrayNode:ve,BlockNode:be,ConditionalNode:De,ConstantNode:we,DenseMatrix:ue.JK5,RangeNode:Ae,Chain:Ne,FunctionAssignmentNode:Ce,SparseMatrix:ue.Iln,IndexNode:Me,ImmutableDenseMatrix:ue.LQF,Index:ue.jKy,AccessorNode:Te,AssignmentNode:Oe,FibonacciHeap:ue.hKX,Spa:ue.V4u,Unit:ue.NfE,SymbolNode:Pe,FunctionNode:_e,Help:qe,Parser:Le}),Ne.createProxy(he)},5900:(e,t,n)=>{"use strict";n.d(t,{$9q:()=>fo,$An:()=>Ka,$Kb:()=>sa,$TU:()=>za,$Uf:()=>Jr,$Vg:()=>ta,$bG:()=>Ra,$qA:()=>Kr,A3A:()=>zr,A59:()=>ms,AU6:()=>Gi,Au7:()=>gc,BBI:()=>Wi,BBP:()=>Ac,BJ6:()=>$o,BSO:()=>Bo,BXq:()=>Ua,Bb6:()=>cs,BqJ:()=>ho,Bqz:()=>Ei,CSd:()=>ec,D3g:()=>Lo,DTk:()=>Jo,D_O:()=>Qs,Db7:()=>Nc,Dqv:()=>yc,ELq:()=>Do,ETO:()=>sc,EjY:()=>Rs,EwI:()=>ts,F$N:()=>ha,F8e:()=>Ki,FA6:()=>$r,FMv:()=>pi,FPz:()=>fa,FmW:()=>Qc,FqJ:()=>Ii,FqL:()=>as,G0T:()=>si,GPZ:()=>Ti,GVI:()=>Or,GVr:()=>$c,GZl:()=>Uo,HO1:()=>gs,HQu:()=>ni,I0I:()=>Br,I5N:()=>hs,I7f:()=>Js,I86:()=>pa,IWu:()=>Xs,IYd:()=>Ni,IYe:()=>ei,IZ4:()=>Os,Iln:()=>Xi,IoC:()=>Sa,Ium:()=>rc,J97:()=>ii,JK5:()=>Vr,JR0:()=>ai,JZy:()=>Wc,Jlw:()=>jr,K4A:()=>Ya,KGM:()=>Zo,KQr:()=>eo,KYz:()=>Di,Kko:()=>oo,Kwo:()=>qo,L0l:()=>xs,LCg:()=>Vs,LEQ:()=>$a,LIG:()=>aa,LQF:()=>Oa,Lg8:()=>wi,M85:()=>jo,MZk:()=>To,Mhd:()=>Ro,Ml9:()=>fc,Mlm:()=>is,MqS:()=>Ps,N95:()=>Xo,NFB:()=>jc,NfE:()=>_o,NpQ:()=>Yo,NyO:()=>Ui,O90:()=>Cc,ONU:()=>ri,ONk:()=>zc,Ob2:()=>Oi,OjQ:()=>Ec,Omf:()=>Na,OsG:()=>Dc,PHr:()=>Tr,Pe0:()=>ro,Poe:()=>Jc,PsA:()=>Vc,Ptl:()=>Gs,Q6t:()=>Lr,QPs:()=>ss,QdK:()=>ji,Qe0:()=>Yr,QnG:()=>bc,Qrk:()=>xc,RG1:()=>Ja,RIf:()=>Ea,RZC:()=>Rr,RZD:()=>bs,ReH:()=>ca,Rm2:()=>Ia,Ros:()=>Fc,SI4:()=>nc,SI8:()=>Tc,SaS:()=>na,SpT:()=>Pc,T9B:()=>co,TDS:()=>Ws,TjK:()=>zi,U1u:()=>qr,U5$:()=>so,U9N:()=>Us,UC4:()=>kc,UDF:()=>va,UHQ:()=>po,UPj:()=>Ts,Ui2:()=>Aa,Ul9:()=>ks,Uo6:()=>yo,UoP:()=>ru,Up4:()=>no,UpA:()=>Ca,V4u:()=>Ao,WCD:()=>No,WFY:()=>zo,WOv:()=>la,WQq:()=>da,WkS:()=>ic,XEz:()=>Qr,XRe:()=>ia,Y12:()=>Ai,YLo:()=>qi,YjP:()=>ns,Yly:()=>Hs,ZL$:()=>dc,ZLl:()=>pc,ZQO:()=>tc,ZR8:()=>Yc,_Jp:()=>Hr,_P7:()=>go,_RZ:()=>ac,_SZ:()=>Ji,_bA:()=>Co,_eU:()=>Is,_iM:()=>bo,_nN:()=>Ls,aNc:()=>Ir,aPs:()=>Zi,aaT:()=>Ko,aig:()=>$i,ayJ:()=>ki,b7H:()=>eu,bBq:()=>Zs,bDM:()=>wa,bU5:()=>js,bX8:()=>xa,beD:()=>Fi,c2c:()=>qa,cAv:()=>cc,cIo:()=>Bi,czq:()=>Ha,dC_:()=>os,dFU:()=>ea,dL7:()=>oa,dYR:()=>Ta,ddC:()=>Ur,diJ:()=>mo,dkM:()=>Za,du0:()=>wo,e:()=>Mr,e$E:()=>nu,e5v:()=>Ns,eSP:()=>Ks,epK:()=>tu,epS:()=>Ri,f4J:()=>uo,f9Q:()=>us,faB:()=>gi,fiJ:()=>So,fpm:()=>wc,fwM:()=>Pr,g9c:()=>Uc,gAZ:()=>Io,gBK:()=>As,gGC:()=>Oo,gHh:()=>Cr,gnS:()=>xi,hCf:()=>ya,hKX:()=>to,hRg:()=>Gc,hVP:()=>Wo,hg5:()=>es,hkw:()=>rs,i:()=>_r,i2o:()=>Lc,im:()=>_i,irF:()=>Hc,iuU:()=>hc,j59:()=>Gr,jJl:()=>Mi,jKy:()=>Pa,jPu:()=>ko,jkA:()=>Fa,jwX:()=>kr,kMp:()=>_c,kf$:()=>Ms,lJL:()=>ao,lMo:()=>vs,lXS:()=>oi,lwT:()=>ka,m7d:()=>mc,mYI:()=>uc,mZ7:()=>Ss,mgz:()=>Fs,miF:()=>ls,mkO:()=>Qa,mov:()=>bi,n15:()=>vi,n6D:()=>ba,n7C:()=>Mo,nE2:()=>Xr,nME:()=>vo,nZk:()=>Sc,nel:()=>lo,nfS:()=>ma,nl4:()=>Ho,o8B:()=>fi,o8M:()=>Xc,oC_:()=>lc,oNF:()=>Si,oUd:()=>Eo,oad:()=>hi,ooS:()=>Po,or:()=>La,p67:()=>Li,pIl:()=>oc,p_i:()=>Ma,pbD:()=>Ci,pi:()=>Zr,pr3:()=>Er,puf:()=>ga,pvw:()=>iu,qRo:()=>qs,qr:()=>ra,r2V:()=>Ds,rCv:()=>Da,rEp:()=>Wr,rYl:()=>ui,re:()=>Qi,rfv:()=>li,sHn:()=>_s,smy:()=>$s,tQQ:()=>Bs,tTI:()=>Fo,tnl:()=>ti,to:()=>ua,tok:()=>Ga,tpt:()=>Oc,uN6:()=>Vo,uPA:()=>Wa,uPJ:()=>ys,u_e:()=>ds,ucg:()=>qc,uhr:()=>Pi,uqu:()=>Fr,vNC:()=>Ba,vjN:()=>mi,vwV:()=>Cs,wiE:()=>Zc,xFU:()=>Go,xJb:()=>yi,xWs:()=>zs,xbf:()=>Kc,xr2:()=>Ys,y$5:()=>io,y17:()=>xo,y3r:()=>Va,yHs:()=>ci,yIG:()=>ps,yT6:()=>Xa,yTv:()=>Yi,yW1:()=>Mc,yZD:()=>Rc,yfX:()=>_a,ykU:()=>Qo,ymU:()=>ws,yo9:()=>Ic,yrW:()=>fs,yyV:()=>Vi,zAA:()=>Bc,zJI:()=>Hi,zMY:()=>di,zMe:()=>vc,zO$:()=>Es,ziu:()=>ja});var r=n(972),i=n(3557),s=n(1289),a=n(2284),o=n(3387),c=n(395),u=n(2205),l=n(7251),h=n(7613),p=n(5520),d=n(236),f=n(434),m=n(3935),g=n(2800),y=n(2181),x=n(5636),v=n(340),b=n(165),D=n(9444),w=n(3601),A=n(1584),S=n(8954),N=n(7151),C=n(720),E=n(5870),M=n(5505),T=n(6344),O=n(174),P=n(9491),_=n(1143),I=n(4630),B=n(2115),R=n(8238),F=n(2257),j=n(177),k=n(2340),q=n(2486),L=n(9990),z=n(8920),U=n(1032),G=n(67),$=n(5587),H=n(9651),W=n(1123),V=n(258),Y=n(3929),Q=n(9081),Z=n(7844),J=n(3061),K=n(9016),X=n(1311),ee=n(4672),te=n(3947),ne=n(9239),re=n(3417),ie=n(5984),se=n(1226),ae=n(6621),oe=n(9531),ce=n(20),ue=n(1001),le=n(3970),he=n(578),pe=n(8801),de=n(4708),fe=n(2436),me=n(2581),ge=n(7911),ye=n(5883),xe=n(667),ve=n(122),be=n(1158),De=n(9470),we=n(1998),Ae=n(1300),Se=n(825),Ne=n(7671),Ce=n(9259),Ee=n(7753),Me=n(3547),Te=n(3894),Oe=n(5757),Pe=n(6768),_e=n(9391),Ie=n(6409),Be=n(1146),Re=n(227),Fe=n(1670),je=n(4145),ke=n(4767),qe=n(7292),Le=n(5654),ze=n(2547),Ue=n(794),Ge=n(4977),$e=n(5645),He=n(6787),We=n(9059),Ve=n(2380),Ye=n(8901),Qe=n(9129),Ze=n(4805),Je=n(7989),Ke=n(5877),Xe=n(5988),et=n(1760),tt=n(5365),nt=n(5684),rt=n(1439),it=n(3170),st=n(161),at=n(650),ot=n(5624),ct=n(5310),ut=n(6876),lt=n(6569),ht=n(9917),pt=n(6886),dt=n(4242),ft=n(5693),mt=n(8193),gt=n(3782),yt=n(9192),xt=n(1606),vt=n(8935),bt=n(8086),Dt=n(6771),wt=n(9116),At=n(392),St=n(6431),Nt=n(9187),Ct=n(7896),Et=n(4472),Mt=n(4172),Tt=n(6208),Ot=n(5244),Pt=n(4852),_t=n(3917),It=n(5538),Bt=n(2736),Rt=n(6148),Ft=n(6079),jt=n(1716),kt=n(9425),qt=n(9565),Lt=n(4449),zt=n(9253),Ut=n(3253),Gt=n(2854),$t=n(8873),Ht=n(7355),Wt=n(4861),Vt=n(3587),Yt=n(3348),Qt=n(9076),Zt=n(4867),Jt=n(2639),Kt=n(8296),Xt=n(4625),en=n(6228),tn=n(2446),nn=n(1288),rn=n(3790),sn=n(7159),an=n(3767),on=n(4032),cn=n(1718),un=n(2402),ln=n(6695),hn=n(7440),pn=n(9602),dn=n(5547),fn=n(9812),mn=n(7648),gn=n(8808),yn=n(7387),xn=n(5874),vn=n(9010),bn=n(455),Dn=n(3144),wn=n(5546),An=n(3995),Sn=n(7921),Nn=n(2659),Cn=n(7834),En=n(5040),Mn=n(72),Tn=n(7563),On=n(5495),Pn=n(844),_n=n(6610),In=n(8578),Bn=n(5150),Rn=n(8297),Fn=n(628),jn=n(5666),kn=n(7429),qn=n(3456),Ln=n(4739),zn=n(2601),Un=n(2776),Gn=n(2746),$n=n(3831),Hn=n(2783),Wn=n(5712),Vn=n(7678),Yn=n(8822),Qn=n(2375),Zn=n(1069),Jn=n(8782),Kn=n(8490),Xn=n(8669),er=n(8503),tr=n(8523),nr=n(7961),rr=n(5359),ir=n(5200),sr=n(9279),ar=n(6869),or=n(5486),cr=n(4475),ur=n(9874),lr=n(6241),hr=n(4043),pr=n(3112),dr=n(5849),fr=n(2092),mr=n(1386),gr=n(1155),yr=n(1038),xr=n(9029),vr=n(9926),br=n(9913),Dr=n(3163),wr=n(7592),Ar=n(404),Sr=n(8528),Nr=n(2259),Cr=(0,i.g)({config:r.$}),Er=(0,s.z)({}),Mr=(0,a.UN)({BigNumber:Cr,config:r.$}),Tr=(0,a.i0)({}),Or=(0,o.I)({BigNumber:Cr,config:r.$}),Pr=(0,c.z)({}),_r=(0,a.GM)({Complex:Er}),Ir=(0,a.Xd)({BigNumber:Cr,config:r.$}),Br=(0,a.ad)({BigNumber:Cr,config:r.$}),Rr=(0,a.fi)({BigNumber:Cr,config:r.$}),Fr=(0,u.w)({}),jr=(0,a.SV)({BigNumber:Cr,config:r.$}),kr=(0,a.Er)({}),qr=(0,a.Ah)({BigNumber:Cr,config:r.$}),Lr=(0,l.U)({}),zr=(0,h.O)({}),Ur=(0,a.j2)({BigNumber:Cr,config:r.$}),Gr=(0,o.bz)({BigNumber:Cr,config:r.$}),$r=(0,a.hI)({BigNumber:Cr,config:r.$}),Hr=(0,a.L7)({}),Wr=(0,a.BB)({}),Vr=(0,p.j)({Matrix:Fr}),Yr=(0,o.ez)({BigNumber:Cr,config:r.$}),Qr=(0,a.l7)({BigNumber:Cr,config:r.$}),Zr=(0,a.GD)({BigNumber:Cr,config:r.$}),Jr=(0,d.h)({}),Kr=(0,a.RJ)({BigNumber:Cr,config:r.$}),Xr=(0,f.B)({BigNumber:Cr,Complex:Er,DenseMatrix:Vr,Fraction:Pr}),ei=(0,o.qH)({BigNumber:Cr,config:r.$}),ti=(0,m.r)({typed:Xr}),ni=(0,g.J)({Complex:Er,config:r.$,typed:Xr}),ri=(0,y.C)({BigNumber:Cr,typed:Xr}),ii=(0,x.v)({BigNumber:Cr,Complex:Er,config:r.$,typed:Xr}),si=(0,v.w)({typed:Xr}),ai=(0,b.P)({typed:Xr}),oi=(0,D.n)({BigNumber:Cr,Complex:Er,config:r.$,typed:Xr}),ci=(0,w.Q)({typed:Xr}),ui=(0,A.X)({typed:Xr}),li=(0,S.v)({Complex:Er,config:r.$,typed:Xr}),hi=(0,N.S)({typed:Xr}),pi=(0,C.j)({typed:Xr}),di=(0,E.p)({typed:Xr}),fi=(0,M.s)({typed:Xr}),mi=(0,T.p)({typed:Xr}),gi=(0,O.X)({Complex:Er,typed:Xr}),yi=(0,P.x)({typed:Xr}),xi=(0,_.o)({typed:Xr}),vi=(0,I.v)({BigNumber:Cr,typed:Xr}),bi=(0,B.Y)({BigNumber:Cr,typed:Xr}),Di=(0,R.Y)({typed:Xr}),wi=(0,F.p)({config:r.$,typed:Xr}),Ai=(0,j.K)({typed:Xr}),Si=(0,k.I)({typed:Xr}),Ni=(0,q.U)({Complex:Er,typed:Xr}),Ci=(0,L.H)({typed:Xr}),Ei=(0,z.d)({typed:Xr}),Mi=(0,U.j)({typed:Xr}),Ti=(0,G.I)({typed:Xr}),Oi=(0,$.C)({typed:Xr}),Pi=(0,H.i)({format:Ti,typed:Xr}),_i=(0,W.z)({typed:Xr}),Ii=(0,V.r)({typed:Xr}),Bi=(0,Y.A)({config:r.$,typed:Xr}),Ri=(0,Q.q)({config:r.$,typed:Xr}),Fi=(0,Z.L)({equalScalar:wi,typed:Xr}),ji=(0,a.C8)({BigNumber:Cr,config:r.$}),ki=(0,J.k)({Complex:Er,typed:Xr}),qi=(0,K.e)({Complex:Er,config:r.$,typed:Xr}),Li=(0,X.j)({Complex:Er,config:r.$,typed:Xr}),zi=(0,ee.p)({typed:Xr}),Ui=(0,te.J)({typed:Xr}),Gi=(0,ne.m)({typed:Xr}),$i=(0,re.G)({typed:Xr}),Hi=(0,ie.R)({format:Ti,typed:Xr}),Wi=(0,se.B)({config:r.$,typed:Xr}),Vi=(0,ae.q)({typed:Xr}),Yi=(0,oe.s)({config:r.$,typed:Xr}),Qi=(0,ce.W)({typed:Xr}),Zi=(0,ue.c)({BigNumber:Cr,typed:Xr}),Ji=(0,le.m)({BigNumber:Cr,Fraction:Pr,complex:gi,typed:Xr}),Ki=(0,he.T)({typed:Xr}),Xi=(0,pe.g)({Matrix:Fr,equalScalar:wi,typed:Xr}),es=(0,de.t)({typed:Xr}),ts=(0,fe.G)({typed:Xr}),ns=(0,me.I)({typed:Xr}),rs=(0,ge.f)({typed:Xr}),is=(0,ye.a)({typed:Xr}),ss=(0,xe.o)({typed:Xr}),as=(0,ve.B)({Complex:Er,config:r.$,typed:Xr}),os=(0,be.V)({BigNumber:Cr,typed:Xr}),cs=(0,De.p)({isInteger:Ii,typed:Xr}),us=(0,we.x)({BigNumber:Cr,Complex:Er,config:r.$,typed:Xr}),ls=(0,Ae._)({BigNumber:Cr,typed:Xr}),hs=(0,Se.Q)({typed:Xr}),ps=(0,Ne.q)({typed:Xr}),ds=(0,Ce.g)({BigNumber:Cr,typed:Xr}),fs=(0,Ee.Y)({typed:Xr}),ms=(0,Me.w)({typed:Xr}),gs=(0,Te.d)({config:r.$,typed:Xr}),ys=(0,Oe.g)({BigNumber:Cr,typed:Xr}),xs=(0,Pe.V)({typed:Xr}),vs=(0,_e.R)({SparseMatrix:Xi,typed:Xr}),bs=(0,Ie.R)({Complex:Er,config:r.$,typed:Xr}),Ds=(0,Be.l)({typed:Xr}),ws=(0,Re.I)({typed:Xr}),As=(0,Fe.e)({typed:Xr}),Ss=(0,je.g)({BigNumber:Cr,Complex:Er,config:r.$,typed:Xr}),Ns=(0,ke.O)({format:Ti,typed:Xr}),Cs=(0,qe.$)({BigNumber:Cr,typed:Xr}),Es=(0,Le.l)({Fraction:Pr,typed:Xr}),Ms=(0,ze.y)({typed:Xr}),Ts=(0,Ue.u)({DenseMatrix:Vr,Matrix:Fr,SparseMatrix:Xi,typed:Xr}),Os=(0,Ge.s)({isZero:Fi,matrix:Ts,typed:Xr}),Ps=(0,$e.E)({isNaN:fs,isNumeric:Ms,typed:Xr}),_s=(0,He.y)({bignumber:ls,fraction:Es,number:$i}),Is=(0,We._)({config:r.$,multiplyScalar:Ui,numeric:_s,typed:Xr}),Bs=(0,Ve.r)({isInteger:Ii,matrix:Ts,typed:Xr}),Rs=(0,Ye.A)({matrix:Ts,config:r.$,typed:Xr}),Fs=(0,Qe.M)({matrix:Ts,typed:Xr}),js=(0,Ze.F)({BigNumber:Cr,config:r.$,matrix:Ts,typed:Xr}),ks=(0,Je.I)({BigNumber:Cr,config:r.$,matrix:Ts,typed:Xr}),qs=(0,Ke.I)({Complex:Er,config:r.$,typed:Xr}),Ls=(0,Xe.q)({BigNumber:Cr,Complex:Er,Fraction:Pr,config:r.$,isNegative:Bi,matrix:Ts,typed:Xr,unaryMinus:As}),zs=(0,et.z)({isInteger:Ii,matrix:Ts,typed:Xr}),Us=(0,tt.K)({prod:Is,size:Rs,typed:Xr}),Gs=(0,nt.d)({conj:yi,transpose:Fs,typed:Xr}),$s=(0,rt.I)({DenseMatrix:Vr,SparseMatrix:Xi,matrix:Ts,typed:Xr}),Hs=(0,it.Q)({numeric:_s,typed:Xr}),Ws=(0,st.F)({DenseMatrix:Vr,concat:zs,divideScalar:Hs,equalScalar:wi,matrix:Ts,typed:Xr}),Vs=(0,at.X)({DenseMatrix:Vr,concat:zs,equalScalar:wi,matrix:Ts,typed:Xr}),Ys=(0,ot.l)({isNumeric:Ms,typed:Xr}),Qs=(0,ct.D)({BigNumber:Cr,DenseMatrix:Vr,SparseMatrix:Xi,config:r.$,matrix:Ts,typed:Xr}),Zs=(0,ut.l)({matrix:Ts,multiplyScalar:Ui,typed:Xr}),Js=(0,lt.W)({DenseMatrix:Vr,concat:zs,config:r.$,matrix:Ts,typed:Xr}),Ks=(0,ht.O)({DenseMatrix:Vr,concat:zs,equalScalar:wi,matrix:Ts,typed:Xr,zeros:ks}),Xs=(0,pt.i)({DenseMatrix:Vr,divideScalar:Hs,equalScalar:wi,matrix:Ts,multiplyScalar:Ui,subtractScalar:rs,typed:Xr}),ea=(0,dt.z)({flatten:Ei,matrix:Ts,size:Rs,typed:Xr}),ta=(0,ft.f)({BigNumber:Cr,concat:zs,equalScalar:wi,matrix:Ts,typed:Xr}),na=(0,mt.A)({BigNumber:Cr,config:r.$,matrix:Ts,typed:Xr}),ra=(0,gt.K)({addScalar:si,complex:gi,conj:yi,divideScalar:Hs,equal:Vs,identity:Qs,isZero:Fi,matrix:Ts,multiplyScalar:Ui,sign:Ji,sqrt:bs,subtractScalar:rs,typed:Xr,unaryMinus:As,zeros:ks}),ia=(0,yt.B)({config:r.$,matrix:Ts}),sa=(0,xt.f)({DenseMatrix:Vr,concat:zs,equalScalar:wi,matrix:Ts,typed:Xr,zeros:ks}),aa=(0,vt.B)({BigNumber:Cr,DenseMatrix:Vr,config:r.$,equalScalar:wi,matrix:Ts,typed:Xr,zeros:ks}),oa=(0,bt.p)({DenseMatrix:Vr,concat:zs,config:r.$,matrix:Ts,typed:Xr}),ca=(0,Dt.t)({DenseMatrix:Vr,concat:zs,equalScalar:wi,matrix:Ts,subtractScalar:rs,typed:Xr,unaryMinus:As}),ua=(0,wt.U)({concat:zs,matrix:Ts,typed:Xr}),la=(0,At.e)({config:r.$,numeric:_s,typed:Xr}),ha=(0,St.p)({DenseMatrix:Vr,divideScalar:Hs,equalScalar:wi,matrix:Ts,multiplyScalar:Ui,subtractScalar:rs,typed:Xr}),pa=(0,Nt.Y)({DenseMatrix:Vr,concat:zs,matrix:Ts,typed:Xr}),da=(0,Ct.W)({DenseMatrix:Vr,SparseMatrix:Xi,addScalar:si,concat:zs,equalScalar:wi,matrix:Ts,typed:Xr}),fa=(0,Et.J)({BigNumber:Cr,DenseMatrix:Vr,concat:zs,equalScalar:wi,matrix:Ts,typed:Xr}),ma=(0,Mt.x)({concat:zs,equalScalar:wi,matrix:Ts,typed:Xr}),ga=(0,Tt.$)({DenseMatrix:Vr,concat:zs,equalScalar:wi,matrix:Ts,typed:Xr}),ya=(0,Ot.x)({DenseMatrix:Vr,concat:zs,matrix:Ts,typed:Xr}),xa=(0,Pt.f)({addScalar:si,combinations:mi,divideScalar:Hs,isInteger:Ii,isNegative:Bi,multiplyScalar:Ui,typed:Xr}),va=(0,_t.m)({BigNumber:Cr,DenseMatrix:Vr,Fraction:Pr,concat:zs,config:r.$,equalScalar:wi,matrix:Ts,typed:Xr}),ba=(0,It.r)({concat:zs,matrix:Ts,typed:Xr}),Da=(0,Bt.b)({add:da,typed:Xr,unaryPlus:la}),wa=(0,Rt.H)({equal:Vs,typed:Xr}),Aa=(0,Ft.i)({matrix:Ts,number:$i,subtract:ca,typed:Xr}),Sa=(0,jt.G)({abs:ti,addScalar:si,deepEqual:wa,divideScalar:Hs,multiplyScalar:Ui,sqrt:bs,subtractScalar:rs,typed:Xr}),Na=(0,kt.Y)({addScalar:si,conj:yi,multiplyScalar:Ui,size:Rs,typed:Xr}),Ca=(0,qt.a)({compareText:ba,isZero:Fi,typed:Xr}),Ea=(0,Lt.$)({DenseMatrix:Vr,config:r.$,equalScalar:wi,matrix:Ts,round:aa,typed:Xr,zeros:ks}),Ma=(0,zt.p)({BigNumber:Cr,DenseMatrix:Vr,concat:zs,config:r.$,equalScalar:wi,matrix:Ts,round:aa,typed:Xr,zeros:ks}),Ta=(0,Ut.r)({abs:ti,addScalar:si,divideScalar:Hs,isPositive:Ri,multiplyScalar:Ui,smaller:oa,sqrt:bs,typed:Xr}),Oa=(0,Gt.r)({DenseMatrix:Vr,smaller:oa}),Pa=(0,$t.T)({ImmutableDenseMatrix:Oa,getMatrixDataType:Oi}),_a=(0,Ht.o)({DenseMatrix:Vr,concat:zs,config:r.$,matrix:Ts,typed:Xr}),Ia=(0,Wt.h)({Complex:Er,config:r.$,divideScalar:Hs,typed:Xr}),Ba=(0,Vt.H)({DenseMatrix:Vr,divideScalar:Hs,equalScalar:wi,matrix:Ts,multiplyScalar:Ui,subtractScalar:rs,typed:Xr}),Ra=(0,Yt.Z)({flatten:Ei,matrix:Ts,size:Rs,typed:Xr}),Fa=(0,Qt.L)({config:r.$,numeric:_s,smaller:oa,typed:Xr}),ja=(0,Zt.n)({DenseMatrix:Vr,concat:zs,config:r.$,equalScalar:wi,matrix:Ts,round:aa,typed:Xr,zeros:ks}),ka=(0,Jt.F)({addScalar:si,dot:Na,equalScalar:wi,matrix:Ts,multiplyScalar:Ui,typed:Xr}),qa=(0,Kt.s)({Complex:Er,config:r.$,divideScalar:Hs,typed:Xr}),La=(0,Xt.M)({DenseMatrix:Vr,concat:zs,equalScalar:wi,matrix:Ts,typed:Xr}),za=(0,en.X)({compare:va,isNaN:fs,isNumeric:Ms,typed:Xr}),Ua=(0,tn.n)({DenseMatrix:Vr,concat:zs,equalScalar:wi,matrix:Ts,typed:Xr,zeros:ks}),Ga=(0,nn.H)({SparseMatrix:Xi,abs:ti,add:da,divideScalar:Hs,larger:_a,largerEq:Js,multiply:ka,subtract:ca,transpose:Fs,typed:Xr}),$a=(0,rn.$)({add:da,matrix:Ts,typed:Xr,zeros:ks}),Ha=(0,sn.i)({add:da,config:r.$,numeric:_s,typed:Xr}),Wa=(0,an.s)({add:da,matrix:Ts,typed:Xr}),Va=(0,on.m)({DenseMatrix:Vr,divideScalar:Hs,equalScalar:wi,matrix:Ts,multiplyScalar:Ui,subtractScalar:rs,typed:Xr}),Ya=(0,cn.S)({Complex:Er,add:da,multiply:ka,number:$i,typed:Xr}),Qa=(0,un.K)({DenseMatrix:Vr,config:r.$,equalScalar:wi,matrix:Ts,round:aa,typed:Xr,zeros:ks}),Za=(0,ln.b)({compare:va,typed:Xr}),Ja=(0,hn.z)({addScalar:si,combinations:mi,isInteger:Ii,isNegative:Bi,isPositive:Ri,larger:_a,typed:Xr}),Ka=(0,pn.x)({matrix:Ts,multiply:ka,subtract:ca,typed:Xr}),Xa=(0,dn.k)({divideScalar:Hs,isZero:Fi,matrix:Ts,multiply:ka,subtractScalar:rs,typed:Xr,unaryMinus:As}),eo=(0,fn.S)({concat:zs,equalScalar:wi,matrix:Ts,multiplyScalar:Ui,typed:Xr}),to=(0,mn.B)({larger:_a,smaller:oa}),no=(0,gn.Y)({Complex:Er,DenseMatrix:Vr,ceil:Qa,equalScalar:wi,floor:Ea,matrix:Ts,typed:Xr,zeros:ks}),ro=(0,yn.z)({Index:Pa,typed:Xr}),io=(0,xn.s)({abs:ti,add:da,addScalar:si,config:r.$,divideScalar:Hs,equalScalar:wi,flatten:Ei,isNumeric:Ms,isZero:Fi,matrix:Ts,multiply:ka,multiplyScalar:Ui,smaller:oa,subtract:ca,typed:Xr}),so=(0,vn.o)({BigNumber:Cr,add:da,config:r.$,equal:Vs,isInteger:Ii,mod:ja,smaller:oa,typed:Xr,xgcd:js}),ao=(0,bn.D)({concat:zs,equalScalar:wi,matrix:Ts,typed:Xr}),oo=(0,Dn.s)({Complex:Er,config:r.$,divideScalar:Hs,log:Ia,typed:Xr}),co=(0,wn.p)({config:r.$,larger:_a,numeric:_s,typed:Xr}),uo=(0,An.v)({DenseMatrix:Vr,Index:Pa,compareNatural:Za,size:Rs,subset:$a,typed:Xr}),lo=(0,Sn.Z)({DenseMatrix:Vr,Index:Pa,compareNatural:Za,size:Rs,subset:$a,typed:Xr}),ho=(0,Nn.P)({Index:Pa,compareNatural:Za,size:Rs,subset:$a,typed:Xr}),po=(0,Cn.Y)({Index:Pa,compareNatural:Za,size:Rs,subset:$a,typed:Xr}),fo=(0,En.V)({DenseMatrix:Vr,concat:zs,config:r.$,matrix:Ts,typed:Xr}),mo=(0,Mn.V)({compare:va,compareNatural:Za,matrix:Ts,typed:Xr}),go=(0,Tn.K)({DenseMatrix:Vr,concat:zs,config:r.$,equalScalar:wi,matrix:Ts,typed:Xr}),yo=(0,On.i)({concat:zs,equalScalar:wi,matrix:Ts,not:Gi,typed:Xr,zeros:ks}),xo=(0,Pn.S)({bignumber:ls,matrix:Ts,add:da,config:r.$,isPositive:Ri,larger:_a,largerEq:Js,smaller:oa,smallerEq:fo,typed:Xr}),vo=(0,_n.R)({Index:Pa,matrix:Ts,range:xo,typed:Xr}),bo=(0,In.e)({DenseMatrix:Vr,Index:Pa,compareNatural:Za,size:Rs,subset:$a,typed:Xr}),Do=(0,Bn.C)({Index:Pa,compareNatural:Za,size:Rs,subset:$a,typed:Xr}),wo=(0,Rn.l)({Index:Pa,concat:zs,setDifference:bo,size:Rs,subset:$a,typed:Xr}),Ao=(0,Fn.Z)({FibonacciHeap:to,addScalar:si,equalScalar:wi}),So=(0,jn.H)({Index:Pa,matrix:Ts,range:xo,typed:Xr}),No=(0,kn.K)({abs:ti,addScalar:si,det:Xa,divideScalar:Hs,identity:Qs,matrix:Ts,multiply:ka,typed:Xr,unaryMinus:As}),Co=(0,qn.o)({DenseMatrix:Vr,Spa:Ao,SparseMatrix:Xi,abs:ti,addScalar:si,divideScalar:Hs,equalScalar:wi,larger:_a,matrix:Ts,multiplyScalar:Ui,subtractScalar:rs,typed:Xr,unaryMinus:As}),Eo=(0,Ln.w)({Complex:Er,add:da,ctranspose:Gs,deepEqual:wa,divideScalar:Hs,dot:Na,dotDivide:Ws,equal:Vs,inv:No,matrix:Ts,multiply:ka,typed:Xr}),Mo=(0,zn.V)({Complex:Er,config:r.$,fraction:Es,identity:Qs,inv:No,matrix:Ts,multiply:ka,number:$i,typed:Xr}),To=(0,Un.e)({DenseMatrix:Vr,Index:Pa,compareNatural:Za,size:Rs,subset:$a,typed:Xr}),Oo=(0,Gn.s)({Index:Pa,concat:zs,setIntersect:To,setSymDifference:wo,size:Rs,subset:$a,typed:Xr}),Po=(0,$n.y)({abs:ti,add:da,identity:Qs,inv:No,map:zi,max:co,multiply:ka,size:Rs,sqrt:bs,subtract:ca,typed:Xr}),_o=(0,Hn.d)({BigNumber:Cr,Complex:Er,Fraction:Pr,abs:ti,addScalar:si,config:r.$,divideScalar:Hs,equal:Vs,fix:no,format:Ti,isNumeric:Ms,multiplyScalar:Ui,number:$i,pow:Mo,round:aa,subtractScalar:rs}),Io=(0,o.AW)({BigNumber:Cr,Unit:_o,config:r.$}),Bo=(0,o.Lz)({BigNumber:Cr,Unit:_o,config:r.$}),Ro=(0,o.Kw)({BigNumber:Cr,Unit:_o,config:r.$}),Fo=(0,o.XS)({BigNumber:Cr,Unit:_o,config:r.$}),jo=(0,o.UK)({BigNumber:Cr,Unit:_o,config:r.$}),ko=(0,o.VK)({BigNumber:Cr,Unit:_o,config:r.$}),qo=(0,o.w$)({BigNumber:Cr,Unit:_o,config:r.$}),Lo=(0,o.zr)({BigNumber:Cr,Unit:_o,config:r.$}),zo=(0,Wn.U)({DenseMatrix:Vr,concat:zs,equalScalar:wi,matrix:Ts,pow:Mo,typed:Xr}),Uo=(0,o.eb)({BigNumber:Cr,Unit:_o,config:r.$}),Go=(0,o.v2)({BigNumber:Cr,Unit:_o,config:r.$}),$o=(0,Vn.H)({abs:ti,add:da,identity:Qs,inv:No,multiply:ka,typed:Xr}),Ho=(0,o.Dp)({BigNumber:Cr,Unit:_o,config:r.$}),Wo=(0,Yn.H)({addScalar:si,ceil:Qa,conj:yi,divideScalar:Hs,dotDivide:Ws,exp:Si,i:_r,log2:Li,matrix:Ts,multiplyScalar:Ui,pow:Mo,tau:$r,typed:Xr}),Vo=(0,Qn.M)({BigNumber:Cr,Complex:Er,config:r.$,multiplyScalar:Ui,pow:Mo,typed:Xr}),Yo=(0,o.tP)({BigNumber:Cr,Unit:_o,config:r.$}),Qo=(0,o.oL)({BigNumber:Cr,Unit:_o,config:r.$}),Zo=(0,Zn.C)({conj:yi,dotDivide:Ws,fft:Wo,typed:Xr}),Jo=(0,o.$L)({BigNumber:Cr,Unit:_o,config:r.$}),Ko=(0,o.Cc)({BigNumber:Cr,Unit:_o,config:r.$}),Xo=(0,o.Rd)({BigNumber:Cr,Unit:_o,config:r.$}),ec=(0,o.e0)({BigNumber:Cr,Unit:_o,config:r.$}),tc=(0,o.hy)({BigNumber:Cr,Unit:_o,config:r.$}),nc=(0,o.Wq)({BigNumber:Cr,Unit:_o,config:r.$}),rc=(0,o.EE)({BigNumber:Cr,Unit:_o,config:r.$}),ic=(0,o.aE)({BigNumber:Cr,Unit:_o,config:r.$}),sc=(0,o.qU)({BigNumber:Cr,Unit:_o,config:r.$}),ac=(0,o._F)({BigNumber:Cr,Unit:_o,config:r.$}),oc=(0,o.jh)({BigNumber:Cr,Unit:_o,config:r.$}),cc=(0,o._7)({BigNumber:Cr,Unit:_o,config:r.$}),uc=(0,o.y0)({BigNumber:Cr,Unit:_o,config:r.$}),lc=(0,o.QE)({BigNumber:Cr,Unit:_o,config:r.$}),hc=(0,o.cr)({BigNumber:Cr,Unit:_o,config:r.$}),pc=(0,o.Lg)({BigNumber:Cr,Unit:_o,config:r.$}),dc=(0,o.zy)({BigNumber:Cr,Unit:_o,config:r.$}),fc=(0,o.wp)({BigNumber:Cr,Unit:_o,config:r.$}),mc=(0,o.Gj)({BigNumber:Cr,Unit:_o,config:r.$}),gc=(0,o.cC)({BigNumber:Cr,Unit:_o,config:r.$}),yc=(0,Jn.J)({Unit:_o,typed:Xr}),xc=(0,Kn.G)({divideScalar:Hs,equalScalar:wi,inv:No,matrix:Ts,multiply:ka,typed:Xr}),vc=(0,o.dd)({BigNumber:Cr,Unit:_o,config:r.$}),bc=(0,Xn.w)({gamma:Vo,typed:Xr}),Dc=(0,o.qQ)({BigNumber:Cr,Unit:_o,config:r.$}),wc=(0,o.Tx)({BigNumber:Cr,Unit:_o,config:r.$}),Ac=(0,o.rg)({BigNumber:Cr,Unit:_o,config:r.$}),Sc=(0,er.b)({DenseMatrix:Vr,lsolve:Xs,lup:Co,matrix:Ts,slu:Ga,typed:Xr,usolve:ha}),Nc=(0,o.DT)({BigNumber:Cr,Unit:_o,config:r.$}),Cc=(0,o.KV)({BigNumber:Cr,Unit:_o,config:r.$}),Ec=(0,tr.k)({add:da,divide:xc,factorial:bc,isInteger:Ii,isPositive:Ri,multiply:ka,typed:Xr}),Mc=(0,nr.U)({factorial:bc,typed:Xr}),Tc=(0,o.cn)({BigNumber:Cr,Unit:_o,config:r.$}),Oc=(0,rr.r)({add:da,cbrt:Ls,divide:xc,equalScalar:wi,im:_i,isZero:Fi,multiply:ka,re:Qi,sqrt:bs,subtract:ca,typeOf:ss,typed:Xr,unaryMinus:As}),Pc=(0,ir.G)({compareNatural:Za,typed:Xr}),_c=(0,sr.c)({abs:ti,add:da,bignumber:ls,divide:xc,isNegative:Bi,isPositive:Ri,larger:_a,map:zi,matrix:Ts,max:co,multiply:ka,smaller:oa,subtract:ca,typed:Xr,unaryMinus:As}),Ic=(0,ar.w)({bignumber:ls,addScalar:si,combinations:mi,divideScalar:Hs,factorial:bc,isInteger:Ii,isNegative:Bi,larger:_a,multiplyScalar:Ui,number:$i,pow:Mo,subtractScalar:rs,typed:Xr}),Bc=(0,or.n)({Unit:_o,typed:Xr}),Rc=(0,cr.e)({addScalar:si,isInteger:Ii,isNegative:Bi,stirlingS2:Ic,typed:Xr}),Fc=(0,ur.f)({abs:ti,add:da,addScalar:si,atan:ui,bignumber:ls,column:So,complex:gi,config:r.$,cos:xi,diag:$s,divideScalar:Hs,dot:Na,equal:Vs,flatten:Ei,im:_i,inv:No,larger:_a,matrix:Ts,matrixFromColumns:ea,multiply:ka,multiplyScalar:Ui,number:$i,qr:ra,re:Qi,reshape:Bs,sin:Ki,size:Rs,smaller:oa,sqrt:bs,subtract:ca,typed:Xr,usolve:ha,usolveAll:Va}),jc=(0,o.Dc)({BigNumber:Cr,Unit:_o,config:r.$}),kc=(0,o.Ik)({BigNumber:Cr,Unit:_o,config:r.$}),qc=(0,lr.u)({divide:xc,dotDivide:Ws,isNumeric:Ms,log:Ia,map:zi,matrix:Ts,multiply:ka,sum:Ha,typed:Xr}),Lc=(0,hr.s)({add:da,divide:xc,typed:Xr}),zc=(0,o.u5)({BigNumber:Cr,Unit:_o,config:r.$}),Uc=(0,o.Og)({BigNumber:Cr,Unit:_o,config:r.$}),Gc=(0,pr.D)({bignumber:ls,add:da,compare:va,divide:xc,isInteger:Ii,larger:_a,multiply:ka,partitionSelect:za,smaller:oa,smallerEq:fo,subtract:ca,typed:Xr}),$c=(0,dr.A)({add:da,apply:cs,divide:xc,isNaN:fs,multiply:ka,subtract:ca,typed:Xr}),Hc=(0,o.WX)({BigNumber:Cr,Unit:_o,config:r.$}),Wc=(0,fr.h)({add:da,compare:va,divide:xc,partitionSelect:za,typed:Xr}),Vc=(0,mr.r)({add:da,divide:xc,matrix:Ts,mean:Lc,multiply:ka,pow:Mo,sqrt:bs,subtract:ca,sum:Ha,typed:Xr}),Yc=(0,gr.$)({Complex:Er,add:da,divide:xc,matrix:Ts,multiply:ka,typed:Xr}),Qc=(0,yr.p)({abs:ti,map:zi,median:Wc,subtract:ca,typed:Xr}),Zc=(0,xr.y)({map:zi,sqrt:bs,typed:Xr,variance:$c}),Jc=(0,vr.b)({BigNumber:Cr,Complex:Er,add:da,config:r.$,divide:xc,equal:Vs,factorial:bc,gamma:Vo,isNegative:Bi,multiply:ka,pi:Zr,pow:Mo,sin:Ki,smallerEq:fo,subtract:ca,typed:Xr}),Kc=(0,br.X)({abs:ti,add:da,conj:yi,ctranspose:Gs,eigs:Fc,equalScalar:wi,larger:_a,matrix:Ts,multiply:ka,pow:Mo,smaller:oa,sqrt:bs,typed:Xr}),Xc=(0,Dr.m)({BigNumber:Cr,DenseMatrix:Vr,SparseMatrix:Xi,addScalar:si,config:r.$,cos:xi,matrix:Ts,multiplyScalar:Ui,norm:Kc,sin:Ki,typed:Xr,unaryMinus:As}),eu=(0,o.TT)({BigNumber:Cr,Unit:_o,config:r.$}),tu=(0,wr.u)({identity:Qs,matrix:Ts,multiply:ka,norm:Kc,qr:ra,subtract:ca,typed:Xr}),nu=(0,Ar.S)({multiply:ka,rotationMatrix:Xc,typed:Xr}),ru=(0,Sr._)({abs:ti,add:da,concat:zs,identity:Qs,index:ro,lusolve:Sc,matrix:Ts,matrixFromColumns:ea,multiply:ka,range:xo,schur:tu,subset:$a,subtract:ca,transpose:Fs,typed:Xr}),iu=(0,Nr.L)({matrix:Ts,multiply:ka,sylvester:ru,transpose:Fs,typed:Xr})},928:(e,t,n)=>{"use strict";function r(e,t,n,i){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=n,this.max=i,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+n+(null!=i?"-"+i:"")+" expected)",this.stack=(new Error).stack}n.d(t,{X:()=>r}),r.prototype=new Error,r.prototype.constructor=Error,r.prototype.name="ArgumentsError",r.prototype.isArgumentsError=!0},1380:(e,t,n)=>{"use strict";function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=(new Error).stack}n.d(t,{h:()=>r}),r.prototype=new RangeError,r.prototype.constructor=RangeError,r.prototype.name="DimensionError",r.prototype.isDimensionError=!0},6636:(e,t,n)=>{"use strict";function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}n.d(t,{d:()=>r}),r.prototype=new RangeError,r.prototype.constructor=RangeError,r.prototype.name="IndexError",r.prototype.isIndexError=!0},7741:(e,t,n)=>{"use strict";n.d(t,{G:()=>o});var r=n(4943),i=n(3140),s=n(760),a=["evaluate"],o=(0,n(8321).P9)("Help",a,(e=>{var{evaluate:t}=e;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!e)throw new Error('Argument "doc" missing');this.doc=e}return n.prototype.type="Help",n.prototype.isHelp=!0,n.prototype.toString=function(){var e=this.doc||{},n="\n";if(e.name&&(n+="Name: "+e.name+"\n\n"),e.category&&(n+="Category: "+e.category+"\n\n"),e.description&&(n+="Description:\n    "+e.description+"\n\n"),e.syntax&&(n+="Syntax:\n    "+e.syntax.join("\n    ")+"\n\n"),e.examples){n+="Examples:\n";for(var i=!1,a=t("config()"),o={config:e=>(i=!0,t("config(newConfig)",{newConfig:e}))},c=0;c<e.examples.length;c++){var u=e.examples[c];n+="    "+u+"\n";var l=void 0;try{l=t(u,o)}catch(e){l=e}void 0===l||(0,r.gS)(l)||(n+="        "+(0,s.GP)(l,{precision:14})+"\n")}n+="\n",i&&t("config(originalConfig)",{originalConfig:a})}return e.mayThrow&&e.mayThrow.length&&(n+="Throws: "+e.mayThrow.join(", ")+"\n\n"),e.seealso&&e.seealso.length&&(n+="See also: "+e.seealso.join(", ")+"\n"),n},n.prototype.toJSON=function(){var e=(0,i.o8)(this.doc);return e.mathjs="Help",e},n.fromJSON=function(e){var t={};return Object.keys(e).filter((e=>"mathjs"!==e)).forEach((n=>{t[n]=e[n]})),new n(t)},n.prototype.valueOf=n.prototype.toString,n}),{isClass:!0})},4165:(e,t,n)=>{"use strict";n.d(t,{m:()=>a});var r=n(8321),i=n(6905),s=["evaluate"],a=(0,r.P9)("Parser",s,(e=>{var{evaluate:t}=e;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:(0,i.A5)(),writable:!1})}return n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(e){return t(e,this.scope)},n.prototype.get=function(e){if(this.scope.has(e))return this.scope.get(e)},n.prototype.getAll=function(){return(0,i.vw)(this.scope)},n.prototype.getAllAsMap=function(){return this.scope},n.prototype.set=function(e,t){return this.scope.set(e,t),t},n.prototype.remove=function(e){this.scope.delete(e)},n.prototype.clear=function(){this.scope.clear()},n}),{isClass:!0})},9284:(e,t,n)=>{"use strict";n.d(t,{e:()=>s});var r={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},i={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},s={bignumber:{name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},bigint:{name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},boolean:{name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},complex:{name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},createUnit:{name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},fraction:{name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},index:{name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},matrix:{name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},number:{name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},sparse:{name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},splitUnit:{name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},string:{name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},unit:{name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},e:r,E:r,false:{name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},i:{name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},Infinity:{name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},LN2:{name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},LN10:{name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},LOG2E:{name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},LOG10E:{name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},NaN:{name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},null:{name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},pi:i,PI:i,phi:{name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},SQRT1_2:{name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},SQRT2:{name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},tau:{name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},true:{name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},version:{name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:{name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},lsolve:{name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},lsolveAll:{name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},lup:{name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},lusolve:{name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},leafCount:{name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},polynomialRoot:{name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},resolve:{name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},simplify:{name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},simplifyConstant:{name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},simplifyCore:{name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},symbolicEqual:{name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},rationalize:{name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},slu:{name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},usolve:{name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},usolveAll:{name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},qr:{name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},abs:{name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},add:{name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},cbrt:{name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},ceil:{name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},cube:{name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},divide:{name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},dotDivide:{name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},dotMultiply:{name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},dotPow:{name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},exp:{name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},expm:{name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},expm1:{name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},fix:{name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},floor:{name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},gcd:{name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},hypot:{name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},lcm:{name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},log:{name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},log2:{name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},log1p:{name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},log10:{name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},mod:{name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},multiply:{name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},norm:{name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},nthRoot:{name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},nthRoots:{name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},pow:{name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},round:{name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},sign:{name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},sqrt:{name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},sqrtm:{name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},square:{name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},subtract:{name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},unaryMinus:{name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},unaryPlus:{name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},xgcd:{name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},invmod:{name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax ≣ 1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},bitAnd:{name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitNot:{name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitOr:{name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},bitXor:{name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},leftShift:{name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},rightArithShift:{name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},rightLogShift:{name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},bellNumbers:{name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},catalan:{name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},composition:{name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},stirlingS2:{name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},config:{name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},import:{name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},typed:{name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},arg:{name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},conj:{name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},re:{name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},im:{name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},evaluate:{name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},help:{name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},distance:{name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},intersect:{name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},and:{name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},not:{name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},or:{name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},xor:{name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},concat:{name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},count:{name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},cross:{name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},column:{name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},ctranspose:{name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},det:{name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diag:{name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diff:{name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},dot:{name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},getMatrixDataType:{name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},identity:{name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},filter:{name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},flatten:{name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},forEach:{name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},inv:{name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},pinv:{name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the Moore–Penrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},eigs:{name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},kron:{name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},matrixFromFunction:{name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},matrixFromRows:{name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},matrixFromColumns:{name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},map:{name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},ones:{name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},partitionSelect:{name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},range:{name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},resize:{name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},reshape:{name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},rotate:{name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},rotationMatrix:{name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},row:{name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},size:{name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},sort:{name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},squeeze:{name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},subset:{name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},trace:{name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},transpose:{name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},zeros:{name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},fft:{name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},ifft:{name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},sylvester:{name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},schur:{name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},lyap:{name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},solveODE:{name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},combinations:{name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},combinationsWithRep:{name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},factorial:{name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},gamma:{name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},kldivergence:{name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},lgamma:{name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},multinomial:{name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},permutations:{name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},pickRandom:{name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},random:{name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},randomInt:{name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},compare:{name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},compareNatural:{name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},compareText:{name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},deepEqual:{name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},equal:{name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},equalText:{name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},larger:{name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},largerEq:{name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},smaller:{name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},smallerEq:{name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},unequal:{name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},setCartesian:{name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},setDifference:{name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},setDistinct:{name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},setIntersect:{name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},setIsSubset:{name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},setMultiplicity:{name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},setPowerset:{name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},setSize:{name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},setSymDifference:{name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},setUnion:{name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},zpk2tf:{name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},freqz:{name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},erf:{name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},zeta:{name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},cumsum:{name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},mad:{name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},max:{name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},mean:{name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},median:{name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},min:{name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},mode:{name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},prod:{name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},quantileSeq:{name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:"Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. \n\nIn case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.",examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},std:{name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},sum:{name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},variance:{name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},corr:{name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},acos:{name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},acosh:{name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},acot:{name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},acoth:{name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},acsc:{name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},acsch:{name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},asec:{name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},asech:{name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},asin:{name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},asinh:{name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},atan:{name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},atanh:{name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},atan2:{name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},cos:{name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},cosh:{name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},cot:{name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},coth:{name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},csc:{name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},csch:{name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},sec:{name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},sech:{name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},sin:{name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},sinh:{name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},tan:{name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},tanh:{name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},to:{name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},clone:{name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},format:{name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},bin:{name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},oct:{name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},hex:{name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},isNaN:{name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isInteger:{name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isNegative:{name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},isNumeric:{name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},hasNumericValue:{name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},isPositive:{name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isPrime:{name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isZero:{name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},print:{name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},typeOf:{name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},numeric:{name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]}}},3192:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o});var r=n(6355),i=n(8321),s="compile",a=["typed","parse"],o=(0,i.P9)(s,a,(e=>{var{typed:t,parse:n}=e;return t(s,{string:function(e){return n(e).compile()},"Array | Matrix":function(e){return(0,r.Bl)(e,(function(e){return n(e).compile()}))}})}))},7578:(e,t,n)=>{"use strict";n.d(t,{u:()=>c});var r=n(6355),i=n(8321),s=n(6905),a="evaluate",o=["typed","parse"],c=(0,i.P9)(a,o,(e=>{var{typed:t,parse:n}=e;return t(a,{string:function(e){var t=(0,s.A5)();return n(e).compile().evaluate(t)},"string, Map | Object":function(e,t){return n(e).compile().evaluate(t)},"Array | Matrix":function(e){var t=(0,s.A5)();return(0,r.Bl)(e,(function(e){return n(e).compile().evaluate(t)}))},"Array | Matrix, Map | Object":function(e,t){return(0,r.Bl)(e,(function(e){return n(e).compile().evaluate(t)}))}})}))},2342:(e,t,n)=>{"use strict";n.d(t,{q:()=>u});var r=n(8321),i=n(9863),s=n(9284),a=n(3140),o="help",c=["typed","mathWithTransform","Help"],u=(0,r.P9)(o,c,(e=>{var{typed:t,mathWithTransform:n,Help:r}=e;return t(o,{any:function(e){var t,o=e;if("string"!=typeof e)for(t in n)if((0,a.mQ)(n,t)&&e===n[t]){o=t;break}var c=(0,i.HU)(s.e,o);if(!c){var u="function"==typeof o?o.name:o;throw new Error('No documentation found on "'+u+'"')}return new r(c)}})}))},4289:(e,t,n)=>{"use strict";n.d(t,{C:()=>a});var r=n(8321),i="parser",s=["typed","Parser"],a=(0,r.P9)(i,s,(e=>{var{typed:t,Parser:n}=e;return t(i,{"":function(){return new n}})}))},6534:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});var r=new Set(["end"])},9126:(e,t,n)=>{"use strict";n.d(t,{C:()=>l});var r=n(3693),i=n(4943),s=n(9863),a=n(8321),o=n(7985),c="AccessorNode",u=["subset","Node"],l=(0,a.P9)(c,u,(e=>{var{subset:t,Node:n}=e,a=(0,o.T)({subset:t});function u(e){return!((0,i.AS)(e)||(0,i.gO)(e)||(0,i.BA)(e)||(0,i.Px)(e)||(0,i.GJ)(e)||(0,i.tv)(e)||(0,i.li)(e))}class l extends n{constructor(e,t){if(super(),!(0,i.Ll)(e))throw new TypeError('Node expected for parameter "object"');if(!(0,i.$I)(t))throw new TypeError('IndexNode expected for parameter "index"');this.object=e,this.index=t}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return c}get isAccessorNode(){return!0}_compile(e,t){var n=this.object._compile(e,t),r=this.index._compile(e,t);if(this.index.isObjectProperty()){var i=this.index.getObjectProperty();return function(e,t,r){return(0,s.HU)(n(e,t,r),i)}}return function(e,t,i){var s=n(e,t,i),o=r(e,t,s);return a(s,o)}}forEach(e){e(this.object,"object",this),e(this.index,"index",this)}map(e){return new l(this._ifNode(e(this.object,"object",this)),this._ifNode(e(this.index,"index",this)))}clone(){return new l(this.object,this.index)}_toString(e){var t=this.object.toString(e);return u(this.object)&&(t="("+t+")"),t+this.index.toString(e)}_toHTML(e){var t=this.object.toHTML(e);return u(this.object)&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+this.index.toHTML(e)}_toTex(e){var t=this.object.toTex(e);return u(this.object)&&(t="\\left(' + object + '\\right)"),t+this.index.toTex(e)}toJSON(){return{mathjs:c,object:this.object,index:this.index}}static fromJSON(e){return new l(e.object,e.index)}}return r(l,"name",c),l}),{isClass:!0,isNode:!0})},1668:(e,t,n)=>{"use strict";n.d(t,{W:()=>u});var r=n(3693),i=n(4943),s=n(5838),a=n(8321),o="ArrayNode",c=["Node"],u=(0,a.P9)(o,c,(e=>{var{Node:t}=e;class n extends t{constructor(e){if(super(),this.items=e||[],!Array.isArray(this.items)||!this.items.every(i.Ll))throw new TypeError("Array containing Nodes expected")}get type(){return o}get isArrayNode(){return!0}_compile(e,t){var n=(0,s.Tj)(this.items,(function(n){return n._compile(e,t)}));if("Array"!==e.config.matrix){var r=e.matrix;return function(e,t,i){return r((0,s.Tj)(n,(function(n){return n(e,t,i)})))}}return function(e,t,r){return(0,s.Tj)(n,(function(n){return n(e,t,r)}))}}forEach(e){for(var t=0;t<this.items.length;t++)e(this.items[t],"items["+t+"]",this)}map(e){for(var t=[],r=0;r<this.items.length;r++)t[r]=this._ifNode(e(this.items[r],"items["+r+"]",this));return new n(t)}clone(){return new n(this.items.slice(0))}_toString(e){return"["+this.items.map((function(t){return t.toString(e)})).join(", ")+"]"}toJSON(){return{mathjs:o,items:this.items}}static fromJSON(e){return new n(e.items)}_toHTML(e){return'<span class="math-parenthesis math-square-parenthesis">[</span>'+this.items.map((function(t){return t.toHTML(e)})).join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(e){return function t(n,r){var s=n.some(i.gO)&&!n.every(i.gO),a=r||s,o=a?"&":"\\\\",c=n.map((function(n){return n.items?t(n.items,!r):n.toTex(e)})).join(o);return s||!a||a&&!r?"\\begin{bmatrix}"+c+"\\end{bmatrix}":c}(this.items,!1)}}return r(n,"name",o),n}),{isClass:!0,isNode:!0})},3876:(e,t,n)=>{"use strict";n.d(t,{y:()=>p});var r=n(3693),i=n(4943),s=n(9863),a=n(8321),o=n(7985),c=n(9943),u=n(261),l="AssignmentNode",h=["subset","?matrix","Node"],p=(0,a.P9)(l,h,(e=>{var{subset:t,matrix:n,Node:a}=e,h=(0,o.T)({subset:t}),p=function(e){var{subset:t,matrix:n}=e;return function(e,r,i){try{if(Array.isArray(e))return n(e).subset(r,i).valueOf().forEach(((t,n)=>{e[n]=t})),e;if(e&&"function"==typeof e.subset)return e.subset(r,i);if("string"==typeof e)return t(e,r,i);if("object"==typeof e){if(!r.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return(0,s.dL)(e,r.getObjectProperty(),i),e}throw new TypeError("Cannot apply index: unsupported type of object")}catch(e){throw(0,c.D)(e)}}}({subset:t,matrix:n});function d(e,t,n){t||(t="keep");var r=(0,u.t$)(e,t,n),i=(0,u.t$)(e.value,t,n);return"all"===t||null!==i&&i<=r}class f extends a{constructor(e,t,n){if(super(),this.object=e,this.index=n?t:null,this.value=n||t,!(0,i.li)(e)&&!(0,i.AS)(e))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if((0,i.li)(e)&&"end"===e.name)throw new Error('Cannot assign to symbol "end"');if(this.index&&!(0,i.$I)(this.index))throw new TypeError('IndexNode expected as "index"');if(!(0,i.Ll)(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return l}get isAssignmentNode(){return!0}_compile(e,t){var n=this.object._compile(e,t),r=this.index?this.index._compile(e,t):null,a=this.value._compile(e,t),o=this.object.name;if(this.index){if(this.index.isObjectProperty()){var c=this.index.getObjectProperty();return function(e,t,r){var i=n(e,t,r),o=a(e,t,r);return(0,s.dL)(i,c,o),o}}if((0,i.li)(this.object))return function(e,t,i){var s=n(e,t,i),c=a(e,t,i),u=r(e,t,s);return e.set(o,p(s,u,c)),c};var u=this.object.object._compile(e,t);if(this.object.index.isObjectProperty()){var l=this.object.index.getObjectProperty();return function(e,t,n){var i=u(e,t,n),o=(0,s.HU)(i,l),c=r(e,t,o),h=a(e,t,n);return(0,s.dL)(i,l,p(o,c,h)),h}}var d=this.object.index._compile(e,t);return function(e,t,n){var i=u(e,t,n),s=d(e,t,i),o=h(i,s),c=r(e,t,o),l=a(e,t,n);return p(i,s,p(o,c,l)),l}}if(!(0,i.li)(this.object))throw new TypeError("SymbolNode expected as object");return function(e,t,n){var r=a(e,t,n);return e.set(o,r),r}}forEach(e){e(this.object,"object",this),this.index&&e(this.index,"index",this),e(this.value,"value",this)}map(e){var t=this._ifNode(e(this.object,"object",this)),n=this.index?this._ifNode(e(this.index,"index",this)):null,r=this._ifNode(e(this.value,"value",this));return new f(t,n,r)}clone(){return new f(this.object,this.index,this.value)}_toString(e){var t=this.object.toString(e),n=this.index?this.index.toString(e):"",r=this.value.toString(e);return d(this,e&&e.parenthesis,e&&e.implicit)&&(r="("+r+")"),t+n+" = "+r}toJSON(){return{mathjs:l,object:this.object,index:this.index,value:this.value}}static fromJSON(e){return new f(e.object,e.index,e.value)}_toHTML(e){var t=this.object.toHTML(e),n=this.index?this.index.toHTML(e):"",r=this.value.toHTML(e);return d(this,e&&e.parenthesis,e&&e.implicit)&&(r='<span class="math-paranthesis math-round-parenthesis">(</span>'+r+'<span class="math-paranthesis math-round-parenthesis">)</span>'),t+n+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+r}_toTex(e){var t=this.object.toTex(e),n=this.index?this.index.toTex(e):"",r=this.value.toTex(e);return d(this,e&&e.parenthesis,e&&e.implicit)&&(r="\\left(".concat(r,"\\right)")),t+n+"="+r}}return r(f,"name",l),f}),{isClass:!0,isNode:!0})},4544:(e,t,n)=>{"use strict";n.d(t,{E:()=>u});var r=n(3693),i=n(4943),s=n(5838),a=n(8321),o="BlockNode",c=["ResultSet","Node"],u=(0,a.P9)(o,c,(e=>{var{ResultSet:t,Node:n}=e;class a extends n{constructor(e){if(super(),!Array.isArray(e))throw new Error("Array expected");this.blocks=e.map((function(e){var t=e&&e.node,n=!e||void 0===e.visible||e.visible;if(!(0,i.Ll)(t))throw new TypeError('Property "node" must be a Node');if("boolean"!=typeof n)throw new TypeError('Property "visible" must be a boolean');return{node:t,visible:n}}))}get type(){return o}get isBlockNode(){return!0}_compile(e,n){var r=(0,s.Tj)(this.blocks,(function(t){return{evaluate:t.node._compile(e,n),visible:t.visible}}));return function(e,n,i){var a=[];return(0,s.jJ)(r,(function(t){var r=t.evaluate(e,n,i);t.visible&&a.push(r)})),new t(a)}}forEach(e){for(var t=0;t<this.blocks.length;t++)e(this.blocks[t].node,"blocks["+t+"].node",this)}map(e){for(var t=[],n=0;n<this.blocks.length;n++){var r=this.blocks[n],i=this._ifNode(e(r.node,"blocks["+n+"].node",this));t[n]={node:i,visible:r.visible}}return new a(t)}clone(){var e=this.blocks.map((function(e){return{node:e.node,visible:e.visible}}));return new a(e)}_toString(e){return this.blocks.map((function(t){return t.node.toString(e)+(t.visible?"":";")})).join("\n")}toJSON(){return{mathjs:o,blocks:this.blocks}}static fromJSON(e){return new a(e.blocks)}_toHTML(e){return this.blocks.map((function(t){return t.node.toHTML(e)+(t.visible?"":'<span class="math-separator">;</span>')})).join('<span class="math-separator"><br /></span>')}_toTex(e){return this.blocks.map((function(t){return t.node.toTex(e)+(t.visible?"":";")})).join("\\;\\;\n")}}return r(a,"name",o),a}),{isClass:!0,isNode:!0})},4813:(e,t,n)=>{"use strict";n.d(t,{h:()=>u});var r=n(3693),i=n(4943),s=n(8321),a=n(261),o="ConditionalNode",c=["Node"],u=(0,s.P9)(o,c,(e=>{var{Node:t}=e;class n extends t{constructor(e,t,n){if(super(),!(0,i.Ll)(e))throw new TypeError("Parameter condition must be a Node");if(!(0,i.Ll)(t))throw new TypeError("Parameter trueExpr must be a Node");if(!(0,i.Ll)(n))throw new TypeError("Parameter falseExpr must be a Node");this.condition=e,this.trueExpr=t,this.falseExpr=n}get type(){return o}get isConditionalNode(){return!0}_compile(e,t){var n=this.condition._compile(e,t),r=this.trueExpr._compile(e,t),s=this.falseExpr._compile(e,t);return function(e,t,a){return function(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e)return!!e;if(e){if((0,i.C4)(e))return!e.isZero();if((0,i.Zd)(e))return!(!e.re&&!e.im);if((0,i.vO)(e))return!!e.value}if(null==e)return!1;throw new TypeError('Unsupported type of condition "'+(0,i.QP)(e)+'"')}(n(e,t,a))?r(e,t,a):s(e,t,a)}}forEach(e){e(this.condition,"condition",this),e(this.trueExpr,"trueExpr",this),e(this.falseExpr,"falseExpr",this)}map(e){return new n(this._ifNode(e(this.condition,"condition",this)),this._ifNode(e(this.trueExpr,"trueExpr",this)),this._ifNode(e(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=(0,a.t$)(this,t,e&&e.implicit),r=this.condition.toString(e),i=(0,a.t$)(this.condition,t,e&&e.implicit);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=n)&&(r="("+r+")");var s=this.trueExpr.toString(e),o=(0,a.t$)(this.trueExpr,t,e&&e.implicit);("all"===t||"OperatorNode"===this.trueExpr.type||null!==o&&o<=n)&&(s="("+s+")");var c=this.falseExpr.toString(e),u=(0,a.t$)(this.falseExpr,t,e&&e.implicit);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==u&&u<=n)&&(c="("+c+")"),r+" ? "+s+" : "+c}toJSON(){return{mathjs:o,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(e){return new n(e.condition,e.trueExpr,e.falseExpr)}_toHTML(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=(0,a.t$)(this,t,e&&e.implicit),r=this.condition.toHTML(e),i=(0,a.t$)(this.condition,t,e&&e.implicit);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=n)&&(r='<span class="math-parenthesis math-round-parenthesis">(</span>'+r+'<span class="math-parenthesis math-round-parenthesis">)</span>');var s=this.trueExpr.toHTML(e),o=(0,a.t$)(this.trueExpr,t,e&&e.implicit);("all"===t||"OperatorNode"===this.trueExpr.type||null!==o&&o<=n)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.falseExpr.toHTML(e),u=(0,a.t$)(this.falseExpr,t,e&&e.implicit);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==u&&u<=n)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),r+'<span class="math-operator math-conditional-operator">?</span>'+s+'<span class="math-operator math-conditional-operator">:</span>'+c}_toTex(e){return"\\begin{cases} {"+this.trueExpr.toTex(e)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(e)+"}\\\\{"+this.falseExpr.toTex(e)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return r(n,"name",o),n}),{isClass:!0,isNode:!0})},7413:(e,t,n)=>{"use strict";n.d(t,{b:()=>l});var r=n(3693),i=n(760),s=n(4943),a=n(4139),o=n(8321),c="ConstantNode",u=["Node"],l=(0,o.P9)(c,u,(e=>{var{Node:t}=e;class n extends t{constructor(e){super(),this.value=e}get type(){return c}get isConstantNode(){return!0}_compile(e,t){var n=this.value;return function(){return n}}forEach(e){}map(e){return this.clone()}clone(){return new n(this.value)}_toString(e){return(0,i.GP)(this.value,e)}_toHTML(e){var t=this._toString(e);switch((0,s.QP)(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+t+"</span>";case"string":return'<span class="math-string">'+t+"</span>";case"boolean":return'<span class="math-boolean">'+t+"</span>";case"null":return'<span class="math-null-symbol">'+t+"</span>";case"undefined":return'<span class="math-undefined">'+t+"</span>";default:return'<span class="math-symbol">'+t+"</span>"}}toJSON(){return{mathjs:c,value:this.value}}static fromJSON(e){return new n(e.value)}_toTex(e){var t=this._toString(e),n=(0,s.QP)(this.value);switch(n){case"string":return"\\mathtt{"+(0,a.MA)(t)+"}";case"number":case"BigNumber":if(!("BigNumber"===n?this.value.isFinite():isFinite(this.value)))return this.value.valueOf()<0?"-\\infty":"\\infty";var r=t.toLowerCase().indexOf("e");return-1!==r?t.substring(0,r)+"\\cdot10^{"+t.substring(r+1)+"}":t;case"bigint":return t.toString();case"Fraction":return this.value.toLatex();default:return t}}}return r(n,"name",c),n}),{isClass:!0,isNode:!0})},1860:(e,t,n)=>{"use strict";n.d(t,{I:()=>d});var r=n(3693),i=n(4943),s=n(6534),a=n(760),o=n(5838),c=n(4139),u=n(261),l=n(8321),h="FunctionAssignmentNode",p=["typed","Node"],d=(0,l.P9)(h,p,(e=>{var{typed:t,Node:n}=e;function l(e,t,n){var r=(0,u.t$)(e,t,n),i=(0,u.t$)(e.expr,t,n);return"all"===t||null!==i&&i<=r}class p extends n{constructor(e,t,n){if(super(),"string"!=typeof e)throw new TypeError('String expected for parameter "name"');if(!Array.isArray(t))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!(0,i.Ll)(n))throw new TypeError('Node expected for parameter "expr"');if(s.R.has(e))throw new Error('Illegal function name, "'+e+'" is a reserved keyword');var r=new Set;for(var a of t){var o="string"==typeof a?a:a.name;if(r.has(o))throw new Error('Duplicate parameter name "'.concat(o,'"'));r.add(o)}this.name=e,this.params=t.map((function(e){return e&&e.name||e})),this.types=t.map((function(e){return e&&e.type||"any"})),this.expr=n}get type(){return h}get isFunctionAssignmentNode(){return!0}_compile(e,n){var r=Object.create(n);(0,o.jJ)(this.params,(function(e){r[e]=!0}));var i=this.expr._compile(e,r),s=this.name,a=this.params,c=(0,o.fj)(this.types,","),u=s+"("+(0,o.fj)(this.params,", ")+")";return function(e,n,r){var o={};o[c]=function(){for(var t=Object.create(n),s=0;s<a.length;s++)t[a[s]]=arguments[s];return i(e,t,r)};var l=t(s,o);return l.syntax=u,e.set(s,l),l}}forEach(e){e(this.expr,"expr",this)}map(e){var t=this._ifNode(e(this.expr,"expr",this));return new p(this.name,this.params.slice(0),t)}clone(){return new p(this.name,this.params.slice(0),this.expr)}_toString(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=this.expr.toString(e);return l(this,t,e&&e.implicit)&&(n="("+n+")"),this.name+"("+this.params.join(", ")+") = "+n}toJSON(){var e=this.types;return{mathjs:h,name:this.name,params:this.params.map((function(t,n){return{name:t,type:e[n]}})),expr:this.expr}}static fromJSON(e){return new p(e.name,e.params,e.expr)}_toHTML(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=[],r=0;r<this.params.length;r++)n.push('<span class="math-symbol math-parameter">'+(0,a.ih)(this.params[r])+"</span>");var i=this.expr.toHTML(e);return l(this,t,e&&e.implicit)&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+(0,a.ih)(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+n.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+i}_toTex(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=this.expr.toTex(e);return l(this,t,e&&e.implicit)&&(n="\\left(".concat(n,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(c.QP).join(",")+"\\right)="+n}}return r(p,"name",h),p}),{isClass:!0,isNode:!0})},561:(e,t,n)=>{"use strict";n.d(t,{N:()=>d});var r=n(3693),i=n(4943),s=n(760),a=n(3140),o=n(9863),c=n(8315),u=n(8321),l=n(4139),h="FunctionNode",p=["math","Node","SymbolNode"],d=(0,u.P9)(h,p,(e=>{var t,{math:n,Node:u,SymbolNode:p}=e,d=e=>(0,s.GP)(e,{truncate:78});function f(e,t,n){for(var r,s="",a=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,o=0;null!==(r=a.exec(e));)if(s+=e.substring(o,r.index),o=r.index,"$$"===r[0])s+="$",o++;else{o+=r[0].length;var c=t[r[1]];if(!c)throw new ReferenceError("Template: Property "+r[1]+" does not exist.");if(void 0===r[2])switch(typeof c){case"string":s+=c;break;case"object":if((0,i.Ll)(c))s+=c.toTex(n);else{if(!Array.isArray(c))throw new TypeError("Template: "+r[1]+" has to be a Node, String or array of Nodes");s+=c.map((function(e,t){if((0,i.Ll)(e))return e.toTex(n);throw new TypeError("Template: "+r[1]+"["+t+"] is not a Node.")})).join(",")}break;default:throw new TypeError("Template: "+r[1]+" has to be a Node, String or array of Nodes")}else{if(!(0,i.Ll)(c[r[2]]&&c[r[2]]))throw new TypeError("Template: "+r[1]+"["+r[2]+"] is not a Node.");s+=c[r[2]].toTex(n)}}return s+e.slice(o)}class m extends u{constructor(e,t){if(super(),"string"==typeof e&&(e=new p(e)),!(0,i.Ll)(e))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(t)||!t.every(i.Ll))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=e,this.args=t||[]}get name(){return this.fn.name||""}get type(){return h}get isFunctionNode(){return!0}_compile(e,t){var n=this.args.map((n=>n._compile(e,t)));if(!(0,i.li)(this.fn)){if((0,i.AS)(this.fn)&&(0,i.$I)(this.fn.index)&&this.fn.index.isObjectProperty()){var r=this.fn.object._compile(e,t),s=this.fn.index.getObjectProperty(),a=this.args;return function(t,i,u){var l=r(t,i,u),h=(0,o.z_)(l,s);if(null!=h&&h.rawArgs)return h(a,e,(0,c.n)(t,i));var p=n.map((e=>e(t,i,u)));return h.apply(l,p)}}var u=this.fn.toString(),l=this.fn._compile(e,t),h=this.args;return function(t,r,i){var s=l(t,r,i);if("function"!=typeof s)throw new TypeError("Expression '".concat(u,"' did not evaluate to a function; value is:")+"\n  ".concat(d(s)));if(s.rawArgs)return s(h,e,(0,c.n)(t,r));var a=n.map((e=>e(t,r,i)));return s.apply(s,a)}}var p=this.fn.name;if(t[p]){var f=this.args;return function(t,r,i){var s=(0,o.HU)(r,p);if("function"!=typeof s)throw new TypeError("Argument '".concat(p,"' was not a function; received: ").concat(d(s)));if(s.rawArgs)return s(f,e,(0,c.n)(t,r));var a=n.map((e=>e(t,r,i)));return s.apply(s,a)}}var g=p in e?(0,o.HU)(e,p):void 0,y="function"==typeof g&&!0===g.rawArgs,x=t=>{var n;if(t.has(p))n=t.get(p);else{if(!(p in e))return m.onUndefinedFunction(p);n=(0,o.HU)(e,p)}if("function"==typeof n)return n;throw new TypeError("'".concat(p,"' is not a function; its value is:\n  ").concat(d(n)))};if(y){var v=this.args;return function(t,r,i){var s=x(t);return!0===s.rawArgs?s(v,e,(0,c.n)(t,r)):s(...n.map((e=>e(t,r,i))))}}switch(n.length){case 0:return function(e,t,n){return x(e)()};case 1:return function(e,t,r){return x(e)((0,n[0])(e,t,r))};case 2:return function(e,t,r){var i=x(e),s=n[0],a=n[1];return i(s(e,t,r),a(e,t,r))};default:return function(e,t,r){return x(e)(...n.map((n=>n(e,t,r))))}}}forEach(e){e(this.fn,"fn",this);for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)}map(e){for(var t=this._ifNode(e(this.fn,"fn",this)),n=[],r=0;r<this.args.length;r++)n[r]=this._ifNode(e(this.args[r],"args["+r+"]",this));return new m(t,n)}clone(){return new m(this.fn,this.args.slice(0))}toString(e){var t,n=this.fn.toString(e);return e&&"object"==typeof e.handler&&(0,a.mQ)(e.handler,n)&&(t=e.handler[n](this,e)),void 0!==t?t:super.toString(e)}_toString(e){var t=this.args.map((function(t){return t.toString(e)}));return((0,i.m2)(this.fn)?"("+this.fn.toString(e)+")":this.fn.toString(e))+"("+t.join(", ")+")"}toJSON(){return{mathjs:h,fn:this.fn,args:this.args}}_toHTML(e){var t=this.args.map((function(t){return t.toHTML(e)}));return'<span class="math-function">'+(0,s.ih)(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(e){var t;return e&&"object"==typeof e.handler&&(0,a.mQ)(e.handler,this.name)&&(t=e.handler[this.name](this,e)),void 0!==t?t:super.toTex(e)}_toTex(e){var t,r,i=this.args.map((function(t){return t.toTex(e)}));switch(l.WC[this.name]&&(t=l.WC[this.name]),!n[this.name]||"function"!=typeof n[this.name].toTex&&"object"!=typeof n[this.name].toTex&&"string"!=typeof n[this.name].toTex||(t=n[this.name].toTex),typeof t){case"function":r=t(this,e);break;case"string":r=f(t,this,e);break;case"object":switch(typeof t[i.length]){case"function":r=t[i.length](this,e);break;case"string":r=f(t[i.length],this,e)}}return void 0!==r?r:f(l.oB,this,e)}getIdentifier(){return this.type+":"+this.name}}return t=m,r(m,"name",h),r(m,"onUndefinedFunction",(function(e){throw new Error("Undefined function "+e)})),r(m,"fromJSON",(function(e){return new t(e.fn,e.args)})),m}),{isClass:!0,isNode:!0})},5937:(e,t,n)=>{"use strict";n.d(t,{r:()=>h});var r=n(3693),i=n(5838),s=n(9863),a=n(8321),o=n(4943),c=n(760),u="IndexNode",l=["Node","size"],h=(0,a.P9)(u,l,(e=>{var{Node:t,size:n}=e;class a extends t{constructor(e,t){if(super(),this.dimensions=e,this.dotNotation=t||!1,!Array.isArray(e)||!e.every(o.Ll))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return u}get isIndexNode(){return!0}_compile(e,t){var r=(0,i.Tj)(this.dimensions,(function(r,i){if(r.filter((e=>e.isSymbolNode&&"end"===e.name)).length>0){var s=Object.create(t);s.end=!0;var a=r._compile(e,s);return function(e,t,r){if(!(0,o.OA)(r)&&!(0,o.cy)(r)&&!(0,o.Kg)(r))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+(0,o.QP)(r));var s=n(r).valueOf(),c=Object.create(t);return c.end=s[i],a(e,c,r)}}return r._compile(e,t)})),a=(0,s.HU)(e,"index");return function(e,t,n){var s=(0,i.Tj)(r,(function(r){return r(e,t,n)}));return a(...s)}}forEach(e){for(var t=0;t<this.dimensions.length;t++)e(this.dimensions[t],"dimensions["+t+"]",this)}map(e){for(var t=[],n=0;n<this.dimensions.length;n++)t[n]=this._ifNode(e(this.dimensions[n],"dimensions["+n+"]",this));return new a(t,this.dotNotation)}clone(){return new a(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return 1===this.dimensions.length&&(0,o.BA)(this.dimensions[0])&&"string"==typeof this.dimensions[0].value}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(e){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:u,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(e){return new a(e.dimensions,e.dotNotation)}_toHTML(e){for(var t=[],n=0;n<this.dimensions.length;n++)t[n]=this.dimensions[n].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+(0,c.ih)(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(e){var t=this.dimensions.map((function(t){return t.toTex(e)}));return this.dotNotation?"."+this.getObjectProperty():"_{"+t.join(",")+"}"}}return r(a,"name",u),a}),{isClass:!0,isNode:!0})},2613:(e,t,n)=>{"use strict";n.d(t,{R:()=>u});var r=n(4943),i=n(6534),s=n(3140),a=n(8321),o=n(6905),c=["mathWithTransform"],u=(0,a.P9)("Node",c,(e=>{var{mathWithTransform:t}=e;return class{get type(){return"Node"}get isNode(){return!0}evaluate(e){return this.compile().evaluate(e)}compile(){var e=this._compile(t,{}),n={};return{evaluate:function(t){var r=(0,o.pI)(t);return function(e){for(var t of[...i.R])if(e.has(t))throw new Error('Scope contains an illegal symbol, "'+t+'" is a reserved keyword')}(r),e(r,n,null)}}}_compile(e,t){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(e){throw new Error("Cannot run forEach on a Node interface")}map(e){throw new Error("Cannot run map on a Node interface")}_ifNode(e){if(!(0,r.Ll)(e))throw new TypeError("Callback function must return a Node");return e}traverse(e){e(this,null,null),function e(t,n){t.forEach((function(t,r,i){n(t,r,i),e(t,n)}))}(this,e)}transform(e){return function t(n,r,i){var s=e(n,r,i);return s!==n?s:n.map(t)}(this,null,null)}filter(e){var t=[];return this.traverse((function(n,r,i){e(n,r,i)&&t.push(n)})),t}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map((function(e){return e.cloneDeep()}))}equals(e){return!!e&&this.type===e.type&&(0,s.QO)(this,e)}toString(e){var t=this._getCustomString(e);return void 0!==t?t:this._toString(e)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(e){var t=this._getCustomString(e);return void 0!==t?t:this._toHTML(e)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(e){var t=this._getCustomString(e);return void 0!==t?t:this._toTex(e)}_toTex(e){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(e){if(e&&"object"==typeof e)switch(typeof e.handler){case"object":case"undefined":return;case"function":return e.handler(this,e);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}}),{isClass:!0,isNode:!0})},5926:(e,t,n)=>{"use strict";n.d(t,{Q:()=>h});var r=n(3693),i=n(9863),s=n(8321),a=n(4943),o=n(3140),c=n(760),u="ObjectNode",l=["Node"],h=(0,s.P9)(u,l,(e=>{var{Node:t}=e;class n extends t{constructor(e){if(super(),this.properties=e||{},e&&("object"!=typeof e||!Object.keys(e).every((function(t){return(0,a.Ll)(e[t])}))))throw new TypeError("Object containing Nodes expected")}get type(){return u}get isObjectNode(){return!0}_compile(e,t){var n={};for(var r in this.properties)if((0,o.mQ)(this.properties,r)){var s=(0,c.As)(r),a=JSON.parse(s),u=(0,i.HU)(this.properties,r);n[a]=u._compile(e,t)}return function(e,t,r){var i={};for(var s in n)(0,o.mQ)(n,s)&&(i[s]=n[s](e,t,r));return i}}forEach(e){for(var t in this.properties)(0,o.mQ)(this.properties,t)&&e(this.properties[t],"properties["+(0,c.As)(t)+"]",this)}map(e){var t={};for(var r in this.properties)(0,o.mQ)(this.properties,r)&&(t[r]=this._ifNode(e(this.properties[r],"properties["+(0,c.As)(r)+"]",this)));return new n(t)}clone(){var e={};for(var t in this.properties)(0,o.mQ)(this.properties,t)&&(e[t]=this.properties[t]);return new n(e)}_toString(e){var t=[];for(var n in this.properties)(0,o.mQ)(this.properties,n)&&t.push((0,c.As)(n)+": "+this.properties[n].toString(e));return"{"+t.join(", ")+"}"}toJSON(){return{mathjs:u,properties:this.properties}}static fromJSON(e){return new n(e.properties)}_toHTML(e){var t=[];for(var n in this.properties)(0,o.mQ)(this.properties,n)&&t.push('<span class="math-symbol math-property">'+(0,c.ih)(n)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[n].toHTML(e));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(e){var t=[];for(var n in this.properties)(0,o.mQ)(this.properties,n)&&t.push("\\mathbf{"+n+":} & "+this.properties[n].toTex(e)+"\\\\");return"\\left\\{\\begin{array}{ll}"+t.join("\n")+"\\end{array}\\right\\}"}}return r(n,"name",u),n}),{isClass:!0,isNode:!0})},6917:(e,t,n)=>{"use strict";n.d(t,{r:()=>f});var r=n(3693),i=n(4943),s=n(5838),a=n(8315),o=n(760),c=n(9863),u=n(261),l=n(4139),h=n(8321),p="OperatorNode",d=["Node"],f=(0,h.P9)(p,d,(e=>{var{Node:t}=e;function n(e,t){var r=e;if("auto"===t)for(;(0,i.tv)(r);)r=r.content;return!!(0,i.BA)(r)||!!(0,i.$$)(r)&&n(r.args[0],t)}function h(e,t,r,s,a){var o,c=(0,u.t$)(e,t,r),l=(0,u.dI)(e,t);if("all"===t||s.length>2&&"OperatorNode:add"!==e.getIdentifier()&&"OperatorNode:multiply"!==e.getIdentifier())return s.map((function(e){switch(e.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}}));switch(s.length){case 0:o=[];break;case 1:var h=(0,u.t$)(s[0],t,r,e);if(a&&null!==h){var p,d;if("keep"===t?(p=s[0].getIdentifier(),d=e.getIdentifier()):(p=s[0].getContent().getIdentifier(),d=e.getContent().getIdentifier()),!1===u.qo[c][d].latexLeftParens){o=[!1];break}if(!1===u.qo[h][p].latexParens){o=[!1];break}}if(null===h){o=[!1];break}if(h<=c){o=[!0];break}o=[!1];break;case 2:var f,m,g=(0,u.t$)(s[0],t,r,e),y=(0,u.U3)(e,s[0],t);f=null!==g&&(g===c&&"right"===l&&!y||g<c);var x,v,b,D=(0,u.t$)(s[1],t,r,e),w=(0,u.U3)(e,s[1],t);m=null!==D&&(D===c&&"left"===l&&!w||D<c),a&&("keep"===t?(x=e.getIdentifier(),v=e.args[0].getIdentifier(),b=e.args[1].getIdentifier()):(x=e.getContent().getIdentifier(),v=e.args[0].getContent().getIdentifier(),b=e.args[1].getContent().getIdentifier()),null!==g&&(!1===u.qo[c][x].latexLeftParens&&(f=!1),!1===u.qo[g][v].latexParens&&(f=!1)),null!==D&&(!1===u.qo[c][x].latexRightParens&&(m=!1),!1===u.qo[D][b].latexParens&&(m=!1))),o=[f,m];break;default:"OperatorNode:add"!==e.getIdentifier()&&"OperatorNode:multiply"!==e.getIdentifier()||(o=s.map((function(n){var i=(0,u.t$)(n,t,r,e),s=(0,u.U3)(e,n,t),a=(0,u.dI)(n,t);return null!==i&&(c===i&&l===a&&!s||i<c)})))}if(s.length>=2&&"OperatorNode:multiply"===e.getIdentifier()&&e.implicit&&"all"!==t&&"hide"===r)for(var A=1;A<o.length;++A)!n(s[A],t)||o[A-1]||"keep"===t&&(0,i.tv)(s[A-1])||(o[A]=!0);return o}class d extends t{constructor(e,t,n,r,s){if(super(),"string"!=typeof e)throw new TypeError('string expected for parameter "op"');if("string"!=typeof t)throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(n)||!n.every(i.Ll))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=!0===r,this.isPercentage=!0===s,this.op=e,this.fn=t,this.args=n||[]}get type(){return p}get isOperatorNode(){return!0}_compile(e,t){if("string"!=typeof this.fn||!(0,c.Tn)(e,this.fn))throw e[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var n=(0,c.HU)(e,this.fn),r=(0,s.Tj)(this.args,(function(n){return n._compile(e,t)}));if("function"==typeof n&&!0===n.rawArgs){var i=this.args;return function(t,r,s){return n(i,e,(0,a.n)(t,r))}}if(1===r.length){var o=r[0];return function(e,t,r){return n(o(e,t,r))}}if(2===r.length){var u=r[0],l=r[1];return function(e,t,r){return n(u(e,t,r),l(e,t,r))}}return function(e,t,i){return n.apply(null,(0,s.Tj)(r,(function(n){return n(e,t,i)})))}}forEach(e){for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)}map(e){for(var t=[],n=0;n<this.args.length;n++)t[n]=this._ifNode(e(this.args[n],"args["+n+"]",this));return new d(this.op,this.fn,t,this.implicit,this.isPercentage)}clone(){return new d(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return 1===this.args.length}isBinary(){return 2===this.args.length}_toString(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",r=this.args,i=h(this,t,n,r,!1);if(1===r.length){var s=(0,u.dI)(this,t),a=r[0].toString(e);i[0]&&(a="("+a+")");var o=/[a-zA-Z]+/.test(this.op);return"right"===s?this.op+(o?" ":"")+a:"left"===s?a+(o?" ":"")+this.op:a+this.op}if(2===r.length){var c=r[0].toString(e),l=r[1].toString(e);return i[0]&&(c="("+c+")"),i[1]&&(l="("+l+")"),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?c+" "+l:c+" "+this.op+" "+l}if(r.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var p=r.map((function(t,n){return t=t.toString(e),i[n]&&(t="("+t+")"),t}));return this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?p.join(" "):p.join(" "+this.op+" ")}return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:p,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(e){return new d(e.op,e.fn,e.args,e.implicit,e.isPercentage)}_toHTML(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",r=this.args,i=h(this,t,n,r,!1);if(1===r.length){var s=(0,u.dI)(this,t),a=r[0].toHTML(e);return i[0]&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),"right"===s?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+(0,o.ih)(this.op)+"</span>"+a:a+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+(0,o.ih)(this.op)+"</span>"}if(2===r.length){var c=r[0].toHTML(e),l=r[1].toHTML(e);return i[0]&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),i[1]&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?c+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+l:c+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+(0,o.ih)(this.op)+"</span>"+l}var p=r.map((function(t,n){return t=t.toHTML(e),i[n]&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t}));return r.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())?this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?p.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):p.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+(0,o.ih)(this.op)+"</span>"):'<span class="math-function">'+(0,o.ih)(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+p.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}_toTex(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",r=this.args,i=h(this,t,n,r,!0),s=l.GK[this.fn];if(s=void 0===s?this.op:s,1===r.length){var a=(0,u.dI)(this,t),o=r[0].toTex(e);return i[0]&&(o="\\left(".concat(o,"\\right)")),"right"===a?s+o:o+s}if(2===r.length){var c=r[0],p=c.toTex(e);i[0]&&(p="\\left(".concat(p,"\\right)"));var d,f=r[1].toTex(e);switch(i[1]&&(f="\\left(".concat(f,"\\right)")),d="keep"===t?c.getIdentifier():c.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return s+"{"+p+"}{"+f+"}";case"OperatorNode:pow":switch(p="{"+p+"}",f="{"+f+"}",d){case"ConditionalNode":case"OperatorNode:divide":p="\\left(".concat(p,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&"hide"===n)return p+"~"+f}return p+s+f}if(r.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var m=r.map((function(t,n){return t=t.toTex(e),i[n]&&(t="\\left(".concat(t,"\\right)")),t}));return"OperatorNode:multiply"===this.getIdentifier()&&this.implicit&&"hide"===n?m.join("~"):m.join(s)}return"\\mathrm{"+this.fn+"}\\left("+r.map((function(t){return t.toTex(e)})).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return r(d,"name",p),d}),{isClass:!0,isNode:!0})},9973:(e,t,n)=>{"use strict";n.d(t,{n:()=>c});var r=n(3693),i=n(4943),s=n(8321),a="ParenthesisNode",o=["Node"],c=(0,s.P9)(a,o,(e=>{var{Node:t}=e;class n extends t{constructor(e){if(super(),!(0,i.Ll)(e))throw new TypeError('Node expected for parameter "content"');this.content=e}get type(){return a}get isParenthesisNode(){return!0}_compile(e,t){return this.content._compile(e,t)}getContent(){return this.content.getContent()}forEach(e){e(this.content,"content",this)}map(e){var t=e(this.content,"content",this);return new n(t)}clone(){return new n(this.content)}_toString(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"("+this.content.toString(e)+")":this.content.toString(e)}toJSON(){return{mathjs:a,content:this.content}}static fromJSON(e){return new n(e.content)}_toHTML(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(e)}_toTex(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"\\left(".concat(this.content.toTex(e),"\\right)"):this.content.toTex(e)}}return r(n,"name",a),n}),{isClass:!0,isNode:!0})},2808:(e,t,n)=>{"use strict";n.d(t,{u:()=>u});var r=n(3693),i=n(4943),s=n(8321),a=n(261),o="RangeNode",c=["Node"],u=(0,s.P9)(o,c,(e=>{var{Node:t}=e;function n(e,t,n){var r=(0,a.t$)(e,t,n),i={},s=(0,a.t$)(e.start,t,n);if(i.start=null!==s&&s<=r||"all"===t,e.step){var o=(0,a.t$)(e.step,t,n);i.step=null!==o&&o<=r||"all"===t}var c=(0,a.t$)(e.end,t,n);return i.end=null!==c&&c<=r||"all"===t,i}class s extends t{constructor(e,t,n){if(super(),!(0,i.Ll)(e))throw new TypeError("Node expected");if(!(0,i.Ll)(t))throw new TypeError("Node expected");if(n&&!(0,i.Ll)(n))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=e,this.end=t,this.step=n||null}get type(){return o}get isRangeNode(){return!0}needsEnd(){return this.filter((function(e){return(0,i.li)(e)&&"end"===e.name})).length>0}_compile(e,t){var n=e.range,r=this.start._compile(e,t),i=this.end._compile(e,t);if(this.step){var s=this.step._compile(e,t);return function(e,t,a){return n(r(e,t,a),i(e,t,a),s(e,t,a))}}return function(e,t,s){return n(r(e,t,s),i(e,t,s))}}forEach(e){e(this.start,"start",this),e(this.end,"end",this),this.step&&e(this.step,"step",this)}map(e){return new s(this._ifNode(e(this.start,"start",this)),this._ifNode(e(this.end,"end",this)),this.step&&this._ifNode(e(this.step,"step",this)))}clone(){return new s(this.start,this.end,this.step&&this.step)}_toString(e){var t,r=n(this,e&&e.parenthesis?e.parenthesis:"keep",e&&e.implicit),i=this.start.toString(e);if(r.start&&(i="("+i+")"),t=i,this.step){var s=this.step.toString(e);r.step&&(s="("+s+")"),t+=":"+s}var a=this.end.toString(e);return r.end&&(a="("+a+")"),t+":"+a}toJSON(){return{mathjs:o,start:this.start,end:this.end,step:this.step}}static fromJSON(e){return new s(e.start,e.end,e.step)}_toHTML(e){var t,r=n(this,e&&e.parenthesis?e.parenthesis:"keep",e&&e.implicit),i=this.start.toHTML(e);if(r.start&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t=i,this.step){var s=this.step.toHTML(e);r.step&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+='<span class="math-operator math-range-operator">:</span>'+s}var a=this.end.toHTML(e);return r.end&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+'<span class="math-operator math-range-operator">:</span>'+a}_toTex(e){var t=n(this,e&&e.parenthesis?e.parenthesis:"keep",e&&e.implicit),r=this.start.toTex(e);if(t.start&&(r="\\left(".concat(r,"\\right)")),this.step){var i=this.step.toTex(e);t.step&&(i="\\left(".concat(i,"\\right)")),r+=":"+i}var s=this.end.toTex(e);return t.end&&(s="\\left(".concat(s,"\\right)")),r+":"+s}}return r(s,"name",o),s}),{isClass:!0,isNode:!0})},88:(e,t,n)=>{"use strict";n.d(t,{G:()=>h});var r=n(3693),i=n(261),s=n(760),a=n(9863),o=n(4139),c=n(8321),u="RelationalNode",l=["Node"],h=(0,c.P9)(u,l,(e=>{var{Node:t}=e,n={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class c extends t{constructor(e,t){if(super(),!Array.isArray(e))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(t))throw new TypeError("Parameter params must be an array");if(e.length!==t.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=e,this.params=t}get type(){return u}get isRelationalNode(){return!0}_compile(e,t){var n=this,r=this.params.map((n=>n._compile(e,t)));return function(t,i,s){for(var o,c=r[0](t,i,s),u=0;u<n.conditionals.length;u++)if(o=c,c=r[u+1](t,i,s),!(0,a.HU)(e,n.conditionals[u])(o,c))return!1;return!0}}forEach(e){this.params.forEach(((t,n)=>e(t,"params["+n+"]",this)),this)}map(e){return new c(this.conditionals.slice(),this.params.map(((t,n)=>this._ifNode(e(t,"params["+n+"]",this))),this))}clone(){return new c(this.conditionals,this.params)}_toString(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",r=(0,i.t$)(this,t,e&&e.implicit),s=this.params.map((function(n,s){var a=(0,i.t$)(n,t,e&&e.implicit);return"all"===t||null!==a&&a<=r?"("+n.toString(e)+")":n.toString(e)})),a=s[0],o=0;o<this.conditionals.length;o++)a+=" "+n[this.conditionals[o]],a+=" "+s[o+1];return a}toJSON(){return{mathjs:u,conditionals:this.conditionals,params:this.params}}static fromJSON(e){return new c(e.conditionals,e.params)}_toHTML(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",r=(0,i.t$)(this,t,e&&e.implicit),a=this.params.map((function(n,s){var a=(0,i.t$)(n,t,e&&e.implicit);return"all"===t||null!==a&&a<=r?'<span class="math-parenthesis math-round-parenthesis">(</span>'+n.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':n.toHTML(e)})),o=a[0],c=0;c<this.conditionals.length;c++)o+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+(0,s.ih)(n[this.conditionals[c]])+"</span>"+a[c+1];return o}_toTex(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=(0,i.t$)(this,t,e&&e.implicit),r=this.params.map((function(r,s){var a=(0,i.t$)(r,t,e&&e.implicit);return"all"===t||null!==a&&a<=n?"\\left("+r.toTex(e)+"\right)":r.toTex(e)})),s=r[0],a=0;a<this.conditionals.length;a++)s+=o.GK[this.conditionals[a]]+r[a+1];return s}}return r(c,"name",u),c}),{isClass:!0,isNode:!0})},245:(e,t,n)=>{"use strict";n.d(t,{F:()=>c});var r=n(760),i=n(9863),s=n(8321),a=n(4139),o=["math","?Unit","Node"],c=(0,s.P9)("SymbolNode",o,(e=>{var{math:t,Unit:n,Node:s}=e;function o(e){return!!n&&n.isValuelessUnit(e)}class c extends s{constructor(e){if(super(),"string"!=typeof e)throw new TypeError('String expected for parameter "name"');this.name=e}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(e,t){var r=this.name;if(!0===t[r])return function(e,t,n){return(0,i.HU)(t,r)};if(r in e)return function(t,n,s){return t.has(r)?t.get(r):(0,i.HU)(e,r)};var s=o(r);return function(e,t,i){return e.has(r)?e.get(r):s?new n(null,r):c.onUndefinedSymbol(r)}}forEach(e){}map(e){return this.clone()}static onUndefinedSymbol(e){throw new Error("Undefined symbol "+e)}clone(){return new c(this.name)}_toString(e){return this.name}_toHTML(e){var t=(0,r.ih)(this.name);return"true"===t||"false"===t?'<span class="math-symbol math-boolean">'+t+"</span>":"i"===t?'<span class="math-symbol math-imaginary-symbol">'+t+"</span>":"Infinity"===t?'<span class="math-symbol math-infinity-symbol">'+t+"</span>":"NaN"===t?'<span class="math-symbol math-nan-symbol">'+t+"</span>":"null"===t?'<span class="math-symbol math-null-symbol">'+t+"</span>":"undefined"===t?'<span class="math-symbol math-undefined-symbol">'+t+"</span>":'<span class="math-symbol">'+t+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(e){return new c(e.name)}_toTex(e){var n=!1;void 0===t[this.name]&&o(this.name)&&(n=!0);var r=(0,a.QP)(this.name,n);return"\\"===r[0]?r:" "+r}}return c}),{isClass:!0,isNode:!0})},7985:(e,t,n)=>{"use strict";n.d(t,{T:()=>s});var r=n(9943),i=n(9863);function s(e){var{subset:t}=e;return function(e,n){try{if(Array.isArray(e))return t(e,n);if(e&&"function"==typeof e.subset)return e.subset(n);if("string"==typeof e)return t(e,n);if("object"==typeof e){if(!n.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return(0,i.HU)(e,n.getObjectProperty())}throw new TypeError("Cannot apply index: unsupported type of object")}catch(e){throw(0,r.D)(e)}}}},261:(e,t,n)=>{"use strict";n.d(t,{F5:()=>l,U3:()=>u,dI:()=>c,qo:()=>s,t$:()=>o});var r=n(3140),i=n(4943),s=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function a(e,t){if(!t||"auto"!==t)return e;for(var n=e;(0,i.tv)(n);)n=n.content;return n}function o(e,t,n,r){var o=e;"keep"!==t&&(o=e.getContent());for(var c=o.getIdentifier(),u=null,l=0;l<s.length;l++)if(c in s[l]){u=l;break}if("OperatorNode:multiply"===c&&o.implicit&&"show"!==n){var h=a(o.args[0],t);(0,i.BA)(h)&&r&&"OperatorNode:divide"===r.getIdentifier()&&(0,i.jW)(a(r.args[0],t))||"OperatorNode:divide"===h.getIdentifier()&&(0,i.jW)(a(h.args[0],t))&&(0,i.BA)(a(h.args[1]))||(u+=1)}return u}function c(e,t){var n=e;"keep"!==t&&(n=e.getContent());var i=n.getIdentifier(),a=o(n,t);if(null===a)return null;var c=s[a][i];if((0,r.mQ)(c,"associativity")){if("left"===c.associativity)return"left";if("right"===c.associativity)return"right";throw Error("'"+i+"' has the invalid associativity '"+c.associativity+"'.")}return null}function u(e,t,n){var i="keep"!==n?e.getContent():e,a="keep"!==n?e.getContent():t,c=i.getIdentifier(),u=a.getIdentifier(),l=o(i,n);if(null===l)return null;var h=s[l][c];if((0,r.mQ)(h,"associativeWith")&&h.associativeWith instanceof Array){for(var p=0;p<h.associativeWith.length;p++)if(h.associativeWith[p]===u)return!0;return!1}return null}function l(e){var t="OperatorNode:"+e;for(var n of s)if(t in n)return n[t].op;return null}},7827:(e,t,n)=>{"use strict";n.d(t,{U:()=>h});var r=n(4634),i=n(8321),s=n(4943),a=n(6355),o=n(1106),c=n(3140),u="parse",l=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],h=(0,i.P9)(u,l,(e=>{var{typed:t,numeric:n,config:i,AccessorNode:l,ArrayNode:h,AssignmentNode:p,BlockNode:d,ConditionalNode:f,ConstantNode:m,FunctionAssignmentNode:g,FunctionNode:y,IndexNode:x,ObjectNode:v,OperatorNode:b,ParenthesisNode:D,RangeNode:w,RelationalNode:A,SymbolNode:S}=e,N=t(u,{string:function(e){return U(e,{})},"Array | Matrix":function(e){return C(e,{})},"string, Object":function(e,t){return U(e,void 0!==t.nodes?t.nodes:{})},"Array | Matrix, Object":C});function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0!==t.nodes?t.nodes:{};return(0,a.Bl)(e,(function(e){if("string"!=typeof e)throw new TypeError("String expected");return U(e,n)}))}var E={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},M={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},T={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},O={true:!0,false:!1,null:null,undefined:void 0},P=["NaN","Infinity"],_={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function I(e,t){return e.expression.substr(e.index,t)}function B(e){return I(e,1)}function R(e){e.index++}function F(e){return e.expression.charAt(e.index-1)}function j(e){return e.expression.charAt(e.index+1)}function k(e){for(e.tokenType=E.NULL,e.token="",e.comment="";;){if("#"===B(e))for(;"\n"!==B(e)&&""!==B(e);)e.comment+=B(e),R(e);if(!N.isWhitespace(B(e),e.nestingLevel))break;R(e)}if(""!==B(e)){if("\n"===B(e)&&!e.nestingLevel)return e.tokenType=E.DELIMITER,e.token=B(e),void R(e);var t=B(e),n=I(e,2),r=I(e,3);if(3===r.length&&M[r])return e.tokenType=E.DELIMITER,e.token=r,R(e),R(e),void R(e);if(2===n.length&&M[n])return e.tokenType=E.DELIMITER,e.token=n,R(e),void R(e);if(M[t])return e.tokenType=E.DELIMITER,e.token=t,void R(e);if(N.isDigitDot(t)){e.tokenType=E.NUMBER;var i=I(e,2);if("0b"===i||"0o"===i||"0x"===i){for(e.token+=B(e),R(e),e.token+=B(e),R(e);N.isHexDigit(B(e));)e.token+=B(e),R(e);if("."===B(e))for(e.token+=".",R(e);N.isHexDigit(B(e));)e.token+=B(e),R(e);else if("i"===B(e))for(e.token+="i",R(e);N.isDigit(B(e));)e.token+=B(e),R(e);return}if("."===B(e)){if(e.token+=B(e),R(e),!N.isDigit(B(e)))return void(e.tokenType=E.DELIMITER)}else{for(;N.isDigit(B(e));)e.token+=B(e),R(e);N.isDecimalMark(B(e),j(e))&&(e.token+=B(e),R(e))}for(;N.isDigit(B(e));)e.token+=B(e),R(e);if("E"===B(e)||"e"===B(e))if(N.isDigit(j(e))||"-"===j(e)||"+"===j(e)){if(e.token+=B(e),R(e),"+"!==B(e)&&"-"!==B(e)||(e.token+=B(e),R(e)),!N.isDigit(B(e)))throw ue(e,'Digit expected, got "'+B(e)+'"');for(;N.isDigit(B(e));)e.token+=B(e),R(e);if(N.isDecimalMark(B(e),j(e)))throw ue(e,'Digit expected, got "'+B(e)+'"')}else if("."===j(e))throw R(e),ue(e,'Digit expected, got "'+B(e)+'"')}else{if(!N.isAlpha(B(e),F(e),j(e))){for(e.tokenType=E.UNKNOWN;""!==B(e);)e.token+=B(e),R(e);throw ue(e,'Syntax error in part "'+e.token+'"')}for(;N.isAlpha(B(e),F(e),j(e))||N.isDigit(B(e));)e.token+=B(e),R(e);(0,c.mQ)(T,e.token)?e.tokenType=E.DELIMITER:e.tokenType=E.SYMBOL}}else e.tokenType=E.DELIMITER}function q(e){do{k(e)}while("\n"===e.token)}function L(e){e.nestingLevel++}function z(e){e.nestingLevel--}function U(e,t){var n={extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:E.NULL,nestingLevel:0,conditionalLevel:null};r(n,{expression:e,extraNodes:t}),k(n);var i=function(e){var t,n,r=[];for(""!==e.token&&"\n"!==e.token&&";"!==e.token&&(t=G(e),e.comment&&(t.comment=e.comment));"\n"===e.token||";"===e.token;)0===r.length&&t&&(n=";"!==e.token,r.push({node:t,visible:n})),k(e),"\n"!==e.token&&";"!==e.token&&""!==e.token&&(t=G(e),e.comment&&(t.comment=e.comment),n=";"!==e.token,r.push({node:t,visible:n}));return r.length>0?new d(r):(t||(t=new m(void 0),e.comment&&(t.comment=e.comment)),t)}(n);if(""!==n.token)throw n.tokenType===E.DELIMITER?le(n,"Unexpected operator "+n.token):ue(n,'Unexpected part "'+n.token+'"');return i}function G(e){var t,n,r,i,a=function(e){for(var t=function(e){for(var t=$(e);"or"===e.token;)q(e),t=new b("or","or",[t,$(e)]);return t}(e);"?"===e.token;){var n=e.conditionalLevel;e.conditionalLevel=e.nestingLevel,q(e);var r=t,i=G(e);if(":"!==e.token)throw ue(e,"False part of conditional expression expected");e.conditionalLevel=null,q(e);var s=G(e);t=new f(r,i,s),e.conditionalLevel=n}return t}(e);if("="===e.token){if((0,s.li)(a))return t=a.name,q(e),r=G(e),new p(new S(t),r);if((0,s.AS)(a))return q(e),r=G(e),new p(a.object,a.index,r);if((0,s.Px)(a)&&(0,s.li)(a.fn)&&(i=!0,n=[],t=a.name,a.args.forEach((function(e,t){(0,s.li)(e)?n[t]=e.name:i=!1})),i))return q(e),r=G(e),new g(t,n,r);throw ue(e,"Invalid left hand side of assignment operator =")}return a}function $(e){for(var t=H(e);"xor"===e.token;)q(e),t=new b("xor","xor",[t,H(e)]);return t}function H(e){for(var t=W(e);"and"===e.token;)q(e),t=new b("and","and",[t,W(e)]);return t}function W(e){for(var t=V(e);"|"===e.token;)q(e),t=new b("|","bitOr",[t,V(e)]);return t}function V(e){for(var t=Y(e);"^|"===e.token;)q(e),t=new b("^|","bitXor",[t,Y(e)]);return t}function Y(e){for(var t=Q(e);"&"===e.token;)q(e),t=new b("&","bitAnd",[t,Q(e)]);return t}function Q(e){for(var t=[Z(e)],n=[],r={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};(0,c.mQ)(r,e.token);){var i={name:e.token,fn:r[e.token]};n.push(i),q(e),t.push(Z(e))}return 1===t.length?t[0]:2===t.length?new b(n[0].name,n[0].fn,t):new A(n.map((e=>e.fn)),t)}function Z(e){var t,n,r,i;t=J(e);for(var s={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};(0,c.mQ)(s,e.token);)r=s[n=e.token],q(e),i=[t,J(e)],t=new b(n,r,i);return t}function J(e){var t,n,r,i;t=K(e);for(var s={to:"to",in:"to"};(0,c.mQ)(s,e.token);)r=s[n=e.token],q(e),"in"===n&&""===e.token?t=new b("*","multiply",[t,new S("in")],!0):(i=[t,K(e)],t=new b(n,r,i));return t}function K(e){var t,n=[];if(t=":"===e.token?new m(1):X(e),":"===e.token&&e.conditionalLevel!==e.nestingLevel){for(n.push(t);":"===e.token&&n.length<3;)q(e),")"===e.token||"]"===e.token||","===e.token||""===e.token?n.push(new S("end")):n.push(X(e));t=3===n.length?new w(n[0],n[2],n[1]):new w(n[0],n[1])}return t}function X(e){var t,n,r,i;t=ee(e);for(var s={"+":"add","-":"subtract"};(0,c.mQ)(s,e.token);){r=s[n=e.token],q(e);var a=ee(e);i=a.isPercentage?[t,new b("*","multiply",[t,a])]:[t,a],t=new b(n,r,i)}return t}function ee(e){var t,n,r,i;n=t=te(e);for(var s={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};(0,c.mQ)(s,e.token);)i=s[r=e.token],q(e),n=te(e),t=new b(r,i,[t,n]);return t}function te(e){var t,n;for(n=t=ne(e);e.tokenType===E.SYMBOL||"in"===e.token&&(0,s.BA)(t)||"in"===e.token&&(0,s.$$)(t)&&"unaryMinus"===t.fn&&(0,s.BA)(t.args[0])||!(e.tokenType!==E.NUMBER||(0,s.BA)(n)||(0,s.$$)(n)&&"!"!==n.op)||"("===e.token;)n=ne(e),t=new b("*","multiply",[t,n],!0);return t}function ne(e){for(var t=re(e),n=t,i=[];"/"===e.token&&(0,s.jW)(n);){if(i.push(r({},e)),q(e),e.tokenType!==E.NUMBER){r(e,i.pop());break}if(i.push(r({},e)),q(e),e.tokenType!==E.SYMBOL&&"("!==e.token){i.pop(),r(e,i.pop());break}r(e,i.pop()),i.pop(),n=re(e),t=new b("/","divide",[t,n])}return t}function re(e){var t,n,r,i;t=ie(e);for(var s={"%":"mod",mod:"mod"};(0,c.mQ)(s,e.token);)r=s[n=e.token],q(e),"%"===n&&e.tokenType===E.DELIMITER&&"("!==e.token?t=new b("/","divide",[t,new m(100)],!1,!0):(i=[t,ie(e)],t=new b(n,r,i));return t}function ie(e){var t,r,s,a={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return(0,c.mQ)(a,e.token)?(s=a[e.token],t=e.token,q(e),r=[ie(e)],new b(t,s,r)):function(e){var t,r,s,a;return t=function(e){var t,r,s;t=function(e){var t=[];if(e.tokenType===E.SYMBOL&&(0,c.mQ)(e.extraNodes,e.token)){var r=e.extraNodes[e.token];if(k(e),"("===e.token){if(t=[],L(e),k(e),")"!==e.token)for(t.push(G(e));","===e.token;)k(e),t.push(G(e));if(")"!==e.token)throw ue(e,"Parenthesis ) expected");z(e),k(e)}return new r(t)}return function(e){var t;return e.tokenType===E.SYMBOL||e.tokenType===E.DELIMITER&&e.token in T?(t=e.token,k(e),se(e,(0,c.mQ)(O,t)?new m(O[t]):P.includes(t)?new m(n(t,"number")):new S(t))):function(e){var t;return'"'===e.token||"'"===e.token?(t=ae(e,e.token),se(e,new m(t))):function(e){var t,r,s,a;if("["===e.token){if(L(e),k(e),"]"!==e.token){var c=oe(e);if(";"===e.token){for(s=1,r=[c];";"===e.token;)k(e),"]"!==e.token&&(r[s]=oe(e),s++);if("]"!==e.token)throw ue(e,"End of matrix ] expected");z(e),k(e),a=r[0].items.length;for(var u=1;u<s;u++)if(r[u].items.length!==a)throw le(e,"Column dimensions mismatch ("+r[u].items.length+" !== "+a+")");t=new h(r)}else{if("]"!==e.token)throw ue(e,"End of matrix ] expected");z(e),k(e),t=c}}else z(e),k(e),t=new h([]);return se(e,t)}return function(e){if("{"===e.token){var t;L(e);var r={};do{if(k(e),"}"!==e.token){if('"'===e.token||"'"===e.token)t=ae(e,e.token);else{if(!(e.tokenType===E.SYMBOL||e.tokenType===E.DELIMITER&&e.token in T))throw ue(e,"Symbol or string expected as object key");t=e.token,k(e)}if(":"!==e.token)throw ue(e,"Colon : expected after object key");k(e),r[t]=G(e)}}while(","===e.token);if("}"!==e.token)throw ue(e,"Comma , or bracket } expected after object value");z(e),k(e);var s=new v(r);return se(e,s)}return function(e){var t;if(e.tokenType===E.NUMBER){t=e.token,k(e);var r=(0,o.BC)(t,i),s=n(t,r);return new m(s)}return function(e){var t;if("("===e.token){if(L(e),k(e),t=G(e),")"!==e.token)throw ue(e,"Parenthesis ) expected");return z(e),k(e),se(e,t=new D(t))}return function(e){throw""===e.token?ue(e,"Unexpected end of expression"):ue(e,"Value expected")}(e)}(e)}(e)}(e)}(e)}(e)}(e)}(e);for(var a={"!":"factorial","'":"ctranspose"};(0,c.mQ)(a,e.token);)s=a[r=e.token],k(e),t=se(e,t=new b(r,s,[t]));return t}(e),("^"===e.token||".^"===e.token)&&(s="^"===(r=e.token)?"pow":"dotPow",q(e),a=[t,ie(e)],t=new b(r,s,a)),t}(e)}function se(e,t,n){for(var r;("("===e.token||"["===e.token||"."===e.token)&&(!n||n.includes(e.token));)if(r=[],"("===e.token){if(!(0,s.li)(t)&&!(0,s.AS)(t))return t;if(L(e),k(e),")"!==e.token)for(r.push(G(e));","===e.token;)k(e),r.push(G(e));if(")"!==e.token)throw ue(e,"Parenthesis ) expected");z(e),k(e),t=new y(t,r)}else if("["===e.token){if(L(e),k(e),"]"!==e.token)for(r.push(G(e));","===e.token;)k(e),r.push(G(e));if("]"!==e.token)throw ue(e,"Parenthesis ] expected");z(e),k(e),t=new l(t,new x(r))}else{if(k(e),!(e.tokenType===E.SYMBOL||e.tokenType===E.DELIMITER&&e.token in T))throw ue(e,"Property name expected after dot");r.push(new m(e.token)),k(e),t=new l(t,new x(r,!0))}return t}function ae(e,t){for(var n="";""!==B(e)&&B(e)!==t;)if("\\"===B(e)){R(e);var r=B(e),i=_[r];if(void 0!==i)n+=i,e.index+=1;else{if("u"!==r)throw ue(e,"Bad escape character \\".concat(r));var s=e.expression.slice(e.index+1,e.index+5);if(!/^[0-9A-Fa-f]{4}$/.test(s))throw ue(e,"Invalid unicode character \\u".concat(s));n+=String.fromCharCode(parseInt(s,16)),e.index+=5}}else n+=B(e),R(e);if(k(e),e.token!==t)throw ue(e,"End of string ".concat(t," expected"));return k(e),n}function oe(e){for(var t=[G(e)],n=1;","===e.token;)k(e),"]"!==e.token&&";"!==e.token&&(t[n]=G(e),n++);return new h(t)}function ce(e){return e.index-e.token.length+1}function ue(e,t){var n=ce(e),r=new SyntaxError(t+" (char "+n+")");return r.char=n,r}function le(e,t){var n=ce(e),r=new SyntaxError(t+" (char "+n+")");return r.char=n,r}return N.isAlpha=function(e,t,n){return N.isValidLatinOrGreek(e)||N.isValidMathSymbol(e,n)||N.isValidMathSymbol(t,e)},N.isValidLatinOrGreek=function(e){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(e)},N.isValidMathSymbol=function(e,t){return/^[\uD835]$/.test(e)&&/^[\uDC00-\uDFFF]$/.test(t)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(t)},N.isWhitespace=function(e,t){return" "===e||"\t"===e||"\n"===e&&t>0},N.isDecimalMark=function(e,t){return"."===e&&"/"!==t&&"*"!==t&&"^"!==t},N.isDigitDot=function(e){return e>="0"&&e<="9"||"."===e},N.isDigit=function(e){return e>="0"&&e<="9"},N.isHexDigit=function(e){return e>="0"&&e<="9"||e>="a"&&e<="f"||e>="A"&&e<="F"},t.addConversion({from:"string",to:"Node",convert:N}),N}))},7492:(e,t,n)=>{"use strict";n.d(t,{i:()=>o});var r=n(5495),i=n(8321),s=n(4943),a=["typed","matrix","zeros","add","equalScalar","not","concat"],o=(0,i.P9)("and",a,(e=>{var{typed:t,matrix:n,equalScalar:i,zeros:a,not:o,concat:c}=e,u=(0,r.i)({typed:t,matrix:n,equalScalar:i,zeros:a,not:o,concat:c});function l(e,t,n){var r=e[0].compile().evaluate(n);if(!(0,s.P3)(r)&&!u(r,!0))return!1;var i=e[1].compile().evaluate(n);return u(r,i)}return l.rawArgs=!0,l}),{isTransformFunction:!0})},5797:(e,t,n)=>{"use strict";n.d(t,{D:()=>c});var r=n(9943),i=n(8321),s=n(9470),a=n(4943),o=["typed","isInteger"],c=(0,i.P9)("apply",o,(e=>{var{typed:t,isInteger:n}=e,i=(0,s.p)({typed:t,isInteger:n});return t("apply",{"...any":function(e){var t=e[1];(0,a.Et)(t)?e[1]=t-1:(0,a.C4)(t)&&(e[1]=t.minus(1));try{return i.apply(null,e)}catch(e){throw(0,r.D)(e)}}})}),{isTransformFunction:!0})},3277:(e,t,n)=>{"use strict";n.d(t,{H:()=>o});var r=n(4172),i=n(8321),s=n(4943),a=["typed","matrix","zeros","add","equalScalar","not","concat"],o=(0,i.P9)("bitAnd",a,(e=>{var{typed:t,matrix:n,equalScalar:i,zeros:a,not:o,concat:c}=e,u=(0,r.x)({typed:t,matrix:n,equalScalar:i,zeros:a,not:o,concat:c});function l(e,t,n){var r=e[0].compile().evaluate(n);if(!(0,s.P3)(r)){if(isNaN(r))return NaN;if(0===r||!1===r)return 0}var i=e[1].compile().evaluate(n);return u(r,i)}return l.rawArgs=!0,l}),{isTransformFunction:!0})},6955:(e,t,n)=>{"use strict";n.d(t,{f:()=>o});var r=n(6208),i=n(8321),s=n(4943),a=["typed","matrix","equalScalar","DenseMatrix","concat"],o=(0,i.P9)("bitOr",a,(e=>{var{typed:t,matrix:n,equalScalar:i,DenseMatrix:a,concat:o}=e,c=(0,r.$)({typed:t,matrix:n,equalScalar:i,DenseMatrix:a,concat:o});function u(e,t,n){var r=e[0].compile().evaluate(n);if(!(0,s.P3)(r)){if(isNaN(r))return NaN;if(-1===r)return-1;if(!0===r)return 1}var i=e[1].compile().evaluate(n);return c(r,i)}return u.rawArgs=!0,u}),{isTransformFunction:!0})},6363:(e,t,n)=>{"use strict";n.d(t,{B:()=>c});var r=n(9943),i=n(8321),s=n(5666),a=n(4943),o=["typed","Index","matrix","range"],c=(0,i.P9)("column",o,(e=>{var{typed:t,Index:n,matrix:i,range:o}=e,c=(0,s.H)({typed:t,Index:n,matrix:i,range:o});return t("column",{"...any":function(e){var t=e.length-1,n=e[t];(0,a.Et)(n)&&(e[t]=n-1);try{return c.apply(null,e)}catch(e){throw(0,r.D)(e)}}})}),{isTransformFunction:!0})},5633:(e,t,n)=>{"use strict";n.d(t,{V:()=>c});var r=n(4943),i=n(9943),s=n(8321),a=n(1760),o=["typed","matrix","isInteger"],c=(0,s.P9)("concat",o,(e=>{var{typed:t,matrix:n,isInteger:s}=e,o=(0,a.z)({typed:t,matrix:n,isInteger:s});return t("concat",{"...any":function(e){var t=e.length-1,n=e[t];(0,r.Et)(n)?e[t]=n-1:(0,r.C4)(n)&&(e[t]=n.minus(1));try{return o.apply(null,e)}catch(e){throw(0,i.D)(e)}}})}),{isTransformFunction:!0})},5671:(e,t,n)=>{"use strict";n.d(t,{p:()=>u});var r=n(4943),i=n(8321),s=n(9943),a=n(2736),o="cumsum",c=["typed","add","unaryPlus"],u=(0,i.P9)(o,c,(e=>{var{typed:t,add:n,unaryPlus:i}=e,c=(0,a.b)({typed:t,add:n,unaryPlus:i});return t(o,{"...any":function(e){if(2===e.length&&(0,r.P3)(e[0])){var t=e[1];(0,r.Et)(t)?e[1]=t-1:(0,r.C4)(t)&&(e[1]=t.minus(1))}try{return c.apply(null,e)}catch(e){throw(0,s.D)(e)}}})}),{isTransformFunction:!0})},3493:(e,t,n)=>{"use strict";n.d(t,{S:()=>u});var r=n(8321),i=n(9943),s=n(6079),a=n(2903),o="diff",c=["typed","matrix","subtract","number","bignumber"],u=(0,r.P9)(o,c,(e=>{var{typed:t,matrix:n,subtract:r,number:c,bignumber:u}=e,l=(0,s.i)({typed:t,matrix:n,subtract:r,number:c,bignumber:u});return t(o,{"...any":function(e){e=(0,a.t)(e);try{return l.apply(null,e)}catch(e){throw(0,i.D)(e)}}})}),{isTransformFunction:!0})},7971:(e,t,n)=>{"use strict";n.d(t,{p:()=>u});var r=n(9990),i=n(8321),s=n(4943),a=n(4327),o=n(3214),c=["typed"],u=(0,i.P9)("filter",c,(e=>{var{typed:t}=e;function n(e,n,c){var u=(0,r.H)({typed:t}),l=(0,o.C)({typed:t});if(0===e.length)return u();var h=e[0];if(1===e.length)return u(h);var p=e.length-1,d=e[p];return h&&(h=i(h,c)),d&&(d=(0,s.li)(d)||(0,s.m2)(d)?i(d,c):(0,a.T)(d,n,c)),u(h,l(d,p))}function i(e,t){return e.compile().evaluate(t)}return n.rawArgs=!0,n}),{isTransformFunction:!0})},463:(e,t,n)=>{"use strict";n.d(t,{D:()=>u});var r=n(1032),i=n(3214),s=n(8321),a=n(4943),o=n(4327),c=["typed"],u=(0,s.P9)("forEach",c,(e=>{var{typed:t}=e,n=(0,r.j)({typed:t}),s=(0,i.C)({typed:t});function c(e,t,r){if(0===e.length)return n();var i=e[0];if(1===e.length)return n(i);var c=e.length-1,l=e[c];return i&&(i=u(i,r)),l&&(l=(0,a.li)(l)||(0,a.m2)(l)?u(l,r):(0,o.T)(l,t,r)),n(i,s(l,c))}function u(e,t){return e.compile().evaluate(t)}return c.rawArgs=!0,c}),{isTransformFunction:!0})},941:(e,t,n)=>{"use strict";n.d(t,{p:()=>s});var r=n(4943),i=["Index","getMatrixDataType"],s=(0,n(8321).P9)("index",i,(e=>{var{Index:t,getMatrixDataType:n}=e;return function(){for(var e=[],i=0,s=arguments.length;i<s;i++){var a=arguments[i];if((0,r._Z)(a))a.start--,a.end-=a.step>0?0:2;else if(a&&!0===a.isSet)a=a.map((function(e){return e-1}));else if((0,r.cy)(a)||(0,r.OA)(a))"boolean"!==n(a)&&(a=a.map((function(e){return e-1})));else if((0,r.Et)(a))a--;else if((0,r.C4)(a))a=a.toNumber()-1;else if("string"!=typeof a)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");e[i]=a}var o=new t;return t.apply(o,e),o}}),{isTransformFunction:!0})},8876:(e,t,n)=>{"use strict";n.d(t,{t:()=>u});var r=n(8321),i=n(4943),s=n(4672),a=n(4327),o=n(3214),c=["typed"],u=(0,r.P9)("map",c,(e=>{var{typed:t}=e,n=(0,s.p)({typed:t}),r=(0,o.C)({typed:t});function c(e,t,s){if(0===e.length)return n();if(1===e.length)return n(e[0]);var o=e.length-1,c=e.slice(0,o),u=e[o];return c=c.map((e=>l(e,s))),u&&(u=(0,i.li)(u)||(0,i.m2)(u)?l(u,s):(0,a.T)(u,t,s)),n(...c,r(u,o));function l(e,t){return e.compile().evaluate(t)}}return c.rawArgs=!0,c}),{isTransformFunction:!0})},8791:(e,t,n)=>{"use strict";n.d(t,{t:()=>c});var r=n(8321),i=n(9943),s=n(5546),a=n(2903),o=["typed","config","numeric","larger"],c=(0,r.P9)("max",o,(e=>{var{typed:t,config:n,numeric:r,larger:o}=e,c=(0,s.p)({typed:t,config:n,numeric:r,larger:o});return t("max",{"...any":function(e){e=(0,a.t)(e);try{return c.apply(null,e)}catch(e){throw(0,i.D)(e)}}})}),{isTransformFunction:!0})},4092:(e,t,n)=>{"use strict";n.d(t,{y:()=>c});var r=n(8321),i=n(9943),s=n(4043),a=n(2903),o=["typed","add","divide"],c=(0,r.P9)("mean",o,(e=>{var{typed:t,add:n,divide:r}=e,o=(0,s.s)({typed:t,add:n,divide:r});return t("mean",{"...any":function(e){e=(0,a.t)(e);try{return o.apply(null,e)}catch(e){throw(0,i.D)(e)}}})}),{isTransformFunction:!0})},2298:(e,t,n)=>{"use strict";n.d(t,{X:()=>c});var r=n(8321),i=n(9943),s=n(9076),a=n(2903),o=["typed","config","numeric","smaller"],c=(0,r.P9)("min",o,(e=>{var{typed:t,config:n,numeric:r,smaller:o}=e,c=(0,s.L)({typed:t,config:n,numeric:r,smaller:o});return t("min",{"...any":function(e){e=(0,a.t)(e);try{return c.apply(null,e)}catch(e){throw(0,i.D)(e)}}})}),{isTransformFunction:!0})},5136:(e,t,n)=>{"use strict";n.d(t,{O:()=>o});var r=n(4625),i=n(8321),s=n(4943),a=["typed","matrix","equalScalar","DenseMatrix","concat"],o=(0,i.P9)("or",a,(e=>{var{typed:t,matrix:n,equalScalar:i,DenseMatrix:a,concat:o}=e,c=(0,r.M)({typed:t,matrix:n,equalScalar:i,DenseMatrix:a,concat:o});function u(e,t,n){var r=e[0].compile().evaluate(n);if(!(0,s.P3)(r)&&c(r,!1))return!0;var i=e[1].compile().evaluate(n);return c(r,i)}return u.rawArgs=!0,u}),{isTransformFunction:!0})},3810:(e,t,n)=>{"use strict";n.d(t,{Q:()=>c});var r=n(6621),i=n(8321),s=n(3556),a="print",o=["typed","matrix","zeros","add"],c=(0,i.P9)(a,o,(e=>{var{typed:t,matrix:n,zeros:i,add:o}=e,c=(0,r.q)({typed:t,matrix:n,zeros:i,add:o});return t(a,{"string, Object | Array":function(e,t){return c(u(e),t)},"string, Object | Array, number | Object":function(e,t,n){return c(u(e),t,n)}});function u(e){return e.replace(s.I,(e=>"$"+e.slice(1).split(".").map((function(e){return!isNaN(e)&&e.length>0?parseInt(e)-1:e})).join(".")))}}),{isTransformFunction:!0})},3881:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var r=n(8321),i=n(3112),s=n(2903),a=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],o=(0,r.P9)("quantileSeq",a,(e=>{var{typed:t,bignumber:n,add:r,subtract:a,divide:o,multiply:c,partitionSelect:u,compare:l,isInteger:h,smaller:p,smallerEq:d,larger:f}=e,m=(0,i.D)({typed:t,bignumber:n,add:r,subtract:a,divide:o,multiply:c,partitionSelect:u,compare:l,isInteger:h,smaller:p,smallerEq:d,larger:f});return t("quantileSeq",{"Array | Matrix, number | BigNumber":m,"Array | Matrix, number | BigNumber, number":(e,t,n)=>m(e,t,g(n)),"Array | Matrix, number | BigNumber, boolean":m,"Array | Matrix, number | BigNumber, boolean, number":(e,t,n,r)=>m(e,t,n,g(r)),"Array | Matrix, Array | Matrix":m,"Array | Matrix, Array | Matrix, number":(e,t,n)=>m(e,t,g(n)),"Array | Matrix, Array | Matrix, boolean":m,"Array | Matrix, Array | Matrix, boolean, number":(e,t,n,r)=>m(e,t,n,g(r))});function g(e){return(0,s.t)([[],e])[1]}}),{isTransformFunction:!0})},9832:(e,t,n)=>{"use strict";n.d(t,{G:()=>a});var r=n(8321),i=n(844),s=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],a=(0,r.P9)("range",s,(e=>{var{typed:t,config:n,matrix:r,bignumber:s,smaller:a,smallerEq:o,larger:c,largerEq:u,add:l,isPositive:h}=e,p=(0,i.S)({typed:t,config:n,matrix:r,bignumber:s,smaller:a,smallerEq:o,larger:c,largerEq:u,add:l,isPositive:h});return t("range",{"...any":function(e){return"boolean"!=typeof e[e.length-1]&&e.push(!0),p.apply(null,e)}})}),{isTransformFunction:!0})},5973:(e,t,n)=>{"use strict";n.d(t,{J:()=>c});var r=n(8321),i=n(6610),s=n(9943),a=n(4943),o=["typed","Index","matrix","range"],c=(0,r.P9)("row",o,(e=>{var{typed:t,Index:n,matrix:r,range:o}=e,c=(0,i.R)({typed:t,Index:n,matrix:r,range:o});return t("row",{"...any":function(e){var t=e.length-1,n=e[t];(0,a.Et)(n)&&(e[t]=n-1);try{return c.apply(null,e)}catch(e){throw(0,s.D)(e)}}})}),{isTransformFunction:!0})},7764:(e,t,n)=>{"use strict";n.d(t,{E:()=>c});var r=n(8321),i=n(9029),s=n(9943),a=n(2903),o=["typed","map","sqrt","variance"],c=(0,r.P9)("std",o,(e=>{var{typed:t,map:n,sqrt:r,variance:o}=e,c=(0,i.y)({typed:t,map:n,sqrt:r,variance:o});return t("std",{"...any":function(e){e=(0,a.t)(e);try{return c.apply(null,e)}catch(e){throw(0,s.D)(e)}}})}),{isTransformFunction:!0})},9459:(e,t,n)=>{"use strict";n.d(t,{R:()=>o});var r=n(8321),i=n(9943),s=n(3790),a=["typed","matrix","zeros","add"],o=(0,r.P9)("subset",a,(e=>{var{typed:t,matrix:n,zeros:r,add:a}=e,o=(0,s.$)({typed:t,matrix:n,zeros:r,add:a});return t("subset",{"...any":function(e){try{return o.apply(null,e)}catch(e){throw(0,i.D)(e)}}})}),{isTransformFunction:!0})},4414:(e,t,n)=>{"use strict";n.d(t,{o:()=>c});var r=n(8321),i=n(9943),s=n(7159),a=n(2903),o=["typed","config","add","numeric"],c=(0,r.P9)("sum",o,(e=>{var{typed:t,config:n,add:r,numeric:o}=e,c=(0,s.i)({typed:t,config:n,add:r,numeric:o});return t("sum",{"...any":function(e){e=(0,a.t)(e);try{return c.apply(null,e)}catch(e){throw(0,i.D)(e)}}})}),{isTransformFunction:!0})},4327:(e,t,n)=>{"use strict";n.d(t,{T:()=>s});var r=n(4943),i=n(6905);function s(e,t,n){var s=e.filter((function(e){return(0,r.li)(e)&&!(e.name in t)&&!n.has(e.name)}))[0];if(!s)throw new Error('No undefined variable found in inline expression "'+e+'"');var a=s.name,o=new Map,c=new i.w6(n,o,new Set([a])),u=e.compile();return function(e){return o.set(a,e),u.evaluate(c)}}},9943:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});var r=n(6636);function i(e){return e&&e.isIndexError?new r.d(e.index+1,e.min+1,void 0!==e.max?e.max+1:void 0):e}},2903:(e,t,n)=>{"use strict";n.d(t,{t:()=>i});var r=n(4943);function i(e){if(2===e.length&&(0,r.P3)(e[0])){var t=(e=e.slice())[1];n=t,((0,r.Et)(n)||(0,r.C4)(n))&&(e[1]=function(e){return(0,r.Et)(e)?e-1:(0,r.C4)(e)?e.minus(1):e}(t))}var n;return e}},3214:(e,t,n)=>{"use strict";n.d(t,{C:()=>i});var r=["typed"],i=(0,n(8321).P9)("transformCallback",r,(e=>{var{typed:t}=e;return function(e,r){return t.isTypedFunction(e)?n(e,r):s(e,e.length,r)};function n(e,r){var i=Object.fromEntries(Object.entries(e.signatures).map((e=>{var[i,a]=e,o=i.split(",").length;return t.isTypedFunction(a)?[i,n(a,r)]:[i,s(a,o,r)]})));return"string"==typeof e.name?t(e.name,i):t(i)}}));function s(e,t,n){return t===n?e:t===n+1?function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var s=r.slice(0,n),o=a(r[n]);return e(...s,o)}:t>n+1?function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var s=r.slice(0,n),o=a(r[n]),c=r.slice(n+1);return e(...s,o,...c)}:e}function a(e){return e.map((e=>e+1))}},3094:(e,t,n)=>{"use strict";n.d(t,{M:()=>u});var r=n(8321),i=n(9943),s=n(5849),a=n(2903),o="variance",c=["typed","add","subtract","multiply","divide","apply","isNaN"],u=(0,r.P9)(o,c,(e=>{var{typed:t,add:n,subtract:r,multiply:c,divide:u,apply:l,isNaN:h}=e,p=(0,s.A)({typed:t,add:n,subtract:r,multiply:c,divide:u,apply:l,isNaN:h});return t(o,{"...any":function(e){e=(0,a.t)(e);try{return p.apply(null,e)}catch(e){throw(0,i.D)(e)}}})}),{isTransformFunction:!0})},3456:(e,t,n)=>{"use strict";n.d(t,{o:()=>s});var r=n(3140),i=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],s=(0,n(8321).P9)("lup",i,(e=>{var{typed:t,matrix:n,abs:i,addScalar:s,divideScalar:a,multiplyScalar:o,subtractScalar:c,larger:u,equalScalar:l,unaryMinus:h,DenseMatrix:p,SparseMatrix:d,Spa:f}=e;return t("lup",{DenseMatrix:function(e){return m(e)},SparseMatrix:function(e){return function(e){var t,n,r,s=e._size[0],c=e._size[1],p=Math.min(s,c),m=e._values,g=e._index,y=e._ptr,x=[],v=[],b=[],D=[s,p],w=[],A=[],S=[],N=[p,c],C=[],E=[];for(t=0;t<s;t++)C[t]=t,E[t]=t;var M=function(){var e=new f;n<s&&(b.push(x.length),x.push(1),v.push(n)),S.push(w.length);var c=y[n],p=y[n+1];for(r=c;r<p;r++)t=g[r],e.set(C[t],m[r]);n>0&&e.forEach(0,n-1,(function(t,n){d._forEachRow(t,x,v,b,(function(r,i){r>t&&e.accumulate(r,h(o(i,n)))}))}));var M,T,O,P,_=n,I=e.get(n),B=i(I);e.forEach(n+1,s-1,(function(e,t){var n=i(t);u(n,B)&&(_=e,B=n,I=t)})),n!==_&&(d._swapRows(n,_,D[1],x,v,b),d._swapRows(n,_,N[1],w,A,S),e.swap(n,_),T=_,O=E[M=n],P=E[T],C[O]=T,C[P]=M,E[M]=P,E[T]=O),e.forEach(0,s-1,(function(e,t){e<=n?(w.push(t),A.push(e)):(t=a(t,I),l(t,0)||(x.push(t),v.push(e)))}))};for(n=0;n<c;n++)M();return S.push(w.length),b.push(x.length),{L:new d({values:x,index:v,ptr:b,size:D}),U:new d({values:w,index:A,ptr:S,size:N}),p:C,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}(e)},Array:function(e){var t=m(n(e));return{L:t.L.valueOf(),U:t.U.valueOf(),p:t.p}}});function m(e){var t,n,h,d=e._size[0],f=e._size[1],m=Math.min(d,f),g=(0,r.o8)(e._data),y=[],x=[d,m],v=[],b=[m,f],D=[];for(t=0;t<d;t++)D[t]=t;for(n=0;n<f;n++){if(n>0)for(t=0;t<d;t++){var w=Math.min(t,n),A=0;for(h=0;h<w;h++)A=s(A,o(g[t][h],g[h][n]));g[t][n]=c(g[t][n],A)}var S=n,N=0,C=0;for(t=n;t<d;t++){var E=g[t][n],M=i(E);u(M,N)&&(S=t,N=M,C=E)}if(n!==S&&(D[n]=[D[S],D[S]=D[n]][0],p._swapRows(n,S,g)),n<d)for(t=n+1;t<d;t++){var T=g[t][n];l(T,0)||(g[t][n]=a(g[t][n],C))}}for(n=0;n<f;n++)for(t=0;t<d;t++)0===n&&(t<f&&(v[t]=[]),y[t]=[]),t<n?(t<f&&(v[t][n]=g[t][n]),n<d&&(y[t][n]=0)):t!==n?(t<f&&(v[t][n]=0),n<d&&(y[t][n]=g[t][n])):(t<f&&(v[t][n]=g[t][n]),n<d&&(y[t][n]=1));var O=new p({data:y,size:x}),P=new p({data:v,size:b}),_=[];for(t=0,m=D.length;t<m;t++)_[D[t]]=t;return{L:O,U:P,p:_,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}}))},3782:(e,t,n)=>{"use strict";n.d(t,{K:()=>s});var r=n(4634),i=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],s=(0,n(8321).P9)("qr",i,(e=>{var{typed:t,matrix:n,zeros:i,identity:s,isZero:a,equal:o,sign:c,sqrt:u,conj:l,unaryMinus:h,addScalar:p,divideScalar:d,multiplyScalar:f,subtractScalar:m,complex:g}=e;return r(t("qr",{DenseMatrix:function(e){return x(e)},SparseMatrix:function(e){return function(){throw new Error("qr not implemented for sparse matrices yet")}()},Array:function(e){var t=x(n(e));return{Q:t.Q.valueOf(),R:t.R.valueOf()}}}),{_denseQRimpl:y});function y(e){var t,n,r,g=e._size[0],y=e._size[1],x=s([g],"dense"),v=x._data,b=e.clone(),D=b._data,w=i([g],"");for(r=0;r<Math.min(y,g);++r){var A=D[r][r],S=h(o(A,0)?1:c(A)),N=l(S),C=0;for(t=r;t<g;t++)C=p(C,f(D[t][r],l(D[t][r])));var E=f(S,u(C));if(!a(E)){var M=m(A,E);for(w[r]=1,t=r+1;t<g;t++)w[t]=d(D[t][r],M);var T=h(l(d(M,E))),O=void 0;for(n=r;n<y;n++){for(O=0,t=r;t<g;t++)O=p(O,f(l(w[t]),D[t][n]));for(O=f(O,T),t=r;t<g;t++)D[t][n]=f(m(D[t][n],f(w[t],O)),N)}for(t=0;t<g;t++){for(O=0,n=r;n<g;n++)O=p(O,f(v[t][n],w[n]));for(O=f(O,T),n=r;n<g;++n)v[t][n]=d(m(v[t][n],f(O,l(w[n]))),N)}}}return{Q:x,R:b,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}}function x(e){var t=y(e),n=t.R._data;if(e._data.length>0)for(var r="Complex"===n[0][0].type?g(0):0,i=0;i<n.length;++i)for(var s=0;s<i&&s<(n[0]||[]).length;++s)n[i][s]=r;return t}}))},7592:(e,t,n)=>{"use strict";n.d(t,{u:()=>a});var r=n(8321),i="schur",s=["typed","matrix","identity","multiply","qr","norm","subtract"],a=(0,r.P9)(i,s,(e=>{var{typed:t,matrix:n,identity:r,multiply:s,qr:a,norm:o,subtract:c}=e;return t(i,{Array:function(e){var t=u(n(e));return{U:t.U.valueOf(),T:t.T.valueOf()}},Matrix:function(e){return u(e)}});function u(e){var t,n=e.size()[0],i=e,u=r(n),l=0;do{t=i;var h=a(i),p=h.Q,d=h.R;if(i=s(d,p),u=s(u,p),l++>100)break}while(o(c(i,t))>1e-4);return{U:u,T:i}}}))},1288:(e,t,n)=>{"use strict";n.d(t,{H:()=>A});var r=n(1106),i=n(8321);function s(e,t,n,r,i,s,a){var o=0;for(n[a]=e;o>=0;){var c=n[a+o],u=n[r+c];-1===u?(o--,s[t++]=c):(n[r+c]=n[i+u],n[a+ ++o]=u)}return t}function a(e){return-e-2}var o=["add","multiply","transpose"],c=(0,i.P9)("csAmd",o,(e=>{var{add:t,multiply:n,transpose:r}=e;return function(e,c){if(!c||e<=0||e>3)return null;var u=c._size,l=u[0],h=u[1],p=0,d=Math.max(16,10*Math.sqrt(h)),f=function(e,i,s,a,o){var c=r(i);if(1===e&&a===s)return t(i,c);if(2===e){for(var u=c._index,l=c._ptr,h=0,p=0;p<s;p++){var d=l[p];if(l[p]=h,!(l[p+1]-d>o))for(var f=l[p+1];d<f;d++)u[h++]=u[d]}return l[s]=h,i=r(c),n(c,i)}return n(c,i)}(e,c,l,h,d=Math.min(h-2,d));!function(e,t){for(var n=e._values,r=e._index,i=e._ptr,s=e._size[1],a=0,o=0;o<s;o++){var c=i[o];for(i[o]=a;c<i[o+1];c++)t(r[c],o,n?n[c]:1,null)&&(r[a]=r[c],n&&(n[a]=n[c]),a++)}i[s]=a,r.splice(a,r.length-a),n&&n.splice(a,n.length-a)}(f,o);for(var m,g,y,x,v,b,D,w,A,S,N,C,E,M,T,O,P=f._index,_=f._ptr,I=_[h],B=[],R=[],F=h+1,j=2*(h+1),k=3*(h+1),q=4*(h+1),L=5*(h+1),z=6*(h+1),U=7*(h+1),G=B,$=function(e,t,n,r,s,a,o,c,u,l,h,p){for(var d=0;d<e;d++)n[0+d]=t[d+1]-t[d];n[0+e]=0;for(var f=0;f<=e;f++)n[s+f]=-1,a[f]=-1,n[o+f]=-1,n[c+f]=-1,n[u+f]=1,n[l+f]=1,n[h+f]=0,n[p+f]=n[0+f];var m=i(0,0,n,l,e);return n[h+e]=-2,t[e]=-1,n[l+e]=0,m}(h,_,R,0,k,G,j,U,F,z,q,L),H=function(e,t,n,r,i,s,o,c,u,l,h){for(var p=0,d=0;d<e;d++){var f=n[r+d];if(0===f)n[i+d]=-2,p++,t[d]=-1,n[s+d]=0;else if(f>o)n[c+d]=0,n[i+d]=-1,p++,t[d]=a(e),n[c+e]++;else{var m=n[u+f];-1!==m&&(l[m]=d),n[h+d]=n[u+f],n[u+f]=d}}return p}(h,_,R,L,q,z,d,F,k,G,j),W=0;H<h;){for(y=-1;W<h&&-1===(y=R[k+W]);W++);-1!==R[j+y]&&(G[R[j+y]]=-1),R[k+W]=R[j+y];var V=R[q+y],Y=R[F+y];H+=Y;var Q=0;R[F+y]=-Y;var Z=_[y],J=0===V?Z:I,K=J;for(x=1;x<=V+1;x++){for(x>V?(b=y,D=Z,w=R[0+y]-V):(D=_[b=P[Z++]],w=R[0+b]),v=1;v<=w;v++)(A=R[F+(m=P[D++])])<=0||(Q+=A,R[F+m]=-A,P[K++]=m,-1!==R[j+m]&&(G[R[j+m]]=G[m]),-1!==G[m]?R[j+G[m]]=R[j+m]:R[k+R[L+m]]=R[j+m]);b!==y&&(_[b]=a(y),R[z+b]=0)}for(0!==V&&(I=K),R[L+y]=Q,_[y]=J,R[0+y]=K-J,R[q+y]=-2,$=i($,p,R,z,h),S=J;S<K;S++)if(!((N=R[q+(m=P[S])])<=0)){var X=$-(A=-R[F+m]);for(Z=_[m],C=_[m]+N-1;Z<=C;Z++)R[z+(b=P[Z])]>=$?R[z+b]-=A:0!==R[z+b]&&(R[z+b]=R[L+b]+X)}for(S=J;S<K;S++){for(E=(C=_[m=P[S]])+R[q+m]-1,M=C,T=0,O=0,Z=C;Z<=E;Z++)if(0!==R[z+(b=P[Z])]){var ee=R[z+b]-$;ee>0?(O+=ee,P[M++]=b,T+=b):(_[b]=a(y),R[z+b]=0)}R[q+m]=M-C+1;var te=M,ne=C+R[0+m];for(Z=E+1;Z<ne;Z++){var re=R[F+(g=P[Z])];re<=0||(O+=re,P[M++]=g,T+=g)}0===O?(_[m]=a(y),Q-=A=-R[F+m],Y+=A,H+=A,R[F+m]=0,R[q+m]=-1):(R[L+m]=Math.min(R[L+m],O),P[M]=P[te],P[te]=P[C],P[C]=y,R[0+m]=M-C+1,T=(T<0?-T:T)%h,R[j+m]=R[U+T],R[U+T]=m,G[m]=T)}for(R[L+y]=Q,$=i($+(p=Math.max(p,Q)),p,R,z,h),S=J;S<K;S++)if(!(R[F+(m=P[S])]>=0))for(m=R[U+(T=G[m])],R[U+T]=-1;-1!==m&&-1!==R[j+m];m=R[j+m],$++){for(w=R[0+m],N=R[q+m],Z=_[m]+1;Z<=_[m]+w-1;Z++)R[z+P[Z]]=$;var ie=m;for(g=R[j+m];-1!==g;){var se=R[0+g]===w&&R[q+g]===N;for(Z=_[g]+1;se&&Z<=_[g]+w-1;Z++)R[z+P[Z]]!==$&&(se=0);se?(_[g]=a(m),R[F+m]+=R[F+g],R[F+g]=0,R[q+g]=-1,g=R[j+g],R[j+ie]=g):(ie=g,g=R[j+g])}}for(Z=J,S=J;S<K;S++)(A=-R[F+(m=P[S])])<=0||(R[F+m]=A,O=R[L+m]+Q-A,-1!==R[k+(O=Math.min(O,h-H-A))]&&(G[R[k+O]]=m),R[j+m]=R[k+O],G[m]=-1,R[k+O]=m,W=Math.min(W,O),R[L+m]=O,P[Z++]=m);R[F+y]=Y,0==(R[0+y]=Z-J)&&(_[y]=-1,R[z+y]=0),0!==V&&(I=Z)}for(m=0;m<h;m++)_[m]=a(_[m]);for(g=0;g<=h;g++)R[k+g]=-1;for(g=h;g>=0;g--)R[F+g]>0||(R[j+g]=R[k+_[g]],R[k+_[g]]=g);for(b=h;b>=0;b--)R[F+b]<=0||-1!==_[b]&&(R[j+b]=R[k+_[b]],R[k+_[b]]=b);for(y=0,m=0;m<=h;m++)-1===_[m]&&(y=s(m,y,R,k,j,B,z));return B.splice(B.length-1,1),B};function i(e,t,n,r,i){if(e<2||e+t<0){for(var s=0;s<i;s++)0!==n[r+s]&&(n[r+s]=1);e=2}return e}function o(e,t){return e!==t}}));function u(e,t,n,r,i,s,a){var o,c,u,l=0;if(e<=t||n[r+t]<=n[i+e])return-1;n[i+e]=n[r+t];var h=n[s+e];if(n[s+e]=t,-1===h)l=1,u=e;else{for(l=2,u=h;u!==n[a+u];u=n[a+u]);for(o=h;o!==u;o=c)c=n[a+o],n[a+o]=u}return{jleaf:l,q:u}}var l=["transpose"],h=(0,i.P9)("csCounts",l,(e=>{var{transpose:t}=e;return function(e,n,r,i){if(!e||!n||!r)return null;var s,a,o,c,l,h,p,d=e._size,f=d[0],m=d[1],g=4*m+(i?m+f+1:0),y=[],x=m,v=2*m,b=3*m,D=4*m,w=5*m+1;for(o=0;o<g;o++)y[o]=-1;var A=[],S=t(e),N=S._index,C=S._ptr;for(o=0;o<m;o++)for(A[a=r[o]]=-1===y[b+a]?1:0;-1!==a&&-1===y[b+a];a=n[a])y[b+a]=o;if(i){for(o=0;o<m;o++)y[r[o]]=o;for(s=0;s<f;s++){for(o=m,h=C[s],p=C[s+1],l=h;l<p;l++)o=Math.min(o,y[N[l]]);y[w+s]=y[D+o],y[D+o]=s}}for(s=0;s<m;s++)y[0+s]=s;for(o=0;o<m;o++){for(-1!==n[a=r[o]]&&A[n[a]]--,c=i?y[D+o]:a;-1!==c;c=i?y[w+c]:-1)for(l=C[c];l<C[c+1];l++){var E=u(s=N[l],a,y,b,x,v,0);E.jleaf>=1&&A[a]++,2===E.jleaf&&A[E.q]--}-1!==n[a]&&(y[0+a]=n[a])}for(a=0;a<m;a++)-1!==n[a]&&(A[n[a]]+=A[a]);return A}})),p=["add","multiply","transpose"],d=(0,i.P9)("csSqr",p,(e=>{var{add:t,multiply:n,transpose:r}=e,i=c({add:t,multiply:n,transpose:r}),a=h({transpose:r});return function(e,t,n){var r,o=t._ptr,c=t._size[1],u={};if(u.q=i(e,t),e&&!u.q)return null;if(n){var l=e?function(e,t,n){for(var r=e._values,i=e._index,s=e._ptr,a=e._size,o=e._datatype,c=a[0],u=a[1],l=null,h=[],p=[],d=0,f=0;f<u;f++){p[f]=d;for(var m=n?n[f]:f,g=s[m],y=s[m+1],x=g;x<y;x++){var v=i[x];h[d]=v,l&&(l[d]=r[x]),d++}}return p[u]=d,e.createSparseMatrix({values:l,index:h,ptr:p,size:[c,u],datatype:o})}(t,0,u.q):t;u.parent=function(e){if(!e)return null;var t,n,r=e._index,i=e._ptr,s=e._size,a=s[0],o=s[1],c=[],u=[],l=o;for(t=0;t<a;t++)u[l+t]=-1;for(var h=0;h<o;h++){c[h]=-1,u[0+h]=-1;for(var p=i[h],d=i[h+1],f=p;f<d;f++){var m=r[f];for(t=u[l+m];-1!==t&&t<h;t=n)n=u[0+t],u[0+t]=h,-1===n&&(c[t]=h);u[l+m]=h}}return c}(l);var h=function(e,t){if(!e)return null;var n,r=0,i=[],a=[],o=t,c=2*t;for(n=0;n<t;n++)a[0+n]=-1;for(n=t-1;n>=0;n--)-1!==e[n]&&(a[o+n]=a[0+e[n]],a[0+e[n]]=n);for(n=0;n<t;n++)-1===e[n]&&(r=s(n,r,a,0,o,i,c));return i}(u.parent,c);if(u.cp=a(l,u.parent,h,1),l&&u.parent&&u.cp&&function(e,t){var n=e._ptr,r=e._index,i=e._size,s=i[0],a=i[1];t.pinv=[],t.leftmost=[];var o,c,u,l,h,p=t.parent,d=t.pinv,f=t.leftmost,m=[],g=s,y=s+a,x=s+2*a;for(c=0;c<a;c++)m[g+c]=-1,m[y+c]=-1,m[x+c]=0;for(o=0;o<s;o++)f[o]=-1;for(c=a-1;c>=0;c--)for(l=n[c],h=n[c+1],u=l;u<h;u++)f[r[u]]=c;for(o=s-1;o>=0;o--)d[o]=-1,-1!==(c=f[o])&&(0==m[x+c]++&&(m[y+c]=o),m[0+o]=m[g+c],m[g+c]=o);for(t.lnz=0,t.m2=s,c=0;c<a;c++)if(o=m[g+c],t.lnz++,o<0&&(o=t.m2++),d[o]=c,!(--x[c]<=0)){t.lnz+=m[x+c];var v=p[c];-1!==v&&(0===m[x+v]&&(m[y+v]=m[y+c]),m[0+m[y+c]]=m[g+v],m[g+v]=m[0+o],m[x+v]+=m[x+c])}for(o=0;o<s;o++)d[o]<0&&(d[o]=c++);return!0}(l,u))for(u.unz=0,r=0;r<c;r++)u.unz+=u.cp[r]}else u.unz=4*o[c]+c,u.lnz=u.unz;return u}}));function f(e,t){return e[t]<0}function m(e,t){e[t]=a(e[t])}function g(e){return e<0?a(e):e}function y(e,t,n,r,i){var s,a,o,c=t._index,u=t._ptr,l=t._size[1],h=0;for(r[0]=e;h>=0;){e=r[h];var p=i?i[e]:e;f(u,e)||(m(u,e),r[l+h]=p<0?0:g(u[p]));var d=1;for(a=r[l+h],o=p<0?0:g(u[p+1]);a<o;a++)if(!f(u,s=c[a])){r[l+h]=a,r[++h]=s,d=0;break}d&&(h--,r[--n]=e)}return n}var x=["divideScalar","multiply","subtract"],v=(0,i.P9)("csSpsolve",x,(e=>{var{divideScalar:t,multiply:n,subtract:r}=e;return function(e,i,s,a,o,c,u){var l,h,p,d,g=e._values,x=e._index,v=e._ptr,b=e._size[1],D=i._values,w=i._index,A=i._ptr,S=function(e,t,n,r,i){var s,a,o,c=e._ptr,u=e._size,l=t._index,h=t._ptr,p=u[1],d=p;for(a=h[n],o=h[n+1],s=a;s<o;s++){var g=l[s];f(c,g)||(d=y(g,e,d,r,i))}for(s=d;s<p;s++)m(c,r[s]);return d}(e,i,s,a,c);for(l=S;l<b;l++)o[a[l]]=0;for(h=A[s],p=A[s+1],l=h;l<p;l++)o[w[l]]=D[l];for(var N=S;N<b;N++){var C=a[N],E=c?c[C]:C;if(!(E<0))for(h=v[E],p=v[E+1],o[C]=t(o[C],g[u?h:p-1]),l=u?h+1:h,d=u?p:p-1;l<d;l++){var M=x[l];o[M]=r(o[M],n(g[l],o[C]))}}return S}})),b=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],D=(0,i.P9)("csLu",b,(e=>{var{abs:t,divideScalar:n,multiply:r,subtract:i,larger:s,largerEq:a,SparseMatrix:o}=e,c=v({divideScalar:n,multiply:r,subtract:i});return function(e,i,u){if(!e)return null;var l,h=e._size[1],p=100,d=100;i&&(l=i.q,p=i.lnz||p,d=i.unz||d);var f,m,g=[],y=[],x=[],v=new o({values:g,index:y,ptr:x,size:[h,h]}),b=[],D=[],w=[],A=new o({values:b,index:D,ptr:w,size:[h,h]}),S=[],N=[],C=[];for(f=0;f<h;f++)N[f]=0,S[f]=-1,x[f+1]=0;p=0,d=0;for(var E=0;E<h;E++){x[E]=p,w[E]=d;var M=l?l[E]:E,T=c(v,e,M,C,N,S,1),O=-1,P=-1;for(m=T;m<h;m++)if(S[f=C[m]]<0){var _=t(N[f]);s(_,P)&&(P=_,O=f)}else D[d]=S[f],b[d++]=N[f];if(-1===O||P<=0)return null;S[M]<0&&a(t(N[M]),r(P,u))&&(O=M);var I=N[O];for(D[d]=E,b[d++]=I,S[O]=E,y[p]=O,g[p++]=1,m=T;m<h;m++)S[f=C[m]]<0&&(y[p]=f,g[p++]=n(N[f],I)),N[f]=0}for(x[h]=p,w[h]=d,m=0;m<p;m++)y[m]=S[y[m]];return g.splice(p,g.length-p),y.splice(p,y.length-p),b.splice(d,b.length-d),D.splice(d,D.length-d),{L:v,U:A,pinv:S}}})),w=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],A=(0,i.P9)("slu",w,(e=>{var{typed:t,abs:n,add:i,multiply:s,transpose:a,divideScalar:o,subtract:c,larger:u,largerEq:l,SparseMatrix:h}=e,p=d({add:i,multiply:s,transpose:a}),f=D({abs:n,divideScalar:o,multiply:s,subtract:c,larger:u,largerEq:l,SparseMatrix:h});return t("slu",{"SparseMatrix, number, number":function(e,t,n){if(!(0,r.YN)(t)||t<0||t>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(n<0||n>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var i=p(t,e,!1),s=f(e,i,n);return{L:s.L,U:s.U,p:s.pinv,q:i.q,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\np: "+this.p.toString()+(this.q?"\nq: "+this.q.toString():"")+"\n"}}}})}))},3792:(e,t,n)=>{"use strict";n.d(t,{s:()=>c});var r=n(4943),i=n(8321),s=n(1106),a="derivative",o=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],c=(0,i.P9)(a,o,(e=>{var{typed:t,config:n,parse:i,simplify:o,equal:c,isZero:u,numeric:l,ConstantNode:h,FunctionNode:p,OperatorNode:d,ParenthesisNode:f,SymbolNode:m}=e;function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{simplify:!0},r={};b(r,e,t.name);var i=D(e,r);return n.simplify?o(i):i}function y(e){var t=i(e);if(!t.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(e)," into a variable in function derivative"));return t}var x=t(a,{"Node, SymbolNode":g,"Node, SymbolNode, Object":g,"Node, string":(e,t)=>g(e,y(t)),"Node, string, Object":(e,t,n)=>g(e,y(t),n)});x._simplify=!0,x.toTex=function(e){return v.apply(null,e.args)};var v=t("_derivTex",{"Node, SymbolNode":function(e,t){return(0,r.BA)(e)&&"string"===(0,r.QP)(e.value)?v(i(e.value).toString(),t.toString(),1):v(e.toTex(),t.toString(),1)},"Node, ConstantNode":function(e,t){if("string"===(0,r.QP)(t.value))return v(e,i(t.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(e,t,n){return v(e.toString(),t.name,n.value)},"string, string, number":function(e,t,n){return(1===n?"{d\\over d"+t+"}":"{d^{"+n+"}\\over d"+t+"^{"+n+"}}")+"\\left[".concat(e,"\\right]")}}),b=t("constTag",{"Object, ConstantNode, string":function(e,t){return e[t]=!0,!0},"Object, SymbolNode, string":function(e,t,n){return t.name!==n&&(e[t]=!0,!0)},"Object, ParenthesisNode, string":function(e,t,n){return b(e,t.content,n)},"Object, FunctionAssignmentNode, string":function(e,t,n){return t.params.includes(n)?b(e,t.expr,n):(e[t]=!0,!0)},"Object, FunctionNode | OperatorNode, string":function(e,t,n){if(t.args.length>0){for(var r=b(e,t.args[0],n),i=1;i<t.args.length;++i)r=b(e,t.args[i],n)&&r;if(r)return e[t]=!0,!0}return!1}}),D=t("_derivative",{"ConstantNode, Object":function(e){return w(0)},"SymbolNode, Object":function(e,t){return void 0!==t[e]?w(0):w(1)},"ParenthesisNode, Object":function(e,t){return new f(D(e.content,t))},"FunctionAssignmentNode, Object":function(e,t){return void 0!==t[e]?w(0):D(e.expr,t)},"FunctionNode, Object":function(e,t){if(void 0!==t[e])return w(0);var n,r,i,s,a=e.args[0],o=!1,c=!1;switch(e.name){case"cbrt":o=!0,r=new d("*","multiply",[w(3),new d("^","pow",[a,new d("/","divide",[w(2),w(3)])])]);break;case"sqrt":case"nthRoot":if(1===e.args.length)o=!0,r=new d("*","multiply",[w(2),new p("sqrt",[a])]);else if(2===e.args.length)return t[n=new d("/","divide",[w(1),e.args[1]])]=t[e.args[1]],D(new d("^","pow",[a,n]),t);break;case"log10":n=w(10);case"log":if(n||1!==e.args.length){if(1===e.args.length&&n||2===e.args.length&&void 0!==t[e.args[1]])r=new d("*","multiply",[a.clone(),new p("log",[n||e.args[1]])]),o=!0;else if(2===e.args.length)return D(new d("/","divide",[new p("log",[a]),new p("log",[e.args[1]])]),t)}else r=a.clone(),o=!0;break;case"pow":if(2===e.args.length)return t[n]=t[e.args[1]],D(new d("^","pow",[a,e.args[1]]),t);break;case"exp":r=new p("exp",[a.clone()]);break;case"sin":r=new p("cos",[a.clone()]);break;case"cos":r=new d("-","unaryMinus",[new p("sin",[a.clone()])]);break;case"tan":r=new d("^","pow",[new p("sec",[a.clone()]),w(2)]);break;case"sec":r=new d("*","multiply",[e,new p("tan",[a.clone()])]);break;case"csc":c=!0,r=new d("*","multiply",[e,new p("cot",[a.clone()])]);break;case"cot":c=!0,r=new d("^","pow",[new p("csc",[a.clone()]),w(2)]);break;case"asin":o=!0,r=new p("sqrt",[new d("-","subtract",[w(1),new d("^","pow",[a.clone(),w(2)])])]);break;case"acos":o=!0,c=!0,r=new p("sqrt",[new d("-","subtract",[w(1),new d("^","pow",[a.clone(),w(2)])])]);break;case"atan":o=!0,r=new d("+","add",[new d("^","pow",[a.clone(),w(2)]),w(1)]);break;case"asec":o=!0,r=new d("*","multiply",[new p("abs",[a.clone()]),new p("sqrt",[new d("-","subtract",[new d("^","pow",[a.clone(),w(2)]),w(1)])])]);break;case"acsc":o=!0,c=!0,r=new d("*","multiply",[new p("abs",[a.clone()]),new p("sqrt",[new d("-","subtract",[new d("^","pow",[a.clone(),w(2)]),w(1)])])]);break;case"acot":o=!0,c=!0,r=new d("+","add",[new d("^","pow",[a.clone(),w(2)]),w(1)]);break;case"sinh":r=new p("cosh",[a.clone()]);break;case"cosh":r=new p("sinh",[a.clone()]);break;case"tanh":r=new d("^","pow",[new p("sech",[a.clone()]),w(2)]);break;case"sech":c=!0,r=new d("*","multiply",[e,new p("tanh",[a.clone()])]);break;case"csch":c=!0,r=new d("*","multiply",[e,new p("coth",[a.clone()])]);break;case"coth":c=!0,r=new d("^","pow",[new p("csch",[a.clone()]),w(2)]);break;case"asinh":o=!0,r=new p("sqrt",[new d("+","add",[new d("^","pow",[a.clone(),w(2)]),w(1)])]);break;case"acosh":o=!0,r=new p("sqrt",[new d("-","subtract",[new d("^","pow",[a.clone(),w(2)]),w(1)])]);break;case"atanh":o=!0,r=new d("-","subtract",[w(1),new d("^","pow",[a.clone(),w(2)])]);break;case"asech":o=!0,c=!0,r=new d("*","multiply",[a.clone(),new p("sqrt",[new d("-","subtract",[w(1),new d("^","pow",[a.clone(),w(2)])])])]);break;case"acsch":o=!0,c=!0,r=new d("*","multiply",[new p("abs",[a.clone()]),new p("sqrt",[new d("+","add",[new d("^","pow",[a.clone(),w(2)]),w(1)])])]);break;case"acoth":o=!0,c=!0,r=new d("-","subtract",[w(1),new d("^","pow",[a.clone(),w(2)])]);break;case"abs":r=new d("/","divide",[new p(new m("abs"),[a.clone()]),a.clone()]);break;default:throw new Error('Cannot process function "'+e.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}o?(i="/",s="divide"):(i="*",s="multiply");var u=D(a,t);return c&&(u=new d("-","unaryMinus",[u])),new d(i,s,[u,r])},"OperatorNode, Object":function(e,t){if(void 0!==t[e])return w(0);if("+"===e.op)return new d(e.op,e.fn,e.args.map((function(e){return D(e,t)})));if("-"===e.op){if(e.isUnary())return new d(e.op,e.fn,[D(e.args[0],t)]);if(e.isBinary())return new d(e.op,e.fn,[D(e.args[0],t),D(e.args[1],t)])}if("*"===e.op){var n=e.args.filter((function(e){return void 0!==t[e]}));if(n.length>0){var i=e.args.filter((function(e){return void 0===t[e]})),s=1===i.length?i[0]:new d("*","multiply",i),a=n.concat(D(s,t));return new d("*","multiply",a)}return new d("+","add",e.args.map((function(n){return new d("*","multiply",e.args.map((function(e){return e===n?D(e,t):e.clone()})))})))}if("/"===e.op&&e.isBinary()){var o=e.args[0],l=e.args[1];return void 0!==t[l]?new d("/","divide",[D(o,t),l]):void 0!==t[o]?new d("*","multiply",[new d("-","unaryMinus",[o]),new d("/","divide",[D(l,t),new d("^","pow",[l.clone(),w(2)])])]):new d("/","divide",[new d("-","subtract",[new d("*","multiply",[D(o,t),l.clone()]),new d("*","multiply",[o.clone(),D(l,t)])]),new d("^","pow",[l.clone(),w(2)])])}if("^"===e.op&&e.isBinary()){var h=e.args[0],f=e.args[1];if(void 0!==t[h])return(0,r.BA)(h)&&(u(h.value)||c(h.value,1))?w(0):new d("*","multiply",[e,new d("*","multiply",[new p("log",[h.clone()]),D(f.clone(),t)])]);if(void 0!==t[f]){if((0,r.BA)(f)){if(u(f.value))return w(0);if(c(f.value,1))return D(h,t)}var m=new d("^","pow",[h.clone(),new d("-","subtract",[f,w(1)])]);return new d("*","multiply",[f.clone(),new d("*","multiply",[D(h,t),m])])}return new d("*","multiply",[new d("^","pow",[h.clone(),f.clone()]),new d("+","add",[new d("*","multiply",[D(h,t),new d("/","divide",[f.clone(),h.clone()])]),new d("*","multiply",[D(f,t),new p("log",[h.clone()])])])])}throw new Error('Cannot process operator "'+e.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function w(e,t){return new h(l(e,t||(0,s.BC)(String(e),n)))}return x}))},4274:(e,t,n)=>{"use strict";n.d(t,{C:()=>a});var r=n(8321),i="leafCount",s=["parse","typed"],a=(0,r.P9)(i,s,(e=>{var{parse:t,typed:n}=e;function r(e){var t=0;return e.forEach((e=>{t+=r(e)})),t||1}return n(i,{Node:function(e){return r(e)}})}))},2259:(e,t,n)=>{"use strict";n.d(t,{L:()=>a});var r=n(8321),i="lyap",s=["typed","matrix","sylvester","multiply","transpose"],a=(0,r.P9)(i,s,(e=>{var{typed:t,matrix:n,sylvester:r,multiply:s,transpose:a}=e;return t(i,{"Matrix, Matrix":function(e,t){return r(e,a(e),s(-1,t))},"Array, Matrix":function(e,t){return r(n(e),a(n(e)),s(-1,t))},"Matrix, Array":function(e,t){return r(e,a(n(e)),n(s(-1,t)))},"Array, Array":function(e,t){return r(n(e),a(n(e)),n(s(-1,t))).toArray()}})}))},5359:(e,t,n)=>{"use strict";n.d(t,{r:()=>a});var r=n(8321),i="polynomialRoot",s=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],a=(0,r.P9)(i,s,(e=>{var{typed:t,isZero:n,equalScalar:r,add:s,subtract:a,multiply:o,divide:c,sqrt:u,unaryMinus:l,cbrt:h,typeOf:p,im:d,re:f}=e;return t(i,{"number|Complex, ...number|Complex":(e,t)=>{for(var i=[e,...t];i.length>0&&n(i[i.length-1]);)i.pop();if(i.length<2)throw new RangeError("Polynomial [".concat(e,", ").concat(t,"] must have a non-zero non-constant coefficient"));switch(i.length){case 2:return[l(c(i[0],i[1]))];case 3:var[m,g,y]=i,x=o(2,y),v=o(g,g),b=o(4,y,m);if(r(v,b))return[c(l(g),x)];var D=u(a(v,b));return[c(a(D,g),x),c(a(l(D),g),x)];case 4:var[w,A,S,N]=i,C=l(o(3,N)),E=o(S,S),M=o(3,N,A),T=s(o(2,S,S,S),o(27,N,N,w)),O=o(9,N,S,A);if(r(E,M)&&r(T,O))return[c(S,C)];var P,_=a(E,M),I=a(T,O),B=s(o(18,N,S,A,w),o(S,S,A,A)),R=s(o(4,S,S,S,w),o(4,N,A,A,A),o(27,N,N,w,w));return r(B,R)?[c(a(o(4,N,S,A),s(o(9,N,N,w),o(S,S,S))),o(N,_)),c(a(o(9,N,w),o(S,A)),o(2,_))]:(P=r(E,M)?I:c(s(I,u(a(o(I,I),o(4,_,_,_)))),2),h(P,!0).toArray().map((e=>c(s(S,e,c(_,e)),C))).map((e=>"Complex"===p(e)&&r(f(e),f(e)+d(e))?f(e):e)));default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(i))}}})}))},5833:(e,t,n)=>{"use strict";n.d(t,{L:()=>o});var r=n(1106),i=n(8321),s="rationalize",a=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],o=(0,i.P9)(s,a,(e=>{var{config:t,typed:n,equal:i,isZero:a,add:o,subtract:c,multiply:u,divide:l,pow:h,parse:p,simplifyConstant:d,simplifyCore:f,simplify:m,fraction:g,bignumber:y,mathWithTransform:x,matrix:v,AccessorNode:b,ArrayNode:D,ConstantNode:w,FunctionNode:A,IndexNode:S,ObjectNode:N,OperatorNode:C,SymbolNode:E,ParenthesisNode:M}=e;function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=function(){var e=[f,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},d,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],t=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],n=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],r={};return r.firstRules=e.concat(t,n),r.distrDivRules=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],r.sucDivRules=n,r.firstRulesAgain=e.concat(t),r.finalRules=[f,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},d,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],r}(),s=function(e,t,n,i){var s=[],a=m(e,i,t,{exactFractions:!1}),o="+-*"+((n=!!n)?"/":"");!function e(t){var n=t.type;if("FunctionNode"===n)throw new Error("There is an unsolved function call");if("OperatorNode"===n)if("^"===t.op){if("ConstantNode"!==t.args[1].type||!(0,r.YN)(parseFloat(t.args[1].value)))throw new Error("There is a non-integer exponent");e(t.args[0])}else{if(!o.includes(t.op))throw new Error("Operator "+t.op+" invalid in polynomial expression");for(var i=0;i<t.args.length;i++)e(t.args[i])}else if("SymbolNode"===n){var a=t.name;-1===s.indexOf(a)&&s.push(a)}else if("ParenthesisNode"===n)e(t.content);else if("ConstantNode"!==n)throw new Error("type "+n+" is not allowed in polynomial expression")}(a);var c={};return c.expression=a,c.variables=s,c}(e,t,!0,i.firstRules),a=s.variables.length,o={exactFractions:!1},c={exactFractions:!0};if(e=s.expression,a>=1){var u,l;e=O(e);var h,p=!0,g=!1;for(e=m(e,i.firstRules,{},o);l=p?i.distrDivRules:i.sucDivRules,p=!p,(h=(e=m(e,l,{},c)).toString())!==u;)g=!0,u=h;g&&(e=m(e,i.firstRulesAgain,{},o)),e=m(e,i.finalRules,{},o)}var y=[],x={};return"OperatorNode"===e.type&&e.isBinary()&&"/"===e.op?(1===a&&(e.args[0]=P(e.args[0],y),e.args[1]=P(e.args[1])),n&&(x.numerator=e.args[0],x.denominator=e.args[1])):(1===a&&(e=P(e,y)),n&&(x.numerator=e,x.denominator=null)),n?(x.coefficients=y,x.variables=s.variables,x.expression=e,x):e}return n(s,{Node:T,"Node, boolean":(e,t)=>T(e,{},t),"Node, Object":T,"Node, Object, boolean":T});function O(e,t,n){var i=e.type,s=arguments.length>1;if("OperatorNode"===i&&e.isBinary()){var a,o=!1;if("^"===e.op&&("ParenthesisNode"!==e.args[0].type&&"OperatorNode"!==e.args[0].type||"ConstantNode"!==e.args[1].type||(o=(a=parseFloat(e.args[1].value))>=2&&(0,r.YN)(a))),o){if(a>2){var c=e.args[0],u=new C("^","pow",[e.args[0].cloneDeep(),new w(a-1)]);e=new C("*","multiply",[c,u])}else e=new C("*","multiply",[e.args[0],e.args[0].cloneDeep()]);s&&("content"===n?t.content=e:t.args[n]=e)}}if("ParenthesisNode"===i)O(e.content,e,"content");else if("ConstantNode"!==i&&"SymbolNode"!==i)for(var l=0;l<e.args.length;l++)O(e.args[l],e,l);if(!s)return e}function P(e,t){void 0===t&&(t=[]),t[0]=0;var n=0,i="";!function e(s,a,o){var c=s.type;if("FunctionNode"===c)throw new Error("There is an unsolved function call");if("OperatorNode"===c){if(!"+-*^".includes(s.op))throw new Error("Operator "+s.op+" invalid");if(null!==a){if(("unaryMinus"===s.fn||"pow"===s.fn)&&"add"!==a.fn&&"subtract"!==a.fn&&"multiply"!==a.fn)throw new Error("Invalid "+s.op+" placing");if(("subtract"===s.fn||"add"===s.fn||"multiply"===s.fn)&&"add"!==a.fn&&"subtract"!==a.fn)throw new Error("Invalid "+s.op+" placing");if(("subtract"===s.fn||"add"===s.fn||"unaryMinus"===s.fn)&&0!==o.noFil)throw new Error("Invalid "+s.op+" placing")}"^"!==s.op&&"*"!==s.op||(o.fire=s.op);for(var u=0;u<s.args.length;u++)"unaryMinus"===s.fn&&(o.oper="-"),"+"!==s.op&&"subtract"!==s.fn||(o.fire="",o.cte=1,o.oper=0===u?"+":s.op),o.noFil=u,e(s.args[u],s,o)}else if("SymbolNode"===c){if(s.name!==i&&""!==i)throw new Error("There is more than one variable");if(i=s.name,null===a)return void(t[1]=1);if("^"===a.op&&0!==o.noFil)throw new Error("In power the variable should be the first parameter");if("*"===a.op&&1!==o.noFil)throw new Error("In multiply the variable should be the second parameter");""!==o.fire&&"*"!==o.fire||(n<1&&(t[1]=0),t[1]+=o.cte*("+"===o.oper?1:-1),n=Math.max(1,n))}else{if("ConstantNode"!==c)throw new Error("Type "+c+" is not allowed");var l=parseFloat(s.value);if(null===a)return void(t[0]=l);if("^"===a.op){if(1!==o.noFil)throw new Error("Constant cannot be powered");if(!(0,r.YN)(l)||l<=0)throw new Error("Non-integer exponent is not allowed");for(var h=n+1;h<l;h++)t[h]=0;return l>n&&(t[l]=0),t[l]+=o.cte*("+"===o.oper?1:-1),void(n=Math.max(l,n))}o.cte=l,""===o.fire&&(t[0]+=o.cte*("+"===o.oper?1:-1))}}(e,null,{cte:1,oper:"+",fire:""});for(var s,a=!0,o=n=t.length-1;o>=0;o--)if(0!==t[o]){var c=new w(a?t[o]:Math.abs(t[o])),u=t[o]<0?"-":"+";if(o>0){var l=new E(i);if(o>1){var h=new w(o);l=new C("^","pow",[l,h])}c=-1===t[o]&&a?new C("-","unaryMinus",[l]):1===Math.abs(t[o])?l:new C("*","multiply",[c,l])}s=a?c:"+"===u?new C("+","add",[s,c]):new C("-","subtract",[s,c]),a=!1}return a?new w(0):s}}))},6017:(e,t,n)=>{"use strict";n.d(t,{x:()=>a});var r=n(6905),i=n(4943),s=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],a=(0,n(8321).P9)("resolve",s,(e=>{var{typed:t,parse:n,ConstantNode:s,FunctionNode:a,OperatorNode:o,ParenthesisNode:c}=e;function u(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(!t)return e;if((0,i.li)(e)){if(r.has(e.name)){var l=Array.from(r).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(l,"}"))}var h=t.get(e.name);if((0,i.Ll)(h)){var p=new Set(r);return p.add(e.name),u(h,t,p)}return"number"==typeof h?n(String(h)):void 0!==h?new s(h):e}if((0,i.$$)(e)){var d=e.args.map((function(e){return u(e,t,r)}));return new o(e.op,e.fn,d,e.implicit)}if((0,i.tv)(e))return new c(u(e.content,t,r));if((0,i.Px)(e)){var f=e.args.map((function(e){return u(e,t,r)}));return new a(e.name,f)}return e.map((e=>u(e,t,r)))}return t("resolve",{Node:u,"Node, Map | null | undefined":u,"Node, Object":(e,t)=>u(e,(0,r.pI)(t)),"Array | Matrix":t.referToSelf((e=>t=>t.map((t=>e(t))))),"Array | Matrix, null | undefined":t.referToSelf((e=>t=>t.map((t=>e(t))))),"Array, Object":t.referTo("Array,Map",(e=>(t,n)=>e(t,(0,r.pI)(n)))),"Matrix, Object":t.referTo("Matrix,Map",(e=>(t,n)=>e(t,(0,r.pI)(n)))),"Array | Matrix, Map":t.referToSelf((e=>(t,n)=>t.map((t=>e(t,n)))))})}))},4170:(e,t,n)=>{"use strict";n.d(t,{U:()=>h});var r=n(4943);function i(e){return(0,r.BA)(e)||(0,r.$$)(e)&&e.isUnary()&&(0,r.BA)(e.args[0])}function s(e){return!!(0,r.BA)(e)||!(!(0,r.Px)(e)&&!(0,r.$$)(e)||!e.args.every(s))||!(!(0,r.tv)(e)||!s(e.content))}var a=n(8321),o=n(4929),c=n(3140),u=n(6905),l=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","resolve","simplifyConstant","simplifyCore","?fraction","?bignumber","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],h=(0,a.P9)("simplify",l,(e=>{var{config:t,typed:n,parse:a,add:l,subtract:h,multiply:p,divide:d,pow:f,isZero:m,equal:g,resolve:y,simplifyConstant:x,simplifyCore:v,fraction:b,bignumber:D,mathWithTransform:w,matrix:A,AccessorNode:S,ArrayNode:N,ConstantNode:C,FunctionNode:E,IndexNode:M,ObjectNode:T,OperatorNode:O,ParenthesisNode:P,SymbolNode:_}=e,{hasProperty:I,isCommutative:B,isAssociative:R,mergeContext:F,flatten:j,unflattenr:k,unflattenl:q,createMakeNodeFunction:L,defaultContext:z,realContext:U,positiveContext:G}=(0,o.Z)({FunctionNode:E,OperatorNode:O,SymbolNode:_});n.addConversion({from:"Object",to:"Map",convert:u.pI});var $=n("simplify",{Node:Z,"Node, Map":(e,t)=>Z(e,!1,t),"Node, Map, Object":(e,t,n)=>Z(e,!1,t,n),"Node, Array":Z,"Node, Array, Map":Z,"Node, Array, Map, Object":Z});function H(e){return e.transform((function(e,t,n){return(0,r.tv)(e)?H(e.content):e}))}n.removeConversion({from:"Object",to:"Map",convert:u.pI}),$.defaultContext=z,$.realContext=U,$.positiveContext=G;var W={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};function V(e,t){var n={};if(e.s){var r=e.s.split("->");if(2!==r.length)throw SyntaxError("Could not parse rule: "+e.s);n.l=r[0],n.r=r[1]}else n.l=e.l,n.r=e.r;for(var i of(n.l=H(a(n.l)),n.r=H(a(n.r)),["imposeContext","repeat","assuming"]))i in e&&(n[i]=e[i]);if(e.evaluate&&(n.evaluate=a(e.evaluate)),R(n.l,t)){var s,o=!B(n.l,t);o&&(s=Q());var c=L(n.l),u=Q();n.expanded={},n.expanded.l=c([n.l,u]),j(n.expanded.l,t),k(n.expanded.l,t),n.expanded.r=c([n.r,u]),o&&(n.expandedNC1={},n.expandedNC1.l=c([s,n.l]),n.expandedNC1.r=c([s,n.r]),n.expandedNC2={},n.expandedNC2.l=c([s,n.expanded.l]),n.expandedNC2.r=c([s,n.expanded.r]))}return n}$.rules=[v,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},x,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},x,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];var Y=0;function Q(){return new _("_p"+Y++)}function Z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,u.A5)(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.consoleDebug;t=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],s=void 0,a=typeof i;switch(a){case"string":i={s:i};case"object":s=V(i,t);break;case"function":s=i;break;default:throw TypeError("Unsupported type of rule: "+a)}n.push(s)}return n}(t||$.rules,r.context);for(var s=y(e,n),a={},o=(s=H(s)).toString({parenthesis:"all"});!a[o];){a[o]=!0,Y=0;var c=o;i&&console.log("Working on: ",o);for(var l=0;l<t.length;l++){var h="";if("function"==typeof t[l]?(s=t[l](s,r),i&&(h=t[l].name)):(j(s,r.context),s=K(s,t[l],r.context),i&&(h="".concat(t[l].l.toString()," -> ").concat(t[l].r.toString()))),i){var p=s.toString({parenthesis:"all"});p!==c&&(console.log("Applying",h,"produced",p),c=p)}q(s,r.context)}o=s.toString({parenthesis:"all"})}return s}function J(e,t,n){var r=e;if(e)for(var i=0;i<e.length;++i){var s=K(e[i],t,n);s!==e[i]&&(r===e&&(r=e.slice()),r[i]=s)}return r}function K(e,t,n){if(t.assuming)for(var r in t.assuming)for(var i in t.assuming[r])if(I(r,i,n)!==t.assuming[r][i])return e;var s=F(t.imposeContext,n),a=e;if(a instanceof O||a instanceof E){var o=J(a.args,t,n);o!==a.args&&((a=a.clone()).args=o)}else if(a instanceof P){if(a.content){var u=K(a.content,t,n);u!==a.content&&(a=new P(u))}}else if(a instanceof N){var l=J(a.items,t,n);l!==a.items&&(a=new N(l))}else if(a instanceof S){var h=a.object;a.object&&(h=K(a.object,t,n));var p=a.index;a.index&&(p=K(a.index,t,n)),h===a.object&&p===a.index||(a=new S(h,p))}else if(a instanceof M){var d=J(a.dimensions,t,n);d!==a.dimensions&&(a=new M(d))}else if(a instanceof T){var f=!1,m={};for(var g in a.properties)m[g]=K(a.properties[g],t,n),m[g]!==a.properties[g]&&(f=!0);f&&(a=new T(m))}var y=t.r,x=te(t.l,a,s)[0];if(!x&&t.expanded&&(y=t.expanded.r,x=te(t.expanded.l,a,s)[0]),!x&&t.expandedNC1&&(y=t.expandedNC1.r,(x=te(t.expandedNC1.l,a,s)[0])||(y=t.expandedNC2.r,x=te(t.expandedNC2.l,a,s)[0])),x){var v=a.implicit;a=y.clone(),v&&"implicit"in y&&(a.implicit=!0),a=a.transform((function(e){return e.isSymbolNode&&(0,c.mQ)(x.placeholders,e.name)?x.placeholders[e.name].clone():e}))}return t.repeat&&a!==e&&(a=K(a,t,n)),a}function X(e,t){var n={placeholders:{}};if(!e.placeholders&&!t.placeholders)return n;if(!e.placeholders)return t;if(!t.placeholders)return e;for(var r in e.placeholders)if((0,c.mQ)(e.placeholders,r)&&(n.placeholders[r]=e.placeholders[r],(0,c.mQ)(t.placeholders,r)&&!ne(e.placeholders[r],t.placeholders[r])))return null;for(var i in t.placeholders)(0,c.mQ)(t.placeholders,i)&&(n.placeholders[i]=t.placeholders[i]);return n}function ee(e,t){var n,r=[];if(0===e.length||0===t.length)return r;for(var i=0;i<e.length;i++)for(var s=0;s<t.length;s++)(n=X(e[i],t[s]))&&r.push(n);return r}function te(e,t,n,a){var o=[{placeholders:{}}];if(e instanceof O&&t instanceof O||e instanceof E&&t instanceof E){if(e instanceof O){if(e.op!==t.op||e.fn!==t.fn)return[]}else if(e instanceof E&&e.name!==t.name)return[];if(!(1===t.args.length&&1===e.args.length||!R(t,n)&&t.args.length===e.args.length||a)){if(t.args.length>=2&&2===e.args.length){for(var c=function(e,t){var n,r,i=[],s=L(e);if(B(e,t))for(var a=0;a<e.args.length;a++)(r=e.args.slice(0)).splice(a,1),n=1===r.length?r[0]:s(r),i.push(s([e.args[a],n]));else for(var o=1;o<e.args.length;o++){var c=e.args[0];o>1&&(c=s(e.args.slice(0,o))),n=1===(r=e.args.slice(o)).length?r[0]:s(r),i.push(s([c,n]))}return i}(t,n),u=[],l=0;l<c.length;l++){var h=te(e,c[l],n,!0);u=u.concat(h)}return u}if(e.args.length>2)throw Error("Unexpected non-binary associative function: "+e.toString());return[]}for(var p=[],d=0;d<e.args.length;d++){var f=te(e.args[d],t.args[d],n);if(0===f.length)break;p.push(f)}if(p.length!==e.args.length){if(!B(t,n)||1===e.args.length)return[];if(e.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var m=te(e.args[0],t.args[1],n);if(0===m.length)return[];var y=te(e.args[1],t.args[0],n);if(0===y.length)return[];p=[m,y]}o=function(e){if(0===e.length)return e;for(var t=e.reduce(ee),n=[],r={},i=0;i<t.length;i++){var s=JSON.stringify(t[i]);r[s]||(r[s]=!0,n.push(t[i]))}return n}(p)}else if(e instanceof _){if(0===e.name.length)throw new Error("Symbol in rule has 0 length...!?");if(W[e.name]){if(e.name!==t.name)return[]}else switch(e.name[1]>="a"&&e.name[1]<="z"?e.name.substring(0,2):e.name[0]){case"n":case"_p":o[0].placeholders[e.name]=t;break;case"c":case"cl":if(!(0,r.BA)(t))return[];o[0].placeholders[e.name]=t;break;case"v":if((0,r.BA)(t))return[];o[0].placeholders[e.name]=t;break;case"vl":if(!(0,r.li)(t))return[];o[0].placeholders[e.name]=t;break;case"cd":if(!i(t))return[];o[0].placeholders[e.name]=t;break;case"vd":if(i(t))return[];o[0].placeholders[e.name]=t;break;case"ce":if(!s(t))return[];o[0].placeholders[e.name]=t;break;case"ve":if(s(t))return[];o[0].placeholders[e.name]=t;break;default:throw new Error("Invalid symbol in rule: "+e.name)}}else{if(!(e instanceof C))return[];if(!g(e.value,t.value))return[]}return o}function ne(e,t){if(e instanceof C&&t instanceof C){if(!g(e.value,t.value))return!1}else if(e instanceof _&&t instanceof _){if(e.name!==t.name)return!1}else{if(!(e instanceof O&&t instanceof O||e instanceof E&&t instanceof E))return!1;if(e instanceof O){if(e.op!==t.op||e.fn!==t.fn)return!1}else if(e instanceof E&&e.name!==t.name)return!1;if(e.args.length!==t.args.length)return!1;for(var n=0;n<e.args.length;n++)if(!ne(e.args[n],t.args[n]))return!1}return!0}return $}))},4929:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(3693),i=n(4943),s=n(8321),a=n(3140);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=["FunctionNode","OperatorNode","SymbolNode"],l=(0,s.P9)("simplifyUtil",u,(e=>{var{FunctionNode:t,OperatorNode:n,SymbolNode:r}=e,s=!0,o=!1,u="defaultF",l={add:{trivial:s,total:s,commutative:s,associative:s},unaryPlus:{trivial:s,total:s,commutative:s,associative:s},subtract:{trivial:o,total:s,commutative:o,associative:o},multiply:{trivial:s,total:s,commutative:s,associative:s},divide:{trivial:o,total:s,commutative:o,associative:o},paren:{trivial:s,total:s,commutative:s,associative:o},defaultF:{trivial:o,total:s,commutative:o,associative:o}};function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,r=u;if("string"==typeof e?r=e:(0,i.$$)(e)?r=e.fn.toString():(0,i.Px)(e)?r=e.name:(0,i.tv)(e)&&(r="paren"),(0,a.mQ)(n,r)){var s=n[r];if((0,a.mQ)(s,t))return s[t];if((0,a.mQ)(l,r))return l[r][t]}if((0,a.mQ)(n,u)){var o=n[u];return(0,a.mQ)(o,t)?o[t]:l[u][t]}if((0,a.mQ)(l,r)){var c=l[r];if((0,a.mQ)(c,t))return c[t]}return l[u][t]}function p(e){return h(e,"associative",arguments.length>1&&void 0!==arguments[1]?arguments[1]:l)}function d(e,t){var n,r=[],s=function(e){for(var t=0;t<e.args.length;t++){var a=e.args[t];(0,i.$$)(a)&&n===a.op?s(a):r.push(a)}};return p(e,t)?(n=e.op,s(e),r):e.args}function f(e){return(0,i.$$)(e)?function(t){try{return new n(e.op,e.fn,t,e.implicit)}catch(e){return console.error(e),[]}}:function(n){return new t(new r(e.name),n)}}return{createMakeNodeFunction:f,hasProperty:h,isCommutative:function(e){return h(e,"commutative",arguments.length>1&&void 0!==arguments[1]?arguments[1]:l)},isAssociative:p,mergeContext:function(e,t){var n=c({},e);for(var r in t)(0,a.mQ)(e,r)?n[r]=c(c({},t[r]),e[r]):n[r]=t[r];return n},flatten:function e(t,n){if(!t.args||0===t.args.length)return t;t.args=d(t,n);for(var r=0;r<t.args.length;r++)e(t.args[r],n)},allChildren:d,unflattenr:function e(t,n){if(t.args&&0!==t.args.length){for(var r=f(t),i=t.args.length,s=0;s<i;s++)e(t.args[s],n);if(i>2&&p(t,n)){for(var a=t.args.pop();t.args.length>0;)a=r([t.args.pop(),a]);t.args=a.args}}},unflattenl:function e(t,n){if(t.args&&0!==t.args.length){for(var r=f(t),i=t.args.length,s=0;s<i;s++)e(t.args[s],n);if(i>2&&p(t,n)){for(var a=t.args.shift();t.args.length>0;)a=r([a,t.args.shift()]);t.args=a.args}}},defaultContext:l,realContext:{divide:{total:o},log:{total:o}},positiveContext:{subtract:{total:o},abs:{trivial:s},log:{total:s}}}}))},2506:(e,t,n)=>{"use strict";n.d(t,{E:()=>u});var r=n(4943),i=n(8321),s=n(1106),a=n(4929),o=n(6495),c=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],u=(0,i.P9)("simplifyConstant",c,(e=>{var{typed:t,config:n,mathWithTransform:i,matrix:c,fraction:u,bignumber:l,AccessorNode:h,ArrayNode:p,ConstantNode:d,FunctionNode:f,IndexNode:m,ObjectNode:g,OperatorNode:y,SymbolNode:x}=e,{isCommutative:v,isAssociative:b,allChildren:D,createMakeNodeFunction:w}=(0,a.Z)({FunctionNode:f,OperatorNode:y,SymbolNode:x}),A=t("simplifyConstant",{Node:e=>E(_(e,{})),"Node, Object":function(e,t){return E(_(e,t))}});function S(e){return(0,r.fU)(e)?e.valueOf():e instanceof Array?e.map(S):(0,r.OA)(e)?c(S(e.valueOf())):e}function N(e,t,n){try{return i[e].apply(null,t)}catch(r){return t=t.map(S),T(i[e].apply(null,t),n)}}var C=t({Fraction:function(e){var t,n=e.s*e.n;return t=n<0?new y("-","unaryMinus",[new d(-n)]):new d(n),1===e.d?t:new y("/","divide",[t,new d(e.d)])},number:function(e){return e<0?O(new d(-e)):new d(e)},BigNumber:function(e){return e<0?O(new d(-e)):new d(e)},bigint:function(e){return e<0n?O(new d(-e)):new d(e)},Complex:function(e){throw new Error("Cannot convert Complex number to Node")},string:function(e){return new d(e)},Matrix:function(e){return new p(e.valueOf().map((e=>C(e))))}});function E(e){return(0,r.Ll)(e)?e:C(e)}function M(e,t){if(t&&!1!==t.exactFractions&&isFinite(e)&&u){var n=u(e),r=t&&"number"==typeof t.fractionsLimit?t.fractionsLimit:1/0;if(n.valueOf()===e&&n.n<r&&n.d<r)return n}return e}var T=t({"string, Object":function(e,t){var r=(0,s.BC)(e,n);return"BigNumber"===r?(void 0===l&&(0,o.j9)(),l(e)):"bigint"===r?BigInt(e):"Fraction"===r?(void 0===u&&(0,o.Sw)(),u(e)):M(parseFloat(e),t)},"Fraction, Object":function(e,t){return e},"BigNumber, Object":function(e,t){return e},"number, Object":function(e,t){return M(e,t)},"bigint, Object":function(e,t){return e},"Complex, Object":function(e,t){return 0!==e.im?e:M(e.re,t)},"Matrix, Object":function(e,t){return c(M(e.valueOf()))},"Array, Object":function(e,t){return e.map(M)}});function O(e){return new y("-","unaryMinus",[e])}function P(e,t,n,i){var s=t.shift(),a=t.reduce(((t,s)=>{if(!(0,r.Ll)(s)){var a=t.pop();if((0,r.Ll)(a))return[a,s];try{return t.push(N(e,[a,s],i)),t}catch(e){t.push(a)}}t.push(E(t.pop()));var o=1===t.length?t[0]:n(t);return[n([o,E(s)])]}),[s]);return 1===a.length?a[0]:n([a[0],C(a[1])])}function _(e,t){switch(e.type){case"SymbolNode":return e;case"ConstantNode":switch(typeof e.value){case"number":case"bigint":return T(e.value,t);case"string":return e.value;default:if(!isNaN(e.value))return T(e.value,t)}return e;case"FunctionNode":if(i[e.name]&&i[e.name].rawArgs)return e;if(!["add","multiply"].includes(e.name)){var n=e.args.map((e=>_(e,t)));if(!n.some(r.Ll))try{return N(e.name,n,t)}catch(e){}if("size"===e.name&&1===n.length&&(0,r.gO)(n[0])){for(var s=[],a=n[0];(0,r.gO)(a);)s.push(a.items.length),a=a.items[0];return c(s)}return new f(e.name,n.map(E))}case"OperatorNode":var o,u,l=e.fn.toString(),y=w(e);if((0,r.$$)(e)&&e.isUnary())o=[_(e.args[0],t)],u=(0,r.Ll)(o[0])?y(o):N(l,o,t);else if(b(e,t.context))if(o=(o=D(e,t.context)).map((e=>_(e,t))),v(l,t.context)){for(var x=[],S=[],C=0;C<o.length;C++)(0,r.Ll)(o[C])?S.push(o[C]):x.push(o[C]);x.length>1?(u=P(l,x,y,t),S.unshift(u),u=P(l,S,y,t)):u=P(l,o,y,t)}else u=P(l,o,y,t);else u=P(l,o=e.args.map((e=>_(e,t))),y,t);return u;case"ParenthesisNode":return _(e.content,t);case"AccessorNode":return function(e,t,n){if(!(0,r.$I)(t))return new h(E(e),E(t));if((0,r.gO)(e)||(0,r.OA)(e)){for(var i=Array.from(t.dimensions);i.length>0;)if((0,r.BA)(i[0])&&"string"!=typeof i[0].value){var s=T(i.shift().value,n);(0,r.gO)(e)?e=e.items[s-1]:(e=e.valueOf()[s-1])instanceof Array&&(e=c(e))}else{if(!(i.length>1&&(0,r.BA)(i[1])&&"string"!=typeof i[1].value))break;var a=T(i[1].value,n),o=[],u=(0,r.gO)(e)?e.items:e.valueOf();for(var l of u)if((0,r.gO)(l))o.push(l.items[a-1]);else{if(!(0,r.OA)(e))break;o.push(l[a-1])}if(o.length!==u.length)break;e=(0,r.gO)(e)?new p(o):c(o),i.splice(1,1)}return i.length===t.dimensions.length?new h(E(e),t):i.length>0?(t=new m(i),new h(E(e),t)):e}if((0,r.GJ)(e)&&1===t.dimensions.length&&(0,r.BA)(t.dimensions[0])){var f=t.dimensions[0].value;return f in e.properties?e.properties[f]:new d}return new h(E(e),t)}(_(e.object,t),_(e.index,t),t);case"ArrayNode":var M=e.items.map((e=>_(e,t)));return M.some(r.Ll)?new p(M.map(E)):c(M);case"IndexNode":return new m(e.dimensions.map((e=>A(e,t))));case"ObjectNode":var O={};for(var I in e.properties)O[I]=A(e.properties[I],t);return new g(O);default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(e.type))}}return A}))},2237:(e,t,n)=>{"use strict";n.d(t,{x:()=>u});var r=n(4943),i=n(261),s=n(4929),a=n(8321),o="simplifyCore",c=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],u=(0,a.P9)(o,c,(e=>{var{typed:t,parse:n,equal:a,isZero:c,add:u,subtract:l,multiply:h,divide:p,pow:d,AccessorNode:f,ArrayNode:m,ConstantNode:g,FunctionNode:y,IndexNode:x,ObjectNode:v,OperatorNode:b,ParenthesisNode:D,SymbolNode:w}=e,A=new g(0),S=new g(1),N=new g(!0),C=new g(!1);function E(e){return(0,r.$$)(e)&&["and","not","or"].includes(e.op)}var{hasProperty:M,isCommutative:T}=(0,s.Z)({FunctionNode:y,OperatorNode:b,SymbolNode:w});function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t?t.context:void 0;if(M(e,"trivial",n)){if((0,r.Px)(e)&&1===e.args.length)return O(e.args[0],t);var s=!1,o=0;if(e.forEach((e=>{1==++o&&(s=O(e,t))})),1===o)return s}var u=e;if((0,r.Px)(u)){var l=(0,i.F5)(u.name);if(!l)return new y(O(u.fn),u.args.map((e=>O(e,t))));if(u.args.length>2&&M(u,"associative",n))for(;u.args.length>2;){var h=u.args.pop(),p=u.args.pop();u.args.push(new b(l,u.name,[h,p]))}u=new b(l,u.name,u.args)}if((0,r.$$)(u)&&u.isUnary()){var d=O(u.args[0],t);if("~"===u.op&&(0,r.$$)(d)&&d.isUnary()&&"~"===d.op)return d.args[0];if("not"===u.op&&(0,r.$$)(d)&&d.isUnary()&&"not"===d.op&&E(d.args[0]))return d.args[0];var g=!0;if("-"===u.op&&(0,r.$$)(d)&&(d.isBinary()&&"subtract"===d.fn&&(u=new b("-","subtract",[d.args[1],d.args[0]]),g=!1),d.isUnary()&&"-"===d.op))return d.args[0];if(g)return new b(u.op,u.fn,[d])}if((0,r.$$)(u)&&u.isBinary()){var D=O(u.args[0],t),w=O(u.args[1],t);if("+"===u.op){if((0,r.BA)(D)&&c(D.value))return w;if((0,r.BA)(w)&&c(w.value))return D;(0,r.$$)(w)&&w.isUnary()&&"-"===w.op&&(w=w.args[0],u=new b("-","subtract",[D,w]))}if("-"===u.op)return(0,r.$$)(w)&&w.isUnary()&&"-"===w.op?O(new b("+","add",[D,w.args[0]]),t):(0,r.BA)(D)&&c(D.value)?O(new b("-","unaryMinus",[w])):(0,r.BA)(w)&&c(w.value)?D:new b(u.op,u.fn,[D,w]);if("*"===u.op){if((0,r.BA)(D)){if(c(D.value))return A;if(a(D.value,1))return w}if((0,r.BA)(w)){if(c(w.value))return A;if(a(w.value,1))return D;if(T(u,n))return new b(u.op,u.fn,[w,D],u.implicit)}return new b(u.op,u.fn,[D,w],u.implicit)}if("/"===u.op)return(0,r.BA)(D)&&c(D.value)?A:(0,r.BA)(w)&&a(w.value,1)?D:new b(u.op,u.fn,[D,w]);if("^"===u.op&&(0,r.BA)(w)){if(c(w.value))return S;if(a(w.value,1))return D}if("and"===u.op){if((0,r.BA)(D)){if(!D.value)return C;if(E(w))return w;if((0,r.BA)(w))return w.value?N:C}if((0,r.BA)(w)){if(!w.value)return C;if(E(D))return D}}if("or"===u.op){if((0,r.BA)(D)){if(D.value)return N;if(E(w))return w}if((0,r.BA)(w)){if(w.value)return N;if(E(D))return D}}return new b(u.op,u.fn,[D,w])}if((0,r.$$)(u))return new b(u.op,u.fn,u.args.map((e=>O(e,t))));if((0,r.gO)(u))return new m(u.items.map((e=>O(e,t))));if((0,r.AS)(u))return new f(O(u.object,t),O(u.index,t));if((0,r.$I)(u))return new x(u.dimensions.map((e=>O(e,t))));if((0,r.GJ)(u)){var P={};for(var _ in u.properties)P[_]=O(u.properties[_],t);return new v(P)}return u}return t(o,{Node:O,"Node,Object":O})}))},6886:(e,t,n)=>{"use strict";n.d(t,{i:()=>o});var r=n(8321),i=n(6267),s="lsolve",a=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],o=(0,r.P9)(s,a,(e=>{var{typed:t,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:o,equalScalar:c,DenseMatrix:u}=e,l=(0,i.B)({DenseMatrix:u});return t(s,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=(t=l(e,t,!0))._data,i=e._size[0],s=e._size[1],h=e._values,p=e._index,d=e._ptr,f=[],m=0;m<s;m++){var g=n[m][0]||0;if(c(g,0))f[m]=[0];else{for(var y=0,x=[],v=[],b=d[m],D=d[m+1],w=b;w<D;w++){var A=p[w];A===m?y=h[w]:A>m&&(x.push(h[w]),v.push(A))}if(c(y,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var S=r(g,y),N=0,C=v.length;N<C;N++){var E=v[N];n[E]=[o(n[E][0]||0,a(S,x[N]))]}f[m]=[S]}}return new u({data:f,size:[i,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return h(e,t)},"Array, Array | Matrix":function(e,t){return h(n(e),t).valueOf()}});function h(e,t){for(var n=(t=l(e,t,!0))._data,i=e._size[0],s=e._size[1],h=[],p=e._data,d=0;d<s;d++){var f=n[d][0]||0,m=void 0;if(c(f,0))m=0;else{var g=p[d][d];if(c(g,0))throw new Error("Linear system cannot be solved since matrix is singular");m=r(f,g);for(var y=d+1;y<i;y++)n[y]=[o(n[y][0]||0,a(m,p[y][d]))]}h[d]=[m]}return new u({data:h,size:[i,1]})}}))},3587:(e,t,n)=>{"use strict";n.d(t,{H:()=>o});var r=n(8321),i=n(6267),s="lsolveAll",a=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],o=(0,r.P9)(s,a,(e=>{var{typed:t,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:o,equalScalar:c,DenseMatrix:u}=e,l=(0,i.B)({DenseMatrix:u});return t(s,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=[l(e,t,!0)._data.map((e=>e[0]))],i=e._size[0],s=e._size[1],h=e._values,p=e._index,d=e._ptr,f=0;f<s;f++)for(var m=n.length,g=0;g<m;g++){for(var y=n[g],x=[],v=[],b=d[f],D=d[f+1],w=0,A=b;A<D;A++){var S=p[A];S===f?w=h[A]:S>f&&(x.push(h[A]),v.push(S))}if(c(w,0))if(c(y[f],0)){if(0===g){var N=[...y];N[f]=1;for(var C=0,E=v.length;C<E;C++){var M=v[C];N[M]=o(N[M],x[C])}n.push(N)}}else{if(0===g)return[];n.splice(g,1),g-=1,m-=1}else{y[f]=r(y[f],w);for(var T=0,O=v.length;T<O;T++){var P=v[T];y[P]=o(y[P],a(y[f],x[T]))}}}return n.map((e=>new u({data:e.map((e=>[e])),size:[i,1]})))}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return h(e,t)},"Array, Array | Matrix":function(e,t){return h(n(e),t).map((e=>e.valueOf()))}});function h(e,t){for(var n=[l(e,t,!0)._data.map((e=>e[0]))],i=e._data,s=e._size[0],h=e._size[1],p=0;p<h;p++)for(var d=n.length,f=0;f<d;f++){var m=n[f];if(c(i[p][p],0))if(c(m[p],0)){if(0===f){var g=[...m];g[p]=1;for(var y=p+1;y<h;y++)g[y]=o(g[y],i[y][p]);n.push(g)}}else{if(0===f)return[];n.splice(f,1),f-=1,d-=1}else{m[p]=r(m[p],i[p][p]);for(var x=p+1;x<h;x++)m[x]=o(m[x],a(m[p],i[x][p]))}}return n.map((e=>new u({data:e.map((e=>[e])),size:[s,1]})))}}))},8503:(e,t,n)=>{"use strict";n.d(t,{b:()=>u});var r=n(4943),i=n(8321),s=n(6267);function a(e,t){var n,r=t.length,i=[];if(e)for(n=0;n<r;n++)i[e[n]]=t[n];else for(n=0;n<r;n++)i[n]=t[n];return i}var o="lusolve",c=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],u=(0,i.P9)(o,c,(e=>{var{typed:t,matrix:n,lup:i,slu:c,usolve:u,lsolve:l,DenseMatrix:h}=e,p=(0,s.B)({DenseMatrix:h});return t(o,{"Array, Array | Matrix":function(e,t){e=n(e);var r=i(e);return f(r.L,r.U,r.p,null,t).valueOf()},"DenseMatrix, Array | Matrix":function(e,t){var n=i(e);return f(n.L,n.U,n.p,null,t)},"SparseMatrix, Array | Matrix":function(e,t){var n=i(e);return f(n.L,n.U,n.p,null,t)},"SparseMatrix, Array | Matrix, number, number":function(e,t,n,r){var i=c(e,n,r);return f(i.L,i.U,i.p,i.q,t)},"Object, Array | Matrix":function(e,t){return f(e.L,e.U,e.p,e.q,t)}});function d(e){if((0,r.OA)(e))return e;if((0,r.cy)(e))return n(e);throw new TypeError("Invalid Matrix LU decomposition")}function f(e,t,n,r,i){e=d(e),t=d(t),n&&((i=p(e,i,!0))._data=a(n,i._data));var s=l(e,i),o=u(t,s);return r&&(o._data=a(r,o._data)),o}}))},6431:(e,t,n)=>{"use strict";n.d(t,{p:()=>o});var r=n(8321),i=n(6267),s="usolve",a=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],o=(0,r.P9)(s,a,(e=>{var{typed:t,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:o,equalScalar:c,DenseMatrix:u}=e,l=(0,i.B)({DenseMatrix:u});return t(s,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=(t=l(e,t,!0))._data,i=e._size[0],s=e._size[1],h=e._values,p=e._index,d=e._ptr,f=[],m=s-1;m>=0;m--){var g=n[m][0]||0;if(c(g,0))f[m]=[0];else{for(var y=0,x=[],v=[],b=d[m],D=d[m+1]-1;D>=b;D--){var w=p[D];w===m?y=h[D]:w<m&&(x.push(h[D]),v.push(w))}if(c(y,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var A=r(g,y),S=0,N=v.length;S<N;S++){var C=v[S];n[C]=[o(n[C][0],a(A,x[S]))]}f[m]=[A]}}return new u({data:f,size:[i,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return h(e,t)},"Array, Array | Matrix":function(e,t){return h(n(e),t).valueOf()}});function h(e,t){for(var n=(t=l(e,t,!0))._data,i=e._size[0],s=e._size[1],h=[],p=e._data,d=s-1;d>=0;d--){var f=n[d][0]||0,m=void 0;if(c(f,0))m=0;else{var g=p[d][d];if(c(g,0))throw new Error("Linear system cannot be solved since matrix is singular");m=r(f,g);for(var y=d-1;y>=0;y--)n[y]=[o(n[y][0]||0,a(m,p[y][d]))]}h[d]=[m]}return new u({data:h,size:[i,1]})}}))},4032:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var r=n(8321),i=n(6267),s="usolveAll",a=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],o=(0,r.P9)(s,a,(e=>{var{typed:t,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:o,equalScalar:c,DenseMatrix:u}=e,l=(0,i.B)({DenseMatrix:u});return t(s,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=[l(e,t,!0)._data.map((e=>e[0]))],i=e._size[0],s=e._size[1],h=e._values,p=e._index,d=e._ptr,f=s-1;f>=0;f--)for(var m=n.length,g=0;g<m;g++){for(var y=n[g],x=[],v=[],b=d[f],D=0,w=d[f+1]-1;w>=b;w--){var A=p[w];A===f?D=h[w]:A<f&&(x.push(h[w]),v.push(A))}if(c(D,0))if(c(y[f],0)){if(0===g){var S=[...y];S[f]=1;for(var N=0,C=v.length;N<C;N++){var E=v[N];S[E]=o(S[E],x[N])}n.push(S)}}else{if(0===g)return[];n.splice(g,1),g-=1,m-=1}else{y[f]=r(y[f],D);for(var M=0,T=v.length;M<T;M++){var O=v[M];y[O]=o(y[O],a(y[f],x[M]))}}}return n.map((e=>new u({data:e.map((e=>[e])),size:[i,1]})))}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return h(e,t)},"Array, Array | Matrix":function(e,t){return h(n(e),t).map((e=>e.valueOf()))}});function h(e,t){for(var n=[l(e,t,!0)._data.map((e=>e[0]))],i=e._data,s=e._size[0],h=e._size[1]-1;h>=0;h--)for(var p=n.length,d=0;d<p;d++){var f=n[d];if(c(i[h][h],0))if(c(f[h],0)){if(0===d){var m=[...f];m[h]=1;for(var g=h-1;g>=0;g--)m[g]=o(m[g],i[g][h]);n.push(m)}}else{if(0===d)return[];n.splice(d,1),d-=1,p-=1}else{f[h]=r(f[h],i[h][h]);for(var y=h-1;y>=0;y--)f[y]=o(f[y],a(f[h],i[y][h]))}}return n.map((e=>new u({data:e.map((e=>[e])),size:[s,1]})))}}))},6267:(e,t,n)=>{"use strict";n.d(t,{B:()=>a});var r=n(4943),i=n(5838),s=n(760);function a(e){var{DenseMatrix:t}=e;return function(e,n,a){var o=e.size();if(2!==o.length)throw new RangeError("Matrix must be two dimensional (size: "+(0,s.GP)(o)+")");var c=o[0];if(c!==o[1])throw new RangeError("Matrix must be square (size: "+(0,s.GP)(o)+")");var u=[];if((0,r.OA)(n)){var l=n.size(),h=n._data;if(1===l.length){if(l[0]!==c)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var p=0;p<c;p++)u[p]=[h[p]];return new t({data:u,size:[c,1],datatype:n._datatype})}if(2===l.length){if(l[0]!==c||1!==l[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if((0,r.zR)(n)){if(a){u=[];for(var d=0;d<c;d++)u[d]=[h[d][0]];return new t({data:u,size:[c,1],datatype:n._datatype})}return n}if((0,r.AF)(n)){for(var f=0;f<c;f++)u[f]=[0];for(var m=n._values,g=n._index,y=n._ptr,x=y[1],v=y[0];v<x;v++)u[g[v]][0]=m[v];return new t({data:u,size:[c,1],datatype:n._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if((0,r.cy)(n)){var b=(0,i.LO)(n);if(1===b.length){if(b[0]!==c)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var D=0;D<c;D++)u[D]=[n[D]];return new t({data:u,size:[c,1]})}if(2===b.length){if(b[0]!==c||1!==b[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var w=0;w<c;w++)u[w]=[n[w][0]];return new t({data:u,size:[c,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}},8528:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var r=n(8321),i="sylvester",s=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],a=(0,r.P9)(i,s,(e=>{var{typed:t,schur:n,matrixFromColumns:r,matrix:s,multiply:a,range:o,concat:c,transpose:u,index:l,subset:h,add:p,subtract:d,identity:f,lusolve:m,abs:g}=e;return t(i,{"Matrix, Matrix, Matrix":y,"Array, Matrix, Matrix":function(e,t,n){return y(s(e),t,n)},"Array, Array, Matrix":function(e,t,n){return y(s(e),s(t),n)},"Array, Matrix, Array":function(e,t,n){return y(s(e),t,s(n))},"Matrix, Array, Matrix":function(e,t,n){return y(e,s(t),n)},"Matrix, Array, Array":function(e,t,n){return y(e,s(t),s(n))},"Matrix, Matrix, Array":function(e,t,n){return y(e,t,s(n))},"Array, Array, Array":function(e,t,n){return y(s(e),s(t),s(n)).toArray()}});function y(e,t,i){for(var y=t.size()[0],x=e.size()[0],v=n(e),b=v.T,D=v.U,w=n(a(-1,t)),A=w.T,S=w.U,N=a(a(u(D),i),S),C=o(0,x),E=[],M=(e,t)=>c(e,t,1),T=(e,t)=>c(e,t,0),O=0;O<y;O++)if(O<y-1&&g(h(A,l(O+1,O)))>1e-5){for(var P=T(h(N,l(C,O)),h(N,l(C,O+1))),_=0;_<O;_++)P=p(P,T(a(E[_],h(A,l(_,O))),a(E[_],h(A,l(_,O+1)))));var I=a(f(x),a(-1,h(A,l(O,O)))),B=a(f(x),a(-1,h(A,l(O+1,O)))),R=a(f(x),a(-1,h(A,l(O,O+1)))),F=a(f(x),a(-1,h(A,l(O+1,O+1)))),j=T(M(p(b,I),B),M(R,p(b,F))),k=m(j,P);E[O]=k.subset(l(o(0,x),0)),E[O+1]=k.subset(l(o(x,2*x),0)),O++}else{for(var q=h(N,l(C,O)),L=0;L<O;L++)q=p(q,a(E[L],h(A,l(L,O))));var z=h(A,l(O,O)),U=d(b,a(z,f(x)));E[O]=m(U,q)}var G=s(r(...E));return a(D,a(G,u(S)))}}))},5945:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var r=n(4943),i=n(8321),s="symbolicEqual",a=["parse","simplify","typed","OperatorNode"],o=(0,i.P9)(s,a,(e=>{var{parse:t,simplify:n,typed:i,OperatorNode:a}=e;function o(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=new a("-","subtract",[e,t]),o=n(s,{},i);return(0,r.BA)(o)&&!o.value}return i(s,{"Node, Node":o,"Node, Node, Object":o})}))},3935:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var r=n(8321),i=n(6355),s=n(1976),a=["typed"],o=(0,r.P9)("abs",a,(e=>{var{typed:t}=e;return t("abs",{number:s.gu,"Complex | BigNumber | Fraction | Unit":e=>e.abs(),bigint:e=>e<0n?-e:e,"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e,!0)))})}))},7896:(e,t,n)=>{"use strict";n.d(t,{W:()=>u});var r=n(8321),i=n(6540),s=n(7481),a=n(2723),o=n(2573),c=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],u=(0,r.P9)("add",c,(e=>{var{typed:t,matrix:n,addScalar:r,equalScalar:c,DenseMatrix:u,SparseMatrix:l,concat:h}=e,p=(0,i.Z)({typed:t}),d=(0,s.c)({typed:t,equalScalar:c}),f=(0,a.A)({typed:t,DenseMatrix:u}),m=(0,o.$)({typed:t,matrix:n,concat:h});return t("add",{"any, any":r,"any, any, ...any":t.referToSelf((e=>(t,n,r)=>{for(var i=e(t,n),s=0;s<r.length;s++)i=e(i,r[s]);return i}))},m({elop:r,DS:p,SS:d,Ss:f}))}))},340:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var r=n(8321),i=n(1976),s="addScalar",a=["typed"],o=(0,r.P9)(s,a,(e=>{var{typed:t}=e;return t(s,{"number, number":i.LF,"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"bigint, bigint":function(e,t){return e+t},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":t.referToSelf((e=>(n,r)=>{if(null===n.value||void 0===n.value)throw new Error("Parameter x contains a unit with undefined value");if(null===r.value||void 0===r.value)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(r))throw new Error("Units do not match");var i=n.clone();return i.value=t.find(e,[i.valueType(),r.valueType()])(i.value,r.value),i.fixPrefix=!1,i}))})}))},5988:(e,t,n)=>{"use strict";n.d(t,{q:()=>c});var r=n(8321),i=n(4943),s=n(1976),a="cbrt",o=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],c=(0,r.P9)(a,o,(e=>{var{config:t,typed:n,isNegative:r,unaryMinus:o,matrix:c,Complex:u,BigNumber:l,Fraction:h}=e;return n(a,{number:s.nA,Complex:p,"Complex, boolean":p,BigNumber:function(e){return e.cbrt()},Unit:function(e){if(e.value&&(0,i.Zd)(e.value)){var t=e.clone();return t.value=1,(t=t.pow(1/3)).value=p(e.value),t}var n,s=r(e.value);s&&(e.value=o(e.value)),n=(0,i.C4)(e.value)?new l(1).div(3):(0,i.fU)(e.value)?new h(1,3):1/3;var a=e.pow(n);return s&&(a.value=o(a.value)),a}});function p(e,n){var r=e.arg()/3,i=e.abs(),a=new u((0,s.nA)(i),0).mul(new u(0,r).exp());if(n){var o=[a,new u((0,s.nA)(i),0).mul(new u(0,r+2*Math.PI/3).exp()),new u((0,s.nA)(i),0).mul(new u(0,r-2*Math.PI/3).exp())];return"Array"===t.matrix?o:c(o)}return a}}))},2402:(e,t,n)=>{"use strict";n.d(t,{K:()=>f});var r=n(6582),i=n(8321),s=n(6355),a=n(1106),o=n(6052),c=n(9755),u=n(4900),l=n(2347),h="ceil",p=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],d=(0,i.P9)(h,["typed","config","round"],(e=>{var{typed:t,config:n,round:r}=e;return t(h,{number:function(e){return(0,a.q8)(e,r(e),n.relTol,n.absTol)?r(e):Math.ceil(e)},"number, number":function(e,t){if((0,a.q8)(e,r(e,t),n.relTol,n.absTol))return r(e,t);var[i,s]="".concat(e,"e").split("e"),o=Math.ceil(Number("".concat(i,"e").concat(Number(s)+t)));return[i,s]="".concat(o,"e").split("e"),Number("".concat(i,"e").concat(Number(s)-t))}})})),f=(0,i.P9)(h,p,(e=>{var{typed:t,config:n,round:i,matrix:a,equalScalar:h,zeros:p,DenseMatrix:f}=e,m=(0,c.A)({typed:t,equalScalar:h}),g=(0,u.f)({typed:t,DenseMatrix:f}),y=(0,l.A)({typed:t}),x=d({typed:t,config:n,round:i});return t("ceil",{number:x.signatures.number,"number,number":x.signatures["number,number"],Complex:function(e){return e.ceil()},"Complex, number":function(e,t){return e.ceil(t)},"Complex, BigNumber":function(e,t){return e.ceil(t.toNumber())},BigNumber:function(e){return(0,o.q)(e,i(e),n.relTol,n.absTol)?i(e):e.ceil()},"BigNumber, BigNumber":function(e,t){return(0,o.q)(e,i(e,t),n.relTol,n.absTol)?i(e,t):e.toDecimalPlaces(t.toNumber(),r.A.ROUND_CEIL)},Fraction:function(e){return e.ceil()},"Fraction, number":function(e,t){return e.ceil(t)},"Fraction, BigNumber":function(e,t){return e.ceil(t.toNumber())},"Array | Matrix":t.referToSelf((e=>t=>(0,s.Bl)(t,e,!0))),"Array, number | BigNumber":t.referToSelf((e=>(t,n)=>(0,s.Bl)(t,(t=>e(t,n)),!0))),"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>m(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>y(t,n,e,!1))),"number | Complex | Fraction | BigNumber, Array":t.referToSelf((e=>(t,n)=>y(a(n),t,e,!0).valueOf())),"number | Complex | Fraction | BigNumber, Matrix":t.referToSelf((e=>(t,n)=>h(t,0)?p(n.size(),n.storage()):"dense"===n.storage()?y(n,t,e,!0):g(n,t,e,!0)))})}))},8238:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var r=n(8321),i=n(1976),s="cube",a=["typed"],o=(0,r.P9)(s,a,(e=>{var{typed:t}=e;return t(s,{number:i.b7,Complex:function(e){return e.mul(e).mul(e)},BigNumber:function(e){return e.times(e).times(e)},bigint:function(e){return e*e*e},Fraction:function(e){return e.pow(3)},Unit:function(e){return e.pow(3)}})}))},8490:(e,t,n)=>{"use strict";n.d(t,{G:()=>c});var r=n(8321),i=n(3140),s=n(9755),a=n(2347),o=["typed","matrix","multiply","equalScalar","divideScalar","inv"],c=(0,r.P9)("divide",o,(e=>{var{typed:t,matrix:n,multiply:r,equalScalar:o,divideScalar:c,inv:u}=e,l=(0,s.A)({typed:t,equalScalar:o}),h=(0,a.A)({typed:t});return t("divide",(0,i.X$)({"Array | Matrix, Array | Matrix":function(e,t){return r(e,u(t))},"DenseMatrix, any":function(e,t){return h(e,t,c,!1)},"SparseMatrix, any":function(e,t){return l(e,t,c,!1)},"Array, any":function(e,t){return h(n(e),t,c,!1).valueOf()},"any, Array | Matrix":function(e,t){return r(e,u(t))}},c.signatures))}))},3170:(e,t,n)=>{"use strict";n.d(t,{Q:()=>a});var r=n(8321),i="divideScalar",s=["typed","numeric"],a=(0,r.P9)(i,s,(e=>{var{typed:t,numeric:n}=e;return t(i,{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"bigint, bigint":function(e,t){return e/t},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Complex | Fraction | BigNumber | Unit":(e,t)=>e.divide(t),"number | Fraction | Complex | BigNumber, Unit":(e,t)=>t.divideInto(e)})}))},161:(e,t,n)=>{"use strict";n.d(t,{F:()=>p});var r=n(8321),i=n(7308),s=n(361),a=n(5572),o=n(9755),c=n(4900),u=n(2573),l="dotDivide",h=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat"],p=(0,r.P9)(l,h,(e=>{var{typed:t,matrix:n,equalScalar:r,divideScalar:h,DenseMatrix:p,concat:d}=e,f=(0,i.Z)({typed:t,equalScalar:r}),m=(0,s.O)({typed:t}),g=(0,a.v)({typed:t,DenseMatrix:p}),y=(0,o.A)({typed:t,equalScalar:r}),x=(0,c.f)({typed:t,DenseMatrix:p}),v=(0,u.$)({typed:t,matrix:n,concat:d});return t(l,v({elop:h,SS:g,DS:m,SD:f,Ss:y,sS:x}))}))},9812:(e,t,n)=>{"use strict";n.d(t,{S:()=>l});var r=n(8321),i=n(7308),s=n(7726),a=n(9755),o=n(2573),c="dotMultiply",u=["typed","matrix","equalScalar","multiplyScalar","concat"],l=(0,r.P9)(c,u,(e=>{var{typed:t,matrix:n,equalScalar:r,multiplyScalar:u,concat:l}=e,h=(0,i.Z)({typed:t,equalScalar:r}),p=(0,s.h)({typed:t,equalScalar:r}),d=(0,a.A)({typed:t,equalScalar:r}),f=(0,o.$)({typed:t,matrix:n,concat:l});return t(c,f({elop:u,SS:p,DS:h,Ss:d}))}))},5712:(e,t,n)=>{"use strict";n.d(t,{U:()=>h});var r=n(8321),i=n(361),s=n(5572),a=n(9755),o=n(4900),c=n(2573),u="dotPow",l=["typed","equalScalar","matrix","pow","DenseMatrix","concat"],h=(0,r.P9)(u,l,(e=>{var{typed:t,equalScalar:n,matrix:r,pow:l,DenseMatrix:h,concat:p}=e,d=(0,i.O)({typed:t}),f=(0,s.v)({typed:t,DenseMatrix:h}),m=(0,a.A)({typed:t,equalScalar:n}),g=(0,o.f)({typed:t,DenseMatrix:h}),y=(0,c.$)({typed:t,matrix:r,concat:p}),x={};for(var v in l.signatures)Object.prototype.hasOwnProperty.call(l.signatures,v)&&(v.includes("Matrix")||v.includes("Array")||(x[v]=l.signatures[v]));var b=t(x);return t(u,y({elop:b,SS:f,DS:d,Ss:m,sS:g}))}))},2340:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var r=n(8321),i=n(1976),s=["typed"],a=(0,r.P9)("exp",s,(e=>{var{typed:t}=e;return t("exp",{number:i.lq,Complex:function(e){return e.exp()},BigNumber:function(e){return e.exp()}})}))},2486:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var r=n(8321),i=n(1976),s="expm1",a=["typed","Complex"],o=(0,r.P9)(s,a,(e=>{var{typed:t,Complex:n}=e;return t(s,{number:i.l3,Complex:function(e){var t=Math.exp(e.re);return new n(t*Math.cos(e.im)-1,t*Math.sin(e.im))},BigNumber:function(e){return e.exp().minus(1)}})}))},8808:(e,t,n)=>{"use strict";n.d(t,{Y:()=>l});var r=n(8321),i=n(6355),s=n(4900),a=n(2347),o="fix",c=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],u=(0,r.P9)(o,["typed","ceil","floor"],(e=>{var{typed:t,ceil:n,floor:r}=e;return t(o,{number:function(e){return e>0?r(e):n(e)},"number, number":function(e,t){return e>0?r(e,t):n(e,t)}})})),l=(0,r.P9)(o,c,(e=>{var{typed:t,Complex:n,matrix:r,ceil:o,floor:c,equalScalar:l,zeros:h,DenseMatrix:p}=e,d=(0,s.f)({typed:t,DenseMatrix:p}),f=(0,a.A)({typed:t}),m=u({typed:t,ceil:o,floor:c});return t("fix",{number:m.signatures.number,"number, number | BigNumber":m.signatures["number,number"],Complex:function(e){return new n(e.re>0?Math.floor(e.re):Math.ceil(e.re),e.im>0?Math.floor(e.im):Math.ceil(e.im))},"Complex, number":function(e,t){return new n(e.re>0?c(e.re,t):o(e.re,t),e.im>0?c(e.im,t):o(e.im,t))},"Complex, BigNumber":function(e,t){var r=t.toNumber();return new n(e.re>0?c(e.re,r):o(e.re,r),e.im>0?c(e.im,r):o(e.im,r))},BigNumber:function(e){return e.isNegative()?o(e):c(e)},"BigNumber, number | BigNumber":function(e,t){return e.isNegative()?o(e,t):c(e,t)},Fraction:function(e){return e.s<0?e.ceil():e.floor()},"Fraction, number | BigNumber":function(e,t){return e.s<0?o(e,t):c(e,t)},"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e,!0))),"Array | Matrix, number | BigNumber":t.referToSelf((e=>(t,n)=>(0,i.Bl)(t,(t=>e(t,n)),!0))),"number | Complex | Fraction | BigNumber, Array":t.referToSelf((e=>(t,n)=>f(r(n),t,e,!0).valueOf())),"number | Complex | Fraction | BigNumber, Matrix":t.referToSelf((e=>(t,n)=>l(t,0)?h(n.size(),n.storage()):"dense"===n.storage()?f(n,t,e,!0):d(n,t,e,!0)))})}))},4449:(e,t,n)=>{"use strict";n.d(t,{$:()=>f});var r=n(6582),i=n(8321),s=n(6355),a=n(1106),o=n(6052),c=n(9755),u=n(4900),l=n(2347),h="floor",p=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],d=(0,i.P9)(h,["typed","config","round"],(e=>{var{typed:t,config:n,round:r}=e;return t(h,{number:function(e){return(0,a.q8)(e,r(e),n.relTol,n.absTol)?r(e):Math.floor(e)},"number, number":function(e,t){if((0,a.q8)(e,r(e,t),n.relTol,n.absTol))return r(e,t);var[i,s]="".concat(e,"e").split("e"),o=Math.floor(Number("".concat(i,"e").concat(Number(s)+t)));return[i,s]="".concat(o,"e").split("e"),Number("".concat(i,"e").concat(Number(s)-t))}})})),f=(0,i.P9)(h,p,(e=>{var{typed:t,config:n,round:i,matrix:a,equalScalar:h,zeros:p,DenseMatrix:f}=e,m=(0,c.A)({typed:t,equalScalar:h}),g=(0,u.f)({typed:t,DenseMatrix:f}),y=(0,l.A)({typed:t}),x=d({typed:t,config:n,round:i});return t("floor",{number:x.signatures.number,"number,number":x.signatures["number,number"],Complex:function(e){return e.floor()},"Complex, number":function(e,t){return e.floor(t)},"Complex, BigNumber":function(e,t){return e.floor(t.toNumber())},BigNumber:function(e){return(0,o.q)(e,i(e),n.relTol,n.absTol)?i(e):e.floor()},"BigNumber, BigNumber":function(e,t){return(0,o.q)(e,i(e,t),n.relTol,n.absTol)?i(e,t):e.toDecimalPlaces(t.toNumber(),r.A.ROUND_FLOOR)},Fraction:function(e){return e.floor()},"Fraction, number":function(e,t){return e.floor(t)},"Fraction, BigNumber":function(e,t){return e.floor(t.toNumber())},"Array | Matrix":t.referToSelf((e=>t=>(0,s.Bl)(t,e,!0))),"Array, number | BigNumber":t.referToSelf((e=>(t,n)=>(0,s.Bl)(t,(t=>e(t,n)),!0))),"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>m(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>y(t,n,e,!1))),"number | Complex | Fraction | BigNumber, Array":t.referToSelf((e=>(t,n)=>y(a(n),t,e,!0).valueOf())),"number | Complex | Fraction | BigNumber, Matrix":t.referToSelf((e=>(t,n)=>h(t,0)?p(n.size(),n.storage()):"dense"===n.storage()?y(n,t,e,!0):g(n,t,e,!0)))})}))},9253:(e,t,n)=>{"use strict";n.d(t,{p:()=>m});var r=n(1106),i=n(8321),s=n(4867),a=n(6540),o=n(7481),c=n(2723),u=n(2573),l=n(928),h=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],p="number | BigNumber | Fraction | Matrix | Array",d="".concat(p,", ").concat(p,", ...").concat(p);function f(e){return!e.some((e=>Array.isArray(e)))}var m=(0,i.P9)("gcd",h,(e=>{var{typed:t,matrix:n,config:i,round:h,equalScalar:p,zeros:m,BigNumber:g,DenseMatrix:y,concat:x}=e,v=(0,s.n)({typed:t,config:i,round:h,matrix:n,equalScalar:p,zeros:m,DenseMatrix:y,concat:x}),b=(0,a.Z)({typed:t}),D=(0,o.c)({typed:t,equalScalar:p}),w=(0,c.A)({typed:t,DenseMatrix:y});return t("gcd",{"number, number":function(e,t){if(!(0,r.YN)(e)||!(0,r.YN)(t))throw new Error("Parameters in function gcd must be integer numbers");for(var n;0!==t;)n=v(e,t),e=t,t=n;return e<0?-e:e},"BigNumber, BigNumber":function(e,t){if(!e.isInt()||!t.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var n=new g(0);!t.isZero();){var r=v(e,t);e=t,t=r}return e.lt(n)?e.neg():e},"Fraction, Fraction":(e,t)=>e.gcd(t)},(0,u.$)({typed:t,matrix:n,concat:x})({SS:D,DS:b,Ss:w}),{[d]:t.referToSelf((e=>(t,n,r)=>{for(var i=e(t,n),s=0;s<r.length;s++)i=e(i,r[s]);return i})),Array:t.referToSelf((e=>t=>{if(1===t.length&&Array.isArray(t[0])&&f(t[0]))return e(...t[0]);if(f(t))return e(...t);throw new l.X("gcd() supports only 1d matrices!")})),Matrix:t.referToSelf((e=>t=>e(t.toArray())))})}))},3253:(e,t,n)=>{"use strict";n.d(t,{r:()=>c});var r=n(8321),i=n(5838),s=n(4943),a="hypot",o=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],c=(0,r.P9)(a,o,(e=>{var{typed:t,abs:n,addScalar:r,divideScalar:o,multiplyScalar:c,sqrt:u,smaller:l,isPositive:h}=e;return t(a,{"... number | BigNumber":p,Array:p,Matrix:e=>p((0,i.Bq)(e.toArray()))});function p(e){for(var t=0,i=0,a=0;a<e.length;a++){if((0,s.Zd)(e[a]))throw new TypeError("Unexpected type of argument to hypot");var p=n(e[a]);l(i,p)?(t=c(t,c(o(i,p),o(i,p))),t=r(t,1),i=p):t=r(t,h(p)?c(o(p,i),o(p,i)):p)}return c(i,u(t))}}))},9010:(e,t,n)=>{"use strict";n.d(t,{o:()=>a});var r=n(8321),i="invmod",s=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],a=(0,r.P9)(i,s,(e=>{var{typed:t,config:n,BigNumber:r,xgcd:s,equal:a,smaller:o,mod:c,add:u,isInteger:l}=e;return t(i,{"number, number":h,"BigNumber, BigNumber":h});function h(e,t){if(!l(e)||!l(t))throw new Error("Parameters in function invmod must be integer numbers");if(e=c(e,t),a(t,0))throw new Error("Divisor must be non zero");var n=s(e,t);n=n.valueOf();var[i,h]=n;return a(i,r(1))?(h=c(h,t),o(h,r(0))&&(h=u(h,t)),h):NaN}}))},455:(e,t,n)=>{"use strict";n.d(t,{D:()=>l});var r=n(8321),i=n(7308),s=n(5651),a=n(9755),o=n(2573),c=n(1976),u=["typed","matrix","equalScalar","concat"],l=(0,r.P9)("lcm",u,(e=>{var{typed:t,matrix:n,equalScalar:r,concat:u}=e,l=(0,i.Z)({typed:t,equalScalar:r}),h=(0,s.S)({typed:t,equalScalar:r}),p=(0,a.A)({typed:t,equalScalar:r}),d=(0,o.$)({typed:t,matrix:n,concat:u}),f="number | BigNumber | Fraction | Matrix | Array",m={};return m["".concat(f,", ").concat(f,", ...").concat(f)]=t.referToSelf((e=>(t,n,r)=>{for(var i=e(t,n),s=0;s<r.length;s++)i=e(i,r[s]);return i})),t("lcm",{"number, number":c.qV,"BigNumber, BigNumber":function(e,t){if(!e.isInt()||!t.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(e.isZero())return e;if(t.isZero())return t;for(var n=e.times(t);!t.isZero();){var r=t;t=e.mod(r),e=r}return n.div(e).abs()},"Fraction, Fraction":(e,t)=>e.lcm(t)},d({SS:h,DS:l,Ss:p}),m)}))},4861:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});var r=n(8321),i=n(1976),s=["config","typed","divideScalar","Complex"],a=(0,r.P9)("log",s,(e=>{var{typed:t,config:n,divideScalar:r,Complex:s}=e;return t("log",{number:function(e){return e>=0||n.predictable?(0,i.gn)(e):new s(e,0).log()},Complex:function(e){return e.log()},BigNumber:function(e){return!e.isNegative()||n.predictable?e.ln():new s(e.toNumber(),0).log()},"any, any":t.referToSelf((e=>(t,n)=>r(e(t),e(n))))})}))},9016:(e,t,n)=>{"use strict";n.d(t,{e:()=>c});var r=n(8321),i=n(6355),s=n(1976),a="log10",o=["typed","config","Complex"],c=(0,r.P9)(a,o,(e=>{var{typed:t,config:n,Complex:r}=e;return t(a,{number:function(e){return e>=0||n.predictable?(0,s.Nk)(e):new r(e,0).log().div(Math.LN10)},Complex:function(e){return new r(e).log().div(Math.LN10)},BigNumber:function(e){return!e.isNegative()||n.predictable?e.log():new r(e.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e)))})}))},3144:(e,t,n)=>{"use strict";n.d(t,{s:()=>c});var r=n(8321),i=n(6355),s=n(1106),a="log1p",o=["typed","config","divideScalar","log","Complex"],c=(0,r.P9)(a,o,(e=>{var{typed:t,config:n,divideScalar:r,log:o,Complex:c}=e;return t(a,{number:function(e){return e>=-1||n.predictable?(0,s.Kk)(e):u(new c(e,0))},Complex:u,BigNumber:function(e){var t=e.plus(1);return!t.isNegative()||n.predictable?t.ln():u(new c(e.toNumber(),0))},"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e))),"any, any":t.referToSelf((e=>(t,n)=>r(e(t),o(n))))});function u(e){var t=e.re+1;return new c(Math.log(Math.sqrt(t*t+e.im*e.im)),Math.atan2(e.im,t))}}))},1311:(e,t,n)=>{"use strict";n.d(t,{j:()=>c});var r=n(8321),i=n(6355),s=n(1976),a="log2",o=["typed","config","Complex"],c=(0,r.P9)(a,o,(e=>{var{typed:t,config:n,Complex:r}=e;return t(a,{number:function(e){return e>=0||n.predictable?(0,s.qc)(e):o(new r(e,0))},Complex:o,BigNumber:function(e){return!e.isNegative()||n.predictable?e.log(2):o(new r(e.toNumber(),0))},"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e)))});function o(e){var t=Math.sqrt(e.re*e.re+e.im*e.im);return new r(Math.log2?Math.log2(t):Math.log(t)/Math.LN2,Math.atan2(e.im,e.re)/Math.LN2)}}))},4867:(e,t,n)=>{"use strict";n.d(t,{n:()=>p});var r=n(8321),i=n(4449),s=n(7308),a=n(361),o=n(1232),c=n(9755),u=n(4900),l=n(2573),h=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],p=(0,r.P9)("mod",h,(e=>{var{typed:t,config:n,round:r,matrix:h,equalScalar:p,zeros:d,DenseMatrix:f,concat:m}=e,g=(0,i.$)({typed:t,config:n,round:r,matrix:h,equalScalar:p,zeros:d,DenseMatrix:f}),y=(0,s.Z)({typed:t,equalScalar:p}),x=(0,a.O)({typed:t}),v=(0,o.H)({typed:t,equalScalar:p}),b=(0,c.A)({typed:t,equalScalar:p}),D=(0,u.f)({typed:t,DenseMatrix:f});return t("mod",{"number, number":function(e,t){return 0===t?e:e-t*g(e/t)},"BigNumber, BigNumber":function(e,t){return t.isZero()?e:e.sub(t.mul(g(e.div(t))))},"bigint, bigint":function(e,t){if(0n===t)return e;if(e<0){var n=e%t;return 0n===n?n:n+t}return e%t},"Fraction, Fraction":function(e,t){return t.equals(0)?e:e.sub(t.mul(g(e.div(t))))}},(0,l.$)({typed:t,matrix:h,concat:m})({SS:v,DS:x,SD:y,Ss:b,sS:D}))}))},2639:(e,t,n)=>{"use strict";n.d(t,{F:()=>l});var r=n(8321),i=n(4943),s=n(5838),a=n(9755),o=n(2347),c="multiply",u=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],l=(0,r.P9)(c,u,(e=>{var{typed:t,matrix:n,addScalar:r,multiplyScalar:u,equalScalar:l,dot:h}=e,p=(0,a.A)({typed:t,equalScalar:l}),d=(0,o.A)({typed:t});function f(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)")}}var m=t("_multiplyMatrixVector",{"DenseMatrix, any":function(e,n){var i,s=e._data,a=e._size,o=e._datatype||e.getDataType(),c=n._data,l=n._datatype||n.getDataType(),h=a[0],p=a[1],d=r,f=u;o&&l&&o===l&&"string"==typeof o&&"mixed"!==o&&(i=o,d=t.find(r,[i,i]),f=t.find(u,[i,i]));for(var m=[],g=0;g<h;g++){for(var y=s[g],x=f(y[0],c[0]),v=1;v<p;v++)x=d(x,f(y[v],c[v]));m[g]=x}return e.createDenseMatrix({data:m,size:[h],datatype:o===e._datatype&&l===n._datatype?i:void 0})},"SparseMatrix, any":function(e,n){var i=e._values,s=e._index,a=e._ptr,o=e._datatype||void 0===e._data?e._datatype:e.getDataType();if(!i)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,h=n._data,p=n._datatype||n.getDataType(),d=e._size[0],f=n._size[0],m=[],g=[],y=[],x=r,v=u,b=l,D=0;o&&p&&o===p&&"string"==typeof o&&"mixed"!==o&&(c=o,x=t.find(r,[c,c]),v=t.find(u,[c,c]),b=t.find(l,[c,c]),D=t.convert(0,c));var w=[],A=[];y[0]=0;for(var S=0;S<f;S++){var N=h[S];if(!b(N,D))for(var C=a[S],E=a[S+1],M=C;M<E;M++){var T=s[M];A[T]?w[T]=x(w[T],v(N,i[M])):(A[T]=!0,g.push(T),w[T]=v(N,i[M]))}}for(var O=g.length,P=0;P<O;P++){var _=g[P];m[P]=w[_]}return y[1]=g.length,e.createSparseMatrix({values:m,index:g,ptr:y,size:[d,1],datatype:o===e._datatype&&p===n._datatype?c:void 0})}}),g=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(e,n){var i,s=e._data,a=e._size,o=e._datatype||e.getDataType(),c=n._data,l=n._size,h=n._datatype||n.getDataType(),p=a[0],d=a[1],f=l[1],m=r,g=u;o&&h&&o===h&&"string"==typeof o&&"mixed"!==o&&"mixed"!==o&&(i=o,m=t.find(r,[i,i]),g=t.find(u,[i,i]));for(var y=[],x=0;x<p;x++){var v=s[x];y[x]=[];for(var b=0;b<f;b++){for(var D=g(v[0],c[0][b]),w=1;w<d;w++)D=m(D,g(v[w],c[w][b]));y[x][b]=D}}return e.createDenseMatrix({data:y,size:[p,f],datatype:o===e._datatype&&h===n._datatype?i:void 0})},"DenseMatrix, SparseMatrix":function(e,n){var i=e._data,s=e._size,a=e._datatype||e.getDataType(),o=n._values,c=n._index,h=n._ptr,p=n._size,d=n._datatype||void 0===n._data?n._datatype:n.getDataType();if(!o)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var f,m=s[0],g=p[1],y=r,x=u,v=l,b=0;a&&d&&a===d&&"string"==typeof a&&"mixed"!==a&&(f=a,y=t.find(r,[f,f]),x=t.find(u,[f,f]),v=t.find(l,[f,f]),b=t.convert(0,f));for(var D=[],w=[],A=[],S=n.createSparseMatrix({values:D,index:w,ptr:A,size:[m,g],datatype:a===e._datatype&&d===n._datatype?f:void 0}),N=0;N<g;N++){A[N]=w.length;var C=h[N],E=h[N+1];if(E>C)for(var M=0,T=0;T<m;T++){for(var O=T+1,P=void 0,_=C;_<E;_++){var I=c[_];M!==O?(P=x(i[T][I],o[_]),M=O):P=y(P,x(i[T][I],o[_]))}M!==O||v(P,b)||(w.push(T),D.push(P))}}return A[g]=w.length,S},"SparseMatrix, DenseMatrix":function(e,n){var i=e._values,s=e._index,a=e._ptr,o=e._datatype||void 0===e._data?e._datatype:e.getDataType();if(!i)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,h=n._data,p=n._datatype||n.getDataType(),d=e._size[0],f=n._size[0],m=n._size[1],g=r,y=u,x=l,v=0;o&&p&&o===p&&"string"==typeof o&&"mixed"!==o&&(c=o,g=t.find(r,[c,c]),y=t.find(u,[c,c]),x=t.find(l,[c,c]),v=t.convert(0,c));for(var b=[],D=[],w=[],A=e.createSparseMatrix({values:b,index:D,ptr:w,size:[d,m],datatype:o===e._datatype&&p===n._datatype?c:void 0}),S=[],N=[],C=0;C<m;C++){w[C]=D.length;for(var E=C+1,M=0;M<f;M++){var T=h[M][C];if(!x(T,v))for(var O=a[M],P=a[M+1],_=O;_<P;_++){var I=s[_];N[I]!==E?(N[I]=E,D.push(I),S[I]=y(T,i[_])):S[I]=g(S[I],y(T,i[_]))}}for(var B=w[C],R=D.length,F=B;F<R;F++){var j=D[F];b[F]=S[j]}}return w[m]=D.length,A},"SparseMatrix, SparseMatrix":function(e,n){var i,s=e._values,a=e._index,o=e._ptr,c=e._datatype||void 0===e._data?e._datatype:e.getDataType(),l=n._values,h=n._index,p=n._ptr,d=n._datatype||void 0===n._data?n._datatype:n.getDataType(),f=e._size[0],m=n._size[1],g=s&&l,y=r,x=u;c&&d&&c===d&&"string"==typeof c&&"mixed"!==c&&(i=c,y=t.find(r,[i,i]),x=t.find(u,[i,i]));for(var v,b,D,w,A,S,N,C,E=g?[]:void 0,M=[],T=[],O=e.createSparseMatrix({values:E,index:M,ptr:T,size:[f,m],datatype:c===e._datatype&&d===n._datatype?i:void 0}),P=g?[]:void 0,_=[],I=0;I<m;I++){T[I]=M.length;var B=I+1;for(A=p[I],S=p[I+1],w=A;w<S;w++)if(C=h[w],g)for(b=o[C],D=o[C+1],v=b;v<D;v++)_[N=a[v]]!==B?(_[N]=B,M.push(N),P[N]=x(l[w],s[v])):P[N]=y(P[N],x(l[w],s[v]));else for(b=o[C],D=o[C+1],v=b;v<D;v++)_[N=a[v]]!==B&&(_[N]=B,M.push(N));if(g)for(var R=T[I],F=M.length,j=R;j<F;j++){var k=M[j];E[j]=P[k]}}return T[m]=M.length,O}});return t(c,u,{"Array, Array":t.referTo("Matrix, Matrix",(e=>(t,r)=>{f((0,s.LO)(t),(0,s.LO)(r));var a=e(n(t),n(r));return(0,i.OA)(a)?a.valueOf():a})),"Matrix, Matrix":function(e,n){var i=e.size(),s=n.size();return f(i,s),1===i.length?1===s.length?function(e,t,n){if(0===n)throw new Error("Cannot multiply two empty vectors");return h(e,t)}(e,n,i[0]):function(e,n){if("dense"!==n.storage())throw new Error("Support for SparseMatrix not implemented");return function(e,n){var i,s=e._data,a=e._size,o=e._datatype||e.getDataType(),c=n._data,l=n._size,h=n._datatype||n.getDataType(),p=a[0],d=l[1],f=r,m=u;o&&h&&o===h&&"string"==typeof o&&"mixed"!==o&&(i=o,f=t.find(r,[i,i]),m=t.find(u,[i,i]));for(var g=[],y=0;y<d;y++){for(var x=m(s[0],c[0][y]),v=1;v<p;v++)x=f(x,m(s[v],c[v][y]));g[y]=x}return e.createDenseMatrix({data:g,size:[d],datatype:o===e._datatype&&h===n._datatype?i:void 0})}(e,n)}(e,n):1===s.length?m(e,n):g(e,n)},"Matrix, Array":t.referTo("Matrix,Matrix",(e=>(t,r)=>e(t,n(r)))),"Array, Matrix":t.referToSelf((e=>(t,r)=>e(n(t,r.storage()),r))),"SparseMatrix, any":function(e,t){return p(e,t,u,!1)},"DenseMatrix, any":function(e,t){return d(e,t,u,!1)},"any, SparseMatrix":function(e,t){return p(t,e,u,!0)},"any, DenseMatrix":function(e,t){return d(t,e,u,!0)},"Array, any":function(e,t){return d(n(e),t,u,!1).valueOf()},"any, Array":function(e,t){return d(n(t),e,u,!0).valueOf()},"any, any":u,"any, any, ...any":t.referToSelf((e=>(t,n,r)=>{for(var i=e(t,n),s=0;s<r.length;s++)i=e(i,r[s]);return i}))})}))},3947:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});var r=n(8321),i=n(1976),s=["typed"],a=(0,r.P9)("multiplyScalar",s,(e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":i.YD,"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"bigint, bigint":function(e,t){return e*t},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":(e,t)=>t.multiply(e),"Unit, number | Fraction | BigNumber | Complex | Unit":(e,t)=>e.multiply(t)})}))},9913:(e,t,n)=>{"use strict";n.d(t,{X:()=>a});var r=n(8321),i="norm",s=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],a=(0,r.P9)(i,s,(e=>{var{typed:t,abs:n,add:r,pow:s,conj:a,sqrt:o,multiply:c,equalScalar:u,larger:l,smaller:h,matrix:p,ctranspose:d,eigs:f}=e;return t(i,{number:Math.abs,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},boolean:function(e){return Math.abs(e)},Array:function(e){return m(p(e),2)},Matrix:function(e){return m(e,2)},"Array, number | BigNumber | string":function(e,t){return m(p(e),t)},"Matrix, number | BigNumber | string":function(e,t){return m(e,t)}});function m(e,t){var i=e.size();if(1===i.length)return function(e,t){if(t===Number.POSITIVE_INFINITY||"inf"===t)return function(e){var t=0;return e.forEach((function(e){var r=n(e);l(r,t)&&(t=r)}),!0),t}(e);if(t===Number.NEGATIVE_INFINITY||"-inf"===t)return function(e){var t;return e.forEach((function(e){var r=n(e);t&&!h(r,t)||(t=r)}),!0),t||0}(e);if("fro"===t)return m(e,2);if("number"==typeof t&&!isNaN(t)){if(!u(t,0)){var i=0;return e.forEach((function(e){i=r(s(n(e),t),i)}),!0),s(i,1/t)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}(e,t);if(2===i.length){if(i[0]&&i[1])return function(e,t){if(1===t)return function(e){var t=[],i=0;return e.forEach((function(e,s){var a=s[1],o=r(t[a]||0,n(e));l(o,i)&&(i=o),t[a]=o}),!0),i}(e);if(t===Number.POSITIVE_INFINITY||"inf"===t)return function(e){var t=[],i=0;return e.forEach((function(e,s){var a=s[0],o=r(t[a]||0,n(e));l(o,i)&&(i=o),t[a]=o}),!0),i}(e);if("fro"===t)return function(e){var t=0;return e.forEach((function(e,n){t=r(t,c(e,a(e)))})),n(o(t))}(e);if(2===t)return function(e){var t=e.size();if(t[0]!==t[1])throw new RangeError("Invalid matrix dimensions");var r=d(e),i=c(r,e),s=f(i).values.toArray(),a=s[s.length-1];return n(o(a))}(e);throw new Error("Unsupported parameter value "+t)}(e,t);throw new RangeError("Invalid matrix dimensions")}}}))},5693:(e,t,n)=>{"use strict";n.d(t,{f:()=>p});var r=n(8321),i=n(6540),s=n(7308),a=n(5651),o=n(9755),c=n(2573),u=n(1976),l="nthRoot",h=["typed","matrix","equalScalar","BigNumber","concat"],p=(0,r.P9)(l,h,(e=>{var{typed:t,matrix:n,equalScalar:r,BigNumber:h,concat:p}=e,d=(0,i.Z)({typed:t}),f=(0,s.Z)({typed:t,equalScalar:r}),m=(0,a.S)({typed:t,equalScalar:r}),g=(0,o.A)({typed:t,equalScalar:r}),y=(0,c.$)({typed:t,matrix:n,concat:p});function x(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return t(l,{number:u.wp,"number, number":u.wp,BigNumber:e=>v(e,new h(2)),"BigNumber, BigNumber":v,Complex:x,"Complex, number":x,Array:t.referTo("DenseMatrix,number",(e=>t=>e(n(t),2).valueOf())),DenseMatrix:t.referTo("DenseMatrix,number",(e=>t=>e(t,2))),SparseMatrix:t.referTo("SparseMatrix,number",(e=>t=>e(t,2))),"SparseMatrix, SparseMatrix":t.referToSelf((e=>(t,n)=>{if(1===n.density())return m(t,n,e);throw new Error("Root must be non-zero")})),"DenseMatrix, SparseMatrix":t.referToSelf((e=>(t,n)=>{if(1===n.density())return d(t,n,e,!1);throw new Error("Root must be non-zero")})),"Array, SparseMatrix":t.referTo("DenseMatrix,SparseMatrix",(e=>(t,r)=>e(n(t),r))),"number | BigNumber, SparseMatrix":t.referToSelf((e=>(t,n)=>{if(1===n.density())return g(n,t,e,!0);throw new Error("Root must be non-zero")}))},y({scalar:"number | BigNumber",SD:f,Ss:g,sS:!1}));function v(e,t){var n=h.precision,r=h.clone({precision:n+2}),i=new h(0),s=new r(1),a=t.isNegative();if(a&&(t=t.neg()),t.isZero())throw new Error("Root must be non-zero");if(e.isNegative()&&!t.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(e.isZero())return a?new r(1/0):0;if(!e.isFinite())return a?i:e;var o=e.abs().pow(s.div(t));return o=e.isNeg()?o.neg():o,new h((a?s.div(o):o).toPrecision(n))}}))},8296:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});var r=n(8321),i="nthRoots",s=["config","typed","divideScalar","Complex"],a=(0,r.P9)(i,s,(e=>{var{typed:t,config:n,divideScalar:r,Complex:s}=e,a=[function(e){return new s(e,0)},function(e){return new s(0,e)},function(e){return new s(-e,0)},function(e){return new s(0,-e)}];function o(e,t){if(t<0)throw new Error("Root must be greater than zero");if(0===t)throw new Error("Root must be non-zero");if(t%1!=0)throw new Error("Root must be an integer");if(0===e||0===e.abs())return[new s(0,0)];var n,r="number"==typeof e;(r||0===e.re||0===e.im)&&(n=r?2*+(e<0):0===e.im?2*+(e.re<0):2*+(e.im<0)+1);for(var i=e.arg(),o=e.abs(),c=[],u=Math.pow(o,1/t),l=0;l<t;l++){var h=(n+4*l)/t;h!==Math.round(h)?c.push(new s({r:u,phi:(i+2*Math.PI*l)/t})):c.push(a[h%4](u))}return c}return t(i,{Complex:function(e){return o(e,2)},"Complex, number":o})}))},2601:(e,t,n)=>{"use strict";n.d(t,{V:()=>c});var r=n(8321),i=n(1106),s=n(5838),a=n(1976),o=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],c=(0,r.P9)("pow",o,(e=>{var{typed:t,config:n,identity:r,multiply:o,matrix:c,inv:u,number:l,fraction:h,Complex:p}=e;return t("pow",{"number, number":d,"Complex, Complex":function(e,t){return e.pow(t)},"BigNumber, BigNumber":function(e,t){return t.isInteger()||e>=0||n.predictable?e.pow(t):new p(e.toNumber(),0).pow(t.toNumber(),0)},"bigint, bigint":(e,t)=>e**t,"Fraction, Fraction":function(e,t){var r=e.pow(t);if(null!=r)return r;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return d(e.valueOf(),t.valueOf())},"Array, number":f,"Array, BigNumber":function(e,t){return f(e,t.toNumber())},"Matrix, number":m,"Matrix, BigNumber":function(e,t){return m(e,t.toNumber())},"Unit, number | BigNumber":function(e,t){return e.pow(t)}});function d(e,t){if(n.predictable&&!(0,i.YN)(t)&&e<0)try{var r=h(t),s=l(r);if((t===s||Math.abs((t-s)/t)<1e-14)&&r.d%2==1)return(r.n%2==0?1:-1)*Math.pow(-e,t)}catch(e){}return n.predictable&&(e<-1&&t===1/0||e>-1&&e<0&&t===-1/0)?NaN:(0,i.YN)(t)||e>=0||n.predictable?(0,a.Qb)(e,t):e*e<1&&t===1/0||e*e>1&&t===-1/0?0:new p(e,0).pow(t,0)}function f(e,t){if(!(0,i.YN)(t))throw new TypeError("For A^b, b must be an integer (value is "+t+")");var n=(0,s.LO)(e);if(2!==n.length)throw new Error("For A^b, A must be 2 dimensional (A has "+n.length+" dimensions)");if(n[0]!==n[1])throw new Error("For A^b, A must be square (size is "+n[0]+"x"+n[1]+")");if(t<0)try{return f(u(e),-t)}catch(e){if("Cannot calculate inverse, determinant is zero"===e.message)throw new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+t+")");throw e}for(var a=r(n[0]).valueOf(),c=e;t>=1;)1&~t||(a=o(c,a)),t>>=1,c=o(c,c);return a}function m(e,t){return c(f(e.valueOf(),t))}}))},8935:(e,t,n)=>{"use strict";n.d(t,{B:()=>f});var r=n(8321),i=n(6355),s=n(1106),a=n(6052),o=n(9755),c=n(4900),u=n(2347),l=n(1976),h="Number of decimals in function round must be an integer",p="round",d=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],f=(0,r.P9)(p,d,(e=>{var{typed:t,config:n,matrix:r,equalScalar:d,zeros:f,BigNumber:m,DenseMatrix:g}=e,y=(0,o.A)({typed:t,equalScalar:d}),x=(0,c.f)({typed:t,DenseMatrix:g}),v=(0,u.A)({typed:t});function b(e){return Math.abs((0,s.QI)(e).exponent)}return t(p,{number:function(e){var t=(0,l.Wf)(e,b(n.relTol)),r=(0,s.q8)(e,t,n.relTol,n.absTol)?t:e;return(0,l.Wf)(r)},"number, number":function(e,t){var r=b(n.relTol);if(t>=r)return(0,l.Wf)(e,t);var i=(0,l.Wf)(e,r),a=(0,s.q8)(e,i,n.relTol,n.absTol)?i:e;return(0,l.Wf)(a,t)},"number, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(h);return new m(e).toDecimalPlaces(t.toNumber())},Complex:function(e){return e.round()},"Complex, number":function(e,t){if(t%1)throw new TypeError(h);return e.round(t)},"Complex, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(h);var n=t.toNumber();return e.round(n)},BigNumber:function(e){var t=new m(e).toDecimalPlaces(b(n.relTol));return((0,a.q)(e,t,n.relTol,n.absTol)?t:e).toDecimalPlaces(0)},"BigNumber, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(h);var r=b(n.relTol);if(t>=r)return e.toDecimalPlaces(t.toNumber());var i=e.toDecimalPlaces(r);return((0,a.q)(e,i,n.relTol,n.absTol)?i:e).toDecimalPlaces(t.toNumber())},Fraction:function(e){return e.round()},"Fraction, number":function(e,t){if(t%1)throw new TypeError(h);return e.round(t)},"Fraction, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(h);return e.round(t.toNumber())},"Unit, number, Unit":t.referToSelf((e=>function(t,n,r){var i=t.toNumeric(r);return r.multiply(e(i,n))})),"Unit, BigNumber, Unit":t.referToSelf((e=>(t,n,r)=>e(t,n.toNumber(),r))),"Unit, Unit":t.referToSelf((e=>(t,n)=>e(t,0,n))),"Array | Matrix, number, Unit":t.referToSelf((e=>(t,n,r)=>(0,i.Bl)(t,(t=>e(t,n,r)),!0))),"Array | Matrix, BigNumber, Unit":t.referToSelf((e=>(t,n,r)=>e(t,n.toNumber(),r))),"Array | Matrix, Unit":t.referToSelf((e=>(t,n)=>e(t,0,n))),"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e,!0))),"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>y(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>v(t,n,e,!1))),"Array, number | BigNumber":t.referToSelf((e=>(t,n)=>v(r(t),n,e,!1).valueOf())),"number | Complex | BigNumber | Fraction, SparseMatrix":t.referToSelf((e=>(t,n)=>d(t,0)?f(n.size(),n.storage()):x(n,t,e,!0))),"number | Complex | BigNumber | Fraction, DenseMatrix":t.referToSelf((e=>(t,n)=>d(t,0)?f(n.size(),n.storage()):v(n,t,e,!0))),"number | Complex | BigNumber | Fraction, Array":t.referToSelf((e=>(t,n)=>v(r(n),t,e,!0).valueOf()))})}))},3970:(e,t,n)=>{"use strict";n.d(t,{m:()=>c});var r=n(8321),i=n(6355),s=n(1976),a="sign",o=["typed","BigNumber","Fraction","complex"],c=(0,r.P9)(a,o,(e=>{var{typed:t,BigNumber:n,complex:r,Fraction:o}=e;return t(a,{number:s.bD,Complex:function(e){return 0===e.im?r((0,s.bD)(e.re)):e.sign()},BigNumber:function(e){return new n(e.cmp(0))},bigint:function(e){return e>0n?1n:e<0n?-1n:0n},Fraction:function(e){return new o(e.s,1)},"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e,!0))),Unit:t.referToSelf((e=>n=>{if(!n._isDerived()&&0!==n.units[0].unit.offset)throw new TypeError("sign is ambiguous for units with offset");return t.find(e,n.valueType())(n.value)}))})}))},6409:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var r=["config","typed","Complex"],i=(0,n(8321).P9)("sqrt",r,(e=>{var{config:t,typed:n,Complex:r}=e;return n("sqrt",{number:i,Complex:function(e){return e.sqrt()},BigNumber:function(e){return!e.isNegative()||t.predictable?e.sqrt():i(e.toNumber())},Unit:function(e){return e.pow(.5)}});function i(e){return isNaN(e)?NaN:e>=0||t.predictable?Math.sqrt(e):new r(e,0).sqrt()}}))},2436:(e,t,n)=>{"use strict";n.d(t,{G:()=>o});var r=n(8321),i=n(1976),s="square",a=["typed"],o=(0,r.P9)(s,a,(e=>{var{typed:t}=e;return t(s,{number:i.dX,Complex:function(e){return e.mul(e)},BigNumber:function(e){return e.times(e)},bigint:function(e){return e*e},Fraction:function(e){return e.mul(e)},Unit:function(e){return e.pow(2)}})}))},6771:(e,t,n)=>{"use strict";n.d(t,{t:()=>p});var r=n(8321),i=n(6540),s=n(361),a=n(1232),o=n(2723),c=n(4900),u=n(2573),l="subtract",h=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],p=(0,r.P9)(l,h,(e=>{var{typed:t,matrix:n,equalScalar:r,subtractScalar:h,unaryMinus:p,DenseMatrix:d,concat:f}=e,m=(0,i.Z)({typed:t}),g=(0,s.O)({typed:t}),y=(0,a.H)({typed:t,equalScalar:r}),x=(0,o.A)({typed:t,DenseMatrix:d}),v=(0,c.f)({typed:t,DenseMatrix:d}),b=(0,u.$)({typed:t,matrix:n,concat:f});return t(l,{"any, any":h},b({elop:h,SS:y,DS:m,SD:g,Ss:v,sS:x}))}))},7911:(e,t,n)=>{"use strict";n.d(t,{f:()=>o});var r=n(8321),i=n(1976),s="subtractScalar",a=["typed"],o=(0,r.P9)(s,a,(e=>{var{typed:t}=e;return t(s,{"number, number":i.Ki,"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"bigint, bigint":function(e,t){return e-t},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":t.referToSelf((e=>(n,r)=>{if(null===n.value||void 0===n.value)throw new Error("Parameter x contains a unit with undefined value");if(null===r.value||void 0===r.value)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(r))throw new Error("Units do not match");var i=n.clone();return i.value=t.find(e,[i.valueType(),r.valueType()])(i.value,r.value),i.fixPrefix=!1,i}))})}))},1670:(e,t,n)=>{"use strict";n.d(t,{e:()=>c});var r=n(8321),i=n(6355),s=n(1976),a="unaryMinus",o=["typed"],c=(0,r.P9)(a,o,(e=>{var{typed:t}=e;return t(a,{number:s.zZ,"Complex | BigNumber | Fraction":e=>e.neg(),bigint:e=>-e,Unit:t.referToSelf((e=>n=>{var r=n.clone();return r.value=t.find(e,r.valueType())(n.value),r})),"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e,!0)))})}))},392:(e,t,n)=>{"use strict";n.d(t,{e:()=>u});var r=n(8321),i=n(6355),s=n(1976),a=n(1106),o="unaryPlus",c=["typed","config","numeric"],u=(0,r.P9)(o,c,(e=>{var{typed:t,config:n,numeric:r}=e;return t(o,{number:s.ZO,Complex:function(e){return e},BigNumber:function(e){return e},bigint:function(e){return e},Fraction:function(e){return e},Unit:function(e){return e.clone()},"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e,!0))),boolean:function(e){return r(e?1:0,n.number)},string:function(e){return r(e,(0,a.BC)(e,n))}})}))},4805:(e,t,n)=>{"use strict";n.d(t,{F:()=>o});var r=n(8321),i=n(1976),s="xgcd",a=["typed","config","matrix","BigNumber"],o=(0,r.P9)(s,a,(e=>{var{typed:t,config:n,matrix:r,BigNumber:a}=e;return t(s,{"number, number":function(e,t){var s=(0,i.sO)(e,t);return"Array"===n.matrix?s:r(s)},"BigNumber, BigNumber":function(e,t){var i,s,o,c,u=new a(0),l=new a(1),h=u,p=l,d=l,f=u;if(!e.isInt()||!t.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!t.isZero();)s=e.div(t).floor(),o=e.mod(t),i=h,h=p.minus(s.times(h)),p=i,i=d,d=f.minus(s.times(d)),f=i,e=t,t=o;return c=e.lt(u)?[e.neg(),p.neg(),f.neg()]:[e,e.isZero()?0:p,f],"Array"===n.matrix?c:r(c)}})}))},4172:(e,t,n)=>{"use strict";n.d(t,{x:()=>p});var r=n(4636),i=n(7308),s=n(9755),a=n(5651),o=n(8321),c=n(2573),u=n(8253),l="bitAnd",h=["typed","matrix","equalScalar","concat"],p=(0,o.P9)(l,h,(e=>{var{typed:t,matrix:n,equalScalar:o,concat:h}=e,p=(0,i.Z)({typed:t,equalScalar:o}),d=(0,a.S)({typed:t,equalScalar:o}),f=(0,s.A)({typed:t,equalScalar:o}),m=(0,c.$)({typed:t,matrix:n,concat:h});return t(l,{"number, number":u.O2,"BigNumber, BigNumber":r.GK,"bigint, bigint":(e,t)=>e&t},m({SS:d,DS:p,Ss:f}))}))},720:(e,t,n)=>{"use strict";n.d(t,{j:()=>u});var r=n(4636),i=n(6355),s=n(8321),a=n(8253),o="bitNot",c=["typed"],u=(0,s.P9)(o,c,(e=>{var{typed:t}=e;return t(o,{number:a.IR,BigNumber:r.e6,bigint:e=>~e,"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e)))})}))},6208:(e,t,n)=>{"use strict";n.d(t,{$:()=>p});var r=n(4636),i=n(8321),s=n(2723),a=n(7481),o=n(6540),c=n(2573),u=n(8253),l="bitOr",h=["typed","matrix","equalScalar","DenseMatrix","concat"],p=(0,i.P9)(l,h,(e=>{var{typed:t,matrix:n,equalScalar:i,DenseMatrix:h,concat:p}=e,d=(0,o.Z)({typed:t}),f=(0,a.c)({typed:t,equalScalar:i}),m=(0,s.A)({typed:t,DenseMatrix:h}),g=(0,c.$)({typed:t,matrix:n,concat:p});return t(l,{"number, number":u.eg,"BigNumber, BigNumber":r.KO,"bigint, bigint":(e,t)=>e|t},g({SS:f,DS:d,Ss:m}))}))},5244:(e,t,n)=>{"use strict";n.d(t,{x:()=>p});var r=n(4636),i=n(361),s=n(5572),a=n(4900),o=n(8321),c=n(2573),u=n(8253),l="bitXor",h=["typed","matrix","DenseMatrix","concat"],p=(0,o.P9)(l,h,(e=>{var{typed:t,matrix:n,DenseMatrix:o,concat:h}=e,p=(0,i.O)({typed:t}),d=(0,s.v)({typed:t,DenseMatrix:o}),f=(0,a.f)({typed:t,DenseMatrix:o}),m=(0,c.$)({typed:t,matrix:n,concat:h});return t(l,{"number, number":u.Co,"BigNumber, BigNumber":r.hC,"bigint, bigint":(e,t)=>e^t},m({SS:d,DS:p,Ss:f}))}))},9917:(e,t,n)=>{"use strict";n.d(t,{O:()=>g});var r=n(7308),i=n(9755),s=n(2347),a=n(6540),o=n(2723),c=n(1352),u=n(8321),l=n(2573),h=n(4868),p=n(8253),d=n(4636),f="leftShift",m=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],g=(0,u.P9)(f,m,(e=>{var{typed:t,matrix:n,equalScalar:u,zeros:m,DenseMatrix:g,concat:y}=e,x=(0,a.Z)({typed:t}),v=(0,r.Z)({typed:t,equalScalar:u}),b=(0,c.z)({typed:t,equalScalar:u}),D=(0,o.A)({typed:t,DenseMatrix:g}),w=(0,i.A)({typed:t,equalScalar:u}),A=(0,s.A)({typed:t}),S=(0,l.$)({typed:t,matrix:n,concat:y}),N=(0,h.h)({typed:t,matrix:n});return t(f,{"number, number":p.F4,"BigNumber, BigNumber":d.ZN,"bigint, bigint":(e,t)=>e<<t,"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>u(n,0)?t.clone():w(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>u(n,0)?t.clone():A(t,n,e,!1))),"number | BigNumber, SparseMatrix":t.referToSelf((e=>(t,n)=>u(t,0)?m(n.size(),n.storage()):D(n,t,e,!0))),"number | BigNumber, DenseMatrix":t.referToSelf((e=>(t,n)=>u(t,0)?m(n.size(),n.storage()):A(n,t,e,!0)))},N,S({SS:b,DS:x,SD:v}))}))},1606:(e,t,n)=>{"use strict";n.d(t,{f:()=>g});var r=n(4636),i=n(7308),s=n(9755),a=n(2347),o=n(6540),c=n(2723),u=n(1352),l=n(8321),h=n(2573),p=n(4868),d=n(8253),f="rightArithShift",m=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],g=(0,l.P9)(f,m,(e=>{var{typed:t,matrix:n,equalScalar:l,zeros:m,DenseMatrix:g,concat:y}=e,x=(0,o.Z)({typed:t}),v=(0,i.Z)({typed:t,equalScalar:l}),b=(0,u.z)({typed:t,equalScalar:l}),D=(0,c.A)({typed:t,DenseMatrix:g}),w=(0,s.A)({typed:t,equalScalar:l}),A=(0,a.A)({typed:t}),S=(0,h.$)({typed:t,matrix:n,concat:y}),N=(0,p.h)({typed:t,matrix:n});return t(f,{"number, number":d.QO,"BigNumber, BigNumber":r.Am,"bigint, bigint":(e,t)=>e>>t,"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>l(n,0)?t.clone():w(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>l(n,0)?t.clone():A(t,n,e,!1))),"number | BigNumber, SparseMatrix":t.referToSelf((e=>(t,n)=>l(t,0)?m(n.size(),n.storage()):D(n,t,e,!0))),"number | BigNumber, DenseMatrix":t.referToSelf((e=>(t,n)=>l(t,0)?m(n.size(),n.storage()):A(n,t,e,!0)))},N,S({SS:b,DS:x,SD:v}))}))},2446:(e,t,n)=>{"use strict";n.d(t,{n:()=>m});var r=n(7308),i=n(9755),s=n(2347),a=n(6540),o=n(2723),c=n(1352),u=n(8321),l=n(2573),h=n(8253),p=n(4868),d="rightLogShift",f=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],m=(0,u.P9)(d,f,(e=>{var{typed:t,matrix:n,equalScalar:u,zeros:f,DenseMatrix:m,concat:g}=e,y=(0,a.Z)({typed:t}),x=(0,r.Z)({typed:t,equalScalar:u}),v=(0,c.z)({typed:t,equalScalar:u}),b=(0,o.A)({typed:t,DenseMatrix:m}),D=(0,i.A)({typed:t,equalScalar:u}),w=(0,s.A)({typed:t}),A=(0,l.$)({typed:t,matrix:n,concat:g}),S=(0,p.h)({typed:t,matrix:n});return t(d,{"number, number":h.Wv,"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>u(n,0)?t.clone():D(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>u(n,0)?t.clone():w(t,n,e,!1))),"number | BigNumber, SparseMatrix":t.referToSelf((e=>(t,n)=>u(t,0)?f(n.size(),n.storage()):b(n,t,e,!0))),"number | BigNumber, DenseMatrix":t.referToSelf((e=>(t,n)=>u(t,0)?f(n.size(),n.storage()):w(n,t,e,!0)))},S,A({SS:v,DS:y,SD:x}))}))},4868:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});var r=(0,n(8321).P9)("useMatrixForArrayScalar",["typed","matrix"],(e=>{var{typed:t,matrix:n}=e;return{"Array, number":t.referTo("DenseMatrix, number",(e=>(t,r)=>e(n(t),r).valueOf())),"Array, BigNumber":t.referTo("DenseMatrix, BigNumber",(e=>(t,r)=>e(n(t),r).valueOf())),"number, Array":t.referTo("number, DenseMatrix",(e=>(t,r)=>e(t,n(r)).valueOf())),"BigNumber, Array":t.referTo("BigNumber, DenseMatrix",(e=>(t,r)=>e(t,n(r)).valueOf()))}}))},4475:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});var r=n(8321),i="bellNumbers",s=["typed","addScalar","isNegative","isInteger","stirlingS2"],a=(0,r.P9)(i,s,(e=>{var{typed:t,addScalar:n,isNegative:r,isInteger:s,stirlingS2:a}=e;return t(i,{"number | BigNumber":function(e){if(!s(e)||r(e))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var t=0,i=0;i<=e;i++)t=n(t,a(e,i));return t}})}))},4852:(e,t,n)=>{"use strict";n.d(t,{f:()=>a});var r=n(8321),i="catalan",s=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],a=(0,r.P9)(i,s,(e=>{var{typed:t,addScalar:n,divideScalar:r,multiplyScalar:s,combinations:a,isNegative:o,isInteger:c}=e;return t(i,{"number | BigNumber":function(e){if(!c(e)||o(e))throw new TypeError("Non-negative integer value expected in function catalan");return r(a(s(e,2),e),n(e,1))}})}))},7440:(e,t,n)=>{"use strict";n.d(t,{z:()=>a});var r=n(8321),i="composition",s=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],a=(0,r.P9)(i,s,(e=>{var{typed:t,addScalar:n,combinations:r,isPositive:s,isNegative:a,isInteger:o,larger:c}=e;return t(i,{"number | BigNumber, number | BigNumber":function(e,t){if(!(o(e)&&s(e)&&o(t)&&s(t)))throw new TypeError("Positive integer value expected in function composition");if(c(t,e))throw new TypeError("k must be less than or equal to n in function composition");return r(n(e,-1),n(t,-1))}})}))},6869:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var r=n(8321),i=n(4943),s="stirlingS2",a=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],o=(0,r.P9)(s,a,(e=>{var{typed:t,addScalar:n,subtractScalar:r,multiplyScalar:a,divideScalar:o,pow:c,factorial:u,combinations:l,isNegative:h,isInteger:p,number:d,bignumber:f,larger:m}=e,g=[],y=[];return t(s,{"number | BigNumber, number | BigNumber":function(e,t){if(!p(e)||h(e)||!p(t)||h(t))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(m(t,e))throw new TypeError("k must be less than or equal to n in function stirlingS2");var r=!((0,i.Et)(e)&&(0,i.Et)(t)),s=r?y:g,o=r?f:d,c=d(e),u=d(t);if(s[c]&&s[c].length>u)return s[c][u];for(var l=0;l<=c;++l)if(s[l]||(s[l]=[o(0===l?1:0)]),0!==l)for(var x=s[l],v=s[l-1],b=x.length;b<=l&&b<=u;++b)x[b]=b===l?1:n(a(o(b),v[b]),v[b-1]);return s[c][u]}})}))},165:(e,t,n)=>{"use strict";n.d(t,{P:()=>a});var r=n(8321),i=n(6355),s=["typed"],a=(0,r.P9)("arg",s,(e=>{var{typed:t}=e;return t("arg",{number:function(e){return Math.atan2(0,e)},BigNumber:function(e){return e.constructor.atan2(0,e)},Complex:function(e){return e.arg()},"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e)))})}))},9491:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var r=n(8321),i=n(6355),s="conj",a=["typed"],o=(0,r.P9)(s,a,(e=>{var{typed:t}=e;return t(s,{"number | BigNumber | Fraction":e=>e,Complex:e=>e.conjugate(),"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e)))})}))},1123:(e,t,n)=>{"use strict";n.d(t,{z:()=>a});var r=n(8321),i=n(6355),s=["typed"],a=(0,r.P9)("im",s,(e=>{var{typed:t}=e;return t("im",{number:()=>0,"BigNumber | Fraction":e=>e.mul(0),Complex:e=>e.im,"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e)))})}))},20:(e,t,n)=>{"use strict";n.d(t,{W:()=>a});var r=n(8321),i=n(6355),s=["typed"],a=(0,r.P9)("re",s,(e=>{var{typed:t}=e;return t("re",{"number | BigNumber | Fraction":e=>e,Complex:e=>e.re,"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e)))})}))},1716:(e,t,n)=>{"use strict";n.d(t,{G:()=>o});var r=n(4943),i=n(8321),s="distance",a=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],o=(0,i.P9)(s,a,(e=>{var{typed:t,addScalar:n,subtractScalar:i,multiplyScalar:a,divideScalar:o,deepEqual:c,sqrt:u,abs:l}=e;return t(s,{"Array, Array, Array":function(e,t,n){if(2===e.length&&2===t.length&&2===n.length){if(!p(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!p(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!p(n))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(c(t,n))throw new TypeError("LinePoint1 should not be same with LinePoint2");var r=i(n[1],t[1]),s=i(t[0],n[0]),o=i(a(n[0],t[1]),a(t[0],n[1]));return y(e[0],e[1],r,s,o)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(e,t,n){if(2===Object.keys(e).length&&2===Object.keys(t).length&&2===Object.keys(n).length){if(!p(e))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!p(t))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!p(n))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(c(g(t),g(n)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in e&&"pointY"in e&&"lineOnePtX"in t&&"lineOnePtY"in t&&"lineTwoPtX"in n&&"lineTwoPtY"in n){var r=i(n.lineTwoPtY,t.lineOnePtY),s=i(t.lineOnePtX,n.lineTwoPtX),o=i(a(n.lineTwoPtX,t.lineOnePtY),a(t.lineOnePtX,n.lineTwoPtY));return y(e.pointX,e.pointY,r,s,o)}throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(e,t){if(2===e.length&&3===t.length){if(!p(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!d(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return y(e[0],e[1],t[0],t[1],t[2])}if(3===e.length&&6===t.length){if(!d(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!m(t))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return x(e[0],e[1],e[2],t[0],t[1],t[2],t[3],t[4],t[5])}if(e.length===t.length&&e.length>0){if(!f(e))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!f(t))throw new TypeError("All values of an array should be numbers or BigNumbers");return v(e,t)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(e,t){if(2===Object.keys(e).length&&3===Object.keys(t).length){if(!p(e))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!d(t))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"xCoeffLine"in t&&"yCoeffLine"in t&&"constant"in t)return y(e.pointX,e.pointY,t.xCoeffLine,t.yCoeffLine,t.constant);throw new TypeError("Key names do not match")}if(3===Object.keys(e).length&&6===Object.keys(t).length){if(!d(e))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!m(t))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"x0"in t&&"y0"in t&&"z0"in t&&"a"in t&&"b"in t&&"c"in t)return x(e.pointX,e.pointY,e.pointZ,t.x0,t.y0,t.z0,t.a,t.b,t.c);throw new TypeError("Key names do not match")}if(2===Object.keys(e).length&&2===Object.keys(t).length){if(!p(e))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!p(t))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointTwoX"in t&&"pointTwoY"in t)return v([e.pointOneX,e.pointOneY],[t.pointTwoX,t.pointTwoY]);throw new TypeError("Key names do not match")}if(3===Object.keys(e).length&&3===Object.keys(t).length){if(!d(e))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!d(t))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointOneZ"in e&&"pointTwoX"in t&&"pointTwoY"in t&&"pointTwoZ"in t)return v([e.pointOneX,e.pointOneY,e.pointOneZ],[t.pointTwoX,t.pointTwoY,t.pointTwoZ]);throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},Array:function(e){if(!function(e){if(2===e[0].length&&h(e[0][0])&&h(e[0][1])){if(e.some((e=>2!==e.length||!h(e[0])||!h(e[1]))))return!1}else{if(!(3===e[0].length&&h(e[0][0])&&h(e[0][1])&&h(e[0][2])))return!1;if(e.some((e=>3!==e.length||!h(e[0])||!h(e[1])||!h(e[2]))))return!1}return!0}(e))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return function(e){for(var t=[],n=[],r=[],i=0;i<e.length-1;i++)for(var s=i+1;s<e.length;s++)2===e[0].length?(n=[e[i][0],e[i][1]],r=[e[s][0],e[s][1]]):3===e[0].length&&(n=[e[i][0],e[i][1],e[i][2]],r=[e[s][0],e[s][1],e[s][2]]),t.push(v(n,r));return t}(e)}});function h(e){return"number"==typeof e||(0,r.C4)(e)}function p(e){return e.constructor!==Array&&(e=g(e)),h(e[0])&&h(e[1])}function d(e){return e.constructor!==Array&&(e=g(e)),h(e[0])&&h(e[1])&&h(e[2])}function f(e){return Array.isArray(e)||(e=g(e)),e.every(h)}function m(e){return e.constructor!==Array&&(e=g(e)),h(e[0])&&h(e[1])&&h(e[2])&&h(e[3])&&h(e[4])&&h(e[5])}function g(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;r++)n.push(e[t[r]]);return n}function y(e,t,r,i,s){var c=l(n(n(a(r,e),a(i,t)),s)),h=u(n(a(r,r),a(i,i)));return o(c,h)}function x(e,t,r,s,c,l,h,p,d){var f=[i(a(i(c,t),d),a(i(l,r),p)),i(a(i(l,r),h),a(i(s,e),d)),i(a(i(s,e),p),a(i(c,t),h))];f=u(n(n(a(f[0],f[0]),a(f[1],f[1])),a(f[2],f[2])));var m=u(n(n(a(h,h),a(p,p)),a(d,d)));return o(f,m)}function v(e,t){for(var r=e.length,s=0,o=0,c=0;c<r;c++)o=i(e[c],t[c]),s=n(a(o,o),s);return u(s)}}))},5874:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});var r=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],i=(0,n(8321).P9)("intersect",r,(e=>{var{typed:t,config:n,abs:r,add:i,addScalar:s,matrix:a,multiply:o,multiplyScalar:c,divideScalar:u,subtract:l,smaller:h,equalScalar:p,flatten:d,isZero:f,isNumeric:m}=e;return t("intersect",{"Array, Array, Array":g,"Array, Array, Array, Array":y,"Matrix, Matrix, Matrix":function(e,t,n){var r=g(e.valueOf(),t.valueOf(),n.valueOf());return null===r?null:a(r)},"Matrix, Matrix, Matrix, Matrix":function(e,t,n,r){var i=y(e.valueOf(),t.valueOf(),n.valueOf(),r.valueOf());return null===i?null:a(i)}});function g(e,t,n){if(e=x(e),t=x(t),n=x(n),!b(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!b(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!function(e){return 4===e.length&&m(e[0])&&m(e[1])&&m(e[2])&&m(e[3])}(n))throw new TypeError("Array with 4 numbers expected as third argument");return function(e,t,n,r,i,a,o,h,p,d){var f=c(e,o),m=c(r,o),g=c(t,h),y=c(i,h),x=c(n,p),v=c(a,p),b=l(l(l(d,f),g),x),D=l(l(l(s(s(m,y),v),f),g),x),w=u(b,D);return[s(e,c(w,l(r,e))),s(t,c(w,l(i,t))),s(n,c(w,l(a,n)))]}(e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2],n[3])}function y(e,t,a,d){if(e=x(e),t=x(t),a=x(a),d=x(d),2===e.length){if(!v(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!v(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!v(a))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!v(d))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return function(e,t,a,p){var d=e,m=a,g=l(d,t),y=l(m,p),x=l(c(g[0],y[1]),c(y[0],g[1]));if(f(x))return null;if(h(r(x),n.relTol))return null;var v=c(y[0],d[1]),b=c(y[1],d[0]),D=c(y[0],m[1]),w=c(y[1],m[0]),A=u(s(l(l(v,b),D),w),x);return i(o(g,A),d)}(e,t,a,d)}if(3===e.length){if(!b(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!b(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!b(a))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!b(d))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return function(e,t,n,r,i,a,o,h,d,m,g,y){var x=D(e,o,m,o,t,h,g,h,n,d,y,d),v=D(m,o,r,e,g,h,i,t,y,d,a,n),b=D(e,o,r,e,t,h,i,t,n,d,a,n),w=D(m,o,m,o,g,h,g,h,y,d,y,d),A=D(r,e,r,e,i,t,i,t,a,n,a,n),S=l(c(x,v),c(b,w)),N=l(c(A,w),c(v,v));if(f(N))return null;var C=u(S,N),E=u(s(x,c(C,v)),w),M=s(e,c(C,l(r,e))),T=s(t,c(C,l(i,t))),O=s(n,c(C,l(a,n))),P=s(o,c(E,l(m,o))),_=s(h,c(E,l(g,h))),I=s(d,c(E,l(y,d)));return p(M,P)&&p(T,_)&&p(O,I)?[M,T,O]:null}(e[0],e[1],e[2],t[0],t[1],t[2],a[0],a[1],a[2],d[0],d[1],d[2])}throw new TypeError("Arrays with two or thee dimensional points expected")}function x(e){return 1===e.length?e[0]:e.length>1&&Array.isArray(e[0])&&e.every((e=>Array.isArray(e)&&1===e.length))?d(e):e}function v(e){return 2===e.length&&m(e[0])&&m(e[1])}function b(e){return 3===e.length&&m(e[0])&&m(e[1])&&m(e[2])}function D(e,t,n,r,i,a,o,u,h,p,d,f){var m=c(l(e,t),l(n,r)),g=c(l(i,a),l(o,u)),y=c(l(h,p),l(d,f));return s(s(m,g),y)}}))},5495:(e,t,n)=>{"use strict";n.d(t,{i:()=>h});var r=n(7308),i=n(9755),s=n(2347),a=n(5651),o=n(8321),c=n(2573),u=n(6625),l=["typed","matrix","equalScalar","zeros","not","concat"],h=(0,o.P9)("and",l,(e=>{var{typed:t,matrix:n,equalScalar:o,zeros:l,not:h,concat:p}=e,d=(0,r.Z)({typed:t,equalScalar:o}),f=(0,a.S)({typed:t,equalScalar:o}),m=(0,i.A)({typed:t,equalScalar:o}),g=(0,s.A)({typed:t}),y=(0,c.$)({typed:t,matrix:n,concat:p});return t("and",{"number, number":u.JX,"Complex, Complex":function(e,t){return!(0===e.re&&0===e.im||0===t.re&&0===t.im)},"BigNumber, BigNumber":function(e,t){return!(e.isZero()||t.isZero()||e.isNaN()||t.isNaN())},"bigint, bigint":u.JX,"Unit, Unit":t.referToSelf((e=>(t,n)=>e(t.value||0,n.value||0))),"SparseMatrix, any":t.referToSelf((e=>(t,n)=>h(n)?l(t.size(),t.storage()):m(t,n,e,!1))),"DenseMatrix, any":t.referToSelf((e=>(t,n)=>h(n)?l(t.size(),t.storage()):g(t,n,e,!1))),"any, SparseMatrix":t.referToSelf((e=>(t,n)=>h(t)?l(t.size(),t.storage()):m(n,t,e,!0))),"any, DenseMatrix":t.referToSelf((e=>(t,n)=>h(t)?l(t.size(),t.storage()):g(n,t,e,!0))),"Array, any":t.referToSelf((e=>(t,r)=>e(n(t),r).valueOf())),"any, Array":t.referToSelf((e=>(t,r)=>e(t,n(r)).valueOf()))},y({SS:f,DS:d}))}))},9239:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var r=n(6355),i=n(8321),s=n(6625),a=["typed"],o=(0,i.P9)("not",a,(e=>{var{typed:t}=e;return t("not",{"null | undefined":()=>!0,number:s.DC,Complex:function(e){return 0===e.re&&0===e.im},BigNumber:function(e){return e.isZero()||e.isNaN()},bigint:e=>!e,Unit:t.referToSelf((e=>n=>t.find(e,n.valueType())(n.value))),"Array | Matrix":t.referToSelf((e=>t=>(0,r.Bl)(t,e)))})}))},4625:(e,t,n)=>{"use strict";n.d(t,{M:()=>l});var r=n(361),i=n(4900),s=n(1232),a=n(8321),o=n(2573),c=n(6625),u=["typed","matrix","equalScalar","DenseMatrix","concat"],l=(0,a.P9)("or",u,(e=>{var{typed:t,matrix:n,equalScalar:a,DenseMatrix:u,concat:l}=e,h=(0,r.O)({typed:t}),p=(0,s.H)({typed:t,equalScalar:a}),d=(0,i.f)({typed:t,DenseMatrix:u}),f=(0,o.$)({typed:t,matrix:n,concat:l});return t("or",{"number, number":c.R_,"Complex, Complex":function(e,t){return 0!==e.re||0!==e.im||0!==t.re||0!==t.im},"BigNumber, BigNumber":function(e,t){return!e.isZero()&&!e.isNaN()||!t.isZero()&&!t.isNaN()},"bigint, bigint":c.R_,"Unit, Unit":t.referToSelf((e=>(t,n)=>e(t.value||0,n.value||0)))},f({SS:p,DS:h,Ss:d}))}))},9187:(e,t,n)=>{"use strict";n.d(t,{Y:()=>l});var r=n(361),i=n(5572),s=n(4900),a=n(8321),o=n(2573),c=n(6625),u=["typed","matrix","DenseMatrix","concat"],l=(0,a.P9)("xor",u,(e=>{var{typed:t,matrix:n,DenseMatrix:a,concat:u}=e,l=(0,r.O)({typed:t}),h=(0,i.v)({typed:t,DenseMatrix:a}),p=(0,s.f)({typed:t,DenseMatrix:a}),d=(0,o.$)({typed:t,matrix:n,concat:u});return t("xor",{"number, number":c.f6,"Complex, Complex":function(e,t){return(0!==e.re||0!==e.im)!=(0!==t.re||0!==t.im)},"bigint, bigint":c.f6,"BigNumber, BigNumber":function(e,t){return(!e.isZero()&&!e.isNaN())!=(!t.isZero()&&!t.isNaN())},"Unit, Unit":t.referToSelf((e=>(t,n)=>e(t.value||0,n.value||0)))},d({SS:h,DS:l,Ss:p}))}))},9470:(e,t,n)=>{"use strict";n.d(t,{p:()=>u});var r=n(8321),i=n(5838),s=n(4943),a=n(6636),o="apply",c=["typed","isInteger"],u=(0,r.P9)(o,c,(e=>{var{typed:t,isInteger:n}=e;return t(o,{"Array | Matrix, number | BigNumber, function":function(e,t,r){if(!n(t))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(e)?(0,i.LO)(e):e.size();if(t<0||t>=o.length)throw new a.d(t,o.length);return(0,s.OA)(e)?e.create(l(e.valueOf(),t,r),e.datatype()):l(e,t,r)}})}));function l(e,t,n){var r,i,s;if(t<=0){if(Array.isArray(e[0])){for(s=function(e){var t,n,r=e.length,i=e[0].length,s=[];for(n=0;n<i;n++){var a=[];for(t=0;t<r;t++)a.push(e[t][n]);s.push(a)}return s}(e),i=[],r=0;r<s.length;r++)i[r]=l(s[r],t-1,n);return i}return n(e)}for(i=[],r=0;r<e.length;r++)i[r]=l(e[r],t-1,n);return i}},5666:(e,t,n)=>{"use strict";n.d(t,{H:()=>u});var r=n(8321),i=n(4943),s=n(3140),a=n(5838),o="column",c=["typed","Index","matrix","range"],u=(0,r.P9)(o,c,(e=>{var{typed:t,Index:n,matrix:r,range:c}=e;return t(o,{"Matrix, number":u,"Array, number":function(e,t){return u(r((0,s.o8)(e)),t).valueOf()}});function u(e,t){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");(0,a.r7)(t,e.size()[1]);var s=c(0,e.size()[0]),o=new n(s,t),u=e.subset(o);return(0,i.OA)(u)?u:r([[u]])}}))},1760:(e,t,n)=>{"use strict";n.d(t,{z:()=>h});var r=n(4943),i=n(3140),s=n(5838),a=n(6636),o=n(1380),c=n(8321),u="concat",l=["typed","matrix","isInteger"],h=(0,c.P9)(u,l,(e=>{var{typed:t,matrix:n,isInteger:c}=e;return t(u,{"...Array | Matrix | number | BigNumber":function(e){var t,u,l=e.length,h=-1,p=!1,d=[];for(t=0;t<l;t++){var f=e[t];if((0,r.OA)(f)&&(p=!0),(0,r.Et)(f)||(0,r.C4)(f)){if(t!==l-1)throw new Error("Dimension must be specified as last argument");if(u=h,h=f.valueOf(),!c(h))throw new TypeError("Integer number expected for dimension");if(h<0||t>0&&h>u)throw new a.d(h,u+1)}else{var m=(0,i.o8)(f).valueOf(),g=(0,s.LO)(m);if(d[t]=m,u=h,h=g.length-1,t>0&&h!==u)throw new o.h(u+1,h+1)}}if(0===d.length)throw new SyntaxError("At least one matrix expected");for(var y=d.shift();d.length;)y=(0,s.xW)(y,d.shift(),h);return p?n(y):y},"...string":function(e){return e.join("")}})}))},5365:(e,t,n)=>{"use strict";n.d(t,{K:()=>a});var r=n(8321),i="count",s=["typed","size","prod"],a=(0,r.P9)(i,s,(e=>{var{typed:t,size:n,prod:r}=e;return t(i,{string:function(e){return e.length},"Matrix | Array":function(e){return r(n(e))}})}))},9602:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var r=n(5838),i=n(8321),s="cross",a=["typed","matrix","subtract","multiply"],o=(0,i.P9)(s,a,(e=>{var{typed:t,matrix:n,subtract:i,multiply:a}=e;return t(s,{"Matrix, Matrix":function(e,t){return n(o(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return n(o(e.toArray(),t))},"Array, Matrix":function(e,t){return n(o(e,t.toArray()))},"Array, Array":o});function o(e,t){var n=Math.max((0,r.LO)(e).length,(0,r.LO)(t).length);e=(0,r.r2)(e),t=(0,r.r2)(t);var s=(0,r.LO)(e),o=(0,r.LO)(t);if(1!==s.length||1!==o.length||3!==s[0]||3!==o[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+s.join(", ")+"], B = ["+o.join(", ")+"])");var c=[i(a(e[1],t[2]),a(e[2],t[1])),i(a(e[2],t[0]),a(e[0],t[2])),i(a(e[0],t[1]),a(e[1],t[0]))];return n>1?[c]:c}}))},5684:(e,t,n)=>{"use strict";n.d(t,{d:()=>a});var r=n(8321),i="ctranspose",s=["typed","transpose","conj"],a=(0,r.P9)(i,s,(e=>{var{typed:t,transpose:n,conj:r}=e;return t(i,{any:function(e){return r(n(e))}})}))},5547:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var r=n(4943),i=n(3140),s=n(760),a=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],o=(0,n(8321).P9)("det",a,(e=>{var{typed:t,matrix:n,subtractScalar:a,multiply:o,divideScalar:c,isZero:u,unaryMinus:l}=e;return t("det",{any:function(e){return(0,i.o8)(e)},"Array | Matrix":function(e){var t;switch((t=(0,r.OA)(e)?e.size():Array.isArray(e)?(e=n(e)).size():[]).length){case 0:return(0,i.o8)(e);case 1:if(1===t[0])return(0,i.o8)(e.valueOf()[0]);if(0===t[0])return 1;throw new RangeError("Matrix must be square (size: "+(0,s.GP)(t)+")");case 2:var h=t[0],p=t[1];if(h===p)return function(e,t){if(1===t)return(0,i.o8)(e[0][0]);if(2===t)return a(o(e[0][0],e[1][1]),o(e[1][0],e[0][1]));for(var n=!1,r=new Array(t).fill(0).map(((e,t)=>t)),s=0;s<t;s++){var h=r[s];if(u(e[h][s])){var p=void 0;for(p=s+1;p<t;p++)if(!u(e[r[p]][s])){h=r[p],r[p]=r[s],r[s]=h,n=!n;break}if(p===t)return e[h][s]}for(var d=e[h][s],f=0===s?1:e[r[s-1]][s-1],m=s+1;m<t;m++)for(var g=r[m],y=s+1;y<t;y++)e[g][y]=c(a(o(e[g][y],d),o(e[g][s],e[h][y])),f)}var x=e[r[t-1]][t-1];return n?l(x):x}(e.clone().valueOf(),h);if(0===p)return 1;throw new RangeError("Matrix must be square (size: "+(0,s.GP)(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+(0,s.GP)(t)+")")}}})}))},1439:(e,t,n)=>{"use strict";n.d(t,{I:()=>u});var r=n(4943),i=n(5838),s=n(1106),a=n(8321),o="diag",c=["typed","matrix","DenseMatrix","SparseMatrix"],u=(0,a.P9)(o,c,(e=>{var{typed:t,matrix:n,DenseMatrix:a,SparseMatrix:c}=e;return t(o,{Array:function(e){return u(e,0,(0,i.LO)(e),null)},"Array, number":function(e,t){return u(e,t,(0,i.LO)(e),null)},"Array, BigNumber":function(e,t){return u(e,t.toNumber(),(0,i.LO)(e),null)},"Array, string":function(e,t){return u(e,0,(0,i.LO)(e),t)},"Array, number, string":function(e,t,n){return u(e,t,(0,i.LO)(e),n)},"Array, BigNumber, string":function(e,t,n){return u(e,t.toNumber(),(0,i.LO)(e),n)},Matrix:function(e){return u(e,0,e.size(),e.storage())},"Matrix, number":function(e,t){return u(e,t,e.size(),e.storage())},"Matrix, BigNumber":function(e,t){return u(e,t.toNumber(),e.size(),e.storage())},"Matrix, string":function(e,t){return u(e,0,e.size(),t)},"Matrix, number, string":function(e,t,n){return u(e,t,e.size(),n)},"Matrix, BigNumber, string":function(e,t,n){return u(e,t.toNumber(),e.size(),n)}});function u(e,t,i,o){if(!(0,s.YN)(t))throw new TypeError("Second parameter in function diag must be an integer");var u=t>0?t:0,l=t<0?-t:0;switch(i.length){case 1:return function(e,t,n,r,i,s){var o=[r+i,r+s];if(n&&"sparse"!==n&&"dense"!==n)throw new TypeError("Unknown matrix type ".concat(n,'"'));var u="sparse"===n?c.diagonal(o,e,t):a.diagonal(o,e,t);return null!==n?u:u.valueOf()}(e,t,o,i[0],l,u);case 2:return function(e,t,i,s,a,o){if((0,r.OA)(e)){var c=e.diagonal(t);return null!==i?i!==c.storage()?n(c,i):c:c.valueOf()}for(var u=Math.min(s[0]-a,s[1]-o),l=[],h=0;h<u;h++)l[h]=e[h+a][h+o];return null!==i?n(l):l}(e,t,o,i,l,u)}throw new RangeError("Matrix for function diag must be 2 dimensional")}}))},6079:(e,t,n)=>{"use strict";n.d(t,{i:()=>c});var r=n(8321),i=n(1106),s=n(4943),a="diff",o=["typed","matrix","subtract","number"],c=(0,r.P9)(a,o,(e=>{var{typed:t,matrix:n,subtract:r,number:o}=e;return t(a,{"Array | Matrix":function(e){return(0,s.OA)(e)?n(u(e.toArray())):u(e)},"Array | Matrix, number":function(e,t){if(!(0,i.YN)(t))throw new RangeError("Dimension must be a whole number");return(0,s.OA)(e)?n(c(e.toArray(),t)):c(e,t)},"Array, BigNumber":t.referTo("Array,number",(e=>(t,n)=>e(t,o(n)))),"Matrix, BigNumber":t.referTo("Matrix,number",(e=>(t,n)=>e(t,o(n))))});function c(e,t){if((0,s.OA)(e)&&(e=e.toArray()),!Array.isArray(e))throw RangeError("Array/Matrix does not have that many dimensions");if(t>0){var n=[];return e.forEach((e=>{n.push(c(e,t-1))})),n}if(0===t)return u(e);throw RangeError("Cannot have negative dimension")}function u(e){for(var t=[],n=e.length,r=1;r<n;r++)t.push(l(e[r-1],e[r]));return t}function l(e,t){(0,s.OA)(e)&&(e=e.toArray()),(0,s.OA)(t)&&(t=t.toArray());var n=Array.isArray(e),i=Array.isArray(t);if(n&&i)return function(e,t){if(e.length!==t.length)throw RangeError("Not all sub-arrays have the same length");for(var n=[],r=e.length,i=0;i<r;i++)n.push(l(e[i],t[i]));return n}(e,t);if(!n&&!i)return r(t,e);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}}))},9425:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});var r=n(8321),i=n(4943),s=["typed","addScalar","multiplyScalar","conj","size"],a=(0,r.P9)("dot",s,(e=>{var{typed:t,addScalar:n,multiplyScalar:r,conj:s,size:a}=e;return t("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(e,a){var u=o(e,a),l=(0,i.OA)(e)?e._data:e,h=(0,i.OA)(e)?e._datatype||e.getDataType():void 0,p=(0,i.OA)(a)?a._data:a,d=(0,i.OA)(a)?a._datatype||a.getDataType():void 0,f=2===c(e).length,m=2===c(a).length,g=n,y=r;if(h&&d&&h===d&&"string"==typeof h&&"mixed"!==h){var x=h;g=t.find(n,[x,x]),y=t.find(r,[x,x])}if(!f&&!m){for(var v=y(s(l[0]),p[0]),b=1;b<u;b++)v=g(v,y(s(l[b]),p[b]));return v}if(!f&&m){for(var D=y(s(l[0]),p[0][0]),w=1;w<u;w++)D=g(D,y(s(l[w]),p[w][0]));return D}if(f&&!m){for(var A=y(s(l[0][0]),p[0]),S=1;S<u;S++)A=g(A,y(s(l[S][0]),p[S]));return A}if(f&&m){for(var N=y(s(l[0][0]),p[0][0]),C=1;C<u;C++)N=g(N,y(s(l[C][0]),p[C][0]));return N}},"SparseMatrix, SparseMatrix":function(e,t){o(e,t);for(var i=e._index,s=e._values,a=t._index,c=t._values,u=0,l=n,h=r,p=0,d=0;p<i.length&&d<a.length;){var f=i[p],m=a[d];f<m?p++:f>m?d++:f===m&&(u=l(u,h(s[p],c[d])),p++,d++)}return u}});function o(e,t){var n,r,i=c(e),s=c(t);if(1===i.length)n=i[0];else{if(2!==i.length||1!==i[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+i.join(", ")+")");n=i[0]}if(1===s.length)r=s[0];else{if(2!==s.length||1!==s[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+s.join(", ")+")");r=s[0]}if(n!==r)throw new RangeError("Vectors must have equal length ("+n+" != "+r+")");if(0===n)throw new RangeError("Cannot calculate the dot product of empty vectors");return n}function c(e){return(0,i.OA)(e)?e.size():a(e)}}))},9874:(e,t,n)=>{"use strict";n.d(t,{f:()=>u});var r=n(4634),i=n(8321),s=n(760),a=n(3140);var o=n(4943),c=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],u=(0,i.P9)("eigs",c,(e=>{var{config:t,typed:n,matrix:i,addScalar:c,subtract:u,equal:l,abs:h,atan:p,cos:d,sin:f,multiplyScalar:m,divideScalar:g,inv:y,bignumber:x,multiply:v,add:b,larger:D,column:w,flatten:A,number:S,complex:N,sqrt:C,diag:E,size:M,reshape:T,qr:O,usolve:P,usolveAll:_,im:I,re:B,smaller:R,matrixFromColumns:F,dot:j}=e,k=function(e){var{config:t,addScalar:n,subtract:r,abs:i,atan:s,cos:o,sin:c,multiplyScalar:u,inv:l,bignumber:h,multiply:p,add:d}=e;function f(e,t,n,r){for(var i=e.length,s=Math.cos(t),a=Math.sin(t),o=Array(i).fill(0),c=Array(i).fill(0),u=0;u<i;u++)o[u]=s*e[u][n]-a*e[u][r],c[u]=a*e[u][n]+s*e[u][r];for(var l=0;l<i;l++)e[l][n]=o[l],e[l][r]=c[l];return e}function m(e,t,i,s){for(var a=e.length,l=o(t),p=c(t),d=Array(a).fill(h(0)),f=Array(a).fill(h(0)),m=0;m<a;m++)d[m]=r(u(l,e[m][i]),u(p,e[m][s])),f[m]=n(u(p,e[m][i]),u(l,e[m][s]));for(var g=0;g<a;g++)e[g][i]=d[g],e[g][s]=f[g];return e}function g(e,t,i,s){for(var a=e.length,l=h(o(t)),f=h(c(t)),m=u(l,l),g=u(f,f),y=Array(a).fill(h(0)),x=Array(a).fill(h(0)),v=p(h(2),l,f,e[i][s]),b=n(r(u(m,e[i][i]),v),u(g,e[s][s])),D=d(u(g,e[i][i]),v,u(m,e[s][s])),w=0;w<a;w++)y[w]=r(u(l,e[i][w]),u(f,e[s][w])),x[w]=n(u(f,e[i][w]),u(l,e[s][w]));e[i][i]=b,e[s][s]=D,e[i][s]=h(0),e[s][i]=h(0);for(var A=0;A<a;A++)A!==i&&A!==s&&(e[i][A]=y[A],e[A][i]=y[A],e[s][A]=x[A],e[A][s]=x[A]);return e}function y(e,t,n,r){for(var i=e.length,s=Math.cos(t),a=Math.sin(t),o=s*s,c=a*a,u=Array(i).fill(0),l=Array(i).fill(0),h=o*e[n][n]-2*s*a*e[n][r]+c*e[r][r],p=c*e[n][n]+2*s*a*e[n][r]+o*e[r][r],d=0;d<i;d++)u[d]=s*e[n][d]-a*e[r][d],l[d]=a*e[n][d]+s*e[r][d];e[n][n]=h,e[r][r]=p,e[n][r]=0,e[r][n]=0;for(var f=0;f<i;f++)f!==n&&f!==r&&(e[n][f]=u[f],e[f][n]=u[f],e[r][f]=l[f],e[f][r]=l[f]);return e}function x(e){for(var t=e.length,n=0,r=[0,1],i=0;i<t;i++)for(var s=i+1;s<t;s++)Math.abs(n)<Math.abs(e[i][s])&&(n=Math.abs(e[i][s]),r=[i,s]);return[r,n]}function v(e){for(var t=e.length,n=0,r=[0,1],s=0;s<t;s++)for(var a=s+1;a<t;a++)i(n)<i(e[s][a])&&(n=i(e[s][a]),r=[s,a]);return[r,n]}function b(e,t,n){var r,s=e.length,a=Array(s);if(n){r=Array(s);for(var o=0;o<s;o++)r[o]=Array(s)}for(var c=0;c<s;c++){for(var u=0,l=e[0],h=0;h<e.length;h++)i(e[h])<i(l)&&(l=e[u=h]);if(a[c]=e.splice(u,1)[0],n)for(var p=0;p<s;p++)r[c][p]=t[p][u],t[p].splice(u,1)}if(!n)return{values:a};var d=r.map(((e,t)=>({value:a[t],vector:e})));return{values:a,eigenvectors:d}}return function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.relTol,c=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0;if("number"===c)return function(e,n,r){var i,s,o=e.length,c=Math.abs(n/o);if(r){s=new Array(o);for(var u=0;u<o;u++)s[u]=Array(o).fill(0),s[u][u]=1}for(var l,h,p,d,m=x(e);Math.abs(m[1])>=Math.abs(c);){var g=m[0][0],v=m[0][1];e=y(e,(l=e[g][g],h=e[v][v],p=e[g][v],d=void 0,d=h-l,i=Math.abs(d)<=t.relTol?Math.PI/4:.5*Math.atan(2*p/(h-l))),g,v),r&&(s=f(s,i,g,v)),m=x(e)}for(var D=Array(o).fill(0),w=0;w<o;w++)D[w]=e[w][w];return b((0,a.o8)(D),s,r)}(e,o,d);if("BigNumber"===c)return function(e,n,o){var c,d,f=e.length,y=i(n/f);if(o){d=new Array(f);for(var x=0;x<f;x++)d[x]=Array(f).fill(0),d[x][x]=1}for(var D,w,A,S,N=v(e);i(N[1])>=i(y);){var C=N[0][0],E=N[0][1];e=g(e,(D=e[C][C],w=e[E][E],A=e[C][E],S=void 0,S=r(w,D),c=i(S)<=t.relTol?h(-1).acos().div(4):u(.5,s(p(2,A,l(S))))),C,E),o&&(d=m(d,c,C,E)),N=v(e)}for(var M=Array(f).fill(0),T=0;T<f;T++)M[T]=e[T][T];return b((0,a.o8)(M),d,o)}(e,o,d);throw TypeError("Unsupported data type: "+c)}}({config:t,addScalar:c,subtract:u,column:w,flatten:A,equal:l,abs:h,atan:p,cos:d,sin:f,multiplyScalar:m,inv:y,bignumber:x,complex:N,multiply:v,add:b}),q=function(e){var{addScalar:t,subtract:n,flatten:r,multiply:i,multiplyScalar:s,divideScalar:o,sqrt:c,abs:u,bignumber:l,diag:h,size:p,reshape:d,inv:f,qr:m,usolve:g,usolveAll:y,equal:x,complex:v,larger:b,smaller:D,matrixFromColumns:w,dot:A}=e;function S(e,t,r,i,s,a,o,c){var h="BigNumber"===c,p="Complex"===c,d=h?l(0):p?v(0):0,f=h?l(1):p?v(1):1;if(D(u(r),o))return[[f,d],[d,f]];if(b(u(n(s,a)),o))return[[n(s,i),n(a,i)],[r,r]];var m=n(e,s),g=n(i,s);return D(u(t),o)&&D(u(g),o)?[[m,f],[r,d]]:[[t,d],[g,f]]}function N(e,t){for(var n=0;n<e.length;n++)e[n].push(...Array(t-e[n].length).fill(0));for(var r=e.length;r<t;r++)e.push(Array(t).fill(0)),e[r][r]=1;return e}function C(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return r;return-1}function E(e,t,n,r,i){for(var s,a="BigNumber"===i?l(1e3):1e3,o=0;o<5;++o){s=M(t,n,i);try{s=g(e,s)}catch(e){continue}if(b(O(s),a))break}if(o>=5)return null;for(o=0;;){var c=g(e,s);if(D(O(T(s,[c])),r))break;if(++o>=10)return null;s=P(c)}return s}function M(e,t,n){var r="BigNumber"===n,i="Complex"===n,s=Array(e).fill(0).map((e=>2*Math.random()-1));return r&&(s=s.map((e=>l(e)))),i&&(s=s.map((e=>v(e)))),P(s=T(s,t),n)}function T(e,t){var r=p(e);for(var s of t)s=d(s,r),e=n(e,i(o(A(s,e),A(s,s)),s));return e}function O(e){return u(c(A(e,e)))}function P(e,t){var n="Complex"===t,r="BigNumber"===t?l(1):n?v(1):1;return i(o(r,O(e)),e)}return function(e,p,d,g){var w=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],A=function(e,n,r,i,a){var c,p="BigNumber"===i,d="Complex"===i,f=p?l(0):0,m=p?l(1):d?v(1):1,g=p?l(1):1,y=p?l(10):2,w=s(y,y);a&&(c=Array(n).fill(m));for(var A=!1;!A;){A=!0;for(var S=0;S<n;S++){for(var N=f,C=f,E=0;E<n;E++)S!==E&&(N=t(N,u(e[E][S])),C=t(C,u(e[S][E])));if(!x(N,0)&&!x(C,0)){for(var M=g,T=N,O=o(C,y),P=s(C,y);D(T,O);)T=s(T,w),M=s(M,y);for(;b(T,P);)T=o(T,w),M=o(M,y);if(D(o(t(T,C),M),s(t(N,C),.95))){A=!1;for(var _=o(1,M),I=0;I<n;I++)S!==I&&(e[S][I]=s(e[S][I],_),e[I][S]=s(e[I][S],M));a&&(c[S]=s(c[S],_))}}}}return a?h(c):null}(e,p,0,g,w);!function(e,r,i,a,c,h){var p="BigNumber"===a,d="Complex"===a,f=p?l(0):d?v(0):0;p&&(i=l(i));for(var m=0;m<r-2;m++){for(var g=0,y=f,x=m+1;x<r;x++){var b=e[x][m];D(u(y),u(b))&&(y=b,g=x)}if(!D(u(y),i)){if(g!==m+1){var w=e[g];e[g]=e[m+1],e[m+1]=w;for(var A=0;A<r;A++){var S=e[A][g];e[A][g]=e[A][m+1],e[A][m+1]=S}if(c){var N=h[g];h[g]=h[m+1],h[m+1]=N}}for(var C=m+2;C<r;C++){var E=o(e[C][m],y);if(0!==E){for(var M=0;M<r;M++)e[C][M]=n(e[C][M],s(E,e[m+1][M]));for(var T=0;T<r;T++)e[T][m+1]=t(e[T][m+1],s(E,e[T][C]));if(c)for(var O=0;O<r;O++)h[C][O]=n(h[C][O],s(E,h[m+1][O]))}}}}}(e,p,d,g,w,A);var{values:M,C:T}=function(e,r,o,p,d){var f="BigNumber"===p,g="Complex"===p,y=f?l(1):g?v(1):1;f&&(o=l(o));for(var x,b,w,A,C,E,M,T,O=(0,a.o8)(e),P=[],_=r,I=[],B=d?h(Array(r).fill(y)):void 0,R=d?h(Array(_).fill(y)):void 0,F=0;F<=100;){F+=1;for(var j=O[_-1][_-1],k=0;k<_;k++)O[k][k]=n(O[k][k],j);var{Q:q,R:L}=m(O);O=i(L,q);for(var z=0;z<_;z++)O[z][z]=t(O[z][z],j);if(d&&(R=i(R,q)),1===_||D(u(O[_-1][_-2]),o)){F=0,P.push(O[_-1][_-1]),d&&(I.unshift([[1]]),N(R,r),B=i(B,R),_>1&&(R=h(Array(_-1).fill(y)))),_-=1,O.pop();for(var U=0;U<_;U++)O[U].pop()}else if(2===_||D(u(O[_-2][_-3]),o)){F=0;var G=(x=O[_-2][_-2],b=O[_-2][_-1],w=O[_-1][_-2],A=O[_-1][_-1],C=void 0,E=void 0,M=void 0,T=void 0,C=t(x,A),E=n(s(x,A),s(b,w)),M=s(C,.5),T=s(c(n(s(C,C),s(4,E))),.5),[t(M,T),n(M,T)]);P.push(...G),d&&(I.unshift(S(O[_-2][_-2],O[_-2][_-1],O[_-1][_-2],O[_-1][_-1],G[0],G[1],o,p)),N(R,r),B=i(B,R),_>2&&(R=h(Array(_-2).fill(y)))),_-=2,O.pop(),O.pop();for(var $=0;$<_;$++)O[$].pop(),O[$].pop()}if(0===_)break}if(P.sort(((e,t)=>+n(u(e),u(t)))),F>100){var H=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+P.join(", "));throw H.values=P,H.vectors=[],H}var W=d?i(B,function(e,t){for(var n=[],r=0;r<t;r++)n[r]=Array(t).fill(0);var i=0;for(var s of e){for(var a=s.length,o=0;o<a;o++)for(var c=0;c<a;c++)n[i+o][i+c]=s[o][c];i+=a}return n}(I,r)):void 0;return{values:P,C:W}}(e,p,d,g,w);if(w){var O=function(e,t,s,a,o,c,u){var p=f(s),d=i(p,e,s),m="BigNumber"===u,g="Complex"===u,b=m?l(0):g?v(0):0,D=m?l(1):g?v(1):1,w=[],A=[];for(var S of o){var N=C(w,S,x);-1===N?(w.push(S),A.push(1)):A[N]+=1}for(var M=[],T=w.length,O=Array(t).fill(b),P=h(Array(t).fill(D)),_=function(){var e=w[I],o=n(d,i(e,P)),l=y(o,O);for(l.shift();l.length<A[I];){var h=E(o,t,l,c,u);if(null===h)break;l.push(h)}var p=i(f(a),s);l=l.map((e=>i(p,e))),M.push(...l.map((t=>({value:e,vector:r(t)}))))},I=0;I<T;I++)_();return M}(e,p,T,A,M,d,g);return{values:M,eigenvectors:O}}return{values:M}}}({config:t,addScalar:c,subtract:u,multiply:v,multiplyScalar:m,flatten:A,divideScalar:g,sqrt:C,abs:h,bignumber:x,diag:E,size:M,reshape:T,qr:O,inv:y,usolve:P,usolveAll:_,equal:l,complex:N,larger:D,smaller:R,matrixFromColumns:F,dot:j});return n("eigs",{Array:function(e){return L(i(e))},"Array, number|BigNumber":function(e,t){return L(i(e),{precision:t})},"Array, Object":(e,t)=>L(i(e),t),Matrix:function(e){return L(e,{matricize:!0})},"Matrix, number|BigNumber":function(e,t){return L(e,{precision:t,matricize:!0})},"Matrix, Object":function(e,t){var n={matricize:!0};return r(n,t),L(e,n)}});function L(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=!("eigenvectors"in r)||r.eigenvectors,o=function(e,t,n){var r=e.toArray(),i=e.size();if(2!==i.length||i[0]!==i[1])throw new RangeError("Matrix must be square (size: ".concat((0,s.GP)(i),")"));var a=i[0];if(function(e,t,n){for(var r=0;r<t;r++)for(var i=0;i<t;i++)if(D(x(h(I(e[r][i]))),n))return!1;return!0}(r,a,t)&&(function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)e[n][r]=B(e[n][r])}(r,a),function(e,t,n){for(var r=0;r<t;r++)for(var i=r;i<t;i++)if(D(x(h(u(e[r][i],e[i][r]))),n))return!1;return!0}(r,a,t))){var o=z(e,r,a);return k(r,a,t,o,n)}var c=z(e,r,a);return q(r,a,t,c,n)}(e,null!==(n=r.precision)&&void 0!==n?n:t.relTol,a);return r.matricize&&(o.values=i(o.values),a&&(o.eigenvectors=o.eigenvectors.map((e=>{var{value:t,vector:n}=e;return{value:t,vector:i(n)}})))),a&&Object.defineProperty(o,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),o}function z(e,t,n){var r=e.datatype();if("number"===r||"BigNumber"===r||"Complex"===r)return r;for(var i=!1,s=!1,a=!1,c=0;c<n;c++)for(var u=0;u<n;u++){var l=t[c][u];if((0,o.Et)(l)||(0,o.fU)(l))i=!0;else if((0,o.C4)(l))s=!0;else{if(!(0,o.Zd)(l))throw TypeError("Unsupported type in Matrix: "+(0,o.QP)(l));a=!0}}if(s&&a&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),a){for(var h=0;h<n;h++)for(var p=0;p<n;p++)t[h][p]=N(t[h][p]);return"Complex"}if(s){for(var d=0;d<n;d++)for(var f=0;f<n;f++)t[d][f]=x(t[d][f]);return"BigNumber"}if(i){for(var m=0;m<n;m++)for(var g=0;g<n;g++)t[m][g]=S(t[m][g]);return"number"}throw TypeError("Matrix contains unsupported types only.")}}))},7678:(e,t,n)=>{"use strict";n.d(t,{H:()=>c});var r=n(4943),i=n(760),s=n(8321),a="expm",o=["typed","abs","add","identity","inv","multiply"],c=(0,s.P9)(a,o,(e=>{var{typed:t,abs:n,add:s,identity:o,inv:c,multiply:u}=e;return t(a,{Matrix:function(e){var t=e.size();if(2!==t.length||t[0]!==t[1])throw new RangeError("Matrix must be square (size: "+(0,i.GP)(t)+")");for(var a=t[0],h=function(e){for(var t=e.size()[0],r=0,i=0;i<t;i++){for(var s=0,a=0;a<t;a++)s+=n(e.get([i,a]));r=Math.max(s,r)}return r}(e),p=function(e){for(var t=0;t<30;t++)for(var n=0;n<=t;n++){var r=t-n;if(l(e,n,r)<1e-15)return{q:n,j:r}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}(h),d=p.q,f=p.j,m=u(e,Math.pow(2,-f)),g=o(a),y=o(a),x=1,v=m,b=-1,D=1;D<=d;D++)D>1&&(v=u(v,m),b=-b),g=s(g,u(x=x*(d-D+1)/((2*d-D+1)*D),v)),y=s(y,u(x*b,v));for(var w=u(c(y),g),A=0;A<f;A++)w=u(w,w);return(0,r.AF)(e)?e.createSparseMatrix(w):w}});function l(e,t,n){for(var r=1,i=2;i<=t;i++)r*=i;for(var s=r,a=t+1;a<=2*t;a++)s*=a;var o=s*(2*t+1);return 8*Math.pow(e/Math.pow(2,n),2*t)*r*r/(s*o)}}))},8822:(e,t,n)=>{"use strict";n.d(t,{H:()=>s});var r=n(5838),i=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],s=(0,n(8321).P9)("fft",i,(e=>{var{typed:t,matrix:n,addScalar:i,multiplyScalar:s,divideScalar:a,exp:o,tau:c,i:u,dotDivide:l,conj:h,pow:p,ceil:d,log2:f}=e;return t("fft",{Array:m,Matrix:function(e){return e.create(m(e.valueOf()),e.datatype())}});function m(e){var t=(0,r.LO)(e);return 1===t.length?y(e,t[0]):g(e.map((e=>m(e,t.slice(1)))),0)}function g(e,t){var n=(0,r.LO)(e);if(0!==t)return new Array(n[0]).fill(0).map(((n,r)=>g(e[r],t-1)));if(1===n.length)return y(e);function i(e){var t=(0,r.LO)(e);return new Array(t[1]).fill(0).map(((n,r)=>new Array(t[0]).fill(0).map(((t,n)=>e[n][r]))))}return i(g(i(e),1))}function y(e){var t=e.length;if(1===t)return[e[0]];if(t%2==0){for(var n=[...y(e.filter(((e,t)=>t%2==0))),...y(e.filter(((e,t)=>t%2==1)))],r=0;r<t/2;r++){var g=n[r],x=s(n[r+t/2],o(s(s(c,u),a(-r,t))));n[r]=i(g,x),n[r+t/2]=i(g,s(-1,x))}return n}return function(e){for(var t=e.length,n=o(a(s(-1,s(u,c)),t)),r=[],i=1-t;i<t;i++)r.push(p(n,a(p(i,2),2)));for(var g=p(2,d(f(t+t-1))),x=[...new Array(t).fill(0).map(((n,i)=>s(e[i],r[t-1+i]))),...new Array(g-t).fill(0)],v=[...new Array(t+t-1).fill(0).map(((e,t)=>a(1,r[t]))),...new Array(g-(t+t-1)).fill(0)],b=y(x),D=y(v),w=new Array(g).fill(0).map(((e,t)=>s(b[t],D[t]))),A=l(h(m(h(w))),g),S=[],N=t-1;N<t+t-1;N++)S.push(s(A[N],r[N]));return S}(e)}}))},9990:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});var r=n(6383),i=n(5838),s=["typed"],a=(0,n(8321).P9)("filter",s,(e=>{var{typed:t}=e;return t("filter",{"Array, function":o,"Matrix, function":function(e,t){return e.create(o(e.valueOf(),t),e.datatype())},"Array, RegExp":i.Wr,"Matrix, RegExp":function(e,t){return e.create((0,i.Wr)(e.valueOf(),t),e.datatype())}})}));function o(e,t){var n=(0,r.r)(t,e,"filter");return(0,i.pb)(e,(function(e,t,r){return n(e,[t],r)}))}},8920:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var r=n(5838),i=n(8321),s="flatten",a=["typed"],o=(0,i.P9)(s,a,(e=>{var{typed:t}=e;return t(s,{Array:function(e){return(0,r.Bq)(e)},Matrix:function(e){return e.create((0,r.Bq)(e.toArray()),e.datatype())}})}))},1032:(e,t,n)=>{"use strict";n.d(t,{j:()=>c});var r=n(6383),i=n(8321),s=n(5838),a="forEach",o=["typed"],c=(0,i.P9)(a,o,(e=>{var{typed:t}=e;return t(a,{"Array, function":u,"Matrix, function":function(e,t){e.forEach(t)}})}));function u(e,t){(0,s.qj)(e,[],e,(0,r.r)(t,e,a))}},5587:(e,t,n)=>{"use strict";n.d(t,{C:()=>c});var r=n(8321),i=n(5838),s=n(4943),a="getMatrixDataType",o=["typed"],c=(0,r.P9)(a,o,(e=>{var{typed:t}=e;return t(a,{Array:function(e){return(0,i.ig)(e,s.QP)},Matrix:function(e){return e.getDataType()}})}))},5310:(e,t,n)=>{"use strict";n.d(t,{D:()=>u});var r=n(4943),i=n(5838),s=n(1106),a=n(8321),o="identity",c=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],u=(0,a.P9)(o,c,(e=>{var{typed:t,config:n,matrix:a,BigNumber:c,DenseMatrix:u,SparseMatrix:l}=e;return t(o,{"":function(){return"Matrix"===n.matrix?a([]):[]},string:function(e){return a(e)},"number | BigNumber":function(e){return p(e,e,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, string":function(e,t){return p(e,e,t)},"number | BigNumber, number | BigNumber":function(e,t){return p(e,t,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,n){return p(e,t,n)},Array:function(e){return h(e)},"Array, string":function(e,t){return h(e,t)},Matrix:function(e){return h(e.valueOf(),e.storage())},"Matrix, string":function(e,t){return h(e.valueOf(),t)}});function h(e,t){switch(e.length){case 0:return t?a(t):[];case 1:return p(e[0],e[0],t);case 2:return p(e[0],e[1],t);default:throw new Error("Vector containing two values expected")}}function p(e,t,n){var a=(0,r.C4)(e)||(0,r.C4)(t)?c:null;if((0,r.C4)(e)&&(e=e.toNumber()),(0,r.C4)(t)&&(t=t.toNumber()),!(0,s.YN)(e)||e<1)throw new Error("Parameters in function identity must be positive integers");if(!(0,s.YN)(t)||t<1)throw new Error("Parameters in function identity must be positive integers");var o=a?new c(1):1,h=a?new a(0):0,p=[e,t];if(n){if("sparse"===n)return l.diagonal(p,o,0,h);if("dense"===n)return u.diagonal(p,o,0,h);throw new TypeError('Unknown matrix type "'.concat(n,'"'))}for(var d=(0,i.XR)([],p,h),f=e<t?e:t,m=0;m<f;m++)d[m][m]=o;return d}}))},1069:(e,t,n)=>{"use strict";n.d(t,{C:()=>c});var r=n(5838),i=n(8321),s=n(4943),a="ifft",o=["typed","fft","dotDivide","conj"],c=(0,i.P9)(a,o,(e=>{var{typed:t,fft:n,dotDivide:i,conj:o}=e;return t(a,{"Array | Matrix":function(e){var t=(0,s.OA)(e)?e.size():(0,r.LO)(e);return i(o(n(o(e))),t.reduce(((e,t)=>e*t),1))}})}))},7429:(e,t,n)=>{"use strict";n.d(t,{K:()=>c});var r=n(4943),i=n(5838),s=n(8321),a=n(760),o=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],c=(0,s.P9)("inv",o,(e=>{var{typed:t,matrix:n,divideScalar:s,addScalar:o,multiply:c,unaryMinus:u,det:l,identity:h,abs:p}=e;return t("inv",{"Array | Matrix":function(e){var t=(0,r.OA)(e)?e.size():(0,i.LO)(e);switch(t.length){case 1:if(1===t[0])return(0,r.OA)(e)?n([s(1,e.valueOf()[0])]):[s(1,e[0])];throw new RangeError("Matrix must be square (size: "+(0,a.GP)(t)+")");case 2:var o=t[0],c=t[1];if(o===c)return(0,r.OA)(e)?n(d(e.valueOf(),o,c),e.storage()):d(e,o,c);throw new RangeError("Matrix must be square (size: "+(0,a.GP)(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+(0,a.GP)(t)+")")}},any:function(e){return s(1,e)}});function d(e,t,n){var r,i,a,d,f;if(1===t){if(0===(d=e[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[s(1,d)]]}if(2===t){var m=l(e);if(0===m)throw Error("Cannot calculate inverse, determinant is zero");return[[s(e[1][1],m),s(u(e[0][1]),m)],[s(u(e[1][0]),m),s(e[0][0],m)]]}var g=e.concat();for(r=0;r<t;r++)g[r]=g[r].concat();for(var y=h(t).valueOf(),x=0;x<n;x++){var v=p(g[x][x]),b=x;for(r=x+1;r<t;)p(g[r][x])>v&&(v=p(g[r][x]),b=r),r++;if(0===v)throw Error("Cannot calculate inverse, determinant is zero");(r=b)!==x&&(f=g[x],g[x]=g[r],g[r]=f,f=y[x],y[x]=y[r],y[r]=f);var D=g[x],w=y[x];for(r=0;r<t;r++){var A=g[r],S=y[r];if(r!==x){if(0!==A[x]){for(a=s(u(A[x]),D[x]),i=x;i<n;i++)A[i]=o(A[i],c(a,D[i]));for(i=0;i<n;i++)S[i]=o(S[i],c(a,w[i]))}}else{for(a=D[x],i=x;i<n;i++)A[i]=s(A[i],a);for(i=0;i<n;i++)S[i]=s(S[i],a)}}}return y}}))},6876:(e,t,n)=>{"use strict";n.d(t,{l:()=>o});var r=n(5838),i=n(8321),s="kron",a=["typed","matrix","multiplyScalar"],o=(0,i.P9)(s,a,(e=>{var{typed:t,matrix:n,multiplyScalar:i}=e;return t(s,{"Matrix, Matrix":function(e,t){return n(a(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return n(a(e.toArray(),t))},"Array, Matrix":function(e,t){return n(a(e,t.toArray()))},"Array, Array":a});function a(e,t){if(1===(0,r.LO)(e).length&&(e=[e]),1===(0,r.LO)(t).length&&(t=[t]),(0,r.LO)(e).length>2||(0,r.LO)(t).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(e.length)+", y = "+JSON.stringify(t.length)+")");var n=[],s=[];return e.map((function(e){return t.map((function(t){return s=[],n.push(s),e.map((function(e){return t.map((function(t){return s.push(i(e,t))}))}))}))}))&&n}}))},4672:(e,t,n)=>{"use strict";n.d(t,{p:()=>c});var r=n(6383),i=n(5838),s=n(8321),a="map",o=["typed"],c=(0,s.P9)(a,o,(e=>{var{typed:t}=e;return t(a,{"Array, function":n,"Matrix, function":function(e,t){return e.map(t)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(e,r,s)=>function(e,r){if("function"!=typeof r)throw new Error("Last argument must be a callback function");var s,a=e[0].isMatrix,o=(0,i.Kx)(...e.map((e=>e.isMatrix?e.size():(0,i.LO)(e)))),c=a?(e,t)=>e.get(t):i.Jt,u=a?e.map((t=>t.isMatrix?t.create((0,i.hO)(t.toArray(),o),t.datatype()):e[0].create((0,i.hO)(t.valueOf(),o)))):e.map((e=>e.isMatrix?(0,i.hO)(e.toArray(),o):(0,i.hO)(e,o)));if(t.isTypedFunction(r)){var l=o.map((()=>0)),h=u.map((e=>c(e,l))),p=function(e,n,r,i){return null!==t.resolve(e,[...n,r,...i])?2:null!==t.resolve(e,[...n,r])?1:(t.resolve(e,n),0)}(r,h,l,u);s=g(p)}else{var d=e.length,f=function(e,t){return e.length>t+1?2:e.length===t+1?1:0}(r,d);s=g(f)}var m=(e,t)=>s([e,...u.slice(1).map((e=>c(e,t)))],t);return a?u[0].map(m):n(u[0],m);function g(e){switch(e){case 0:return e=>r(...e);case 1:return(e,t)=>r(...e,t);case 2:return(e,t)=>r(...e,t,...u)}}}([e,r,...s.slice(0,s.length-1)],s[s.length-1])});function n(e,t){return(0,i.qj)(e,[],e,(0,r.r)(t,e,a))}}))},4242:(e,t,n)=>{"use strict";n.d(t,{z:()=>a});var r=n(8321),i="matrixFromColumns",s=["typed","matrix","flatten","size"],a=(0,r.P9)(i,s,(e=>{var{typed:t,matrix:n,flatten:r,size:s}=e;return t(i,{"...Array":function(e){return a(e)},"...Matrix":function(e){return n(a(e.map((e=>e.toArray()))))}});function a(e){if(0===e.length)throw new TypeError("At least one column is needed to construct a matrix.");for(var t=o(e[0]),n=[],i=0;i<t;i++)n[i]=[];for(var s of e){var a=o(s);if(a!==t)throw new TypeError("The vectors had different length: "+(0|t)+" ≠ "+(0|a));for(var c=r(s),u=0;u<t;u++)n[u].push(c[u])}return n}function o(e){var t=s(e);if(1===t.length)return t[0];if(2===t.length){if(1===t[0])return t[1];if(1===t[1])return t[0];throw new TypeError("At least one of the arguments is not a vector.")}throw new TypeError("Only one- or two-dimensional vectors are supported.")}}))},4977:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});var r=n(8321),i="matrixFromFunction",s=["typed","matrix","isZero"],a=(0,r.P9)(i,s,(e=>{var{typed:t,matrix:n,isZero:r}=e;return t(i,{"Array | Matrix, function, string, string":function(e,t,n,r){return s(e,t,n,r)},"Array | Matrix, function, string":function(e,t,n){return s(e,t,n)},"Matrix, function":function(e,t){return s(e,t,"dense")},"Array, function":function(e,t){return s(e,t,"dense").toArray()},"Array | Matrix, string, function":function(e,t,n){return s(e,n,t)},"Array | Matrix, string, string, function":function(e,t,n,r){return s(e,r,t,n)}});function s(e,t,i,s){var a;return(a=void 0!==s?n(i,s):n(i)).resize(e),a.forEach((function(e,n){var i=t(n);r(i)||a.set(n,i)})),a}}))},3348:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8321),i="matrixFromRows",s=["typed","matrix","flatten","size"],a=(0,r.P9)(i,s,(e=>{var{typed:t,matrix:n,flatten:r,size:s}=e;return t(i,{"...Array":function(e){return a(e)},"...Matrix":function(e){return n(a(e.map((e=>e.toArray()))))}});function a(e){if(0===e.length)throw new TypeError("At least one row is needed to construct a matrix.");var t=o(e[0]),n=[];for(var i of e){var s=o(i);if(s!==t)throw new TypeError("The vectors had different length: "+(0|t)+" ≠ "+(0|s));n.push(r(i))}return n}function o(e){var t=s(e);if(1===t.length)return t[0];if(2===t.length){if(1===t[0])return t[1];if(1===t[1])return t[0];throw new TypeError("At least one of the arguments is not a vector.")}throw new TypeError("Only one- or two-dimensional vectors are supported.")}}))},8193:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(4943),i=n(1106),s=n(5838),a=["typed","config","matrix","BigNumber"],o=(0,n(8321).P9)("ones",a,(e=>{var{typed:t,config:n,matrix:a,BigNumber:o}=e;return t("ones",{"":function(){return"Array"===n.matrix?c([]):c([],"default")},"...number | BigNumber | string":function(e){if("string"==typeof e[e.length-1]){var t=e.pop();return c(e,t)}return"Array"===n.matrix?c(e):c(e,"default")},Array:c,Matrix:function(e){var t=e.storage();return c(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return c(e.valueOf(),t)}});function c(e,t){var n=function(e){var t=!1;return e.forEach((function(e,n,i){(0,r.C4)(e)&&(t=!0,i[n]=e.toNumber())})),t}(e),c=n?new o(1):1;if(function(e){e.forEach((function(e){if("number"!=typeof e||!(0,i.YN)(e)||e<0)throw new Error("Parameters in function ones must be positive integers")}))}(e),t){var u=a(t);return e.length>0?u.resize(e,c):u}var l=[];return e.length>0?(0,s.XR)(l,e,c):l}}))},6228:(e,t,n)=>{"use strict";n.d(t,{X:()=>c});var r=n(4943),i=n(1106),s=n(8321),a="partitionSelect",o=["typed","isNumeric","isNaN","compare"],c=(0,s.P9)(a,o,(e=>{var{typed:t,isNumeric:n,isNaN:s,compare:o}=e,c=o,u=(e,t)=>-o(e,t);return t(a,{"Array | Matrix, number":function(e,t){return l(e,t,c)},"Array | Matrix, number, string":function(e,t,n){if("asc"===n)return l(e,t,c);if("desc"===n)return l(e,t,u);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":l});function l(e,t,n){if(!(0,i.YN)(t)||t<0)throw new Error("k must be a non-negative integer");if((0,r.OA)(e)){if(e.size().length>1)throw new Error("Only one dimensional matrices supported");return h(e.valueOf(),t,n)}if(Array.isArray(e))return h(e,t,n)}function h(e,t,r){if(t>=e.length)throw new Error("k out of bounds");for(var i=0;i<e.length;i++)if(n(e[i])&&s(e[i]))return e[i];for(var a=0,o=e.length-1;a<o;){for(var c=a,u=o,l=e[Math.floor(Math.random()*(o-a+1))+a];c<u;)if(r(e[c],l)>=0){var h=e[u];e[u]=e[c],e[c]=h,--u}else++c;r(e[c],l)>0&&--c,t<=c?o=c:a=c+1}return e[t]}}))},4739:(e,t,n)=>{"use strict";n.d(t,{w:()=>l});var r=n(4943),i=n(5838),s=n(8321),a=n(760),o=n(3140),c="pinv",u=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],l=(0,s.P9)(c,u,(e=>{var{typed:t,matrix:n,inv:s,deepEqual:u,equal:l,dotDivide:h,dot:p,ctranspose:d,divideScalar:f,multiply:m,add:g,Complex:y}=e;return t(c,{"Array | Matrix":function(e){var t=(0,r.OA)(e)?e.size():(0,i.LO)(e);switch(t.length){case 1:return b(e)?d(e):1===t[0]?s(e):h(d(e),p(e,e));case 2:if(b(e))return d(e);var o=t[0],c=t[1];if(o===c)try{return s(e)}catch(e){if(!(e instanceof Error&&e.message.match(/Cannot calculate inverse, determinant is zero/)))throw e}return(0,r.OA)(e)?n(x(e.valueOf(),o,c),e.storage()):x(e,o,c);default:throw new RangeError("Matrix must be two dimensional (size: "+(0,a.GP)(t)+")")}},any:function(e){return l(e,0)?(0,o.o8)(e):f(1,e)}});function x(e,t,n){var{C:r,F:i}=function(e,t,n){var r=function(e,t,n){for(var r=(0,o.o8)(e),i=0,s=0;s<t;s++){if(n<=i)return r;for(var a=s;v(r[a][i]);)if(t===++a&&(a=s,n===++i))return r;[r[a],r[s]]=[r[s],r[a]];for(var c=r[s][i],u=0;u<n;u++)r[s][u]=h(r[s][u],c);for(var l=0;l<t;l++)if(l!==s){c=r[l][i];for(var p=0;p<n;p++)r[l][p]=g(r[l][p],m(-1,m(c,r[s][p])))}i++}return r}(e,t,n);return{C:e.map(((e,n)=>e.filter(((e,n)=>n<t&&!v(p(r[n],r[n])))))),F:r.filter(((e,t)=>!v(p(r[t],r[t]))))}}(e,t,n),a=m(s(m(d(r),r)),d(r)),c=m(d(i),s(m(i,d(i))));return m(c,a)}function v(e){return l(g(e,y(1,1)),g(0,y(1,1)))}function b(e){return u(g(e,y(1,1)),g(m(e,0),y(1,1)))}}))},844:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var r=n(8321),i=n(6495),s="range",a=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],o=(0,r.P9)(s,a,(e=>{var{typed:t,config:n,matrix:r,bignumber:a,smaller:o,smallerEq:c,larger:u,largerEq:l,add:h,isPositive:p}=e;return t(s,{string:f,"string, boolean":f,"number, number":function(e,t){return d(m(e,t,1,!1))},"number, number, number":function(e,t,n){return d(m(e,t,n,!1))},"number, number, boolean":function(e,t,n){return d(m(e,t,1,n))},"number, number, number, boolean":function(e,t,n,r){return d(m(e,t,n,r))},"BigNumber, BigNumber":function(e,t){return d(m(e,t,new(0,e.constructor)(1),!1))},"BigNumber, BigNumber, BigNumber":function(e,t,n){return d(m(e,t,n,!1))},"BigNumber, BigNumber, boolean":function(e,t,n){return d(m(e,t,new(0,e.constructor)(1),n))},"BigNumber, BigNumber, BigNumber, boolean":function(e,t,n,r){return d(m(e,t,n,r))},"Unit, Unit, Unit":function(e,t,n){return d(m(e,t,n,!1))},"Unit, Unit, Unit, boolean":function(e,t,n,r){return d(m(e,t,n,r))}});function d(e){return"Matrix"===n.matrix?r?r(e):(0,i.zc)():e}function f(e,t){var r=function(e){var t=e.split(":").map((function(e){return Number(e)}));if(t.some((function(e){return isNaN(e)})))return null;switch(t.length){case 2:return{start:t[0],end:t[1],step:1};case 3:return{start:t[0],end:t[2],step:t[1]};default:return null}}(e);if(!r)throw new SyntaxError('String "'+e+'" is no valid range');return"BigNumber"===n.number?(void 0===a&&(0,i.j9)(),d(m(a(r.start),a(r.end),a(r.step)))):d(m(r.start,r.end,r.step,t))}function m(e,t,n,r){for(var i=[],s=p(n)?r?c:o:r?l:u,a=e;s(a,t);)i.push(a),a=h(a,n);return i}}))},2380:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var r=n(5838),i=n(8321),s="reshape",a=["typed","isInteger","matrix"],o=(0,i.P9)(s,a,(e=>{var{typed:t,isInteger:n}=e;return t(s,{"Matrix, Array":function(e,t){return e.reshape(t,!0)},"Array, Array":function(e,t){return t.forEach((function(e){if(!n(e))throw new TypeError("Invalid size for dimension: "+e)})),(0,r.tQ)(e,t)}})}))},9192:(e,t,n)=>{"use strict";n.d(t,{B:()=>h});var r=n(4943),i=n(1380),s=n(928),a=n(1106),o=n(760),c=n(3140),u=n(5838),l=["config","matrix"],h=(0,n(8321).P9)("resize",l,(e=>{var{config:t,matrix:n}=e;return function(e,l,h){if(2!==arguments.length&&3!==arguments.length)throw new s.X("resize",arguments.length,2,3);if((0,r.OA)(l)&&(l=l.valueOf()),(0,r.C4)(l[0])&&(l=l.map((function(e){return(0,r.C4)(e)?e.toNumber():e}))),(0,r.OA)(e))return e.resize(l,h,!0);if("string"==typeof e)return function(e,t,n){if(void 0!==n){if("string"!=typeof n||1!==n.length)throw new TypeError("Single character expected as defaultValue")}else n=" ";if(1!==t.length)throw new i.h(t.length,1);var r=t[0];if("number"!=typeof r||!(0,a.YN)(r))throw new TypeError("Invalid size, must contain positive integers (size: "+(0,o.GP)(t)+")");if(e.length>r)return e.substring(0,r);if(e.length<r){for(var s=e,c=0,u=r-e.length;c<u;c++)s+=n;return s}return e}(e,l,h);var p=!Array.isArray(e)&&"Array"!==t.matrix;if(0===l.length){for(;Array.isArray(e);)e=e[0];return(0,c.o8)(e)}Array.isArray(e)||(e=[e]),e=(0,c.o8)(e);var d=(0,u.XR)(e,l,h);return p?n(d):d}}))},404:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var r=n(8321),i=n(5838),s="rotate",a=["typed","multiply","rotationMatrix"],o=(0,r.P9)(s,a,(e=>{var{typed:t,multiply:n,rotationMatrix:r}=e;return t(s,{"Array , number | BigNumber | Complex | Unit":function(e,t){return a(e,2),n(r(t),e).toArray()},"Matrix , number | BigNumber | Complex | Unit":function(e,t){return a(e,2),n(r(t),e)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(e,t,i){return a(e,3),n(r(t,i),e)},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(e,t,i){return a(e,3),n(r(t,i),e)}});function a(e,t){var n=Array.isArray(e)?(0,i.LO)(e):e.size();if(n.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(t));if(2===n.length&&1!==n[1])throw new RangeError("Vector must be of dimensions 1x".concat(t));if(n[0]!==t)throw new RangeError("Vector must be of dimensions 1x".concat(t))}}))},3163:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var r=n(4943),i=n(8321),s="rotationMatrix",a=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],o=(0,i.P9)(s,a,(e=>{var{typed:t,config:n,multiplyScalar:i,addScalar:a,unaryMinus:o,norm:c,BigNumber:u,matrix:l,DenseMatrix:h,SparseMatrix:p,cos:d,sin:f}=e;return t(s,{"":function(){return"Matrix"===n.matrix?l([]):[]},string:function(e){return l(e)},"number | BigNumber | Complex | Unit":function(e){return m(e,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(e,t){return m(e,t)},"number | BigNumber | Complex | Unit, Array":function(e,t){var n=l(t);return g(n),v(e,n,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(e,t){g(t);var r=t.storage()||("Matrix"===n.matrix?"dense":void 0);return v(e,t,r)},"number | BigNumber | Complex | Unit, Array, string":function(e,t,n){var r=l(t);return g(r),v(e,r,n)},"number | BigNumber | Complex | Unit, Matrix, string":function(e,t,n){return g(t),v(e,t,n)}});function m(e,t){var n=(0,r.C4)(e)?new u(-1):-1,s=d(e),a=f(e);return x([[s,i(n,a)],[a,s]],t)}function g(e){var t=e.size();if(t.length<1||3!==t[0])throw new RangeError("Vector must be of dimensions 1x3")}function y(e){return e.reduce(((e,t)=>i(e,t)))}function x(e,t){if(t){if("sparse"===t)return new p(e);if("dense"===t)return new h(e);throw new TypeError('Unknown matrix type "'.concat(t,'"'))}return e}function v(e,t,n){var i=c(t);if(0===i)throw new RangeError("Rotation around zero vector");var s=(0,r.C4)(e)?u:null,l=s?new s(1):1,h=s?new s(-1):-1,p=s?new s(t.get([0])/i):t.get([0])/i,m=s?new s(t.get([1])/i):t.get([1])/i,g=s?new s(t.get([2])/i):t.get([2])/i,v=d(e),b=a(l,o(v)),D=f(e);return x([[a(v,y([p,p,b])),a(y([p,m,b]),y([h,g,D])),a(y([p,g,b]),y([m,D]))],[a(y([p,m,b]),y([g,D])),a(v,y([m,m,b])),a(y([m,g,b]),y([h,p,D]))],[a(y([p,g,b]),y([h,m,D])),a(y([m,g,b]),y([p,D])),a(v,y([g,g,b]))]],n)}}))},6610:(e,t,n)=>{"use strict";n.d(t,{R:()=>c});var r=n(8321),i=n(4943),s=n(3140),a=n(5838),o=["typed","Index","matrix","range"],c=(0,r.P9)("row",o,(e=>{var{typed:t,Index:n,matrix:r,range:o}=e;return t("row",{"Matrix, number":c,"Array, number":function(e,t){return c(r((0,s.o8)(e)),t).valueOf()}});function c(e,t){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");(0,a.r7)(t,e.size()[0]);var s=o(0,e.size()[1]),c=new n(t,s),u=e.subset(c);return(0,i.OA)(u)?u:r([[u]])}}))},8901:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(5838),i=n(8321),s=n(6495),a="size",o=["typed","config","?matrix"],c=(0,i.P9)(a,o,(e=>{var{typed:t,config:n,matrix:i}=e;return t(a,{Matrix:function(e){return e.create(e.size(),"number")},Array:r.LO,string:function(e){return"Array"===n.matrix?[e.length]:i([e.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(e){return"Array"===n.matrix?[]:i?i([],"dense","number"):(0,s.zc)()}})}))},72:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var r=n(5838),i=n(8321),s="sort",a=["typed","matrix","compare","compareNatural"],o=(0,i.P9)(s,a,(e=>{var{typed:t,matrix:n,compare:i,compareNatural:a}=e,o=i,c=(e,t)=>-i(e,t);return t(s,{Array:function(e){return l(e),e.sort(o)},Matrix:function(e){return h(e),n(e.toArray().sort(o),e.storage())},"Array, function":function(e,t){return l(e),e.sort(t)},"Matrix, function":function(e,t){return h(e),n(e.toArray().sort(t),e.storage())},"Array, string":function(e,t){return l(e),e.sort(u(t))},"Matrix, string":function(e,t){return h(e),n(e.toArray().sort(u(t)),e.storage())}});function u(e){if("asc"===e)return o;if("desc"===e)return c;if("natural"===e)return a;throw new Error('String "asc", "desc", or "natural" expected')}function l(e){if(1!==(0,r.LO)(e).length)throw new Error("One dimensional array expected")}function h(e){if(1!==e.size().length)throw new Error("One dimensional matrix expected")}}))},3831:(e,t,n)=>{"use strict";n.d(t,{y:()=>u});var r=n(4943),i=n(760),s=n(5838),a=n(8321),o="sqrtm",c=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],u=(0,a.P9)(o,c,(e=>{var{typed:t,abs:n,add:a,multiply:c,map:u,sqrt:l,subtract:h,inv:p,size:d,max:f,identity:m}=e,g=1e-6;function y(e){var t,r=0,i=e,s=m(d(e));do{var o=i;if(i=c(.5,a(o,p(s))),s=c(.5,a(s,p(o))),(t=f(n(h(i,o))))>g&&++r>1e3)throw new Error("computing square root of matrix: iterative method could not converge")}while(t>g);return i}return t(o,{"Array | Matrix":function(e){var t=(0,r.OA)(e)?e.size():(0,s.LO)(e);switch(t.length){case 1:if(1===t[0])return u(e,l);throw new RangeError("Matrix must be square (size: "+(0,i.GP)(t)+")");case 2:if(t[0]===t[1])return y(e);throw new RangeError("Matrix must be square (size: "+(0,i.GP)(t)+")");default:throw new RangeError("Matrix must be at most two dimensional (size: "+(0,i.GP)(t)+")")}}})}))},1146:(e,t,n)=>{"use strict";n.d(t,{l:()=>c});var r=n(3140),i=n(5838),s=n(8321),a="squeeze",o=["typed"],c=(0,s.P9)(a,o,(e=>{var{typed:t}=e;return t(a,{Array:function(e){return(0,i.r2)((0,r.o8)(e))},Matrix:function(e){var t=(0,i.r2)(e.toArray());return Array.isArray(t)?e.create(t,e.datatype()):t},any:function(e){return(0,r.o8)(e)}})}))},3790:(e,t,n)=>{"use strict";n.d(t,{$:()=>h});var r=n(4943),i=n(3140),s=n(5838),a=n(9863),o=n(1380),c=n(8321),u="subset",l=["typed","matrix","zeros","add"],h=(0,c.P9)(u,l,(e=>{var{typed:t,matrix:n,zeros:r,add:i}=e;return t(u,{"Matrix, Index":function(e,t){return(0,s.yT)(t)?n():((0,s.$p)(e,t),e.subset(t))},"Array, Index":t.referTo("Matrix, Index",(function(e){return function(t,r){var i=e(n(t),r);return r.isScalar()?i:i.valueOf()}})),"Object, Index":f,"string, Index":p,"Matrix, Index, any, any":function(e,t,n,a){return(0,s.yT)(t)?e:((0,s.$p)(e,t),e.clone().subset(t,function(e,t){if("string"==typeof e)throw new Error("can't boradcast a string");if(t._isScalar)return e;var n=t.size();if(!n.every((e=>e>0)))return e;try{return i(e,r(n))}catch(t){return e}}(n,t),a))},"Array, Index, any, any":t.referTo("Matrix, Index, any, any",(function(e){return function(t,r,i,s){var a=e(n(t),r,i,s);return a.isMatrix?a.valueOf():a}})),"Array, Index, any":t.referTo("Matrix, Index, any, any",(function(e){return function(t,r,i){return e(n(t),r,i,void 0).valueOf()}})),"Matrix, Index, any":t.referTo("Matrix, Index, any, any",(function(e){return function(t,n,r){return e(t,n,r,void 0)}})),"string, Index, string":d,"string, Index, string, string":d,"Object, Index, any":m})}));function p(e,t){if(!(0,r.nw)(t))throw new TypeError("Index expected");if((0,s.yT)(t))return"";if((0,s.$p)(Array.from(e),t),1!==t.size().length)throw new o.h(t.size().length,1);var n=e.length;(0,s.r7)(t.min()[0],n),(0,s.r7)(t.max()[0],n);var i=t.dimension(0),a="";return i.forEach((function(t){a+=e.charAt(t)})),a}function d(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Index expected");if((0,s.yT)(t))return e;if((0,s.$p)(Array.from(e),t),1!==t.size().length)throw new o.h(t.size().length,1);if(void 0!==r){if("string"!=typeof r||1!==r.length)throw new TypeError("Single character expected as defaultValue")}else r=" ";var i=t.dimension(0);if(i.size()[0]!==n.length)throw new o.h(i.size()[0],n.length);var a=e.length;(0,s.r7)(t.min()[0]),(0,s.r7)(t.max()[0]);for(var c=[],u=0;u<a;u++)c[u]=e.charAt(u);if(i.forEach((function(e,t){c[e]=n.charAt(t[0])})),c.length>a)for(var l=a-1,h=c.length;l<h;l++)c[l]||(c[l]=r);return c.join("")}function f(e,t){if(!(0,s.yT)(t)){if(1!==t.size().length)throw new o.h(t.size(),1);var n=t.dimension(0);if("string"!=typeof n)throw new TypeError("String expected as index to retrieve an object property");return(0,a.HU)(e,n)}}function m(e,t,n){if((0,s.yT)(t))return e;if(1!==t.size().length)throw new o.h(t.size(),1);var r=t.dimension(0);if("string"!=typeof r)throw new TypeError("String expected as index to retrieve an object property");var c=(0,i.o8)(e);return(0,a.dL)(c,r,n),c}},3767:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});var r=n(3140),i=n(760),s=["typed","matrix","add"],a=(0,n(8321).P9)("trace",s,(e=>{var{typed:t,matrix:n,add:s}=e;return t("trace",{Array:function(e){return a(n(e))},SparseMatrix:function(e){var t=e._values,n=e._index,r=e._ptr,a=e._size,o=a[0],c=a[1];if(o===c){var u=0;if(t.length>0)for(var l=0;l<c;l++)for(var h=r[l],p=r[l+1],d=h;d<p;d++){var f=n[d];if(f===l){u=s(u,t[d]);break}if(f>l)break}return u}throw new RangeError("Matrix must be square (size: "+(0,i.GP)(a)+")")},DenseMatrix:a,any:r.o8});function a(e){var t=e._size,n=e._data;switch(t.length){case 1:if(1===t[0])return(0,r.o8)(n[0]);throw new RangeError("Matrix must be square (size: "+(0,i.GP)(t)+")");case 2:var a=t[0];if(a===t[1]){for(var o=0,c=0;c<a;c++)o=s(o,n[c][c]);return o}throw new RangeError("Matrix must be square (size: "+(0,i.GP)(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+(0,i.GP)(t)+")")}}}))},9129:(e,t,n)=>{"use strict";n.d(t,{M:()=>c});var r=n(3140),i=n(760),s=n(8321),a="transpose",o=["typed","matrix"],c=(0,s.P9)(a,o,(e=>{var{typed:t,matrix:n}=e;return t(a,{Array:e=>s(n(e)).valueOf(),Matrix:s,any:r.o8});function s(e){var t,n=e.size();switch(n.length){case 1:t=e.clone();break;case 2:var s=n[0],a=n[1];if(0===a)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+(0,i.GP)(n)+")");switch(e.storage()){case"dense":t=function(e,t,n){for(var i,s=e._data,a=[],o=0;o<n;o++){i=a[o]=[];for(var c=0;c<t;c++)i[c]=(0,r.o8)(s[c][o])}return e.createDenseMatrix({data:a,size:[n,t],datatype:e._datatype})}(e,s,a);break;case"sparse":t=function(e,t,n){for(var i,s,a,o=e._values,c=e._index,u=e._ptr,l=o?[]:void 0,h=[],p=[],d=[],f=0;f<t;f++)d[f]=0;for(i=0,s=c.length;i<s;i++)d[c[i]]++;for(var m=0,g=0;g<t;g++)p.push(m),m+=d[g],d[g]=p[g];for(p.push(m),a=0;a<n;a++)for(var y=u[a],x=u[a+1],v=y;v<x;v++){var b=d[c[v]]++;h[b]=a,o&&(l[b]=(0,r.o8)(o[v]))}return e.createSparseMatrix({values:l,index:h,ptr:p,size:[n,t],datatype:e._datatype})}(e,s,a)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+(0,i.GP)(n)+")")}return t}}))},7989:(e,t,n)=>{"use strict";n.d(t,{I:()=>u});var r=n(4943),i=n(1106),s=n(5838),a=n(8321),o="zeros",c=["typed","config","matrix","BigNumber"],u=(0,a.P9)(o,c,(e=>{var{typed:t,config:n,matrix:a,BigNumber:c}=e;return t(o,{"":function(){return"Array"===n.matrix?u([]):u([],"default")},"...number | BigNumber | string":function(e){if("string"==typeof e[e.length-1]){var t=e.pop();return u(e,t)}return"Array"===n.matrix?u(e):u(e,"default")},Array:u,Matrix:function(e){var t=e.storage();return u(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return u(e.valueOf(),t)}});function u(e,t){var n=function(e){var t=!1;return e.forEach((function(e,n,i){(0,r.C4)(e)&&(t=!0,i[n]=e.toNumber())})),t}(e),o=n?new c(0):0;if(function(e){e.forEach((function(e){if("number"!=typeof e||!(0,i.YN)(e)||e<0)throw new Error("Parameters in function zeros must be positive integers")}))}(e),t){var u=a(t);return e.length>0?u.resize(e,o):u}var l=[];return e.length>0?(0,s.XR)(l,e,o):l}}))},9279:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r=n(3693),i=n(4943);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var a=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],o=(0,n(8321).P9)("solveODE",a,(e=>{var{typed:t,add:n,subtract:a,multiply:o,divide:c,max:u,map:l,abs:h,isPositive:p,isNegative:d,larger:f,smaller:m,matrix:g,bignumber:y,unaryMinus:x}=e;function v(e){return function(t,r,s,g){if(2!==r.length||!r.every(A)&&!r.every(i.vO))throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var v=r[0],b=r[1],D=f(b,v),w=g.firstStep;if(void 0!==w&&!p(w))throw new Error('"firstStep" must be positive');var S=g.maxStep;if(void 0!==S&&!p(S))throw new Error('"maxStep" must be positive');var N=g.minStep;if(N&&d(N))throw new Error('"minStep" must be positive or zero');var C=[v,b,w,N,S].filter((e=>void 0!==e));if(!C.every(A)&&!C.every(i.vO))throw new Error('Inconsistent type of "t" dependant variables');for(var E=g.tol?g.tol:1e-4,M=g.minDelta?g.minDelta:.2,T=g.maxDelta?g.maxDelta:5,O=g.maxIter?g.maxIter:1e4,P=[v,b,...s,S,N].some(i.C4),[_,I,B,R]=P?[y(e.a),y(e.c),y(e.b),y(e.bp)]:[e.a,e.c,e.b,e.bp],F=w?D?w:x(w):c(a(b,v),1),j=[v],k=[s],q=a(B,R),L=0,z=0,U=function(e){return e?m:f}(D),G=function(e){var t=e?f:m;return function(e,r,i){var s=n(e,i);return t(s,r)?a(r,e):i}}(D);U(j[L],b);){var $=[];F=G(j[L],b,F),$.push(t(j[L],k[L]));for(var H=1;H<I.length;++H)$.push(t(n(j[L],o(I[H],F)),n(k[L],o(F,_[H],$))));var W=u(h(l(o(q,$),(e=>(0,i.vO)(e)?e.value:e))));W<E&&E/W>1/4&&(j.push(n(j[L],F)),k.push(n(k[L],o(F,B,$))),L++);var V=.84*(E/W)**.2;if(m(V,M)?V=M:f(V,T)&&(V=T),V=P?y(V):V,F=o(F,V),S&&f(h(F),S)?F=D?S:x(S):N&&m(h(F),N)&&(F=D?N:x(N)),++z>O)throw new Error("Maximum number of iterations reached, try changing options")}return{t:j,y:k}}}function b(e,t,n,r){return v({a:[[],[.5],[0,3/4],[2/9,1/3,4/9]],c:[null,.5,3/4,1],b:[2/9,1/3,4/9,0],bp:[7/24,1/4,1/3,1/8]})(e,t,n,r)}function D(e,t,n,r){return v({a:[[],[.2],[3/40,9/40],[44/45,-56/15,32/9],[19372/6561,-25360/2187,64448/6561,-212/729],[9017/3168,-355/33,46732/5247,49/176,-5103/18656],[35/384,0,500/1113,125/192,-2187/6784,11/84]],c:[null,.2,.3,.8,8/9,1,1],b:[35/384,0,500/1113,125/192,-2187/6784,11/84,0],bp:[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40]})(e,t,n,r)}function w(e,t,n,i){var a=i.method?i.method:"RK45",o={RK23:b,RK45:D};if(a.toUpperCase()in o){var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i);return delete c.method,o[a.toUpperCase()](e,t,n,c)}var u=Object.keys(o).map((e=>'"'.concat(e,'"'))),l="".concat(u.slice(0,-1).join(", ")," and ").concat(u.slice(-1));throw new Error('Unavailable method "'.concat(a,'". Available methods are ').concat(l))}function A(e){return(0,i.C4)(e)||(0,i.Et)(e)}function S(e,t,n,r){var i=w(e,t.toArray(),n.toArray(),r);return{t:g(i.t),y:g(i.y)}}return t("solveODE",{"function, Array, Array, Object":w,"function, Matrix, Matrix, Object":S,"function, Array, Array":(e,t,n)=>w(e,t,n,{}),"function, Matrix, Matrix":(e,t,n)=>S(e,t,n,{}),"function, Array, number | BigNumber | Unit":(e,t,n)=>{var r=w(e,t,[n],{});return{t:r.t,y:r.y.map((e=>e[0]))}},"function, Matrix, number | BigNumber | Unit":(e,t,n)=>{var r=w(e,t.toArray(),[n],{});return{t:g(r.t),y:g(r.y.map((e=>e[0])))}},"function, Array, number | BigNumber | Unit, Object":(e,t,n,r)=>{var i=w(e,t,[n],r);return{t:i.t,y:i.y.map((e=>e[0]))}},"function, Matrix, number | BigNumber | Unit, Object":(e,t,n,r)=>{var i=w(e,t.toArray(),[n],r);return{t:g(i.t),y:g(i.y.map((e=>e[0])))}}})}))},6344:(e,t,n)=>{"use strict";n.d(t,{p:()=>u});var r=n(8321),i=n(1106),s=n(924);function a(e,t){if(!(0,i.YN)(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(!(0,i.YN)(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(t>e)throw new TypeError("k must be less than or equal to n");for(var n=e-t,r=1,a=2,o=t<n?t:n,c=t<n?n+1:t+1;c<=e;++c)for(r*=c;a<=o&&r%a==0;)r/=a,++a;return a<=o&&(r/=(0,s.q)(a,o)),r}a.signature="number, number";var o="combinations",c=["typed"],u=(0,r.P9)(o,c,(e=>{var{typed:t}=e;return t(o,{"number, number":a,"BigNumber, BigNumber":function(e,t){var n,r,i=e.constructor,s=e.minus(t),a=new i(1);if(!l(e)||!l(t))throw new TypeError("Positive integer value expected in function combinations");if(t.gt(e))throw new TypeError("k must be less than n in function combinations");if(n=a,t.lt(s))for(r=a;r.lte(s);r=r.plus(a))n=n.times(t.plus(r)).dividedBy(r);else for(r=a;r.lte(t);r=r.plus(a))n=n.times(s.plus(r)).dividedBy(r);return n}})}));function l(e){return e.isInteger()&&e.gte(0)}},825:(e,t,n)=>{"use strict";n.d(t,{Q:()=>c});var r=n(8321),i=n(1106),s=n(924),a="combinationsWithRep",o=["typed"],c=(0,r.P9)(a,o,(e=>{var{typed:t}=e;return t(a,{"number, number":function(e,t){if(!(0,i.YN)(e)||e<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!(0,i.YN)(t)||t<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(e<1)throw new TypeError("k must be less than or equal to n + k - 1");return t<e-1?(0,s.q)(e,e+t-1)/(0,s.q)(1,t):(0,s.q)(t+1,e+t-1)/(0,s.q)(1,e-1)},"BigNumber, BigNumber":function(e,t){var n,r,i=new(0,e.constructor)(1),s=e.minus(i);if(!u(e)||!u(t))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(e.lt(i))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(n=i,t.lt(s))for(r=i;r.lte(s);r=r.plus(i))n=n.times(t.plus(r)).dividedBy(r);else for(r=i;r.lte(t);r=r.plus(i))n=n.times(s.plus(r)).dividedBy(r);return n}})}));function u(e){return e.isInteger()&&e.gte(0)}},8669:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var r=n(6355),i=n(8321),s="factorial",a=["typed","gamma"],o=(0,i.P9)(s,a,(e=>{var{typed:t,gamma:n}=e;return t(s,{number:function(e){if(e<0)throw new Error("Value must be non-negative");return n(e+1)},BigNumber:function(e){if(e.isNegative())throw new Error("Value must be non-negative");return n(e.plus(1))},"Array | Matrix":t.referToSelf((e=>t=>(0,r.Bl)(t,e)))})}))},2375:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var r=n(8321),i=n(1389),s="gamma",a=["typed","config","multiplyScalar","pow","BigNumber","Complex"],o=(0,r.P9)(s,a,(e=>{var{typed:t,config:n,multiplyScalar:r,pow:a,BigNumber:o,Complex:c}=e;return t(s,{number:i.VX,Complex:function e(t){if(0===t.im)return(0,i.VX)(t.re);if(t.re<.5){var n=new c(1-t.re,-t.im),r=new c(Math.PI*t.re,Math.PI*t.im);return new c(Math.PI).div(r.sin()).div(e(n))}t=new c(t.re-1,t.im);for(var s=new c(i.gU[0],0),a=1;a<i.gU.length;++a){var o=new c(i.gU[a],0);s=s.add(o.div(t.add(a)))}var u=new c(t.re+i.n0+.5,t.im),l=Math.sqrt(2*Math.PI),h=u.pow(t.add(.5)),p=u.neg().exp();return s.mul(l).mul(h).mul(p)},BigNumber:function(e){if(e.isInteger())return e.isNegative()||e.isZero()?new o(1/0):u(e.minus(1));if(!e.isFinite())return new o(e.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function u(e){if(e<8)return new o([1,1,2,6,24,120,720,5040][e]);var t=n.precision+(0|Math.log(e.toNumber())),r=o.clone({precision:t});if(e%2==1)return e.times(u(new o(e-1)));for(var i=e,s=new r(e),a=e.toNumber();i>2;)a+=i-=2,s=s.times(a);return new o(s.toPrecision(o.precision))}}))},6241:(e,t,n)=>{"use strict";n.d(t,{u:()=>a});var r=n(8321),i="kldivergence",s=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],a=(0,r.P9)(i,s,(e=>{var{typed:t,matrix:n,divide:r,sum:s,multiply:a,map:o,dotDivide:c,log:u,isNumeric:l}=e;return t(i,{"Array, Array":function(e,t){return h(n(e),n(t))},"Matrix, Array":function(e,t){return h(e,n(t))},"Array, Matrix":function(e,t){return h(n(e),t)},"Matrix, Matrix":function(e,t){return h(e,t)}});function h(e,t){var n=t.size().length,i=e.size().length;if(n>1)throw new Error("first object must be one dimensional");if(i>1)throw new Error("second object must be one dimensional");if(n!==i)throw new Error("Length of two vectors must be equal");if(0===s(e))throw new Error("Sum of elements in first object must be non zero");if(0===s(t))throw new Error("Sum of elements in second object must be non zero");var h=r(e,s(e)),p=r(t,s(t)),d=s(a(h,o(c(h,p),(e=>u(e)))));return l(d)?d:Number.NaN}}))},3061:(e,t,n)=>{"use strict";n.d(t,{k:()=>c});var r=n(1389),i=n(8321),s=n(1106),a="lgamma",o=["Complex","typed"],c=(0,i.P9)(a,o,(e=>{var{Complex:t,typed:n}=e,i=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return n(a,{number:r.lm,Complex:function e(n){if(n.isNaN())return new t(NaN,NaN);if(0===n.im)return new t((0,r.lm)(n.re),0);if(n.re>=7||Math.abs(n.im)>=7)return o(n);if(n.re<=.1){var i=(0,s.b1)(6.283185307179586,n.im)*Math.floor(.5*n.re+.25),a=n.mul(Math.PI).sin().log(),u=e(new t(1-n.re,-n.im));return new t(1.1447298858494002,i).sub(a).sub(u)}return n.im>=0?c(n):c(n.conjugate()).conjugate()},BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function o(e){for(var n=e.sub(.5).mul(e.log()).sub(e).add(r.mn),s=new t(1,0).div(e),a=s.div(e),o=i[0],c=i[1],u=2*a.re,l=a.re*a.re+a.im*a.im,h=2;h<8;h++){var p=c;c=-l*o+i[h],o=u*o+p}var d=s.mul(a.mul(o).add(c));return n.add(d)}function c(e){var n=0,r=0,i=e;for(e=e.add(1);e.re<=7;){var s=(i=i.mul(e)).im<0?1:0;0!==s&&0===r&&n++,r=s,e=e.add(1)}return o(e).sub(i.log()).sub(new t(0,2*n*Math.PI*1))}}))},8523:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var r=n(6355),i=n(8321),s="multinomial",a=["typed","add","divide","multiply","factorial","isInteger","isPositive"],o=(0,i.P9)(s,a,(e=>{var{typed:t,add:n,divide:i,multiply:a,factorial:o,isInteger:c,isPositive:u}=e;return t(s,{"Array | Matrix":function(e){var t=0,s=1;return(0,r.xL)(e,(function(e){if(!c(e)||!u(e))throw new TypeError("Positive integer value expected in function multinomial");t=n(t,e),s=a(s,o(e))})),i(o(t),s)}})}))},7961:(e,t,n)=>{"use strict";n.d(t,{U:()=>c});var r=n(1106),i=n(924),s=n(8321),a="permutations",o=["typed","factorial"],c=(0,s.P9)(a,o,(e=>{var{typed:t,factorial:n}=e;return t(a,{"number | BigNumber":n,"number, number":function(e,t){if(!(0,r.YN)(e)||e<0)throw new TypeError("Positive integer value expected in function permutations");if(!(0,r.YN)(t)||t<0)throw new TypeError("Positive integer value expected in function permutations");if(t>e)throw new TypeError("second argument k must be less than or equal to first argument n");return(0,i.q)(e-t+1,e)},"BigNumber, BigNumber":function(e,t){var n,r;if(!u(e)||!u(t))throw new TypeError("Positive integer value expected in function permutations");if(t.gt(e))throw new TypeError("second argument k must be less than or equal to first argument n");for(n=e.mul(0).add(1),r=e.minus(t).plus(1);r.lte(e);r=r.plus(1))n=n.times(r);return n}})}));function u(e){return e.isInteger()&&e.gte(0)}},1226:(e,t,n)=>{"use strict";n.d(t,{B:()=>u});var r=n(5838),i=n(8321),s=n(4943),a=n(2458),o="pickRandom",c=["typed","config","?on"],u=(0,i.P9)(o,c,(e=>{var{typed:t,config:n,on:i}=e,c=(0,a.S)(n.randomSeed);return i&&i("config",(function(e,t){e.randomSeed!==t.randomSeed&&(c=(0,a.S)(e.randomSeed))})),t(o,{"Array | Matrix":function(e){return u(e,{})},"Array | Matrix, Object":function(e,t){return u(e,t)},"Array | Matrix, number":function(e,t){return u(e,{number:t})},"Array | Matrix, Array | Matrix":function(e,t){return u(e,{weights:t})},"Array | Matrix, Array | Matrix, number":function(e,t,n){return u(e,{number:n,weights:t})},"Array | Matrix, number, Array | Matrix":function(e,t,n){return u(e,{number:t,weights:n})}});function u(e,t){var{number:n,weights:i,elementWise:a=!0}=t,o=void 0===n;o&&(n=1);var u=(0,s.OA)(e)?e.create:(0,s.OA)(i)?i.create:null;e=e.valueOf(),i&&(i=i.valueOf()),!0===a&&(e=(0,r.Bq)(e),i=(0,r.Bq)(i));var l=0;if(void 0!==i){if(i.length!==e.length)throw new Error("Weights must have the same length as possibles");for(var h=0,p=i.length;h<p;h++){if(!(0,s.Et)(i[h])||i[h]<0)throw new Error("Weights must be an array of positive numbers");l+=i[h]}}for(var d,f=e.length,m=[];m.length<n;){if(void 0===i)d=e[Math.floor(c()*f)];else for(var g=c()*l,y=0,x=e.length;y<x;y++)if((g-=i[y])<0){d=e[y];break}m.push(d)}return o?m[0]:u?u(m):m}}))},9531:(e,t,n)=>{"use strict";n.d(t,{s:()=>u});var r=n(8321),i=n(4943),s=n(2458),a=n(4477),o="random",c=["typed","config","?on"],u=(0,r.P9)(o,c,(e=>{var{typed:t,config:n,on:r}=e,c=(0,s.S)(n.randomSeed);return r&&r("config",(function(e,t){e.randomSeed!==t.randomSeed&&(c=(0,s.S)(e.randomSeed))})),t(o,{"":()=>l(0,1),number:e=>l(0,e),"number, number":(e,t)=>l(e,t),"Array | Matrix":e=>u(e,0,1),"Array | Matrix, number":(e,t)=>u(e,0,t),"Array | Matrix, number, number":(e,t,n)=>u(e,t,n)});function u(e,t,n){var r=(0,a.Z)(e.valueOf(),(()=>l(t,n)));return(0,i.OA)(e)?e.create(r,"number"):r}function l(e,t){return e+c()*(t-e)}}))},3894:(e,t,n)=>{"use strict";n.d(t,{d:()=>u});var r=n(8321),i=n(4477),s=n(2458),a=n(4943),o="randomInt",c=["typed","config","?on"],u=(0,r.P9)(o,c,(e=>{var{typed:t,config:n,on:r}=e,c=(0,s.S)(n.randomSeed);return r&&r("config",(function(e,t){e.randomSeed!==t.randomSeed&&(c=(0,s.S)(e.randomSeed))})),t(o,{"":()=>l(0,1),number:e=>l(0,e),"number, number":(e,t)=>l(e,t),"Array | Matrix":e=>u(e,0,1),"Array | Matrix, number":(e,t)=>u(e,0,t),"Array | Matrix, number, number":(e,t,n)=>u(e,t,n)});function u(e,t,n){var r=(0,i.Z)(e.valueOf(),(()=>l(t,n)));return(0,a.OA)(e)?e.create(r,"number"):r}function l(e,t){return Math.floor(e+c()*(t-e))}}))},4477:(e,t,n)=>{"use strict";function r(e,t){var n=[];if((e=e.slice(0)).length>1)for(var i=0,s=e.shift();i<s;i++)n.push(r(e,t));else for(var a=0,o=e.shift();a<o;a++)n.push(t());return n}n.d(t,{Z:()=>r})},2458:(e,t,n)=>{"use strict";n.d(t,{S:()=>s});var r=n(7391),i=r(Date.now());function s(e){var t,n;return t=null===(n=e)?i:r(String(n)),function(){return t()}}},3917:(e,t,n)=>{"use strict";n.d(t,{m:()=>d});var r=n(6052),i=n(1106),s=n(8321),a=n(361),o=n(4900),c=n(1232),u=n(2573),l=n(2366),h="compare",p=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],d=(0,s.P9)(h,p,(e=>{var{typed:t,config:n,equalScalar:i,matrix:s,BigNumber:p,Fraction:d,DenseMatrix:m,concat:g}=e,y=(0,a.O)({typed:t}),x=(0,c.H)({typed:t,equalScalar:i}),v=(0,o.f)({typed:t,DenseMatrix:m}),b=(0,u.$)({typed:t,matrix:s,concat:g}),D=(0,l.D)({typed:t});return t(h,f({typed:t,config:n}),{"boolean, boolean":function(e,t){return e===t?0:e>t?1:-1},"BigNumber, BigNumber":function(e,t){return(0,r.q)(e,t,n.relTol,n.absTol)?new p(0):new p(e.cmp(t))},"bigint, bigint":function(e,t){return e===t?0n:e>t?1n:-1n},"Fraction, Fraction":function(e,t){return new d(e.compare(t))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},D,b({SS:x,DS:y,Ss:v}))})),f=(0,s.P9)(h,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(h,{"number, number":function(e,t){return(0,i.q8)(e,t,n.relTol,n.absTol)?0:e>t?1:-1}})}))},6695:(e,t,n)=>{"use strict";n.d(t,{b:()=>c});var r=n(1880),i=n(4943),s=n(8321),a="compareNatural",o=["typed","compare"],c=(0,s.P9)(a,o,(e=>{var{typed:t,compare:n}=e,s=n.signatures["boolean,boolean"];return t(a,{"any, any":function e(t,a){var u,l=(0,i.QP)(t),h=(0,i.QP)(a);if(!("number"!==l&&"BigNumber"!==l&&"Fraction"!==l||"number"!==h&&"BigNumber"!==h&&"Fraction"!==h))return"0"!==(u=n(t,a)).toString()?u>0?1:-1:r(l,h);var p=["Array","DenseMatrix","SparseMatrix"];if(p.includes(l)||p.includes(h))return 0!==(u=o(e,t,a))?u:r(l,h);if(l!==h)return r(l,h);if("Complex"===l)return function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0}(t,a);if("Unit"===l)return t.equalBase(a)?e(t.value,a.value):c(e,t.formatUnits(),a.formatUnits());if("boolean"===l)return s(t,a);if("string"===l)return r(t,a);if("Object"===l)return function(e,t,n){var i=Object.keys(t),s=Object.keys(n);i.sort(r),s.sort(r);var a=c(e,i,s);if(0!==a)return a;for(var o=0;o<i.length;o++){var u=e(t[i[o]],n[s[o]]);if(0!==u)return u}return 0}(e,t,a);if("null"===l)return 0;if("undefined"===l)return 0;throw new TypeError('Unsupported type of value "'+l+'"')}});function o(e,t,n){return(0,i.AF)(t)&&(0,i.AF)(n)?c(e,t.toJSON().values,n.toJSON().values):(0,i.AF)(t)?o(e,t.toArray(),n):(0,i.AF)(n)?o(e,t,n.toArray()):(0,i.zR)(t)?o(e,t.toJSON().data,n):(0,i.zR)(n)?o(e,t,n.toJSON().data):Array.isArray(t)?Array.isArray(n)?c(e,t,n):o(e,t,[n]):o(e,[t],n)}function c(e,t,n){for(var r=0,i=Math.min(t.length,n.length);r<i;r++){var s=e(t[r],n[r]);if(0!==s)return s}return t.length>n.length?1:t.length<n.length?-1:0}}))},5538:(e,t,n)=>{"use strict";n.d(t,{r:()=>c});var r=n(760),i=n(8321),s=n(2573),a="compareText",o=["typed","matrix","concat"];r.n6.signature="any, any";var c=(0,i.P9)(a,o,(e=>{var{typed:t,matrix:n,concat:i}=e,o=(0,s.$)({typed:t,matrix:n,concat:i});return t(a,r.n6,o({elop:r.n6,Ds:!0}))}))},2366:(e,t,n)=>{"use strict";n.d(t,{D:()=>r});var r=(0,n(8321).P9)("compareUnits",["typed"],(e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf((e=>(n,r)=>{if(!n.equalBase(r))throw new Error("Cannot compare units with different base");return t.find(e,[n.valueType(),r.valueType()])(n.value,r.value)}))}}))},6148:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});var r=n(8321),i="deepEqual",s=["typed","equal"],a=(0,r.P9)(i,s,(e=>{var{typed:t,equal:n}=e;return t(i,{"any, any":function(e,t){return r(e.valueOf(),t.valueOf())}});function r(e,t){if(Array.isArray(e)){if(Array.isArray(t)){var i=e.length;if(i!==t.length)return!1;for(var s=0;s<i;s++)if(!r(e[s],t[s]))return!1;return!0}return!1}return!Array.isArray(t)&&n(e,t)}}))},650:(e,t,n)=>{"use strict";n.d(t,{X:()=>l});var r=n(8321),i=n(361),s=n(5572),a=n(4900),o=n(2573),c="equal",u=["typed","matrix","equalScalar","DenseMatrix","concat"],l=(0,r.P9)(c,u,(e=>{var{typed:t,matrix:n,equalScalar:r,DenseMatrix:u,concat:l}=e,p=(0,i.O)({typed:t}),d=(0,s.v)({typed:t,DenseMatrix:u}),f=(0,a.f)({typed:t,DenseMatrix:u}),m=(0,o.$)({typed:t,matrix:n,concat:l});return t(c,h({typed:t,equalScalar:r}),m({elop:r,SS:d,DS:p,Ss:f}))})),h=(0,r.P9)(c,["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return t(c,{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:n(e,t)}})}))},2257:(e,t,n)=>{"use strict";n.d(t,{p:()=>u});var r=n(6052),i=n(1106),s=n(8321),a=n(2366),o="equalScalar",c=["typed","config"],u=(0,s.P9)(o,c,(e=>{var{typed:t,config:n}=e,s=(0,a.D)({typed:t});return t(o,{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,t){return(0,i.q8)(e,t,n.relTol,n.absTol)},"BigNumber, BigNumber":function(e,t){return e.eq(t)||(0,r.q)(e,t,n.relTol,n.absTol)},"bigint, bigint":function(e,t){return e===t},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){return function(e,t,n,r){return(0,i.q8)(e.re,t.re,n,r)&&(0,i.q8)(e.im,t.im,n,r)}(e,t,n.relTol,n.absTol)}},s)}));(0,s.P9)(o,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(o,{"number, number":function(e,t){return(0,i.q8)(e,t,n.relTol,n.absTol)}})}))},9565:(e,t,n)=>{"use strict";n.d(t,{a:()=>a});var r=n(8321),i="equalText",s=["typed","compareText","isZero"],a=(0,r.P9)(i,s,(e=>{var{typed:t,compareText:n,isZero:r}=e;return t(i,{"any, any":function(e,t){return r(n(e,t))}})}))},7355:(e,t,n)=>{"use strict";n.d(t,{o:()=>d});var r=n(6052),i=n(1106),s=n(8321),a=n(361),o=n(5572),c=n(4900),u=n(2573),l=n(2366),h="larger",p=["typed","config","matrix","DenseMatrix","concat"],d=(0,s.P9)(h,p,(e=>{var{typed:t,config:n,matrix:i,DenseMatrix:s,concat:p}=e,d=(0,a.O)({typed:t}),m=(0,o.v)({typed:t,DenseMatrix:s}),g=(0,c.f)({typed:t,DenseMatrix:s}),y=(0,u.$)({typed:t,matrix:i,concat:p}),x=(0,l.D)({typed:t});return t(h,f({typed:t,config:n}),{"boolean, boolean":(e,t)=>e>t,"BigNumber, BigNumber":function(e,t){return e.gt(t)&&!(0,r.q)(e,t,n.relTol,n.absTol)},"bigint, bigint":(e,t)=>e>t,"Fraction, Fraction":(e,t)=>1===e.compare(t),"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},x,y({SS:m,DS:d,Ss:g}))})),f=(0,s.P9)(h,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(h,{"number, number":function(e,t){return e>t&&!(0,i.q8)(e,t,n.relTol,n.absTol)}})}))},6569:(e,t,n)=>{"use strict";n.d(t,{W:()=>d});var r=n(6052),i=n(1106),s=n(8321),a=n(361),o=n(5572),c=n(4900),u=n(2573),l=n(2366),h="largerEq",p=["typed","config","matrix","DenseMatrix","concat"],d=(0,s.P9)(h,p,(e=>{var{typed:t,config:n,matrix:i,DenseMatrix:s,concat:p}=e,d=(0,a.O)({typed:t}),m=(0,o.v)({typed:t,DenseMatrix:s}),g=(0,c.f)({typed:t,DenseMatrix:s}),y=(0,u.$)({typed:t,matrix:i,concat:p}),x=(0,l.D)({typed:t});return t(h,f({typed:t,config:n}),{"boolean, boolean":(e,t)=>e>=t,"BigNumber, BigNumber":function(e,t){return e.gte(t)||(0,r.q)(e,t,n.relTol,n.absTol)},"bigint, bigint":function(e,t){return e>=t},"Fraction, Fraction":(e,t)=>-1!==e.compare(t),"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},x,y({SS:m,DS:d,Ss:g}))})),f=(0,s.P9)(h,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(h,{"number, number":function(e,t){return e>=t||(0,i.q8)(e,t,n.relTol,n.absTol)}})}))},8086:(e,t,n)=>{"use strict";n.d(t,{p:()=>d});var r=n(6052),i=n(1106),s=n(8321),a=n(361),o=n(5572),c=n(4900),u=n(2573),l=n(2366),h="smaller",p=["typed","config","matrix","DenseMatrix","concat"],d=(0,s.P9)(h,p,(e=>{var{typed:t,config:n,matrix:i,DenseMatrix:s,concat:p}=e,d=(0,a.O)({typed:t}),m=(0,o.v)({typed:t,DenseMatrix:s}),g=(0,c.f)({typed:t,DenseMatrix:s}),y=(0,u.$)({typed:t,matrix:i,concat:p}),x=(0,l.D)({typed:t});return t(h,f({typed:t,config:n}),{"boolean, boolean":(e,t)=>e<t,"BigNumber, BigNumber":function(e,t){return e.lt(t)&&!(0,r.q)(e,t,n.relTol,n.absTol)},"bigint, bigint":(e,t)=>e<t,"Fraction, Fraction":(e,t)=>-1===e.compare(t),"Complex, Complex":function(e,t){throw new TypeError("No ordering relation is defined for complex numbers")}},x,y({SS:m,DS:d,Ss:g}))})),f=(0,s.P9)(h,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(h,{"number, number":function(e,t){return e<t&&!(0,i.q8)(e,t,n.relTol,n.absTol)}})}))},5040:(e,t,n)=>{"use strict";n.d(t,{V:()=>d});var r=n(6052),i=n(1106),s=n(8321),a=n(361),o=n(5572),c=n(4900),u=n(2573),l=n(2366),h="smallerEq",p=["typed","config","matrix","DenseMatrix","concat"],d=(0,s.P9)(h,p,(e=>{var{typed:t,config:n,matrix:i,DenseMatrix:s,concat:p}=e,d=(0,a.O)({typed:t}),m=(0,o.v)({typed:t,DenseMatrix:s}),g=(0,c.f)({typed:t,DenseMatrix:s}),y=(0,u.$)({typed:t,matrix:i,concat:p}),x=(0,l.D)({typed:t});return t(h,f({typed:t,config:n}),{"boolean, boolean":(e,t)=>e<=t,"BigNumber, BigNumber":function(e,t){return e.lte(t)||(0,r.q)(e,t,n.relTol,n.absTol)},"bigint, bigint":(e,t)=>e<=t,"Fraction, Fraction":(e,t)=>1!==e.compare(t),"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},x,y({SS:m,DS:d,Ss:g}))})),f=(0,s.P9)(h,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(h,{"number, number":function(e,t){return e<=t||(0,i.q8)(e,t,n.relTol,n.absTol)}})}))},7563:(e,t,n)=>{"use strict";n.d(t,{K:()=>l});var r=n(8321),i=n(361),s=n(5572),a=n(4900),o=n(2573),c="unequal",u=["typed","config","equalScalar","matrix","DenseMatrix","concat"],l=(0,r.P9)(c,u,(e=>{var{typed:t,config:n,equalScalar:r,matrix:u,DenseMatrix:l,concat:p}=e,d=(0,i.O)({typed:t}),f=(0,s.v)({typed:t,DenseMatrix:l}),m=(0,a.f)({typed:t,DenseMatrix:l}),g=(0,o.$)({typed:t,matrix:u,concat:p});return t(c,h({typed:t,equalScalar:r}),g({elop:function(e,t){return!r(e,t)},SS:f,DS:d,Ss:m}))})),h=(0,r.P9)(c,["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return t(c,{"any, any":function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:!n(e,t)}})}))},3995:(e,t,n)=>{"use strict";n.d(t,{v:()=>o});var r=n(5838),i=n(8321),s="setCartesian",a=["typed","size","subset","compareNatural","Index","DenseMatrix"],o=(0,i.P9)(s,a,(e=>{var{typed:t,size:n,subset:i,compareNatural:a,Index:o,DenseMatrix:c}=e;return t(s,{"Array | Matrix, Array | Matrix":function(e,t){var s=[];if(0!==i(n(e),new o(0))&&0!==i(n(t),new o(0))){var u=(0,r.Bq)(Array.isArray(e)?e:e.toArray()).sort(a),l=(0,r.Bq)(Array.isArray(t)?t:t.toArray()).sort(a);s=[];for(var h=0;h<u.length;h++)for(var p=0;p<l.length;p++)s.push([u[h],l[p]])}return Array.isArray(e)&&Array.isArray(t)?s:new c(s)}})}))},8578:(e,t,n)=>{"use strict";n.d(t,{e:()=>o});var r=n(5838),i=n(8321),s="setDifference",a=["typed","size","subset","compareNatural","Index","DenseMatrix"],o=(0,i.P9)(s,a,(e=>{var{typed:t,size:n,subset:i,compareNatural:a,Index:o,DenseMatrix:c}=e;return t(s,{"Array | Matrix, Array | Matrix":function(e,t){var s;if(0===i(n(e),new o(0)))s=[];else{if(0===i(n(t),new o(0)))return(0,r.Bq)(e.toArray());var u,l=(0,r.ls)((0,r.Bq)(Array.isArray(e)?e:e.toArray()).sort(a)),h=(0,r.ls)((0,r.Bq)(Array.isArray(t)?t:t.toArray()).sort(a));s=[];for(var p=0;p<l.length;p++){u=!1;for(var d=0;d<h.length;d++)if(0===a(l[p].value,h[d].value)&&l[p].identifier===h[d].identifier){u=!0;break}u||s.push(l[p])}}return Array.isArray(e)&&Array.isArray(t)?(0,r.px)(s):new c((0,r.px)(s))}})}))},7921:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5838),i=n(8321),s="setDistinct",a=["typed","size","subset","compareNatural","Index","DenseMatrix"],o=(0,i.P9)(s,a,(e=>{var{typed:t,size:n,subset:i,compareNatural:a,Index:o,DenseMatrix:c}=e;return t(s,{"Array | Matrix":function(e){var t;if(0===i(n(e),new o(0)))t=[];else{var s=(0,r.Bq)(Array.isArray(e)?e:e.toArray()).sort(a);(t=[]).push(s[0]);for(var u=1;u<s.length;u++)0!==a(s[u],s[u-1])&&t.push(s[u])}return Array.isArray(e)?t:new c(t)}})}))},2776:(e,t,n)=>{"use strict";n.d(t,{e:()=>o});var r=n(5838),i=n(8321),s="setIntersect",a=["typed","size","subset","compareNatural","Index","DenseMatrix"],o=(0,i.P9)(s,a,(e=>{var{typed:t,size:n,subset:i,compareNatural:a,Index:o,DenseMatrix:c}=e;return t(s,{"Array | Matrix, Array | Matrix":function(e,t){var s;if(0===i(n(e),new o(0))||0===i(n(t),new o(0)))s=[];else{var u=(0,r.ls)((0,r.Bq)(Array.isArray(e)?e:e.toArray()).sort(a)),l=(0,r.ls)((0,r.Bq)(Array.isArray(t)?t:t.toArray()).sort(a));s=[];for(var h=0;h<u.length;h++)for(var p=0;p<l.length;p++)if(0===a(u[h].value,l[p].value)&&u[h].identifier===l[p].identifier){s.push(u[h]);break}}return Array.isArray(e)&&Array.isArray(t)?(0,r.px)(s):new c((0,r.px)(s))}})}))},2659:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var r=n(5838),i=n(8321),s="setIsSubset",a=["typed","size","subset","compareNatural","Index"],o=(0,i.P9)(s,a,(e=>{var{typed:t,size:n,subset:i,compareNatural:a,Index:o}=e;return t(s,{"Array | Matrix, Array | Matrix":function(e,t){if(0===i(n(e),new o(0)))return!0;if(0===i(n(t),new o(0)))return!1;for(var s,c=(0,r.ls)((0,r.Bq)(Array.isArray(e)?e:e.toArray()).sort(a)),u=(0,r.ls)((0,r.Bq)(Array.isArray(t)?t:t.toArray()).sort(a)),l=0;l<c.length;l++){s=!1;for(var h=0;h<u.length;h++)if(0===a(c[l].value,u[h].value)&&c[l].identifier===u[h].identifier){s=!0;break}if(!1===s)return!1}return!0}})}))},5150:(e,t,n)=>{"use strict";n.d(t,{C:()=>o});var r=n(5838),i=n(8321),s="setMultiplicity",a=["typed","size","subset","compareNatural","Index"],o=(0,i.P9)(s,a,(e=>{var{typed:t,size:n,subset:i,compareNatural:a,Index:o}=e;return t(s,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(e,t){if(0===i(n(t),new o(0)))return 0;for(var s=(0,r.Bq)(Array.isArray(t)?t:t.toArray()),c=0,u=0;u<s.length;u++)0===a(s[u],e)&&c++;return c}})}))},7834:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var r=n(5838),i=n(8321),s="setPowerset",a=["typed","size","subset","compareNatural","Index"],o=(0,i.P9)(s,a,(e=>{var{typed:t,size:n,subset:i,compareNatural:a,Index:o}=e;return t(s,{"Array | Matrix":function(e){if(0===i(n(e),new o(0)))return[];for(var t=(0,r.Bq)(Array.isArray(e)?e:e.toArray()).sort(a),s=[],u=0;u.toString(2).length<=t.length;)s.push(c(t,u.toString(2).split("").reverse())),u++;return function(e){for(var t=[],n=e.length-1;n>0;n--)for(var r=0;r<n;r++)e[r].length>e[r+1].length&&(t=e[r],e[r]=e[r+1],e[r+1]=t);return e}(s)}});function c(e,t){for(var n=[],r=0;r<t.length;r++)"1"===t[r]&&n.push(e[r]);return n}}))},5200:(e,t,n)=>{"use strict";n.d(t,{G:()=>o});var r=n(5838),i=n(8321),s="setSize",a=["typed","compareNatural"],o=(0,i.P9)(s,a,(e=>{var{typed:t,compareNatural:n}=e;return t(s,{"Array | Matrix":function(e){return Array.isArray(e)?(0,r.Bq)(e).length:(0,r.Bq)(e.toArray()).length},"Array | Matrix, boolean":function(e,t){if(!1===t||0===e.length)return Array.isArray(e)?(0,r.Bq)(e).length:(0,r.Bq)(e.toArray()).length;for(var i=(0,r.Bq)(Array.isArray(e)?e:e.toArray()).sort(n),s=1,a=1;a<i.length;a++)0!==n(i[a],i[a-1])&&s++;return s}})}))},8297:(e,t,n)=>{"use strict";n.d(t,{l:()=>o});var r=n(5838),i=n(8321),s="setSymDifference",a=["typed","size","concat","subset","setDifference","Index"],o=(0,i.P9)(s,a,(e=>{var{typed:t,size:n,concat:i,subset:a,setDifference:o,Index:c}=e;return t(s,{"Array | Matrix, Array | Matrix":function(e,t){if(0===a(n(e),new c(0)))return(0,r.Bq)(t);if(0===a(n(t),new c(0)))return(0,r.Bq)(e);var s=(0,r.Bq)(e),u=(0,r.Bq)(t);return i(o(s,u),o(u,s))}})}))},2746:(e,t,n)=>{"use strict";n.d(t,{s:()=>o});var r=n(5838),i=n(8321),s="setUnion",a=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],o=(0,i.P9)(s,a,(e=>{var{typed:t,size:n,concat:i,subset:a,setIntersect:o,setSymDifference:c,Index:u}=e;return t(s,{"Array | Matrix, Array | Matrix":function(e,t){if(0===a(n(e),new u(0)))return(0,r.Bq)(t);if(0===a(n(t),new u(0)))return(0,r.Bq)(e);var s=(0,r.Bq)(e),l=(0,r.Bq)(t);return i(c(s,l),o(s,l))}})}))},1155:(e,t,n)=>{"use strict";n.d(t,{$:()=>a});var r=n(8321),i="freqz",s=["typed","add","multiply","Complex","divide","matrix"],a=(0,r.P9)(i,s,(e=>{var{typed:t,add:n,multiply:r,Complex:s,divide:a,matrix:o}=e;return t(i,{"Array, Array":function(e,t){return c(e,t,u(512))},"Array, Array, Array":function(e,t,n){return c(e,t,n)},"Array, Array, number":function(e,t,n){if(n<0)throw new Error("w must be a positive number");return c(e,t,u(n))},"Matrix, Matrix":function(e,t){var n=u(512),{w:r,h:i}=c(e.valueOf(),t.valueOf(),n);return{w:o(r),h:o(i)}},"Matrix, Matrix, Matrix":function(e,t,n){var{h:r}=c(e.valueOf(),t.valueOf(),n.valueOf());return{h:o(r),w:o(n)}},"Matrix, Matrix, number":function(e,t,n){if(n<0)throw new Error("w must be a positive number");var r=u(n),{h:i}=c(e.valueOf(),t.valueOf(),r);return{h:o(i),w:o(r)}}});function c(e,t,i){for(var o=[],c=[],u=0;u<i.length;u++){for(var l=s(0,0),h=s(0,0),p=0;p<e.length;p++)l=n(l,r(e[p],s(Math.cos(-p*i[u]),Math.sin(-p*i[u]))));for(var d=0;d<t.length;d++)h=n(h,r(t[d],s(Math.cos(-d*i[u]),Math.sin(-d*i[u]))));o.push(l),c.push(h)}for(var f=[],m=0;m<o.length;m++)f.push(a(o[m],c[m]));return{h:f,w:i}}function u(e){for(var t=[],n=0;n<e;n++)t.push(n/e*Math.PI);return t}}))},1718:(e,t,n)=>{"use strict";n.d(t,{S:()=>a});var r=n(8321),i="zpk2tf",s=["typed","add","multiply","Complex","number"],a=(0,r.P9)(i,s,(e=>{var{typed:t,add:n,multiply:r,Complex:s,number:a}=e;return t(i,{"Array,Array,number":function(e,t,n){return o(e,t,n)},"Array,Array":function(e,t){return o(e,t,1)},"Matrix,Matrix,number":function(e,t,n){return o(e.valueOf(),t.valueOf(),n)},"Matrix,Matrix":function(e,t){return o(e.valueOf(),t.valueOf(),1)}});function o(e,t,n){e.some((e=>"BigNumber"===e.type))&&(e=e.map((e=>a(e)))),t.some((e=>"BigNumber"===e.type))&&(t=t.map((e=>a(e))));for(var i=[s(1,0)],o=[s(1,0)],u=0;u<e.length;u++){var l=e[u];"number"==typeof l&&(l=s(l,0)),i=c(i,[s(1,0),s(-l.re,-l.im)])}for(var h=0;h<t.length;h++){var p=t[h];"number"==typeof p&&(p=s(p,0)),o=c(o,[s(1,0),s(-p.re,-p.im)])}for(var d=0;d<i.length;d++)i[d]=r(i[d],n);return[i,o]}function c(e,t){for(var i=[],a=0;a<e.length+t.length-1;a++){i[a]=s(0,0);for(var o=0;o<e.length;o++)a-o>=0&&a-o<t.length&&(i[a]=n(i[a],r(e[o],t[a-o])))}return i}}))},177:(e,t,n)=>{"use strict";n.d(t,{K:()=>a});var r=n(6355),i=n(1106),s=["typed"],a=(0,n(8321).P9)("erf",s,(e=>{var{typed:t}=e;return t("name",{number:function(e){var t=Math.abs(e);return t>=h?(0,i._S)(e):t<=o?(0,i._S)(e)*function(e){var t,n=e*e,r=u[0][4]*n,i=n;for(t=0;t<3;t+=1)r=(r+u[0][t])*n,i=(i+l[0][t])*n;return e*(r+u[0][3])/(i+l[0][3])}(t):t<=4?(0,i._S)(e)*(1-function(e){var t,n=u[1][8]*e,r=e;for(t=0;t<7;t+=1)n=(n+u[1][t])*e,r=(r+l[1][t])*e;var i=(n+u[1][7])/(r+l[1][7]),s=parseInt(16*e)/16,a=(e-s)*(e+s);return Math.exp(-s*s)*Math.exp(-a)*i}(t)):(0,i._S)(e)*(1-function(e){var t,n=1/(e*e),r=u[2][5]*n,i=n;for(t=0;t<4;t+=1)r=(r+u[2][t])*n,i=(i+l[2][t])*n;var s=n*(r+u[2][4])/(i+l[2][4]);s=(c-s)/e;var a=(e-(n=parseInt(16*e)/16))*(e+n);return Math.exp(-n*n)*Math.exp(-a)*s}(t))},"Array | Matrix":t.referToSelf((e=>t=>(0,r.Bl)(t,e)))})})),o=.46875,c=.5641895835477563,u=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,2.1531153547440383e-8],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],l=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],h=Math.pow(2,53)},9926:(e,t,n)=>{"use strict";n.d(t,{b:()=>a});var r=n(8321),i="zeta",s=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],a=(0,r.P9)(i,s,(e=>{var{typed:t,config:n,multiply:r,pow:s,divide:a,factorial:o,equal:c,smallerEq:u,isNegative:l,gamma:h,sin:p,subtract:d,add:f,Complex:m,BigNumber:g,pi:y}=e;return t(i,{number:e=>x(e,(e=>e),(()=>20)),BigNumber:e=>x(e,(e=>new g(e)),(()=>Math.abs(Math.log10(n.relTol)))),Complex:function(e){return 0===e.re&&0===e.im?new m(-.5):1===e.re?new m(NaN,NaN):e.re===1/0&&0===e.im?new m(1):e.im===1/0||e.re===-1/0?new m(NaN,NaN):v(e,(e=>e),(e=>Math.round(19.5+.9*Math.abs(e.im))),(e=>e.re))}});function x(e,t,n){return c(e,0)?t(-.5):c(e,1)?t(NaN):isFinite(e)?v(e,t,n,(e=>e)):l(e)?t(NaN):t(1)}function v(e,t,n,i){var o=n(e);if(i(e)>-(o-1)/2)return function(e,t,n){for(var i=a(1,r(b(n(0),t),d(1,s(2,d(1,e))))),o=n(0),c=n(1);u(c,t);c=f(c,1))o=f(o,a(r((-1)**(c-1),b(c,t)),s(c,e)));return r(i,o)}(e,t(o),t);var c=r(s(2,e),s(t(y),d(e,1)));return c=r(c,p(r(a(t(y),2),e))),c=r(c,h(d(1,e))),r(c,v(d(1,e),t,n,i))}function b(e,t){for(var n=e,i=e;u(i,t);i=f(i,1)){var c=a(r(o(f(t,d(i,1))),s(4,i)),r(o(d(t,i)),o(r(2,i))));n=f(n,c)}return r(t,n)}}))},1386:(e,t,n)=>{"use strict";n.d(t,{r:()=>a});var r=n(8321),i="corr",s=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],a=(0,r.P9)(i,s,(e=>{var{typed:t,matrix:n,sqrt:r,sum:s,add:a,subtract:o,multiply:c,pow:u,divide:l}=e;return t(i,{"Array, Array":function(e,t){return h(e,t)},"Matrix, Matrix":function(e,t){var r=h(e.toArray(),t.toArray());return Array.isArray(r)?n(r):r}});function h(e,t){var n=[];if(Array.isArray(e[0])&&Array.isArray(t[0])){if(e.length!==t.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var r=0;r<e.length;r++){if(e[r].length!==t[r].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");n.push(p(e[r],t[r]))}return n}if(e.length!==t.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return p(e,t)}function p(e,t){var n=e.length,i=s(e),h=s(t),p=e.reduce(((e,n,r)=>a(e,c(n,t[r]))),0),d=s(e.map((e=>u(e,2)))),f=s(t.map((e=>u(e,2)))),m=o(c(n,p),c(i,h)),g=r(c(o(c(n,d),u(i,2)),o(c(n,f),u(h,2))));return l(m,g)}}))},2736:(e,t,n)=>{"use strict";n.d(t,{b:()=>h});var r=n(6355),i=n(8321),s=n(9979),a=n(8635),o=n(5838),c=n(6636),u="cumsum",l=["typed","add","unaryPlus"],h=(0,i.P9)(u,l,(e=>{var{typed:t,add:n,unaryPlus:i}=e;return t(u,{Array:l,Matrix:function(e){return e.create(l(e.valueOf(),e.datatype()))},"Array, number | BigNumber":p,"Matrix, number | BigNumber":function(e,t){return e.create(p(e.valueOf(),t),e.datatype())},"...":function(e){if((0,r.HL)(e))throw new TypeError("All values expected to be scalar in function cumsum");return l(e)}});function l(e){try{return h(e)}catch(e){throw(0,a.i)(e,u)}}function h(e){if(0===e.length)return[];for(var t=[i(e[0])],r=1;r<e.length;++r)t.push(n(t[r-1],e[r]));return t}function p(e,t){var n=(0,o.LO)(e);if(t<0||t>=n.length)throw new c.d(t,n.length);try{return d(e,t)}catch(e){throw(0,a.i)(e,u)}}function d(e,t){var n,r,i;if(t<=0){var a=e[0][0];if(Array.isArray(a)){for(i=(0,s.U)(e),r=[],n=0;n<i.length;n++)r[n]=d(i[n],t-1);return r}return h(e)}for(r=[],n=0;n<e.length;n++)r[n]=d(e[n],t-1);return r}}))},1038:(e,t,n)=>{"use strict";n.d(t,{p:()=>o});var r=n(5838),i=n(8321),s=n(8635),a=["typed","abs","map","median","subtract"],o=(0,i.P9)("mad",a,(e=>{var{typed:t,abs:n,map:i,median:a,subtract:o}=e;return t("mad",{"Array | Matrix":c,"...":function(e){return c(e)}});function c(e){if(0===(e=(0,r.Bq)(e.valueOf())).length)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var t=a(e);return a(i(e,(function(e){return n(o(e,t))})))}catch(e){throw e instanceof TypeError&&e.message.includes("median")?new TypeError(e.message.replace("median","mad")):(0,s.i)(e,"mad")}}}))},5546:(e,t,n)=>{"use strict";n.d(t,{p:()=>c});var r=n(6355),i=n(8321),s=n(1106),a=n(8635),o=["typed","config","numeric","larger"],c=(0,i.P9)("max",o,(e=>{var{typed:t,config:n,numeric:i,larger:o}=e;return t("max",{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(e,t){return(0,r.TS)(e,t.valueOf(),c)},"...":function(e){if((0,r.HL)(e))throw new TypeError("Scalar values expected in function max");return u(e)}});function c(e,t){try{return o(e,t)?e:t}catch(e){throw(0,a.i)(e,"max",t)}}function u(e){var t;if((0,r.xL)(e,(function(e){try{isNaN(e)&&"number"==typeof e?t=NaN:(void 0===t||o(e,t))&&(t=e)}catch(t){throw(0,a.i)(t,"max",e)}})),void 0===t)throw new Error("Cannot calculate max of an empty array");return"string"==typeof t&&(t=i(t,(0,s.BC)(t,n))),t}}))},4043:(e,t,n)=>{"use strict";n.d(t,{s:()=>u});var r=n(6355),i=n(5838),s=n(8321),a=n(8635),o="mean",c=["typed","add","divide"],u=(0,s.P9)(o,c,(e=>{var{typed:t,add:n,divide:s}=e;return t(o,{"Array | Matrix":c,"Array | Matrix, number | BigNumber":function(e,t){try{var o=(0,r.TS)(e,t,n),c=Array.isArray(e)?(0,i.LO)(e):e.size();return s(o,c[t])}catch(e){throw(0,a.i)(e,"mean")}},"...":function(e){if((0,r.HL)(e))throw new TypeError("Scalar values expected in function mean");return c(e)}});function c(e){var t,i=0;if((0,r.xL)(e,(function(e){try{t=void 0===t?e:n(t,e),i++}catch(t){throw(0,a.i)(t,"mean",e)}})),0===i)throw new Error("Cannot calculate the mean of an empty array");return s(t,i)}}))},2092:(e,t,n)=>{"use strict";n.d(t,{h:()=>u});var r=n(6355),i=n(5838),s=n(8321),a=n(8635),o="median",c=["typed","add","divide","compare","partitionSelect"],u=(0,s.P9)(o,c,(e=>{var{typed:t,add:n,divide:s,compare:c,partitionSelect:u}=e;function l(e){try{var t=(e=(0,i.Bq)(e.valueOf())).length;if(0===t)throw new Error("Cannot calculate median of an empty array");if(t%2==0){for(var n=t/2-1,r=u(e,n+1),s=e[n],o=0;o<n;++o)c(e[o],s)>0&&(s=e[o]);return p(s,r)}var l=u(e,(t-1)/2);return h(l)}catch(e){throw(0,a.i)(e,"median")}}var h=t({"number | BigNumber | Complex | Unit":function(e){return e}}),p=t({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(e,t){return s(n(e,t),2)}});return t(o,{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(e,t){throw new Error("median(A, dim) is not yet supported")},"...":function(e){if((0,r.HL)(e))throw new TypeError("Scalar values expected in function median");return l(e)}})}))},9076:(e,t,n)=>{"use strict";n.d(t,{L:()=>c});var r=n(6355),i=n(8321),s=n(1106),a=n(8635),o=["typed","config","numeric","smaller"],c=(0,i.P9)("min",o,(e=>{var{typed:t,config:n,numeric:i,smaller:o}=e;return t("min",{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(e,t){return(0,r.TS)(e,t.valueOf(),c)},"...":function(e){if((0,r.HL)(e))throw new TypeError("Scalar values expected in function min");return u(e)}});function c(e,t){try{return o(e,t)?e:t}catch(e){throw(0,a.i)(e,"min",t)}}function u(e){var t;if((0,r.xL)(e,(function(e){try{isNaN(e)&&"number"==typeof e?t=NaN:(void 0===t||o(e,t))&&(t=e)}catch(t){throw(0,a.i)(t,"min",e)}})),void 0===t)throw new Error("Cannot calculate min of an empty array");return"string"==typeof t&&(t=i(t,(0,s.BC)(t,n))),t}}))},5645:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var r=n(5838),i=n(8321),s="mode",a=["typed","isNaN","isNumeric"],o=(0,i.P9)(s,a,(e=>{var{typed:t,isNaN:n,isNumeric:i}=e;return t(s,{"Array | Matrix":a,"...":function(e){return a(e)}});function a(e){if(0===(e=(0,r.Bq)(e.valueOf())).length)throw new Error("Cannot calculate mode of an empty array");for(var t={},s=[],a=0,o=0;o<e.length;o++){var c=e[o];if(i(c)&&n(c))throw new Error("Cannot calculate mode of an array containing NaN values");c in t||(t[c]=0),t[c]++,t[c]===a?s.push(c):t[c]>a&&(a=t[c],s=[c])}return s}}))},9059:(e,t,n)=>{"use strict";n.d(t,{_:()=>u});var r=n(6355),i=n(8321),s=n(1106),a=n(8635),o="prod",c=["typed","config","multiplyScalar","numeric"],u=(0,i.P9)(o,c,(e=>{var{typed:t,config:n,multiplyScalar:i,numeric:c}=e;return t(o,{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(e,t){throw new Error("prod(A, dim) is not yet supported")},"...":function(e){return u(e)}});function u(e){var t;if((0,r.xL)(e,(function(e){try{t=void 0===t?e:i(t,e)}catch(t){throw(0,a.i)(t,"prod",e)}})),"string"==typeof t&&(t=c(t,(0,s.BC)(t,n))),void 0===t)throw new Error("Cannot calculate prod of an empty array");return t}}))},3112:(e,t,n)=>{"use strict";n.d(t,{D:()=>u});var r=n(4943),i=n(5838),s=n(8321),a=n(9470),o="quantileSeq",c=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],u=(0,s.P9)(o,c,(e=>{var{typed:t,bignumber:n,add:s,subtract:c,divide:u,multiply:l,partitionSelect:h,compare:p,isInteger:d,smaller:f,smallerEq:m,larger:g}=e,y=(0,a.p)({typed:t,isInteger:d});return t(o,{"Array | Matrix, number | BigNumber":(e,t)=>v(e,t,!1),"Array | Matrix, number | BigNumber, number":(e,t,n)=>x(e,t,!1,n,v),"Array | Matrix, number | BigNumber, boolean":v,"Array | Matrix, number | BigNumber, boolean, number":(e,t,n,r)=>x(e,t,n,r,v),"Array | Matrix, Array | Matrix":(e,t)=>b(e,t,!1),"Array | Matrix, Array | Matrix, number":(e,t,n)=>x(e,t,!1,n,b),"Array | Matrix, Array | Matrix, boolean":b,"Array | Matrix, Array | Matrix, boolean, number":(e,t,n,r)=>x(e,t,n,r,b)});function x(e,t,n,r,i){return y(e,r,(e=>i(e,t,n)))}function v(e,t,i){var a,o=e.valueOf();if(f(t,0))throw new Error("N/prob must be non-negative");if(m(t,1))return(0,r.Et)(t)?D(o,t,i):n(D(o,t,i));if(g(t,1)){if(!d(t))throw new Error("N must be a positive integer");if(g(t,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var c=s(t,1);a=[];for(var l=0;f(l,t);l++){var h=u(l+1,c);a.push(D(o,h,i))}return(0,r.Et)(t)?a:n(a)}}function b(e,t,n){for(var r=e.valueOf(),i=t.valueOf(),s=[],a=0;a<i.length;++a)s.push(D(r,i[a],n));return s}function D(e,t,n){var a=(0,i.Bq)(e),o=a.length;if(0===o)throw new Error("Cannot calculate quantile of an empty sequence");var u,f,m=(0,r.Et)(t)?t*(o-1):t.times(o-1),g=(0,r.Et)(t)?Math.floor(m):m.floor().toNumber(),y=(0,r.Et)(t)?m%1:m.minus(g);if(d(m))return n?a[m]:h(a,(0,r.Et)(t)?m:m.valueOf());if(n)u=a[g],f=a[g+1];else{f=h(a,g+1),u=a[g];for(var x=0;x<g;++x)p(a[x],u)>0&&(u=a[x])}return s(l(u,c(1,y)),l(f,y))}}))},9029:(e,t,n)=>{"use strict";n.d(t,{y:()=>a});var r=n(8321),i=n(4943),s=["typed","map","sqrt","variance"],a=(0,r.P9)("std",s,(e=>{var{typed:t,map:n,sqrt:r,variance:s}=e;return t("std",{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(e){return a(e)}});function a(e,t){if(0===e.length)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var a=s.apply(null,arguments);return(0,i.P3)(a)?n(a,r):r(a)}catch(e){throw e instanceof TypeError&&e.message.includes(" variance")?new TypeError(e.message.replace(" variance"," std")):e}}}))},7159:(e,t,n)=>{"use strict";n.d(t,{i:()=>c});var r=n(6355),i=n(8321),s=n(1106),a=n(8635),o=["typed","config","add","numeric"],c=(0,i.P9)("sum",o,(e=>{var{typed:t,config:n,add:i,numeric:o}=e;return t("sum",{"Array | Matrix":c,"Array | Matrix, number | BigNumber":function(e,t){try{return(0,r.TS)(e,t,i)}catch(e){throw(0,a.i)(e,"sum")}},"...":function(e){if((0,r.HL)(e))throw new TypeError("Scalar values expected in function sum");return c(e)}});function c(e){var t;return(0,r.xL)(e,(function(e){try{t=void 0===t?e:i(t,e)}catch(t){throw(0,a.i)(t,"sum",e)}})),void 0===t&&(t=o(0,n.number)),"string"==typeof t&&(t=o(t,(0,s.BC)(t,n))),t}}))},8635:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});var r=n(4943);function i(e,t,n){var i;return String(e).includes("Unexpected type")?(i=arguments.length>2?" (type: "+(0,r.QP)(n)+", value: "+JSON.stringify(n)+")":" (type: "+e.data.actual+")",new TypeError("Cannot calculate "+t+", unexpected type of argument"+i)):String(e).includes("complex numbers")?(i=arguments.length>2?" (type: "+(0,r.QP)(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+t+", no ordering relation is defined for complex numbers"+i)):e}},5849:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(6355),i=n(4943),s=n(8321),a=n(8635),o="unbiased",c="variance",u=["typed","add","subtract","multiply","divide","apply","isNaN"],l=(0,s.P9)(c,u,(e=>{var{typed:t,add:n,subtract:s,multiply:u,divide:l,apply:h,isNaN:p}=e;return t(c,{"Array | Matrix":function(e){return d(e,o)},"Array | Matrix, string":d,"Array | Matrix, number | BigNumber":function(e,t){return f(e,t,o)},"Array | Matrix, number | BigNumber, string":f,"...":function(e){return d(e,o)}});function d(e,t){var o,c=0;if(0===e.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if((0,r.xL)(e,(function(e){try{o=void 0===o?e:n(o,e),c++}catch(t){throw(0,a.i)(t,"variance",e)}})),0===c)throw new Error("Cannot calculate variance of an empty array");var h=l(o,c);if(o=void 0,(0,r.xL)(e,(function(e){var t=s(e,h);o=void 0===o?u(t,t):n(o,u(t,t))})),p(o))return o;switch(t){case"uncorrected":return l(o,c);case"biased":return l(o,c+1);case"unbiased":var d=(0,i.C4)(o)?o.mul(0):0;return 1===c?d:l(o,c-1);default:throw new Error('Unknown normalization "'+t+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function f(e,t,n){try{if(0===e.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return h(e,t,(e=>d(e,n)))}catch(e){throw(0,a.i)(e,"variance")}}}))},4767:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});var r=(0,n(8321).P9)("bin",["typed","format"],(e=>{var{typed:t,format:n}=e;return t("bin",{"number | BigNumber":function(e){return n(e,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(e,t){return n(e,{notation:"bin",wordSize:t})}})}))},67:(e,t,n)=>{"use strict";n.d(t,{I:()=>o});var r=n(760),i=n(8321),s="format",a=["typed"],o=(0,i.P9)(s,a,(e=>{var{typed:t}=e;return t(s,{any:r.GP,"any, Object | function | number | BigNumber":r.GP})}))},9651:(e,t,n)=>{"use strict";n.d(t,{i:()=>r});var r=(0,n(8321).P9)("hex",["typed","format"],(e=>{var{typed:t,format:n}=e;return t("hex",{"number | BigNumber":function(e){return n(e,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(e,t){return n(e,{notation:"hex",wordSize:t})}})}))},5984:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});var r=(0,n(8321).P9)("oct",["typed","format"],(e=>{var{typed:t,format:n}=e;return t("oct",{"number | BigNumber":function(e){return n(e,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(e,t){return n(e,{notation:"oct",wordSize:t})}})}))},6621:(e,t,n)=>{"use strict";n.d(t,{q:()=>u});var r=n(760),i=n(4943),s=n(8321),a=n(3556),o="print",c=["typed"],u=(0,s.P9)(o,c,(e=>{var{typed:t}=e;return t(o,{"string, Object | Array":l,"string, Object | Array, number | Object":l})}));function l(e,t,n){return e.replace(a.I,(function(e,s){var a=s.split("."),o=t[a.shift()];for(void 0!==o&&o.isMatrix&&(o=o.toArray());a.length&&void 0!==o;){var c=a.shift();o=c?o[c]:o+"."}return void 0!==o?(0,i.Kg)(o)?o:(0,r.GP)(o,n):e}))}},2800:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});var r=n(8321),i="acos",s=["typed","config","Complex"],a=(0,r.P9)(i,s,(e=>{var{typed:t,config:n,Complex:r}=e;return t(i,{number:function(e){return e>=-1&&e<=1||n.predictable?Math.acos(e):new r(e,0).acos()},Complex:function(e){return e.acos()},BigNumber:function(e){return e.acos()}})}))},122:(e,t,n)=>{"use strict";n.d(t,{B:()=>o});var r=n(8321),i=n(4975),s="acosh",a=["typed","config","Complex"],o=(0,r.P9)(s,a,(e=>{var{typed:t,config:n,Complex:r}=e;return t(s,{number:function(e){return e>=1||n.predictable?(0,i.ie)(e):e<=-1?new r(Math.log(Math.sqrt(e*e-1)-e),Math.PI):new r(e,0).acosh()},Complex:function(e){return e.acosh()},BigNumber:function(e){return e.acosh()}})}))},2181:(e,t,n)=>{"use strict";n.d(t,{C:()=>o});var r=n(8321),i=n(4975),s="acot",a=["typed","BigNumber"],o=(0,r.P9)(s,a,(e=>{var{typed:t,BigNumber:n}=e;return t(s,{number:i.BD,Complex:function(e){return e.acot()},BigNumber:function(e){return new n(1).div(e).atan()}})}))},4145:(e,t,n)=>{"use strict";n.d(t,{g:()=>o});var r=n(8321),i=n(4975),s="acoth",a=["typed","config","Complex","BigNumber"],o=(0,r.P9)(s,a,(e=>{var{typed:t,config:n,Complex:r,BigNumber:a}=e;return t(s,{number:function(e){return e>=1||e<=-1||n.predictable?(0,i.lh)(e):new r(e,0).acoth()},Complex:function(e){return e.acoth()},BigNumber:function(e){return new a(1).div(e).atanh()}})}))},5636:(e,t,n)=>{"use strict";n.d(t,{v:()=>o});var r=n(8321),i=n(4975),s="acsc",a=["typed","config","Complex","BigNumber"],o=(0,r.P9)(s,a,(e=>{var{typed:t,config:n,Complex:r,BigNumber:a}=e;return t(s,{number:function(e){return e<=-1||e>=1||n.predictable?(0,i.E4)(e):new r(e,0).acsc()},Complex:function(e){return e.acsc()},BigNumber:function(e){return new a(1).div(e).asin()}})}))},1158:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var r=n(8321),i=n(4975),s="acsch",a=["typed","BigNumber"],o=(0,r.P9)(s,a,(e=>{var{typed:t,BigNumber:n}=e;return t(s,{number:i.OU,Complex:function(e){return e.acsch()},BigNumber:function(e){return new n(1).div(e).asinh()}})}))},1998:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var r=n(8321),i=n(4975),s="asec",a=["typed","config","Complex","BigNumber"],o=(0,r.P9)(s,a,(e=>{var{typed:t,config:n,Complex:r,BigNumber:a}=e;return t(s,{number:function(e){return e<=-1||e>=1||n.predictable?(0,i.yQ)(e):new r(e,0).asec()},Complex:function(e){return e.asec()},BigNumber:function(e){return new a(1).div(e).acos()}})}))},9444:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(8321),i=n(4975),s="asech",a=["typed","config","Complex","BigNumber"],o=(0,r.P9)(s,a,(e=>{var{typed:t,config:n,Complex:r,BigNumber:a}=e;return t(s,{number:function(e){if(e<=1&&e>=-1||n.predictable){var t=1/e;if(t>0||n.predictable)return(0,i.o)(e);var s=Math.sqrt(t*t-1);return new r(Math.log(s-t),Math.PI)}return new r(e,0).asech()},Complex:function(e){return e.asech()},BigNumber:function(e){return new a(1).div(e).acosh()}})}))},5877:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var r=n(8321),i="asin",s=["typed","config","Complex"],a=(0,r.P9)(i,s,(e=>{var{typed:t,config:n,Complex:r}=e;return t(i,{number:function(e){return e>=-1&&e<=1||n.predictable?Math.asin(e):new r(e,0).asin()},Complex:function(e){return e.asin()},BigNumber:function(e){return e.asin()}})}))},3601:(e,t,n)=>{"use strict";n.d(t,{Q:()=>a});var r=n(8321),i=n(4975),s=["typed"],a=(0,r.P9)("asinh",s,(e=>{var{typed:t}=e;return t("asinh",{number:i.Pk,Complex:function(e){return e.asinh()},BigNumber:function(e){return e.asinh()}})}))},1584:(e,t,n)=>{"use strict";n.d(t,{X:()=>i});var r=["typed"],i=(0,n(8321).P9)("atan",r,(e=>{var{typed:t}=e;return t("atan",{number:function(e){return Math.atan(e)},Complex:function(e){return e.atan()},BigNumber:function(e){return e.atan()}})}))},4472:(e,t,n)=>{"use strict";n.d(t,{J:()=>p});var r=n(8321),i=n(7308),s=n(361),a=n(7726),o=n(9755),c=n(4900),u=n(2573),l="atan2",h=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],p=(0,r.P9)(l,h,(e=>{var{typed:t,matrix:n,equalScalar:r,BigNumber:h,DenseMatrix:p,concat:d}=e,f=(0,i.Z)({typed:t,equalScalar:r}),m=(0,s.O)({typed:t}),g=(0,a.h)({typed:t,equalScalar:r}),y=(0,o.A)({typed:t,equalScalar:r}),x=(0,c.f)({typed:t,DenseMatrix:p}),v=(0,u.$)({typed:t,matrix:n,concat:d});return t(l,{"number, number":Math.atan2,"BigNumber, BigNumber":(e,t)=>h.atan2(e,t)},v({scalar:"number | BigNumber",SS:g,DS:m,SD:f,Ss:y,sS:x}))}))},8954:(e,t,n)=>{"use strict";n.d(t,{v:()=>o});var r=n(8321),i=n(4975),s="atanh",a=["typed","config","Complex"],o=(0,r.P9)(s,a,(e=>{var{typed:t,config:n,Complex:r}=e;return t(s,{number:function(e){return e<=1&&e>=-1||n.predictable?(0,i.iu)(e):new r(e,0).atanh()},Complex:function(e){return e.atanh()},BigNumber:function(e){return e.atanh()}})}))},1143:(e,t,n)=>{"use strict";n.d(t,{o:()=>a});var r=n(8321),i=n(6670),s=["typed"],a=(0,r.P9)("cos",s,(e=>{var{typed:t}=e,n=(0,i.d)({typed:t});return t("cos",{number:Math.cos,"Complex | BigNumber":e=>e.cos()},n)}))},7671:(e,t,n)=>{"use strict";n.d(t,{q:()=>o});var r=n(8321),i=n(1106),s="cosh",a=["typed"],o=(0,r.P9)(s,a,(e=>{var{typed:t}=e;return t(s,{number:i.yI,"Complex | BigNumber":e=>e.cosh()})}))},4630:(e,t,n)=>{"use strict";n.d(t,{v:()=>o});var r=n(8321),i=n(4975),s=n(6670),a=["typed","BigNumber"],o=(0,r.P9)("cot",a,(e=>{var{typed:t,BigNumber:n}=e,r=(0,s.d)({typed:t});return t("cot",{number:i.wX,Complex:e=>e.cot(),BigNumber:e=>new n(1).div(e.tan())},r)}))},7292:(e,t,n)=>{"use strict";n.d(t,{$:()=>o});var r=n(8321),i=n(4975),s="coth",a=["typed","BigNumber"],o=(0,r.P9)(s,a,(e=>{var{typed:t,BigNumber:n}=e;return t(s,{number:i.OT,Complex:e=>e.coth(),BigNumber:e=>new n(1).div(e.tanh())})}))},2115:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var r=n(8321),i=n(4975),s=n(6670),a=["typed","BigNumber"],o=(0,r.P9)("csc",a,(e=>{var{typed:t,BigNumber:n}=e,r=(0,s.d)({typed:t});return t("csc",{number:i.LD,Complex:e=>e.csc(),BigNumber:e=>new n(1).div(e.sin())},r)}))},9259:(e,t,n)=>{"use strict";n.d(t,{g:()=>o});var r=n(8321),i=n(4975),s="csch",a=["typed","BigNumber"],o=(0,r.P9)(s,a,(e=>{var{typed:t,BigNumber:n}=e;return t(s,{number:i.Xx,Complex:e=>e.csch(),BigNumber:e=>new n(1).div(e.sinh())})}))},1001:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r=n(8321),i=n(4975),s=n(6670),a=["typed","BigNumber"],o=(0,r.P9)("sec",a,(e=>{var{typed:t,BigNumber:n}=e,r=(0,s.d)({typed:t});return t("sec",{number:i.RR,Complex:e=>e.sec(),BigNumber:e=>new n(1).div(e.cos())},r)}))},5757:(e,t,n)=>{"use strict";n.d(t,{g:()=>o});var r=n(8321),i=n(4975),s="sech",a=["typed","BigNumber"],o=(0,r.P9)(s,a,(e=>{var{typed:t,BigNumber:n}=e;return t(s,{number:i.Hy,Complex:e=>e.sech(),BigNumber:e=>new n(1).div(e.cosh())})}))},578:(e,t,n)=>{"use strict";n.d(t,{T:()=>a});var r=n(8321),i=n(6670),s=["typed"],a=(0,r.P9)("sin",s,(e=>{var{typed:t}=e,n=(0,i.d)({typed:t});return t("sin",{number:Math.sin,"Complex | BigNumber":e=>e.sin()},n)}))},6768:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var r=n(8321),i=n(4975),s="sinh",a=["typed"],o=(0,r.P9)(s,a,(e=>{var{typed:t}=e;return t(s,{number:i.rc,"Complex | BigNumber":e=>e.sinh()})}))},5883:(e,t,n)=>{"use strict";n.d(t,{a:()=>a});var r=n(8321),i=n(6670),s=["typed"],a=(0,r.P9)("tan",s,(e=>{var{typed:t}=e,n=(0,i.d)({typed:t});return t("tan",{number:Math.tan,"Complex | BigNumber":e=>e.tan()},n)}))},227:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var r=n(8321),i=n(1106),s=["typed"],a=(0,r.P9)("tanh",s,(e=>{var{typed:t}=e;return t("tanh",{number:i.ym,"Complex | BigNumber":e=>e.tanh()})}))},6670:(e,t,n)=>{"use strict";n.d(t,{d:()=>r});var r=(0,n(8321).P9)("trigUnit",["typed"],(e=>{var{typed:t}=e;return{Unit:t.referToSelf((e=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return t.find(e,n.valueType())(n.value)}))}}))},9116:(e,t,n)=>{"use strict";n.d(t,{U:()=>a});var r=n(8321),i=n(2573),s=["typed","matrix","concat"],a=(0,r.P9)("to",s,(e=>{var{typed:t,matrix:n,concat:r}=e;return t("to",{"Unit, Unit | string":(e,t)=>e.to(t)},(0,i.$)({typed:t,matrix:n,concat:r})({Ds:!0}))}))},5505:(e,t,n)=>{"use strict";n.d(t,{s:()=>o});var r=n(3140),i=n(8321),s="clone",a=["typed"],o=(0,i.P9)(s,a,(e=>{var{typed:t}=e;return t(s,{any:r.o8})}))},5624:(e,t,n)=>{"use strict";n.d(t,{l:()=>a});var r=n(8321),i="hasNumericValue",s=["typed","isNumeric"],a=(0,r.P9)(i,s,(e=>{var{typed:t,isNumeric:n}=e;return t(i,{boolean:()=>!0,string:function(e){return e.trim().length>0&&!isNaN(Number(e))},any:function(e){return n(e)}})}))},258:(e,t,n)=>{"use strict";n.d(t,{r:()=>c});var r=n(6355),i=n(1106),s=n(8321),a="isInteger",o=["typed"],c=(0,s.P9)(a,o,(e=>{var{typed:t}=e;return t(a,{number:i.YN,BigNumber:function(e){return e.isInt()},bigint:function(e){return!0},Fraction:function(e){return 1===e.d&&isFinite(e.n)},"Array | Matrix":t.referToSelf((e=>t=>(0,r.Bl)(t,e)))})}))},7753:(e,t,n)=>{"use strict";n.d(t,{Y:()=>c});var r=n(6355),i=n(8321),s=n(8183),a="isNaN",o=["typed"],c=(0,i.P9)(a,o,(e=>{var{typed:t}=e;return t(a,{number:s.Xo,BigNumber:function(e){return e.isNaN()},bigint:function(e){return!1},Fraction:function(e){return!1},Complex:function(e){return e.isNaN()},Unit:function(e){return Number.isNaN(e.value)},"Array | Matrix":t.referToSelf((e=>t=>(0,r.Bl)(t,e)))})}))},3929:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(6355),i=n(8321),s=n(8183),a=n(6052),o=n(1106),c="isNegative",u=["typed","config"],l=(0,i.P9)(c,u,(e=>{var{typed:t,config:n}=e;return t(c,{number:e=>!(0,o.q8)(e,0,n.relTol,n.absTol)&&(0,s.hD)(e),BigNumber:e=>!(0,a.q)(e,new e.constructor(0),n.relTol,n.absTol)&&e.isNeg()&&!e.isZero()&&!e.isNaN(),bigint:e=>e<0n,Fraction:e=>e.s<0,Unit:t.referToSelf((e=>n=>t.find(e,n.valueType())(n.value))),"Array | Matrix":t.referToSelf((e=>t=>(0,r.Bl)(t,e)))})}))},2547:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var r=n(6355),i=n(8321),s="isNumeric",a=["typed"],o=(0,i.P9)(s,a,(e=>{var{typed:t}=e;return t(s,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":t.referToSelf((e=>t=>(0,r.Bl)(t,e)))})}))},9081:(e,t,n)=>{"use strict";n.d(t,{q:()=>l});var r=n(6355),i=n(8321),s=n(8183),a=n(6052),o=n(1106),c="isPositive",u=["typed","config"],l=(0,i.P9)(c,u,(e=>{var{typed:t,config:n}=e;return t(c,{number:e=>!(0,o.q8)(e,0,n.relTol,n.absTol)&&(0,s.F5)(e),BigNumber:e=>!((0,a.q)(e,new e.constructor(0),n.relTol,n.absTol)||e.isNeg()||e.isZero()||e.isNaN()),bigint:e=>e>0n,Fraction:e=>e.s>0&&e.n>0,Unit:t.referToSelf((e=>n=>t.find(e,n.valueType())(n.value))),"Array | Matrix":t.referToSelf((e=>t=>(0,r.Bl)(t,e)))})}))},3547:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var r=n(6355),i=n(8321),s="isPrime",a=["typed"],o=(0,i.P9)(s,a,(e=>{var{typed:t}=e;return t(s,{number:function(e){if(e<=3)return e>1;if(e%2==0||e%3==0)return!1;for(var t=5;t*t<=e;t+=6)if(e%t==0||e%(t+2)==0)return!1;return!0},bigint:function(e){if(e<=3n)return e>1n;if(e%2n===0n||e%3n===0n)return!1;for(var t=5n;t*t<=e;t+=6n)if(e%t===0n||e%(t+2n)===0n)return!1;return!0},BigNumber:function(e){if(e.lte(3))return e.gt(1);if(e.mod(2).eq(0)||e.mod(3).eq(0))return!1;if(e.lt(Math.pow(2,32))){for(var t=e.toNumber(),n=5;n*n<=t;n+=6)if(t%n==0||t%(n+2)==0)return!1;return!0}function r(e,t,n){for(var r=1;!t.eq(0);)t.mod(2).eq(0)?(t=t.div(2),e=e.mul(e).mod(n)):(t=t.sub(1),r=e.mul(r).mod(n));return r}for(var i=e.constructor.clone({precision:2*e.toFixed(0).length}),s=0,a=(e=new i(e)).sub(1);a.mod(2).eq(0);)a=a.div(2),s+=1;var o=null;if(e.lt("3317044064679887385961981"))o=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter((t=>t<e));else{var c=Math.min(e.toNumber()-2,Math.floor(2*Math.pow(e.toFixed(0).length*Math.log(10),2)));o=[];for(var u=2;u<=c;u+=1)o.push(c)}for(var l=0;l<o.length;l+=1){var h=o[l],p=r(e.sub(e).add(h),a,e);if(!p.eq(1))for(var d=0,f=p;!f.eq(e.sub(1));d+=1,f=f.mul(f).mod(e))if(d===s-1)return!1}return!0},"Array | Matrix":t.referToSelf((e=>t=>(0,r.Bl)(t,e)))})}))},7844:(e,t,n)=>{"use strict";n.d(t,{L:()=>o});var r=n(6355),i=n(8321),s="isZero",a=["typed","equalScalar"],o=(0,i.P9)(s,a,(e=>{var{typed:t,equalScalar:n}=e;return t(s,{"number | BigNumber | Complex | Fraction":e=>n(e,0),bigint:e=>0n===e,Unit:t.referToSelf((e=>n=>t.find(e,n.valueType())(n.value))),"Array | Matrix":t.referToSelf((e=>t=>(0,r.Bl)(t,e)))})}))},6787:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var r=n(4943),i=n(8321),s=n(6495),a=["number","?bignumber","?fraction"],o=(0,i.P9)("numeric",a,(e=>{var{number:t,bignumber:n,fraction:i}=e,a={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:e=>t(e),BigNumber:n?e=>n(e):s.j9,bigint:e=>BigInt(e),Fraction:i?e=>i(e):s.Sw};return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";if(void 0!==(arguments.length>2?arguments[2]:void 0))throw new SyntaxError("numeric() takes one or two arguments");var n=(0,r.QP)(e);if(!(n in a))throw new TypeError("Cannot convert "+e+' of type "'+n+'"; valid input types are '+Object.keys(a).join(", "));if(!(t in o))throw new TypeError("Cannot convert "+e+' to type "'+t+'"; valid output types are '+Object.keys(o).join(", "));return t===n?e:o[t](e)}}))},667:(e,t,n)=>{"use strict";n.d(t,{o:()=>o});var r=n(8321),i=n(4943),s="typeOf",a=["typed"],o=(0,r.P9)(s,a,(e=>{var{typed:t}=e;return t(s,{any:i.QP})}))},8463:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AccessorNode:()=>a.S5,AccessorNodeDependencies:()=>W,ArgumentsError:()=>l.X,ArrayNode:()=>a._7,ArrayNodeDependencies:()=>xe,AssignmentNode:()=>a.K,AssignmentNodeDependencies:()=>Me,BigNumber:()=>s.gHh,BigNumberDependencies:()=>p,BlockNode:()=>a.ub,BlockNodeDependencies:()=>fn,Chain:()=>a.sW,ChainDependencies:()=>Nn,Complex:()=>s.pr3,ComplexDependencies:()=>f,ConditionalNode:()=>a.ht,ConditionalNodeDependencies:()=>ar,ConstantNode:()=>a.zf,ConstantNodeDependencies:()=>cr,DenseMatrix:()=>s.JK5,DenseMatrixDependencies:()=>x,DimensionError:()=>u.h,EDependencies:()=>ch,FibonacciHeap:()=>s.hKX,FibonacciHeapDependencies:()=>Ks,Fraction:()=>s.fwM,FractionDependencies:()=>b,FunctionAssignmentNode:()=>a.I9,FunctionAssignmentNodeDependencies:()=>lr,FunctionNode:()=>a.FE,FunctionNodeDependencies:()=>fr,Help:()=>a._V,HelpDependencies:()=>ba,ImmutableDenseMatrix:()=>s.LQF,ImmutableDenseMatrixDependencies:()=>Bn,Index:()=>s.jKy,IndexDependencies:()=>kn,IndexError:()=>c.d,IndexNode:()=>a.Do,IndexNodeDependencies:()=>gr,InfinityDependencies:()=>Ia,LN10:()=>s.I0I,LN10Dependencies:()=>no,LN2:()=>s.XEz,LN2Dependencies:()=>ro,LOG10E:()=>s.RZC,LOG10EDependencies:()=>io,LOG2E:()=>s.QdK,LOG2EDependencies:()=>so,Matrix:()=>s.uqu,MatrixDependencies:()=>g,NaNDependencies:()=>xc,Node:()=>a.bP,NodeDependencies:()=>C,ObjectNode:()=>a.Kv,ObjectNodeDependencies:()=>xr,OperatorNode:()=>a.zX,OperatorNodeDependencies:()=>br,PIDependencies:()=>uh,ParenthesisNode:()=>a.JL,ParenthesisNodeDependencies:()=>wr,Parser:()=>a.iX,ParserDependencies:()=>Rc,Range:()=>s.Q6t,RangeDependencies:()=>yu,RangeNode:()=>a.Q4,RangeNodeDependencies:()=>Sr,RelationalNode:()=>a.od,RelationalNodeDependencies:()=>Cr,ResultSet:()=>s.A3A,ResultSetDependencies:()=>pn,SQRT1_2:()=>s.ddC,SQRT1_2Dependencies:()=>Uu,SQRT2:()=>s.$qA,SQRT2Dependencies:()=>Gu,Spa:()=>s.V4u,SpaDependencies:()=>No,SparseMatrix:()=>s.Iln,SparseMatrixDependencies:()=>O,SymbolNode:()=>a.Lz,SymbolNodeDependencies:()=>pr,Unit:()=>s.NfE,UnitDependencies:()=>Ot,_Infinity:()=>s.aNc,_NaN:()=>s.Jlw,_false:()=>s.PHr,_null:()=>s.jwX,_true:()=>s._Jp,abs:()=>s.tnl,absDependencies:()=>S,acos:()=>s.HQu,acosDependencies:()=>Y,acosh:()=>s.FqL,acoshDependencies:()=>Z,acot:()=>s.ONU,acotDependencies:()=>K,acoth:()=>s.mZ7,acothDependencies:()=>ee,acsc:()=>s.J97,acscDependencies:()=>ne,acsch:()=>s.dC_,acschDependencies:()=>ie,add:()=>s.WQq,addDependencies:()=>L,addScalar:()=>s.G0T,addScalarDependencies:()=>_,all:()=>wh,and:()=>s.Uo6,andDependencies:()=>ce,andTransformDependencies:()=>le,apply:()=>s.Bb6,applyDependencies:()=>pe,applyTransformDependencies:()=>fe,arg:()=>s.JR0,argDependencies:()=>ge,asec:()=>s.f9Q,asecDependencies:()=>be,asech:()=>s.lXS,asechDependencies:()=>we,asin:()=>s.qRo,asinDependencies:()=>Se,asinh:()=>s.yHs,asinhDependencies:()=>Ce,atan:()=>s.rYl,atan2:()=>s.FPz,atan2Dependencies:()=>_e,atanDependencies:()=>Oe,atanh:()=>s.rfv,atanhDependencies:()=>Be,atomicMass:()=>s.Mhd,atomicMassDependencies:()=>_t,avogadro:()=>s.m7d,avogadroDependencies:()=>It,bellNumbers:()=>s.yZD,bellNumbersDependencies:()=>Vt,bigint:()=>s.oad,bigintDependencies:()=>Qt,bignumber:()=>s.miF,bignumberDependencies:()=>Fe,bin:()=>s.e5v,binDependencies:()=>Jt,bitAnd:()=>s.nfS,bitAndDependencies:()=>Xt,bitAndTransformDependencies:()=>tn,bitNot:()=>s.FMv,bitNotDependencies:()=>rn,bitOr:()=>s.puf,bitOrDependencies:()=>an,bitOrTransformDependencies:()=>cn,bitXor:()=>s.hCf,bitXorDependencies:()=>ln,bohrMagneton:()=>s.tTI,bohrMagnetonDependencies:()=>mn,bohrRadius:()=>s.Au7,bohrRadiusDependencies:()=>gn,boltzmann:()=>s.M85,boltzmannDependencies:()=>yn,boolean:()=>s.zMY,booleanDependencies:()=>vn,catalan:()=>s.bX8,catalanDependencies:()=>Dn,cbrt:()=>s._nN,cbrtDependencies:()=>An,ceil:()=>s.mkO,ceilDependencies:()=>Ze,chain:()=>a.cy,chainDependencies:()=>En,classicalElectronRadius:()=>s.irF,classicalElectronRadiusDependencies:()=>Mn,clone:()=>s.o8B,cloneDependencies:()=>On,column:()=>s.fiJ,columnDependencies:()=>Yn,columnTransformDependencies:()=>Zn,combinations:()=>s.vjN,combinationsDependencies:()=>jt,combinationsWithRep:()=>s.I5N,combinationsWithRepDependencies:()=>Kn,compare:()=>s.UDF,compareDependencies:()=>er,compareNatural:()=>s.dkM,compareNaturalDependencies:()=>nr,compareText:()=>s.n6D,compareTextDependencies:()=>ir,compile:()=>a.wE,compileDependencies:()=>Or,complex:()=>s.faB,complexDependencies:()=>_r,composition:()=>s.RG1,compositionDependencies:()=>Br,concat:()=>s.xWs,concatDependencies:()=>k,concatTransformDependencies:()=>Fr,conductanceQuantum:()=>s.jPu,conductanceQuantumDependencies:()=>jr,config:()=>i.$,conj:()=>s.xJb,conjDependencies:()=>pt,corr:()=>s.PsA,corrDependencies:()=>Qr,cos:()=>s.gnS,cosDependencies:()=>Jr,cosh:()=>s.yIG,coshDependencies:()=>Xr,cot:()=>s.n15,cotDependencies:()=>ti,coth:()=>s.vwV,cothDependencies:()=>ri,coulomb:()=>s.Kwo,coulombDependencies:()=>ii,count:()=>s.U9N,countDependencies:()=>ci,create:()=>Oh,createAbs:()=>A.r,createAccessorNode:()=>H.C,createAcos:()=>V.J,createAcosh:()=>Q.B,createAcot:()=>J.C,createAcoth:()=>X.g,createAcsc:()=>te.v,createAcsch:()=>re.V,createAdd:()=>q.W,createAddScalar:()=>P.w,createAnd:()=>oe.i,createAndTransform:()=>ue.i,createApply:()=>he.p,createApplyTransform:()=>de.D,createArg:()=>me.P,createArrayNode:()=>ye.W,createAsec:()=>ve.x,createAsech:()=>De.n,createAsin:()=>Ae.I,createAsinh:()=>Ne.Q,createAssignmentNode:()=>Ee.y,createAtan:()=>Te.X,createAtan2:()=>Pe.J,createAtanh:()=>Ie.v,createAtomicMass:()=>Pt.Kw,createAvogadro:()=>Pt.Gj,createBellNumbers:()=>Wt.e,createBigNumberClass:()=>h.g,createBigint:()=>Yt.S,createBignumber:()=>Re._,createBin:()=>Zt.O,createBitAnd:()=>Kt.x,createBitAndTransform:()=>en.H,createBitNot:()=>nn.j,createBitOr:()=>sn.$,createBitOrTransform:()=>on.f,createBitXor:()=>un.x,createBlockNode:()=>dn.E,createBohrMagneton:()=>Pt.XS,createBohrRadius:()=>Pt.cC,createBoltzmann:()=>Pt.UK,createBoolean:()=>xn.p,createCatalan:()=>bn.f,createCbrt:()=>wn.q,createCeil:()=>Qe.K,createChain:()=>Cn.U,createChainClass:()=>Sn.k,createClassicalElectronRadius:()=>Pt.WX,createClone:()=>Tn.s,createColumn:()=>Vn.H,createColumnTransform:()=>Qn.B,createCombinations:()=>Ft.p,createCombinationsWithRep:()=>Jn.Q,createCompare:()=>Xn.m,createCompareNatural:()=>tr.b,createCompareText:()=>rr.r,createCompile:()=>Tr.Q,createComplex:()=>Pr.X,createComplexClass:()=>d.z,createComposition:()=>Ir.z,createConcat:()=>j.z,createConcatTransform:()=>Rr.V,createConditionalNode:()=>sr.h,createConductanceQuantum:()=>Pt.VK,createConj:()=>ht.x,createConstantNode:()=>or.b,createCorr:()=>Yr.r,createCos:()=>Zr.o,createCosh:()=>Kr.q,createCot:()=>ei.v,createCoth:()=>ni.$,createCoulomb:()=>Pt.w$,createCount:()=>oi.K,createCreateUnit:()=>ui.J,createCross:()=>hi.x,createCsc:()=>di.Y,createCsch:()=>mi.g,createCtranspose:()=>vi.d,createCube:()=>Di.Y,createCumSum:()=>Ni.b,createCumSumTransform:()=>Ei.p,createDeepEqual:()=>Ti.H,createDenseMatrixClass:()=>y.j,createDerivative:()=>qi.s,createDet:()=>At.k,createDeuteronMass:()=>Pt.zr,createDiag:()=>Ui.I,createDiff:()=>$i.i,createDiffTransform:()=>Wi.S,createDistance:()=>Yi.G,createDivide:()=>kr.G,createDivideScalar:()=>Ge.Q,createDot:()=>mt.Y,createDotDivide:()=>Zi.F,createDotMultiply:()=>Ki.S,createDotPow:()=>es.U,createE:()=>ns.UN,createEfimovFactor:()=>Pt.ez,createEigs:()=>Ns.f,createElectricConstant:()=>Pt.eb,createElectronMass:()=>Pt.dd,createElementaryCharge:()=>Pt.v2,createEqual:()=>He.X,createEqualScalar:()=>E.p,createEqualText:()=>Os.a,createErf:()=>_s.K,createEvaluate:()=>Bs.u,createExp:()=>Fs.I,createExpm:()=>ks.H,createExpm1:()=>Ls.U,createFactorial:()=>Lt.w,createFalse:()=>ns.i0,createFaraday:()=>Pt.Dp,createFermiCoupling:()=>Pt.Dc,createFft:()=>Qs.H,createFibonacciHeapClass:()=>Js.B,createFilter:()=>Xs.H,createFilterTransform:()=>ta.p,createFineStructure:()=>Pt.I,createFirstRadiation:()=>Pt.qQ,createFix:()=>Xe.Y,createFlatten:()=>ss.d,createFloor:()=>Je.$,createForEach:()=>sa.j,createForEachTransform:()=>oa.D,createFormat:()=>tt.I,createFraction:()=>je.l,createFractionClass:()=>v.z,createFreqz:()=>ua.$,createFunctionAssignmentNode:()=>ur.I,createFunctionNode:()=>dr.N,createGamma:()=>kt.M,createGasConstant:()=>Pt.Ik,createGcd:()=>pa.p,createGetMatrixDataType:()=>Rn.C,createGravitationConstant:()=>Pt.tP,createGravity:()=>Pt.Tx,createHartreeEnergy:()=>Pt.oL,createHasNumericValue:()=>ya.l,createHelp:()=>Da.q,createHelpClass:()=>va.G,createHex:()=>Aa.i,createHypot:()=>Na.r,createI:()=>ns.GM,createIdentity:()=>ot.D,createIfft:()=>Ea.C,createIm:()=>os.z,createImmutableDenseMatrixClass:()=>In.r,createIndex:()=>Ta.z,createIndexClass:()=>jn.T,createIndexNode:()=>mr.r,createIndexTransform:()=>Pa.p,createInfinity:()=>ns.Xd,createIntersect:()=>Ba.s,createInv:()=>Nt.K,createInverseConductanceQuantum:()=>Pt.rg,createInvmod:()=>za.o,createIsInteger:()=>I.r,createIsNaN:()=>Ga.Y,createIsNegative:()=>Bt.A,createIsNumeric:()=>rt.y,createIsPositive:()=>qn.q,createIsPrime:()=>Ha.w,createIsZero:()=>ut.L,createKldivergence:()=>Ja.u,createKlitzing:()=>Pt.$L,createKron:()=>eo.l,createLN10:()=>ns.ad,createLN2:()=>ns.l7,createLOG10E:()=>ns.fi,createLOG2E:()=>ns.C8,createLarger:()=>Ut.o,createLargerEq:()=>zn.W,createLcm:()=>ao.D,createLeafCount:()=>co.C,createLeftShift:()=>lo.O,createLgamma:()=>po.k,createLog:()=>Va.h,createLog10:()=>mo.e,createLog1p:()=>yo.s,createLog2:()=>Ws.j,createLoschmidt:()=>Pt.Cc,createLsolve:()=>bo.i,createLsolveAll:()=>wo.H,createLup:()=>Co.o,createLusolve:()=>Oo.b,createLyap:()=>ko.L,createMad:()=>$o.p,createMagneticConstant:()=>Pt.Rd,createMagneticFluxQuantum:()=>Pt.DT,createMap:()=>Qa.p,createMapTransform:()=>Yo.t,createMatrix:()=>R.u,createMatrixClass:()=>m.w,createMatrixFromColumns:()=>us.z,createMatrixFromFunction:()=>Zo.s,createMatrixFromRows:()=>Ko.Z,createMax:()=>ec.p,createMaxTransform:()=>nc.t,createMean:()=>Lr.s,createMeanTransform:()=>ic.y,createMedian:()=>Uo.h,createMin:()=>ac.L,createMinTransform:()=>cc.X,createMod:()=>ja.n,createMode:()=>lc.E,createMolarMass:()=>Pt.e0,createMolarMassC12:()=>Pt.KV,createMolarPlanckConstant:()=>Pt.hy,createMolarVolume:()=>Pt.u5,createMultinomial:()=>gc.k,createMultiply:()=>yt.F,createMultiplyScalar:()=>st.J,createNaN:()=>ns.SV,createNeutronMass:()=>Pt.Wq,createNode:()=>N.R,createNorm:()=>_o.X,createNot:()=>se.m,createNthRoot:()=>bc.f,createNthRoots:()=>wc.s,createNuclearMagneton:()=>Pt.EE,createNull:()=>ns.Er,createNumber:()=>qe.G,createNumeric:()=>ze.y,createObjectNode:()=>yr.Q,createOct:()=>Cc.R,createOnes:()=>Mc.A,createOperatorNode:()=>vr.r,createOr:()=>Oc.M,createOrTransform:()=>_c.O,createParenthesisNode:()=>Dr.n,createParse:()=>Er.U,createParser:()=>Fc.C,createParserClass:()=>Bc.m,createPartitionSelect:()=>Lo.X,createPermutations:()=>kc.U,createPhi:()=>ns.Ah,createPi:()=>ns.GD,createPickRandom:()=>Uc.B,createPinv:()=>$c.w,createPlanckCharge:()=>Pt.aE,createPlanckConstant:()=>Pt.Og,createPlanckLength:()=>Pt.qU,createPlanckMass:()=>Pt.cn,createPlanckTemperature:()=>Pt._F,createPlanckTime:()=>Pt.TT,createPolynomialRoot:()=>eu.r,createPow:()=>Et.V,createPrint:()=>nu.q,createPrintTransform:()=>iu.Q,createProd:()=>si._,createProtonMass:()=>Pt.jh,createQr:()=>ds.K,createQuantileSeq:()=>ou.D,createQuantileSeqTransform:()=>uu.b,createQuantumOfCirculation:()=>Pt._7,createRandom:()=>pu.s,createRandomInt:()=>fu.d,createRange:()=>Hn.S,createRangeClass:()=>gu.U,createRangeNode:()=>Ar.u,createRangeTransform:()=>xu.G,createRationalize:()=>bu.L,createRe:()=>ms.W,createReducedPlanckConstant:()=>Pt.y0,createRelationalNode:()=>Nr.G,createReplacer:()=>Au.h,createReshape:()=>ys.r,createResize:()=>Nu.B,createResolve:()=>Pi.x,createResultSet:()=>hn.O,createReviver:()=>Eu.m,createRightArithShift:()=>Tu.f,createRightLogShift:()=>Pu.n,createRotate:()=>Ru.S,createRotationMatrix:()=>Iu.m,createRound:()=>Ve.B,createRow:()=>ju.R,createRowTransform:()=>qu.J,createRydberg:()=>Pt.QE,createSQRT1_2:()=>ns.j2,createSQRT2:()=>ns.RJ,createSackurTetrode:()=>Pt.bz,createSchur:()=>Bo.u,createSec:()=>Hu.c,createSech:()=>Vu.g,createSecondRadiation:()=>Pt.cr,createSetCartesian:()=>Zu.v,createSetDifference:()=>Ku.e,createSetDistinct:()=>el.Z,createSetIntersect:()=>nl.e,createSetIsSubset:()=>il.P,createSetMultiplicity:()=>al.C,createSetPowerset:()=>cl.Y,createSetSize:()=>ll.G,createSetSymDifference:()=>pl.l,createSetUnion:()=>fl.s,createSign:()=>hs.m,createSimplify:()=>ji.U,createSimplifyConstant:()=>Ii.E,createSimplifyCore:()=>Ri.x,createSin:()=>vs.T,createSinh:()=>gl.V,createSize:()=>dt.A,createSlu:()=>Mo.H,createSmaller:()=>Pn.p,createSmallerEq:()=>Gn.V,createSolveODE:()=>xl.c,createSort:()=>bl.V,createSpaClass:()=>So.Z,createSparse:()=>wl.R,createSparseMatrixClass:()=>T.g,createSpeedOfLight:()=>Pt.Lg,createSplitUnit:()=>Nl.t,createSqrt:()=>Ur.R,createSqrtm:()=>El.y,createSquare:()=>Tl.G,createSqueeze:()=>Pl.l,createStd:()=>Rl.y,createStdTransform:()=>jl.E,createStefanBoltzmann:()=>Pt.zy,createStirlingS2:()=>$t.w,createString:()=>Ll.I,createSubset:()=>G.$,createSubsetTransform:()=>Ul.R,createSubtract:()=>$r.t,createSubtractScalar:()=>vt.f,createSum:()=>Wr.i,createSumTransform:()=>$l.o,createSylvester:()=>Fo._,createSymbolNode:()=>hr.F,createSymbolicEqual:()=>Wl.N,createTan:()=>Yl.a,createTanh:()=>Zl.I,createTau:()=>ns.hI,createThomsonCrossSection:()=>Pt.wp,createTo:()=>Xl.U,createTrace:()=>th.s,createTranspose:()=>yi.M,createTrue:()=>ns.L7,createTypeOf:()=>Kc.o,createTyped:()=>D.B,createUnaryMinus:()=>Dt.e,createUnaryPlus:()=>Ai.e,createUnequal:()=>ih.K,createUnit:()=>s.Dqv,createUnitClass:()=>Tt.d,createUnitDependencies:()=>li,createUnitFunction:()=>ah.n,createUppercaseE:()=>ns.OL,createUppercasePi:()=>ns.ol,createUsolve:()=>Ds.p,createUsolveAll:()=>As.m,createVacuumImpedance:()=>Pt.AW,createVariance:()=>Il.A,createVarianceTransform:()=>hh.M,createVersion:()=>ns.BB,createWeakMixingAngle:()=>Pt.qH,createWienDisplacement:()=>Pt.Lz,createXgcd:()=>qa.F,createXor:()=>gh.Y,createZeros:()=>z.I,createZeta:()=>xh.b,createZpk2tf:()=>bh.S,cross:()=>s.$An,crossDependencies:()=>pi,csc:()=>s.mov,cscDependencies:()=>fi,csch:()=>s.u_e,cschDependencies:()=>gi,ctranspose:()=>s.Ptl,ctransposeDependencies:()=>bi,cube:()=>s.KYz,cubeDependencies:()=>wi,cumsum:()=>s.rCv,cumsumDependencies:()=>Ci,cumsumTransformDependencies:()=>Mi,deepEqual:()=>s.bDM,deepEqualDependencies:()=>Oi,derivative:()=>a.wx,derivativeDependencies:()=>Li,det:()=>s.yT6,detDependencies:()=>St,deuteronMass:()=>s.D3g,deuteronMassDependencies:()=>zi,diag:()=>s.smy,diagDependencies:()=>Gi,diff:()=>s.Ui2,diffDependencies:()=>Hi,diffTransformDependencies:()=>Vi,distance:()=>s.IoC,distanceDependencies:()=>Qi,divide:()=>s.Qrk,divideDependencies:()=>qr,divideScalar:()=>s.Yly,divideScalarDependencies:()=>$e,docs:()=>a.mN,dot:()=>s.Omf,dotDependencies:()=>gt,dotDivide:()=>s.TDS,dotDivideDependencies:()=>Ji,dotMultiply:()=>s.KQr,dotMultiplyDependencies:()=>Xi,dotPow:()=>s.WFY,dotPowDependencies:()=>ts,e:()=>s.e,eDependencies:()=>rs,efimovFactor:()=>s.Qe0,efimovFactorDependencies:()=>is,eigs:()=>s.Ros,eigsDependencies:()=>Cs,electricConstant:()=>s.GZl,electricConstantDependencies:()=>Es,electronMass:()=>s.zMe,electronMassDependencies:()=>Ms,elementaryCharge:()=>s.xFU,elementaryChargeDependencies:()=>Ts,equal:()=>s.LCg,equalDependencies:()=>We,equalScalar:()=>s.Lg8,equalScalarDependencies:()=>M,equalText:()=>s.UpA,equalTextDependencies:()=>Ps,erf:()=>s.Y12,erfDependencies:()=>Is,evaluate:()=>a._3,evaluateDependencies:()=>Rs,exp:()=>s.oNF,expDependencies:()=>js,expm:()=>s.BJ6,expm1:()=>s.IYd,expm1Dependencies:()=>zs,expmDependencies:()=>qs,factorial:()=>s.QnG,factorialDependencies:()=>zt,factory:()=>Nh.P9,falseDependencies:()=>Us,faraday:()=>s.nl4,faradayDependencies:()=>Gs,fermiCoupling:()=>s.NFB,fermiCouplingDependencies:()=>$s,fft:()=>s.hVP,fftDependencies:()=>Zs,filter:()=>s.pbD,filterDependencies:()=>ea,filterTransformDependencies:()=>na,fineStructure:()=>s.GVI,fineStructureDependencies:()=>ra,firstRadiation:()=>s.OsG,firstRadiationDependencies:()=>ia,fix:()=>s.Up4,fixDependencies:()=>et,flatten:()=>s.Bqz,flattenDependencies:()=>as,floor:()=>s.RIf,floorDependencies:()=>Ke,forEach:()=>s.jJl,forEachDependencies:()=>aa,forEachTransformDependencies:()=>ca,format:()=>s.GPZ,formatDependencies:()=>nt,fraction:()=>s.zO$,fractionDependencies:()=>ke,freqz:()=>s.ZR8,freqzDependencies:()=>la,gamma:()=>s.uN6,gammaDependencies:()=>qt,gasConstant:()=>s.UC4,gasConstantDependencies:()=>ha,gcd:()=>s.p_i,gcdDependencies:()=>da,getMatrixDataType:()=>s.Ob2,getMatrixDataTypeDependencies:()=>Fn,gravitationConstant:()=>s.NpQ,gravitationConstantDependencies:()=>fa,gravity:()=>s.fpm,gravityDependencies:()=>ma,hartreeEnergy:()=>s.ykU,hartreeEnergyDependencies:()=>ga,hasNumericValue:()=>s.xr2,hasNumericValueDependencies:()=>xa,help:()=>a.yj,helpDependencies:()=>wa,hex:()=>s.uhr,hexDependencies:()=>Sa,hypot:()=>s.dYR,hypotDependencies:()=>Ca,i:()=>s.i,iDependencies:()=>Hs,identity:()=>s.D_O,identityDependencies:()=>ct,ifft:()=>s.KGM,ifftDependencies:()=>Ma,im:()=>s.im,imDependencies:()=>cs,index:()=>s.Pe0,indexDependencies:()=>Oa,indexTransformDependencies:()=>_a,intersect:()=>s.y$5,intersectDependencies:()=>Ra,inv:()=>s.WCD,invDependencies:()=>Ct,inverseConductanceQuantum:()=>s.BBP,inverseConductanceQuantumDependencies:()=>Fa,invmod:()=>s.U5$,invmodDependencies:()=>Ua,isAccessorNode:()=>o.AS,isArray:()=>o.cy,isArrayNode:()=>o.gO,isAssignmentNode:()=>o.qM,isBigInt:()=>o.sI,isBigNumber:()=>o.C4,isBlockNode:()=>o.CD,isBoolean:()=>o.Lm,isChain:()=>o.o_,isCollection:()=>o.P3,isComplex:()=>o.Zd,isConditionalNode:()=>o.PO,isConstantNode:()=>o.BA,isDate:()=>o.$P,isDenseMatrix:()=>o.zR,isFraction:()=>o.fU,isFunction:()=>o.Tn,isFunctionAssignmentNode:()=>o.m2,isFunctionNode:()=>o.Px,isHelp:()=>o.gS,isIndex:()=>o.nw,isIndexNode:()=>o.$I,isInteger:()=>s.FqJ,isIntegerDependencies:()=>B,isMap:()=>o.jh,isMatrix:()=>o.OA,isNaN:()=>s.yrW,isNaNDependencies:()=>$a,isNegative:()=>s.cIo,isNegativeDependencies:()=>Rt,isNode:()=>o.Ll,isNull:()=>o.kZ,isNumber:()=>o.Et,isNumeric:()=>s.kf$,isNumericDependencies:()=>it,isObject:()=>o.Gv,isObjectNode:()=>o.GJ,isObjectWrappingMap:()=>o.uQ,isOperatorNode:()=>o.$$,isParenthesisNode:()=>o.tv,isPartitionedMap:()=>o.aZ,isPositive:()=>s.epS,isPositiveDependencies:()=>Ln,isPrime:()=>s.A59,isPrimeDependencies:()=>Wa,isRange:()=>o._Z,isRangeNode:()=>o.Ye,isRegExp:()=>o.gd,isRelationalNode:()=>o.iu,isResultSet:()=>o.eW,isSparseMatrix:()=>o.AF,isString:()=>o.Kg,isSymbolNode:()=>o.li,isUndefined:()=>o.b0,isUnit:()=>o.vO,isZero:()=>s.beD,isZeroDependencies:()=>lt,kldivergence:()=>s.ucg,kldivergenceDependencies:()=>Ka,klitzing:()=>s.DTk,klitzingDependencies:()=>Xa,kron:()=>s.bBq,kronDependencies:()=>to,larger:()=>s.yfX,largerDependencies:()=>Gt,largerEq:()=>s.I7f,largerEqDependencies:()=>Un,lcm:()=>s.lJL,lcmDependencies:()=>oo,leafCount:()=>a.G6,leafCountDependencies:()=>uo,leftShift:()=>s.eSP,leftShiftDependencies:()=>ho,lgamma:()=>s.ayJ,lgammaDependencies:()=>fo,log:()=>s.Rm2,log10:()=>s.YLo,log10Dependencies:()=>go,log1p:()=>s.Kko,log1pDependencies:()=>xo,log2:()=>s.p67,log2Dependencies:()=>Vs,logDependencies:()=>Ya,loschmidt:()=>s.aaT,loschmidtDependencies:()=>vo,lsolve:()=>s.IWu,lsolveAll:()=>s.vNC,lsolveAllDependencies:()=>Ao,lsolveDependencies:()=>Do,lup:()=>s._bA,lupDependencies:()=>Eo,lusolve:()=>s.nZk,lusolveDependencies:()=>Po,lyap:()=>s.pvw,lyapDependencies:()=>qo,mad:()=>s.FmW,madDependencies:()=>Ho,magneticConstant:()=>s.N95,magneticConstantDependencies:()=>Wo,magneticFluxQuantum:()=>s.Db7,magneticFluxQuantumDependencies:()=>Vo,map:()=>s.TjK,mapDependencies:()=>Za,mapTransformDependencies:()=>Qo,matrix:()=>s.UPj,matrixDependencies:()=>F,matrixFromColumns:()=>s.dFU,matrixFromColumnsDependencies:()=>ls,matrixFromFunction:()=>s.IZ4,matrixFromFunctionDependencies:()=>Jo,matrixFromRows:()=>s.$bG,matrixFromRowsDependencies:()=>Xo,max:()=>s.T9B,maxDependencies:()=>tc,maxTransformDependencies:()=>rc,mean:()=>s.i2o,meanDependencies:()=>zr,meanTransformDependencies:()=>sc,median:()=>s.JZy,medianDependencies:()=>Go,min:()=>s.jkA,minDependencies:()=>oc,minTransformDependencies:()=>uc,mod:()=>s.ziu,modDependencies:()=>ka,mode:()=>s.MqS,modeDependencies:()=>hc,molarMass:()=>s.CSd,molarMassC12:()=>s.O90,molarMassC12Dependencies:()=>dc,molarMassDependencies:()=>pc,molarPlanckConstant:()=>s.ZQO,molarPlanckConstantDependencies:()=>fc,molarVolume:()=>s.ONk,molarVolumeDependencies:()=>mc,multinomial:()=>s.OjQ,multinomialDependencies:()=>yc,multiply:()=>s.lwT,multiplyDependencies:()=>xt,multiplyScalar:()=>s.NyO,multiplyScalarDependencies:()=>at,neutronMass:()=>s.SI4,neutronMassDependencies:()=>vc,norm:()=>s.xbf,normDependencies:()=>Io,not:()=>s.AU6,notDependencies:()=>ae,nthRoot:()=>s.$Vg,nthRootDependencies:()=>Dc,nthRoots:()=>s.c2c,nthRootsDependencies:()=>Ac,nuclearMagneton:()=>s.Ium,nuclearMagnetonDependencies:()=>Sc,nullDependencies:()=>Nc,number:()=>s.aig,numberDependencies:()=>Le,numeric:()=>s.sHn,numericDependencies:()=>Ue,oct:()=>s.zJI,octDependencies:()=>Ec,ones:()=>s.SaS,onesDependencies:()=>Tc,or:()=>s.or,orDependencies:()=>Pc,orTransformDependencies:()=>Ic,parse:()=>a.qg,parseDependencies:()=>Mr,parser:()=>a.K3,parserDependencies:()=>jc,partitionSelect:()=>s.$TU,partitionSelectDependencies:()=>zo,permutations:()=>s.yW1,permutationsDependencies:()=>qc,phi:()=>s.U1u,phiDependencies:()=>Lc,pi:()=>s.pi,piDependencies:()=>zc,pickRandom:()=>s.BBI,pickRandomDependencies:()=>Gc,pinv:()=>s.oUd,pinvDependencies:()=>Hc,planckCharge:()=>s.WkS,planckChargeDependencies:()=>Wc,planckConstant:()=>s.g9c,planckConstantDependencies:()=>Vc,planckLength:()=>s.ETO,planckLengthDependencies:()=>Yc,planckMass:()=>s.SI8,planckMassDependencies:()=>Qc,planckTemperature:()=>s._RZ,planckTemperatureDependencies:()=>Zc,planckTime:()=>s.b7H,planckTimeDependencies:()=>Jc,polynomialRoot:()=>s.tpt,polynomialRootDependencies:()=>tu,pow:()=>s.n7C,powDependencies:()=>Mt,print:()=>s.yyV,printDependencies:()=>ru,printTransformDependencies:()=>su,prod:()=>s._eU,prodDependencies:()=>ai,protonMass:()=>s.pIl,protonMassDependencies:()=>au,qr:()=>s.qr,qrDependencies:()=>fs,quantileSeq:()=>s.hRg,quantileSeqDependencies:()=>cu,quantileSeqTransformDependencies:()=>lu,quantumOfCirculation:()=>s.cAv,quantumOfCirculationDependencies:()=>hu,random:()=>s.yTv,randomDependencies:()=>du,randomInt:()=>s.HO1,randomIntDependencies:()=>mu,range:()=>s.y17,rangeDependencies:()=>Wn,rangeTransformDependencies:()=>vu,rationalize:()=>a.h$,rationalizeDependencies:()=>Du,re:()=>s.re,reDependencies:()=>gs,reducedPlanckConstant:()=>s.mYI,reducedPlanckConstantDependencies:()=>wu,replacer:()=>s.$Uf,replacerDependencies:()=>Su,reshape:()=>s.tQQ,reshapeDependencies:()=>xs,resize:()=>s.XRe,resizeDependencies:()=>Cu,resolve:()=>a.hd,resolveDependencies:()=>_i,reviver:()=>a.eD,reviverDependencies:()=>Mu,rightArithShift:()=>s.$Kb,rightArithShiftDependencies:()=>Ou,rightLogShift:()=>s.BXq,rightLogShiftDependencies:()=>_u,rotate:()=>s.e$E,rotateDependencies:()=>Fu,rotationMatrix:()=>s.o8M,rotationMatrixDependencies:()=>Bu,round:()=>s.LIG,roundDependencies:()=>Ye,row:()=>s.nME,rowDependencies:()=>ku,rowTransformDependencies:()=>Lu,rydberg:()=>s.oC_,rydbergDependencies:()=>zu,sackurTetrode:()=>s.j59,sackurTetrodeDependencies:()=>$u,schur:()=>s.epK,schurDependencies:()=>Ro,sec:()=>s.aPs,secDependencies:()=>Wu,sech:()=>s.uPJ,sechDependencies:()=>Yu,secondRadiation:()=>s.iuU,secondRadiationDependencies:()=>Qu,setCartesian:()=>s.f4J,setCartesianDependencies:()=>Ju,setDifference:()=>s._iM,setDifferenceDependencies:()=>Xu,setDistinct:()=>s.nel,setDistinctDependencies:()=>tl,setIntersect:()=>s.MZk,setIntersectDependencies:()=>rl,setIsSubset:()=>s.BqJ,setIsSubsetDependencies:()=>sl,setMultiplicity:()=>s.ELq,setMultiplicityDependencies:()=>ol,setPowerset:()=>s.UHQ,setPowersetDependencies:()=>ul,setSize:()=>s.SpT,setSizeDependencies:()=>hl,setSymDifference:()=>s.du0,setSymDifferenceDependencies:()=>dl,setUnion:()=>s.gGC,setUnionDependencies:()=>ml,sign:()=>s._SZ,signDependencies:()=>ps,simplify:()=>a.CR,simplifyConstant:()=>a.aT,simplifyConstantDependencies:()=>Bi,simplifyCore:()=>a.lA,simplifyCoreDependencies:()=>Fi,simplifyDependencies:()=>ki,sin:()=>s.F8e,sinDependencies:()=>bs,sinh:()=>s.L0l,sinhDependencies:()=>yl,size:()=>s.EjY,sizeDependencies:()=>ft,slu:()=>s.tok,sluDependencies:()=>To,smaller:()=>s.dL7,smallerDependencies:()=>_n,smallerEq:()=>s.$9q,smallerEqDependencies:()=>$n,solveODE:()=>s.kMp,solveODEDependencies:()=>vl,sort:()=>s.diJ,sortDependencies:()=>Dl,sparse:()=>s.lMo,sparseDependencies:()=>Al,speedOfLight:()=>s.ZLl,speedOfLightDependencies:()=>Sl,splitUnit:()=>s.hg5,splitUnitDependencies:()=>Cl,sqrt:()=>s.RZD,sqrtDependencies:()=>Gr,sqrtm:()=>s.ooS,sqrtmDependencies:()=>Ml,square:()=>s.EwI,squareDependencies:()=>Ol,squeeze:()=>s.r2V,squeezeDependencies:()=>_l,std:()=>s.wiE,stdDependencies:()=>Fl,stdTransformDependencies:()=>kl,stefanBoltzmann:()=>s.ZL$,stefanBoltzmannDependencies:()=>ql,stirlingS2:()=>s.yo9,stirlingS2Dependencies:()=>Ht,string:()=>s.YjP,stringDependencies:()=>zl,subset:()=>s.LEQ,subsetDependencies:()=>$,subsetTransformDependencies:()=>Gl,subtract:()=>s.ReH,subtractDependencies:()=>Hr,subtractScalar:()=>s.hkw,subtractScalarDependencies:()=>bt,sum:()=>s.czq,sumDependencies:()=>Vr,sumTransformDependencies:()=>Hl,sylvester:()=>s.UoP,sylvesterDependencies:()=>jo,symbolicEqual:()=>a.RH,symbolicEqualDependencies:()=>Vl,tan:()=>s.Mlm,tanDependencies:()=>Ql,tanh:()=>s.ymU,tanhDependencies:()=>Jl,tau:()=>s.FA6,tauDependencies:()=>Ys,thomsonCrossSection:()=>s.Ml9,thomsonCrossSectionDependencies:()=>Kl,to:()=>s.to,toDependencies:()=>eh,trace:()=>s.uPA,traceDependencies:()=>nh,transpose:()=>s.mgz,transposeDependencies:()=>xi,trueDependencies:()=>rh,typeOf:()=>s.QPs,typeOfDependencies:()=>Xc,typed:()=>s.nE2,typedDependencies:()=>w,unaryMinus:()=>s.gBK,unaryMinusDependencies:()=>wt,unaryPlus:()=>s.WOv,unaryPlusDependencies:()=>Si,unequal:()=>s._P7,unequalDependencies:()=>sh,unit:()=>s.zAA,unitDependencies:()=>oh,usolve:()=>s.F$N,usolveAll:()=>s.y3r,usolveAllDependencies:()=>Ss,usolveDependencies:()=>ws,vacuumImpedance:()=>s.gAZ,vacuumImpedanceDependencies:()=>lh,variance:()=>s.GVr,varianceDependencies:()=>Bl,varianceTransformDependencies:()=>ph,version:()=>s.rEp,versionDependencies:()=>dh,weakMixingAngle:()=>s.IYe,weakMixingAngleDependencies:()=>fh,wienDisplacement:()=>s.BSO,wienDisplacementDependencies:()=>mh,xgcd:()=>s.bU5,xgcdDependencies:()=>La,xor:()=>s.I86,xorDependencies:()=>yh,zeros:()=>s.Ul9,zerosDependencies:()=>U,zeta:()=>s.Poe,zetaDependencies:()=>vh,zpk2tf:()=>s.K4A,zpk2tfDependencies:()=>Dh});var r={};n.r(r),n.d(r,{createAbs:()=>A.r,createAccessorNode:()=>H.C,createAcos:()=>V.J,createAcosh:()=>Q.B,createAcot:()=>J.C,createAcoth:()=>X.g,createAcsc:()=>te.v,createAcsch:()=>re.V,createAdd:()=>q.W,createAddScalar:()=>P.w,createAnd:()=>oe.i,createAndTransform:()=>ue.i,createApply:()=>he.p,createApplyTransform:()=>de.D,createArg:()=>me.P,createArrayNode:()=>ye.W,createAsec:()=>ve.x,createAsech:()=>De.n,createAsin:()=>Ae.I,createAsinh:()=>Ne.Q,createAssignmentNode:()=>Ee.y,createAtan:()=>Te.X,createAtan2:()=>Pe.J,createAtanh:()=>Ie.v,createAtomicMass:()=>Pt.Kw,createAvogadro:()=>Pt.Gj,createBellNumbers:()=>Wt.e,createBigNumberClass:()=>h.g,createBigint:()=>Yt.S,createBignumber:()=>Re._,createBin:()=>Zt.O,createBitAnd:()=>Kt.x,createBitAndTransform:()=>en.H,createBitNot:()=>nn.j,createBitOr:()=>sn.$,createBitOrTransform:()=>on.f,createBitXor:()=>un.x,createBlockNode:()=>dn.E,createBohrMagneton:()=>Pt.XS,createBohrRadius:()=>Pt.cC,createBoltzmann:()=>Pt.UK,createBoolean:()=>xn.p,createCatalan:()=>bn.f,createCbrt:()=>wn.q,createCeil:()=>Qe.K,createChain:()=>Cn.U,createChainClass:()=>Sn.k,createClassicalElectronRadius:()=>Pt.WX,createClone:()=>Tn.s,createColumn:()=>Vn.H,createColumnTransform:()=>Qn.B,createCombinations:()=>Ft.p,createCombinationsWithRep:()=>Jn.Q,createCompare:()=>Xn.m,createCompareNatural:()=>tr.b,createCompareText:()=>rr.r,createCompile:()=>Tr.Q,createComplex:()=>Pr.X,createComplexClass:()=>d.z,createComposition:()=>Ir.z,createConcat:()=>j.z,createConcatTransform:()=>Rr.V,createConditionalNode:()=>sr.h,createConductanceQuantum:()=>Pt.VK,createConj:()=>ht.x,createConstantNode:()=>or.b,createCorr:()=>Yr.r,createCos:()=>Zr.o,createCosh:()=>Kr.q,createCot:()=>ei.v,createCoth:()=>ni.$,createCoulomb:()=>Pt.w$,createCount:()=>oi.K,createCreateUnit:()=>ui.J,createCross:()=>hi.x,createCsc:()=>di.Y,createCsch:()=>mi.g,createCtranspose:()=>vi.d,createCube:()=>Di.Y,createCumSum:()=>Ni.b,createCumSumTransform:()=>Ei.p,createDeepEqual:()=>Ti.H,createDenseMatrixClass:()=>y.j,createDerivative:()=>qi.s,createDet:()=>At.k,createDeuteronMass:()=>Pt.zr,createDiag:()=>Ui.I,createDiff:()=>$i.i,createDiffTransform:()=>Wi.S,createDistance:()=>Yi.G,createDivide:()=>kr.G,createDivideScalar:()=>Ge.Q,createDot:()=>mt.Y,createDotDivide:()=>Zi.F,createDotMultiply:()=>Ki.S,createDotPow:()=>es.U,createE:()=>ns.UN,createEfimovFactor:()=>Pt.ez,createEigs:()=>Ns.f,createElectricConstant:()=>Pt.eb,createElectronMass:()=>Pt.dd,createElementaryCharge:()=>Pt.v2,createEqual:()=>He.X,createEqualScalar:()=>E.p,createEqualText:()=>Os.a,createErf:()=>_s.K,createEvaluate:()=>Bs.u,createExp:()=>Fs.I,createExpm:()=>ks.H,createExpm1:()=>Ls.U,createFactorial:()=>Lt.w,createFalse:()=>ns.i0,createFaraday:()=>Pt.Dp,createFermiCoupling:()=>Pt.Dc,createFft:()=>Qs.H,createFibonacciHeapClass:()=>Js.B,createFilter:()=>Xs.H,createFilterTransform:()=>ta.p,createFineStructure:()=>Pt.I,createFirstRadiation:()=>Pt.qQ,createFix:()=>Xe.Y,createFlatten:()=>ss.d,createFloor:()=>Je.$,createForEach:()=>sa.j,createForEachTransform:()=>oa.D,createFormat:()=>tt.I,createFraction:()=>je.l,createFractionClass:()=>v.z,createFreqz:()=>ua.$,createFunctionAssignmentNode:()=>ur.I,createFunctionNode:()=>dr.N,createGamma:()=>kt.M,createGasConstant:()=>Pt.Ik,createGcd:()=>pa.p,createGetMatrixDataType:()=>Rn.C,createGravitationConstant:()=>Pt.tP,createGravity:()=>Pt.Tx,createHartreeEnergy:()=>Pt.oL,createHasNumericValue:()=>ya.l,createHelp:()=>Da.q,createHelpClass:()=>va.G,createHex:()=>Aa.i,createHypot:()=>Na.r,createI:()=>ns.GM,createIdentity:()=>ot.D,createIfft:()=>Ea.C,createIm:()=>os.z,createImmutableDenseMatrixClass:()=>In.r,createIndex:()=>Ta.z,createIndexClass:()=>jn.T,createIndexNode:()=>mr.r,createIndexTransform:()=>Pa.p,createInfinity:()=>ns.Xd,createIntersect:()=>Ba.s,createInv:()=>Nt.K,createInverseConductanceQuantum:()=>Pt.rg,createInvmod:()=>za.o,createIsInteger:()=>I.r,createIsNaN:()=>Ga.Y,createIsNegative:()=>Bt.A,createIsNumeric:()=>rt.y,createIsPositive:()=>qn.q,createIsPrime:()=>Ha.w,createIsZero:()=>ut.L,createKldivergence:()=>Ja.u,createKlitzing:()=>Pt.$L,createKron:()=>eo.l,createLN10:()=>ns.ad,createLN2:()=>ns.l7,createLOG10E:()=>ns.fi,createLOG2E:()=>ns.C8,createLarger:()=>Ut.o,createLargerEq:()=>zn.W,createLcm:()=>ao.D,createLeafCount:()=>co.C,createLeftShift:()=>lo.O,createLgamma:()=>po.k,createLog:()=>Va.h,createLog10:()=>mo.e,createLog1p:()=>yo.s,createLog2:()=>Ws.j,createLoschmidt:()=>Pt.Cc,createLsolve:()=>bo.i,createLsolveAll:()=>wo.H,createLup:()=>Co.o,createLusolve:()=>Oo.b,createLyap:()=>ko.L,createMad:()=>$o.p,createMagneticConstant:()=>Pt.Rd,createMagneticFluxQuantum:()=>Pt.DT,createMap:()=>Qa.p,createMapTransform:()=>Yo.t,createMatrix:()=>R.u,createMatrixClass:()=>m.w,createMatrixFromColumns:()=>us.z,createMatrixFromFunction:()=>Zo.s,createMatrixFromRows:()=>Ko.Z,createMax:()=>ec.p,createMaxTransform:()=>nc.t,createMean:()=>Lr.s,createMeanTransform:()=>ic.y,createMedian:()=>Uo.h,createMin:()=>ac.L,createMinTransform:()=>cc.X,createMod:()=>ja.n,createMode:()=>lc.E,createMolarMass:()=>Pt.e0,createMolarMassC12:()=>Pt.KV,createMolarPlanckConstant:()=>Pt.hy,createMolarVolume:()=>Pt.u5,createMultinomial:()=>gc.k,createMultiply:()=>yt.F,createMultiplyScalar:()=>st.J,createNaN:()=>ns.SV,createNeutronMass:()=>Pt.Wq,createNode:()=>N.R,createNorm:()=>_o.X,createNot:()=>se.m,createNthRoot:()=>bc.f,createNthRoots:()=>wc.s,createNuclearMagneton:()=>Pt.EE,createNull:()=>ns.Er,createNumber:()=>qe.G,createNumeric:()=>ze.y,createObjectNode:()=>yr.Q,createOct:()=>Cc.R,createOnes:()=>Mc.A,createOperatorNode:()=>vr.r,createOr:()=>Oc.M,createOrTransform:()=>_c.O,createParenthesisNode:()=>Dr.n,createParse:()=>Er.U,createParser:()=>Fc.C,createParserClass:()=>Bc.m,createPartitionSelect:()=>Lo.X,createPermutations:()=>kc.U,createPhi:()=>ns.Ah,createPi:()=>ns.GD,createPickRandom:()=>Uc.B,createPinv:()=>$c.w,createPlanckCharge:()=>Pt.aE,createPlanckConstant:()=>Pt.Og,createPlanckLength:()=>Pt.qU,createPlanckMass:()=>Pt.cn,createPlanckTemperature:()=>Pt._F,createPlanckTime:()=>Pt.TT,createPolynomialRoot:()=>eu.r,createPow:()=>Et.V,createPrint:()=>nu.q,createPrintTransform:()=>iu.Q,createProd:()=>si._,createProtonMass:()=>Pt.jh,createQr:()=>ds.K,createQuantileSeq:()=>ou.D,createQuantileSeqTransform:()=>uu.b,createQuantumOfCirculation:()=>Pt._7,createRandom:()=>pu.s,createRandomInt:()=>fu.d,createRange:()=>Hn.S,createRangeClass:()=>gu.U,createRangeNode:()=>Ar.u,createRangeTransform:()=>xu.G,createRationalize:()=>bu.L,createRe:()=>ms.W,createReducedPlanckConstant:()=>Pt.y0,createRelationalNode:()=>Nr.G,createReplacer:()=>Au.h,createReshape:()=>ys.r,createResize:()=>Nu.B,createResolve:()=>Pi.x,createResultSet:()=>hn.O,createReviver:()=>Eu.m,createRightArithShift:()=>Tu.f,createRightLogShift:()=>Pu.n,createRotate:()=>Ru.S,createRotationMatrix:()=>Iu.m,createRound:()=>Ve.B,createRow:()=>ju.R,createRowTransform:()=>qu.J,createRydberg:()=>Pt.QE,createSQRT1_2:()=>ns.j2,createSQRT2:()=>ns.RJ,createSackurTetrode:()=>Pt.bz,createSchur:()=>Bo.u,createSec:()=>Hu.c,createSech:()=>Vu.g,createSecondRadiation:()=>Pt.cr,createSetCartesian:()=>Zu.v,createSetDifference:()=>Ku.e,createSetDistinct:()=>el.Z,createSetIntersect:()=>nl.e,createSetIsSubset:()=>il.P,createSetMultiplicity:()=>al.C,createSetPowerset:()=>cl.Y,createSetSize:()=>ll.G,createSetSymDifference:()=>pl.l,createSetUnion:()=>fl.s,createSign:()=>hs.m,createSimplify:()=>ji.U,createSimplifyConstant:()=>Ii.E,createSimplifyCore:()=>Ri.x,createSin:()=>vs.T,createSinh:()=>gl.V,createSize:()=>dt.A,createSlu:()=>Mo.H,createSmaller:()=>Pn.p,createSmallerEq:()=>Gn.V,createSolveODE:()=>xl.c,createSort:()=>bl.V,createSpaClass:()=>So.Z,createSparse:()=>wl.R,createSparseMatrixClass:()=>T.g,createSpeedOfLight:()=>Pt.Lg,createSplitUnit:()=>Nl.t,createSqrt:()=>Ur.R,createSqrtm:()=>El.y,createSquare:()=>Tl.G,createSqueeze:()=>Pl.l,createStd:()=>Rl.y,createStdTransform:()=>jl.E,createStefanBoltzmann:()=>Pt.zy,createStirlingS2:()=>$t.w,createString:()=>Ll.I,createSubset:()=>G.$,createSubsetTransform:()=>Ul.R,createSubtract:()=>$r.t,createSubtractScalar:()=>vt.f,createSum:()=>Wr.i,createSumTransform:()=>$l.o,createSylvester:()=>Fo._,createSymbolNode:()=>hr.F,createSymbolicEqual:()=>Wl.N,createTan:()=>Yl.a,createTanh:()=>Zl.I,createTau:()=>ns.hI,createThomsonCrossSection:()=>Pt.wp,createTo:()=>Xl.U,createTrace:()=>th.s,createTranspose:()=>yi.M,createTrue:()=>ns.L7,createTypeOf:()=>Kc.o,createTyped:()=>D.B,createUnaryMinus:()=>Dt.e,createUnaryPlus:()=>Ai.e,createUnequal:()=>ih.K,createUnitClass:()=>Tt.d,createUnitFunction:()=>ah.n,createUppercaseE:()=>ns.OL,createUppercasePi:()=>ns.ol,createUsolve:()=>Ds.p,createUsolveAll:()=>As.m,createVacuumImpedance:()=>Pt.AW,createVariance:()=>Il.A,createVarianceTransform:()=>hh.M,createVersion:()=>ns.BB,createWeakMixingAngle:()=>Pt.qH,createWienDisplacement:()=>Pt.Lz,createXgcd:()=>qa.F,createXor:()=>gh.Y,createZeros:()=>z.I,createZeta:()=>xh.b,createZpk2tf:()=>bh.S});var i=n(972),s=n(5900),a=n(3886),o=n(4943),c=n(6636),u=n(1380),l=n(928),h=n(3557),p={createBigNumberClass:h.g},d=n(1289),f={createComplexClass:d.z},m=n(2205),g={createMatrixClass:m.w},y=n(5520),x={MatrixDependencies:g,createDenseMatrixClass:y.j},v=n(395),b={createFractionClass:v.z},D=n(434),w={BigNumberDependencies:p,ComplexDependencies:f,DenseMatrixDependencies:x,FractionDependencies:b,createTyped:D.B},A=n(3935),S={typedDependencies:w,createAbs:A.r},N=n(2613),C={createNode:N.R},E=n(2257),M={typedDependencies:w,createEqualScalar:E.p},T=n(8801),O={MatrixDependencies:g,equalScalarDependencies:M,typedDependencies:w,createSparseMatrixClass:T.g},P=n(340),_={typedDependencies:w,createAddScalar:P.w},I=n(258),B={typedDependencies:w,createIsInteger:I.r},R=n(794),F={DenseMatrixDependencies:x,MatrixDependencies:g,SparseMatrixDependencies:O,typedDependencies:w,createMatrix:R.u},j=n(1760),k={isIntegerDependencies:B,matrixDependencies:F,typedDependencies:w,createConcat:j.z},q=n(7896),L={DenseMatrixDependencies:x,SparseMatrixDependencies:O,addScalarDependencies:_,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,createAdd:q.W},z=n(7989),U={BigNumberDependencies:p,matrixDependencies:F,typedDependencies:w,createZeros:z.I},G=n(3790),$={addDependencies:L,matrixDependencies:F,typedDependencies:w,zerosDependencies:U,createSubset:G.$},H=n(9126),W={NodeDependencies:C,subsetDependencies:$,createAccessorNode:H.C},V=n(2800),Y={ComplexDependencies:f,typedDependencies:w,createAcos:V.J},Q=n(122),Z={ComplexDependencies:f,typedDependencies:w,createAcosh:Q.B},J=n(2181),K={BigNumberDependencies:p,typedDependencies:w,createAcot:J.C},X=n(4145),ee={BigNumberDependencies:p,ComplexDependencies:f,typedDependencies:w,createAcoth:X.g},te=n(5636),ne={BigNumberDependencies:p,ComplexDependencies:f,typedDependencies:w,createAcsc:te.v},re=n(1158),ie={BigNumberDependencies:p,typedDependencies:w,createAcsch:re.V},se=n(9239),ae={typedDependencies:w,createNot:se.m},oe=n(5495),ce={concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,notDependencies:ae,typedDependencies:w,zerosDependencies:U,createAnd:oe.i},ue=n(7492),le={addDependencies:L,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,notDependencies:ae,typedDependencies:w,zerosDependencies:U,createAndTransform:ue.i},he=n(9470),pe={isIntegerDependencies:B,typedDependencies:w,createApply:he.p},de=n(5797),fe={isIntegerDependencies:B,typedDependencies:w,createApplyTransform:de.D},me=n(165),ge={typedDependencies:w,createArg:me.P},ye=n(1668),xe={NodeDependencies:C,createArrayNode:ye.W},ve=n(1998),be={BigNumberDependencies:p,ComplexDependencies:f,typedDependencies:w,createAsec:ve.x},De=n(9444),we={BigNumberDependencies:p,ComplexDependencies:f,typedDependencies:w,createAsech:De.n},Ae=n(5877),Se={ComplexDependencies:f,typedDependencies:w,createAsin:Ae.I},Ne=n(3601),Ce={typedDependencies:w,createAsinh:Ne.Q},Ee=n(3876),Me={matrixDependencies:F,NodeDependencies:C,subsetDependencies:$,createAssignmentNode:Ee.y},Te=n(1584),Oe={typedDependencies:w,createAtan:Te.X},Pe=n(4472),_e={BigNumberDependencies:p,DenseMatrixDependencies:x,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,createAtan2:Pe.J},Ie=n(8954),Be={ComplexDependencies:f,typedDependencies:w,createAtanh:Ie.v},Re=n(1300),Fe={BigNumberDependencies:p,typedDependencies:w,createBignumber:Re._},je=n(5654),ke={FractionDependencies:b,typedDependencies:w,createFraction:je.l},qe=n(3417),Le={typedDependencies:w,createNumber:qe.G},ze=n(6787),Ue={bignumberDependencies:Fe,fractionDependencies:ke,numberDependencies:Le,createNumeric:ze.y},Ge=n(3170),$e={numericDependencies:Ue,typedDependencies:w,createDivideScalar:Ge.Q},He=n(650),We={DenseMatrixDependencies:x,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,createEqual:He.X},Ve=n(8935),Ye={BigNumberDependencies:p,DenseMatrixDependencies:x,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,zerosDependencies:U,createRound:Ve.B},Qe=n(2402),Ze={DenseMatrixDependencies:x,equalScalarDependencies:M,matrixDependencies:F,roundDependencies:Ye,typedDependencies:w,zerosDependencies:U,createCeil:Qe.K},Je=n(4449),Ke={DenseMatrixDependencies:x,equalScalarDependencies:M,matrixDependencies:F,roundDependencies:Ye,typedDependencies:w,zerosDependencies:U,createFloor:Je.$},Xe=n(8808),et={ComplexDependencies:f,DenseMatrixDependencies:x,ceilDependencies:Ze,equalScalarDependencies:M,floorDependencies:Ke,matrixDependencies:F,typedDependencies:w,zerosDependencies:U,createFix:Xe.Y},tt=n(67),nt={typedDependencies:w,createFormat:tt.I},rt=n(2547),it={typedDependencies:w,createIsNumeric:rt.y},st=n(3947),at={typedDependencies:w,createMultiplyScalar:st.J},ot=n(5310),ct={BigNumberDependencies:p,DenseMatrixDependencies:x,SparseMatrixDependencies:O,matrixDependencies:F,typedDependencies:w,createIdentity:ot.D},ut=n(7844),lt={equalScalarDependencies:M,typedDependencies:w,createIsZero:ut.L},ht=n(9491),pt={typedDependencies:w,createConj:ht.x},dt=n(8901),ft={matrixDependencies:F,typedDependencies:w,createSize:dt.A},mt=n(9425),gt={addScalarDependencies:_,conjDependencies:pt,multiplyScalarDependencies:at,sizeDependencies:ft,typedDependencies:w,createDot:mt.Y},yt=n(2639),xt={addScalarDependencies:_,dotDependencies:gt,equalScalarDependencies:M,matrixDependencies:F,multiplyScalarDependencies:at,typedDependencies:w,createMultiply:yt.F},vt=n(7911),bt={typedDependencies:w,createSubtractScalar:vt.f},Dt=n(1670),wt={typedDependencies:w,createUnaryMinus:Dt.e},At=n(5547),St={divideScalarDependencies:$e,isZeroDependencies:lt,matrixDependencies:F,multiplyDependencies:xt,subtractScalarDependencies:bt,typedDependencies:w,unaryMinusDependencies:wt,createDet:At.k},Nt=n(7429),Ct={absDependencies:S,addScalarDependencies:_,detDependencies:St,divideScalarDependencies:$e,identityDependencies:ct,matrixDependencies:F,multiplyDependencies:xt,typedDependencies:w,unaryMinusDependencies:wt,createInv:Nt.K},Et=n(2601),Mt={ComplexDependencies:f,fractionDependencies:ke,identityDependencies:ct,invDependencies:Ct,matrixDependencies:F,multiplyDependencies:xt,numberDependencies:Le,typedDependencies:w,createPow:Et.V},Tt=n(2783),Ot={BigNumberDependencies:p,ComplexDependencies:f,FractionDependencies:b,absDependencies:S,addScalarDependencies:_,divideScalarDependencies:$e,equalDependencies:We,fixDependencies:et,formatDependencies:nt,isNumericDependencies:it,multiplyScalarDependencies:at,numberDependencies:Le,powDependencies:Mt,roundDependencies:Ye,subtractScalarDependencies:bt,createUnitClass:Tt.d},Pt=n(3387),_t={BigNumberDependencies:p,UnitDependencies:Ot,createAtomicMass:Pt.Kw},It={BigNumberDependencies:p,UnitDependencies:Ot,createAvogadro:Pt.Gj},Bt=n(3929),Rt={typedDependencies:w,createIsNegative:Bt.A},Ft=n(6344),jt={typedDependencies:w,createCombinations:Ft.p},kt=n(2375),qt={BigNumberDependencies:p,ComplexDependencies:f,multiplyScalarDependencies:at,powDependencies:Mt,typedDependencies:w,createGamma:kt.M},Lt=n(8669),zt={gammaDependencies:qt,typedDependencies:w,createFactorial:Lt.w},Ut=n(7355),Gt={DenseMatrixDependencies:x,concatDependencies:k,matrixDependencies:F,typedDependencies:w,createLarger:Ut.o},$t=n(6869),Ht={bignumberDependencies:Fe,addScalarDependencies:_,combinationsDependencies:jt,divideScalarDependencies:$e,factorialDependencies:zt,isIntegerDependencies:B,isNegativeDependencies:Rt,largerDependencies:Gt,multiplyScalarDependencies:at,numberDependencies:Le,powDependencies:Mt,subtractScalarDependencies:bt,typedDependencies:w,createStirlingS2:$t.w},Wt=n(4475),Vt={addScalarDependencies:_,isIntegerDependencies:B,isNegativeDependencies:Rt,stirlingS2Dependencies:Ht,typedDependencies:w,createBellNumbers:Wt.e},Yt=n(7151),Qt={typedDependencies:w,createBigint:Yt.S},Zt=n(4767),Jt={formatDependencies:nt,typedDependencies:w,createBin:Zt.O},Kt=n(4172),Xt={concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,createBitAnd:Kt.x},en=n(3277),tn={addDependencies:L,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,notDependencies:ae,typedDependencies:w,zerosDependencies:U,createBitAndTransform:en.H},nn=n(720),rn={typedDependencies:w,createBitNot:nn.j},sn=n(6208),an={DenseMatrixDependencies:x,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,createBitOr:sn.$},on=n(6955),cn={DenseMatrixDependencies:x,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,createBitOrTransform:on.f},un=n(5244),ln={DenseMatrixDependencies:x,concatDependencies:k,matrixDependencies:F,typedDependencies:w,createBitXor:un.x},hn=n(7613),pn={createResultSet:hn.O},dn=n(4544),fn={NodeDependencies:C,ResultSetDependencies:pn,createBlockNode:dn.E},mn={BigNumberDependencies:p,UnitDependencies:Ot,createBohrMagneton:Pt.XS},gn={BigNumberDependencies:p,UnitDependencies:Ot,createBohrRadius:Pt.cC},yn={BigNumberDependencies:p,UnitDependencies:Ot,createBoltzmann:Pt.UK},xn=n(5870),vn={typedDependencies:w,createBoolean:xn.p},bn=n(4852),Dn={addScalarDependencies:_,combinationsDependencies:jt,divideScalarDependencies:$e,isIntegerDependencies:B,isNegativeDependencies:Rt,multiplyScalarDependencies:at,typedDependencies:w,createCatalan:bn.f},wn=n(5988),An={BigNumberDependencies:p,ComplexDependencies:f,FractionDependencies:b,isNegativeDependencies:Rt,matrixDependencies:F,typedDependencies:w,unaryMinusDependencies:wt,createCbrt:wn.q},Sn=n(1653),Nn={typedDependencies:w,createChainClass:Sn.k},Cn=n(624),En={ChainDependencies:Nn,typedDependencies:w,createChain:Cn.U},Mn={BigNumberDependencies:p,UnitDependencies:Ot,createClassicalElectronRadius:Pt.WX},Tn=n(5505),On={typedDependencies:w,createClone:Tn.s},Pn=n(8086),_n={DenseMatrixDependencies:x,concatDependencies:k,matrixDependencies:F,typedDependencies:w,createSmaller:Pn.p},In=n(2854),Bn={DenseMatrixDependencies:x,smallerDependencies:_n,createImmutableDenseMatrixClass:In.r},Rn=n(5587),Fn={typedDependencies:w,createGetMatrixDataType:Rn.C},jn=n(8873),kn={ImmutableDenseMatrixDependencies:Bn,getMatrixDataTypeDependencies:Fn,createIndexClass:jn.T},qn=n(9081),Ln={typedDependencies:w,createIsPositive:qn.q},zn=n(6569),Un={DenseMatrixDependencies:x,concatDependencies:k,matrixDependencies:F,typedDependencies:w,createLargerEq:zn.W},Gn=n(5040),$n={DenseMatrixDependencies:x,concatDependencies:k,matrixDependencies:F,typedDependencies:w,createSmallerEq:Gn.V},Hn=n(844),Wn={bignumberDependencies:Fe,matrixDependencies:F,addDependencies:L,isPositiveDependencies:Ln,largerDependencies:Gt,largerEqDependencies:Un,smallerDependencies:_n,smallerEqDependencies:$n,typedDependencies:w,createRange:Hn.S},Vn=n(5666),Yn={IndexDependencies:kn,matrixDependencies:F,rangeDependencies:Wn,typedDependencies:w,createColumn:Vn.H},Qn=n(6363),Zn={IndexDependencies:kn,matrixDependencies:F,rangeDependencies:Wn,typedDependencies:w,createColumnTransform:Qn.B},Jn=n(825),Kn={typedDependencies:w,createCombinationsWithRep:Jn.Q},Xn=n(3917),er={BigNumberDependencies:p,DenseMatrixDependencies:x,FractionDependencies:b,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,createCompare:Xn.m},tr=n(6695),nr={compareDependencies:er,typedDependencies:w,createCompareNatural:tr.b},rr=n(5538),ir={concatDependencies:k,matrixDependencies:F,typedDependencies:w,createCompareText:rr.r},sr=n(4813),ar={NodeDependencies:C,createConditionalNode:sr.h},or=n(7413),cr={NodeDependencies:C,createConstantNode:or.b},ur=n(1860),lr={NodeDependencies:C,typedDependencies:w,createFunctionAssignmentNode:ur.I},hr=n(245),pr={UnitDependencies:Ot,NodeDependencies:C,createSymbolNode:hr.F},dr=n(561),fr={NodeDependencies:C,SymbolNodeDependencies:pr,createFunctionNode:dr.N},mr=n(5937),gr={NodeDependencies:C,sizeDependencies:ft,createIndexNode:mr.r},yr=n(5926),xr={NodeDependencies:C,createObjectNode:yr.Q},vr=n(6917),br={NodeDependencies:C,createOperatorNode:vr.r},Dr=n(9973),wr={NodeDependencies:C,createParenthesisNode:Dr.n},Ar=n(2808),Sr={NodeDependencies:C,createRangeNode:Ar.u},Nr=n(88),Cr={NodeDependencies:C,createRelationalNode:Nr.G},Er=n(7827),Mr={AccessorNodeDependencies:W,ArrayNodeDependencies:xe,AssignmentNodeDependencies:Me,BlockNodeDependencies:fn,ConditionalNodeDependencies:ar,ConstantNodeDependencies:cr,FunctionAssignmentNodeDependencies:lr,FunctionNodeDependencies:fr,IndexNodeDependencies:gr,ObjectNodeDependencies:xr,OperatorNodeDependencies:br,ParenthesisNodeDependencies:wr,RangeNodeDependencies:Sr,RelationalNodeDependencies:Cr,SymbolNodeDependencies:pr,numericDependencies:Ue,typedDependencies:w,createParse:Er.U},Tr=n(3192),Or={parseDependencies:Mr,typedDependencies:w,createCompile:Tr.Q},Pr=n(174),_r={ComplexDependencies:f,typedDependencies:w,createComplex:Pr.X},Ir=n(7440),Br={addScalarDependencies:_,combinationsDependencies:jt,isIntegerDependencies:B,isNegativeDependencies:Rt,isPositiveDependencies:Ln,largerDependencies:Gt,typedDependencies:w,createComposition:Ir.z},Rr=n(5633),Fr={isIntegerDependencies:B,matrixDependencies:F,typedDependencies:w,createConcatTransform:Rr.V},jr={BigNumberDependencies:p,UnitDependencies:Ot,createConductanceQuantum:Pt.VK},kr=n(8490),qr={divideScalarDependencies:$e,equalScalarDependencies:M,invDependencies:Ct,matrixDependencies:F,multiplyDependencies:xt,typedDependencies:w,createDivide:kr.G},Lr=n(4043),zr={addDependencies:L,divideDependencies:qr,typedDependencies:w,createMean:Lr.s},Ur=n(6409),Gr={ComplexDependencies:f,typedDependencies:w,createSqrt:Ur.R},$r=n(6771),Hr={DenseMatrixDependencies:x,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,subtractScalarDependencies:bt,typedDependencies:w,unaryMinusDependencies:wt,createSubtract:$r.t},Wr=n(7159),Vr={addDependencies:L,numericDependencies:Ue,typedDependencies:w,createSum:Wr.i},Yr=n(1386),Qr={addDependencies:L,divideDependencies:qr,matrixDependencies:F,meanDependencies:zr,multiplyDependencies:xt,powDependencies:Mt,sqrtDependencies:Gr,subtractDependencies:Hr,sumDependencies:Vr,typedDependencies:w,createCorr:Yr.r},Zr=n(1143),Jr={typedDependencies:w,createCos:Zr.o},Kr=n(7671),Xr={typedDependencies:w,createCosh:Kr.q},ei=n(4630),ti={BigNumberDependencies:p,typedDependencies:w,createCot:ei.v},ni=n(7292),ri={BigNumberDependencies:p,typedDependencies:w,createCoth:ni.$},ii={BigNumberDependencies:p,UnitDependencies:Ot,createCoulomb:Pt.w$},si=n(9059),ai={multiplyScalarDependencies:at,numericDependencies:Ue,typedDependencies:w,createProd:si._},oi=n(5365),ci={prodDependencies:ai,sizeDependencies:ft,typedDependencies:w,createCount:oi.K},ui=n(8782),li={UnitDependencies:Ot,typedDependencies:w,createCreateUnit:ui.J},hi=n(9602),pi={matrixDependencies:F,multiplyDependencies:xt,subtractDependencies:Hr,typedDependencies:w,createCross:hi.x},di=n(2115),fi={BigNumberDependencies:p,typedDependencies:w,createCsc:di.Y},mi=n(9259),gi={BigNumberDependencies:p,typedDependencies:w,createCsch:mi.g},yi=n(9129),xi={matrixDependencies:F,typedDependencies:w,createTranspose:yi.M},vi=n(5684),bi={conjDependencies:pt,transposeDependencies:xi,typedDependencies:w,createCtranspose:vi.d},Di=n(8238),wi={typedDependencies:w,createCube:Di.Y},Ai=n(392),Si={numericDependencies:Ue,typedDependencies:w,createUnaryPlus:Ai.e},Ni=n(2736),Ci={addDependencies:L,typedDependencies:w,unaryPlusDependencies:Si,createCumSum:Ni.b},Ei=n(5671),Mi={addDependencies:L,typedDependencies:w,unaryPlusDependencies:Si,createCumSumTransform:Ei.p},Ti=n(6148),Oi={equalDependencies:We,typedDependencies:w,createDeepEqual:Ti.H},Pi=n(6017),_i={ConstantNodeDependencies:cr,FunctionNodeDependencies:fr,OperatorNodeDependencies:br,ParenthesisNodeDependencies:wr,parseDependencies:Mr,typedDependencies:w,createResolve:Pi.x},Ii=n(2506),Bi={bignumberDependencies:Fe,fractionDependencies:ke,AccessorNodeDependencies:W,ArrayNodeDependencies:xe,ConstantNodeDependencies:cr,FunctionNodeDependencies:fr,IndexNodeDependencies:gr,ObjectNodeDependencies:xr,OperatorNodeDependencies:br,SymbolNodeDependencies:pr,matrixDependencies:F,typedDependencies:w,createSimplifyConstant:Ii.E},Ri=n(2237),Fi={AccessorNodeDependencies:W,ArrayNodeDependencies:xe,ConstantNodeDependencies:cr,FunctionNodeDependencies:fr,IndexNodeDependencies:gr,ObjectNodeDependencies:xr,OperatorNodeDependencies:br,ParenthesisNodeDependencies:wr,SymbolNodeDependencies:pr,addDependencies:L,divideDependencies:qr,equalDependencies:We,isZeroDependencies:lt,multiplyDependencies:xt,parseDependencies:Mr,powDependencies:Mt,subtractDependencies:Hr,typedDependencies:w,createSimplifyCore:Ri.x},ji=n(4170),ki={bignumberDependencies:Fe,fractionDependencies:ke,AccessorNodeDependencies:W,ArrayNodeDependencies:xe,ConstantNodeDependencies:cr,FunctionNodeDependencies:fr,IndexNodeDependencies:gr,ObjectNodeDependencies:xr,OperatorNodeDependencies:br,ParenthesisNodeDependencies:wr,SymbolNodeDependencies:pr,addDependencies:L,divideDependencies:qr,equalDependencies:We,isZeroDependencies:lt,matrixDependencies:F,multiplyDependencies:xt,parseDependencies:Mr,powDependencies:Mt,resolveDependencies:_i,simplifyConstantDependencies:Bi,simplifyCoreDependencies:Fi,subtractDependencies:Hr,typedDependencies:w,createSimplify:ji.U},qi=n(3792),Li={ConstantNodeDependencies:cr,FunctionNodeDependencies:fr,OperatorNodeDependencies:br,ParenthesisNodeDependencies:wr,SymbolNodeDependencies:pr,equalDependencies:We,isZeroDependencies:lt,numericDependencies:Ue,parseDependencies:Mr,simplifyDependencies:ki,typedDependencies:w,createDerivative:qi.s},zi={BigNumberDependencies:p,UnitDependencies:Ot,createDeuteronMass:Pt.zr},Ui=n(1439),Gi={DenseMatrixDependencies:x,SparseMatrixDependencies:O,matrixDependencies:F,typedDependencies:w,createDiag:Ui.I},$i=n(6079),Hi={matrixDependencies:F,numberDependencies:Le,subtractDependencies:Hr,typedDependencies:w,createDiff:$i.i},Wi=n(3493),Vi={bignumberDependencies:Fe,matrixDependencies:F,numberDependencies:Le,subtractDependencies:Hr,typedDependencies:w,createDiffTransform:Wi.S},Yi=n(1716),Qi={absDependencies:S,addScalarDependencies:_,deepEqualDependencies:Oi,divideScalarDependencies:$e,multiplyScalarDependencies:at,sqrtDependencies:Gr,subtractScalarDependencies:bt,typedDependencies:w,createDistance:Yi.G},Zi=n(161),Ji={DenseMatrixDependencies:x,concatDependencies:k,divideScalarDependencies:$e,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,createDotDivide:Zi.F},Ki=n(9812),Xi={concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,multiplyScalarDependencies:at,typedDependencies:w,createDotMultiply:Ki.S},es=n(5712),ts={DenseMatrixDependencies:x,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,powDependencies:Mt,typedDependencies:w,createDotPow:es.U},ns=n(2284),rs={BigNumberDependencies:p,createE:ns.UN},is={BigNumberDependencies:p,createEfimovFactor:Pt.ez},ss=n(8920),as={typedDependencies:w,createFlatten:ss.d},os=n(1123),cs={typedDependencies:w,createIm:os.z},us=n(4242),ls={flattenDependencies:as,matrixDependencies:F,sizeDependencies:ft,typedDependencies:w,createMatrixFromColumns:us.z},hs=n(3970),ps={BigNumberDependencies:p,FractionDependencies:b,complexDependencies:_r,typedDependencies:w,createSign:hs.m},ds=n(3782),fs={addScalarDependencies:_,complexDependencies:_r,conjDependencies:pt,divideScalarDependencies:$e,equalDependencies:We,identityDependencies:ct,isZeroDependencies:lt,matrixDependencies:F,multiplyScalarDependencies:at,signDependencies:ps,sqrtDependencies:Gr,subtractScalarDependencies:bt,typedDependencies:w,unaryMinusDependencies:wt,zerosDependencies:U,createQr:ds.K},ms=n(20),gs={typedDependencies:w,createRe:ms.W},ys=n(2380),xs={isIntegerDependencies:B,matrixDependencies:F,typedDependencies:w,createReshape:ys.r},vs=n(578),bs={typedDependencies:w,createSin:vs.T},Ds=n(6431),ws={DenseMatrixDependencies:x,divideScalarDependencies:$e,equalScalarDependencies:M,matrixDependencies:F,multiplyScalarDependencies:at,subtractScalarDependencies:bt,typedDependencies:w,createUsolve:Ds.p},As=n(4032),Ss={DenseMatrixDependencies:x,divideScalarDependencies:$e,equalScalarDependencies:M,matrixDependencies:F,multiplyScalarDependencies:at,subtractScalarDependencies:bt,typedDependencies:w,createUsolveAll:As.m},Ns=n(9874),Cs={absDependencies:S,addDependencies:L,addScalarDependencies:_,atanDependencies:Oe,bignumberDependencies:Fe,columnDependencies:Yn,complexDependencies:_r,cosDependencies:Jr,diagDependencies:Gi,divideScalarDependencies:$e,dotDependencies:gt,equalDependencies:We,flattenDependencies:as,imDependencies:cs,invDependencies:Ct,largerDependencies:Gt,matrixDependencies:F,matrixFromColumnsDependencies:ls,multiplyDependencies:xt,multiplyScalarDependencies:at,numberDependencies:Le,qrDependencies:fs,reDependencies:gs,reshapeDependencies:xs,sinDependencies:bs,sizeDependencies:ft,smallerDependencies:_n,sqrtDependencies:Gr,subtractDependencies:Hr,typedDependencies:w,usolveDependencies:ws,usolveAllDependencies:Ss,createEigs:Ns.f},Es={BigNumberDependencies:p,UnitDependencies:Ot,createElectricConstant:Pt.eb},Ms={BigNumberDependencies:p,UnitDependencies:Ot,createElectronMass:Pt.dd},Ts={BigNumberDependencies:p,UnitDependencies:Ot,createElementaryCharge:Pt.v2},Os=n(9565),Ps={compareTextDependencies:ir,isZeroDependencies:lt,typedDependencies:w,createEqualText:Os.a},_s=n(177),Is={typedDependencies:w,createErf:_s.K},Bs=n(7578),Rs={parseDependencies:Mr,typedDependencies:w,createEvaluate:Bs.u},Fs=n(2340),js={typedDependencies:w,createExp:Fs.I},ks=n(7678),qs={absDependencies:S,addDependencies:L,identityDependencies:ct,invDependencies:Ct,multiplyDependencies:xt,typedDependencies:w,createExpm:ks.H},Ls=n(2486),zs={ComplexDependencies:f,typedDependencies:w,createExpm1:Ls.U},Us={createFalse:ns.i0},Gs={BigNumberDependencies:p,UnitDependencies:Ot,createFaraday:Pt.Dp},$s={BigNumberDependencies:p,UnitDependencies:Ot,createFermiCoupling:Pt.Dc},Hs={ComplexDependencies:f,createI:ns.GM},Ws=n(1311),Vs={ComplexDependencies:f,typedDependencies:w,createLog2:Ws.j},Ys={BigNumberDependencies:p,createTau:ns.hI},Qs=n(8822),Zs={addScalarDependencies:_,ceilDependencies:Ze,conjDependencies:pt,divideScalarDependencies:$e,dotDivideDependencies:Ji,expDependencies:js,iDependencies:Hs,log2Dependencies:Vs,matrixDependencies:F,multiplyScalarDependencies:at,powDependencies:Mt,tauDependencies:Ys,typedDependencies:w,createFft:Qs.H},Js=n(7648),Ks={largerDependencies:Gt,smallerDependencies:_n,createFibonacciHeapClass:Js.B},Xs=n(9990),ea={typedDependencies:w,createFilter:Xs.H},ta=n(7971),na={typedDependencies:w,createFilterTransform:ta.p},ra={BigNumberDependencies:p,createFineStructure:Pt.I},ia={BigNumberDependencies:p,UnitDependencies:Ot,createFirstRadiation:Pt.qQ},sa=n(1032),aa={typedDependencies:w,createForEach:sa.j},oa=n(463),ca={typedDependencies:w,createForEachTransform:oa.D},ua=n(1155),la={ComplexDependencies:f,addDependencies:L,divideDependencies:qr,matrixDependencies:F,multiplyDependencies:xt,typedDependencies:w,createFreqz:ua.$},ha={BigNumberDependencies:p,UnitDependencies:Ot,createGasConstant:Pt.Ik},pa=n(9253),da={BigNumberDependencies:p,DenseMatrixDependencies:x,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,roundDependencies:Ye,typedDependencies:w,zerosDependencies:U,createGcd:pa.p},fa={BigNumberDependencies:p,UnitDependencies:Ot,createGravitationConstant:Pt.tP},ma={BigNumberDependencies:p,UnitDependencies:Ot,createGravity:Pt.Tx},ga={BigNumberDependencies:p,UnitDependencies:Ot,createHartreeEnergy:Pt.oL},ya=n(5624),xa={isNumericDependencies:it,typedDependencies:w,createHasNumericValue:ya.l},va=n(7741),ba={evaluateDependencies:Rs,createHelpClass:va.G},Da=n(2342),wa={HelpDependencies:ba,typedDependencies:w,createHelp:Da.q},Aa=n(9651),Sa={formatDependencies:nt,typedDependencies:w,createHex:Aa.i},Na=n(3253),Ca={absDependencies:S,addScalarDependencies:_,divideScalarDependencies:$e,isPositiveDependencies:Ln,multiplyScalarDependencies:at,smallerDependencies:_n,sqrtDependencies:Gr,typedDependencies:w,createHypot:Na.r},Ea=n(1069),Ma={conjDependencies:pt,dotDivideDependencies:Ji,fftDependencies:Zs,typedDependencies:w,createIfft:Ea.C},Ta=n(7387),Oa={IndexDependencies:kn,typedDependencies:w,createIndex:Ta.z},Pa=n(941),_a={IndexDependencies:kn,getMatrixDataTypeDependencies:Fn,createIndexTransform:Pa.p},Ia={BigNumberDependencies:p,createInfinity:ns.Xd},Ba=n(5874),Ra={absDependencies:S,addDependencies:L,addScalarDependencies:_,divideScalarDependencies:$e,equalScalarDependencies:M,flattenDependencies:as,isNumericDependencies:it,isZeroDependencies:lt,matrixDependencies:F,multiplyDependencies:xt,multiplyScalarDependencies:at,smallerDependencies:_n,subtractDependencies:Hr,typedDependencies:w,createIntersect:Ba.s},Fa={BigNumberDependencies:p,UnitDependencies:Ot,createInverseConductanceQuantum:Pt.rg},ja=n(4867),ka={DenseMatrixDependencies:x,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,roundDependencies:Ye,typedDependencies:w,zerosDependencies:U,createMod:ja.n},qa=n(4805),La={BigNumberDependencies:p,matrixDependencies:F,typedDependencies:w,createXgcd:qa.F},za=n(9010),Ua={BigNumberDependencies:p,addDependencies:L,equalDependencies:We,isIntegerDependencies:B,modDependencies:ka,smallerDependencies:_n,typedDependencies:w,xgcdDependencies:La,createInvmod:za.o},Ga=n(7753),$a={typedDependencies:w,createIsNaN:Ga.Y},Ha=n(3547),Wa={typedDependencies:w,createIsPrime:Ha.w},Va=n(4861),Ya={ComplexDependencies:f,divideScalarDependencies:$e,typedDependencies:w,createLog:Va.h},Qa=n(4672),Za={typedDependencies:w,createMap:Qa.p},Ja=n(6241),Ka={divideDependencies:qr,dotDivideDependencies:Ji,isNumericDependencies:it,logDependencies:Ya,mapDependencies:Za,matrixDependencies:F,multiplyDependencies:xt,sumDependencies:Vr,typedDependencies:w,createKldivergence:Ja.u},Xa={BigNumberDependencies:p,UnitDependencies:Ot,createKlitzing:Pt.$L},eo=n(6876),to={matrixDependencies:F,multiplyScalarDependencies:at,typedDependencies:w,createKron:eo.l},no={BigNumberDependencies:p,createLN10:ns.ad},ro={BigNumberDependencies:p,createLN2:ns.l7},io={BigNumberDependencies:p,createLOG10E:ns.fi},so={BigNumberDependencies:p,createLOG2E:ns.C8},ao=n(455),oo={concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,createLcm:ao.D},co=n(4274),uo={parseDependencies:Mr,typedDependencies:w,createLeafCount:co.C},lo=n(9917),ho={DenseMatrixDependencies:x,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,zerosDependencies:U,createLeftShift:lo.O},po=n(3061),fo={ComplexDependencies:f,typedDependencies:w,createLgamma:po.k},mo=n(9016),go={ComplexDependencies:f,typedDependencies:w,createLog10:mo.e},yo=n(3144),xo={ComplexDependencies:f,divideScalarDependencies:$e,logDependencies:Ya,typedDependencies:w,createLog1p:yo.s},vo={BigNumberDependencies:p,UnitDependencies:Ot,createLoschmidt:Pt.Cc},bo=n(6886),Do={DenseMatrixDependencies:x,divideScalarDependencies:$e,equalScalarDependencies:M,matrixDependencies:F,multiplyScalarDependencies:at,subtractScalarDependencies:bt,typedDependencies:w,createLsolve:bo.i},wo=n(3587),Ao={DenseMatrixDependencies:x,divideScalarDependencies:$e,equalScalarDependencies:M,matrixDependencies:F,multiplyScalarDependencies:at,subtractScalarDependencies:bt,typedDependencies:w,createLsolveAll:wo.H},So=n(628),No={FibonacciHeapDependencies:Ks,addScalarDependencies:_,equalScalarDependencies:M,createSpaClass:So.Z},Co=n(3456),Eo={DenseMatrixDependencies:x,SpaDependencies:No,SparseMatrixDependencies:O,absDependencies:S,addScalarDependencies:_,divideScalarDependencies:$e,equalScalarDependencies:M,largerDependencies:Gt,matrixDependencies:F,multiplyScalarDependencies:at,subtractScalarDependencies:bt,typedDependencies:w,unaryMinusDependencies:wt,createLup:Co.o},Mo=n(1288),To={SparseMatrixDependencies:O,absDependencies:S,addDependencies:L,divideScalarDependencies:$e,largerDependencies:Gt,largerEqDependencies:Un,multiplyDependencies:xt,subtractDependencies:Hr,transposeDependencies:xi,typedDependencies:w,createSlu:Mo.H},Oo=n(8503),Po={DenseMatrixDependencies:x,lsolveDependencies:Do,lupDependencies:Eo,matrixDependencies:F,sluDependencies:To,typedDependencies:w,usolveDependencies:ws,createLusolve:Oo.b},_o=n(9913),Io={absDependencies:S,addDependencies:L,conjDependencies:pt,ctransposeDependencies:bi,eigsDependencies:Cs,equalScalarDependencies:M,largerDependencies:Gt,matrixDependencies:F,multiplyDependencies:xt,powDependencies:Mt,smallerDependencies:_n,sqrtDependencies:Gr,typedDependencies:w,createNorm:_o.X},Bo=n(7592),Ro={identityDependencies:ct,matrixDependencies:F,multiplyDependencies:xt,normDependencies:Io,qrDependencies:fs,subtractDependencies:Hr,typedDependencies:w,createSchur:Bo.u},Fo=n(8528),jo={absDependencies:S,addDependencies:L,concatDependencies:k,identityDependencies:ct,indexDependencies:Oa,lusolveDependencies:Po,matrixDependencies:F,matrixFromColumnsDependencies:ls,multiplyDependencies:xt,rangeDependencies:Wn,schurDependencies:Ro,subsetDependencies:$,subtractDependencies:Hr,transposeDependencies:xi,typedDependencies:w,createSylvester:Fo._},ko=n(2259),qo={matrixDependencies:F,multiplyDependencies:xt,sylvesterDependencies:jo,transposeDependencies:xi,typedDependencies:w,createLyap:ko.L},Lo=n(6228),zo={compareDependencies:er,isNaNDependencies:$a,isNumericDependencies:it,typedDependencies:w,createPartitionSelect:Lo.X},Uo=n(2092),Go={addDependencies:L,compareDependencies:er,divideDependencies:qr,partitionSelectDependencies:zo,typedDependencies:w,createMedian:Uo.h},$o=n(1038),Ho={absDependencies:S,mapDependencies:Za,medianDependencies:Go,subtractDependencies:Hr,typedDependencies:w,createMad:$o.p},Wo={BigNumberDependencies:p,UnitDependencies:Ot,createMagneticConstant:Pt.Rd},Vo={BigNumberDependencies:p,UnitDependencies:Ot,createMagneticFluxQuantum:Pt.DT},Yo=n(8876),Qo={typedDependencies:w,createMapTransform:Yo.t},Zo=n(4977),Jo={isZeroDependencies:lt,matrixDependencies:F,typedDependencies:w,createMatrixFromFunction:Zo.s},Ko=n(3348),Xo={flattenDependencies:as,matrixDependencies:F,sizeDependencies:ft,typedDependencies:w,createMatrixFromRows:Ko.Z},ec=n(5546),tc={largerDependencies:Gt,numericDependencies:Ue,typedDependencies:w,createMax:ec.p},nc=n(8791),rc={largerDependencies:Gt,numericDependencies:Ue,typedDependencies:w,createMaxTransform:nc.t},ic=n(4092),sc={addDependencies:L,divideDependencies:qr,typedDependencies:w,createMeanTransform:ic.y},ac=n(9076),oc={numericDependencies:Ue,smallerDependencies:_n,typedDependencies:w,createMin:ac.L},cc=n(2298),uc={numericDependencies:Ue,smallerDependencies:_n,typedDependencies:w,createMinTransform:cc.X},lc=n(5645),hc={isNaNDependencies:$a,isNumericDependencies:it,typedDependencies:w,createMode:lc.E},pc={BigNumberDependencies:p,UnitDependencies:Ot,createMolarMass:Pt.e0},dc={BigNumberDependencies:p,UnitDependencies:Ot,createMolarMassC12:Pt.KV},fc={BigNumberDependencies:p,UnitDependencies:Ot,createMolarPlanckConstant:Pt.hy},mc={BigNumberDependencies:p,UnitDependencies:Ot,createMolarVolume:Pt.u5},gc=n(8523),yc={addDependencies:L,divideDependencies:qr,factorialDependencies:zt,isIntegerDependencies:B,isPositiveDependencies:Ln,multiplyDependencies:xt,typedDependencies:w,createMultinomial:gc.k},xc={BigNumberDependencies:p,createNaN:ns.SV},vc={BigNumberDependencies:p,UnitDependencies:Ot,createNeutronMass:Pt.Wq},bc=n(5693),Dc={BigNumberDependencies:p,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,createNthRoot:bc.f},wc=n(8296),Ac={ComplexDependencies:f,divideScalarDependencies:$e,typedDependencies:w,createNthRoots:wc.s},Sc={BigNumberDependencies:p,UnitDependencies:Ot,createNuclearMagneton:Pt.EE},Nc={createNull:ns.Er},Cc=n(5984),Ec={formatDependencies:nt,typedDependencies:w,createOct:Cc.R},Mc=n(8193),Tc={BigNumberDependencies:p,matrixDependencies:F,typedDependencies:w,createOnes:Mc.A},Oc=n(4625),Pc={DenseMatrixDependencies:x,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,createOr:Oc.M},_c=n(5136),Ic={DenseMatrixDependencies:x,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,createOrTransform:_c.O},Bc=n(4165),Rc={evaluateDependencies:Rs,createParserClass:Bc.m},Fc=n(4289),jc={ParserDependencies:Rc,typedDependencies:w,createParser:Fc.C},kc=n(7961),qc={factorialDependencies:zt,typedDependencies:w,createPermutations:kc.U},Lc={BigNumberDependencies:p,createPhi:ns.Ah},zc={BigNumberDependencies:p,createPi:ns.GD},Uc=n(1226),Gc={typedDependencies:w,createPickRandom:Uc.B},$c=n(4739),Hc={ComplexDependencies:f,addDependencies:L,ctransposeDependencies:bi,deepEqualDependencies:Oi,divideScalarDependencies:$e,dotDependencies:gt,dotDivideDependencies:Ji,equalDependencies:We,invDependencies:Ct,matrixDependencies:F,multiplyDependencies:xt,typedDependencies:w,createPinv:$c.w},Wc={BigNumberDependencies:p,UnitDependencies:Ot,createPlanckCharge:Pt.aE},Vc={BigNumberDependencies:p,UnitDependencies:Ot,createPlanckConstant:Pt.Og},Yc={BigNumberDependencies:p,UnitDependencies:Ot,createPlanckLength:Pt.qU},Qc={BigNumberDependencies:p,UnitDependencies:Ot,createPlanckMass:Pt.cn},Zc={BigNumberDependencies:p,UnitDependencies:Ot,createPlanckTemperature:Pt._F},Jc={BigNumberDependencies:p,UnitDependencies:Ot,createPlanckTime:Pt.TT},Kc=n(667),Xc={typedDependencies:w,createTypeOf:Kc.o},eu=n(5359),tu={addDependencies:L,cbrtDependencies:An,divideDependencies:qr,equalScalarDependencies:M,imDependencies:cs,isZeroDependencies:lt,multiplyDependencies:xt,reDependencies:gs,sqrtDependencies:Gr,subtractDependencies:Hr,typeOfDependencies:Xc,typedDependencies:w,unaryMinusDependencies:wt,createPolynomialRoot:eu.r},nu=n(6621),ru={typedDependencies:w,createPrint:nu.q},iu=n(3810),su={addDependencies:L,matrixDependencies:F,typedDependencies:w,zerosDependencies:U,createPrintTransform:iu.Q},au={BigNumberDependencies:p,UnitDependencies:Ot,createProtonMass:Pt.jh},ou=n(3112),cu={bignumberDependencies:Fe,addDependencies:L,compareDependencies:er,divideDependencies:qr,isIntegerDependencies:B,largerDependencies:Gt,multiplyDependencies:xt,partitionSelectDependencies:zo,smallerDependencies:_n,smallerEqDependencies:$n,subtractDependencies:Hr,typedDependencies:w,createQuantileSeq:ou.D},uu=n(3881),lu={addDependencies:L,bignumberDependencies:Fe,compareDependencies:er,divideDependencies:qr,isIntegerDependencies:B,largerDependencies:Gt,multiplyDependencies:xt,partitionSelectDependencies:zo,smallerDependencies:_n,smallerEqDependencies:$n,subtractDependencies:Hr,typedDependencies:w,createQuantileSeqTransform:uu.b},hu={BigNumberDependencies:p,UnitDependencies:Ot,createQuantumOfCirculation:Pt._7},pu=n(9531),du={typedDependencies:w,createRandom:pu.s},fu=n(3894),mu={typedDependencies:w,createRandomInt:fu.d},gu=n(7251),yu={createRangeClass:gu.U},xu=n(9832),vu={bignumberDependencies:Fe,matrixDependencies:F,addDependencies:L,isPositiveDependencies:Ln,largerDependencies:Gt,largerEqDependencies:Un,smallerDependencies:_n,smallerEqDependencies:$n,typedDependencies:w,createRangeTransform:xu.G},bu=n(5833),Du={bignumberDependencies:Fe,fractionDependencies:ke,AccessorNodeDependencies:W,ArrayNodeDependencies:xe,ConstantNodeDependencies:cr,FunctionNodeDependencies:fr,IndexNodeDependencies:gr,ObjectNodeDependencies:xr,OperatorNodeDependencies:br,ParenthesisNodeDependencies:wr,SymbolNodeDependencies:pr,addDependencies:L,divideDependencies:qr,equalDependencies:We,isZeroDependencies:lt,matrixDependencies:F,multiplyDependencies:xt,parseDependencies:Mr,powDependencies:Mt,simplifyDependencies:ki,simplifyConstantDependencies:Bi,simplifyCoreDependencies:Fi,subtractDependencies:Hr,typedDependencies:w,createRationalize:bu.L},wu={BigNumberDependencies:p,UnitDependencies:Ot,createReducedPlanckConstant:Pt.y0},Au=n(236),Su={createReplacer:Au.h},Nu=n(9192),Cu={matrixDependencies:F,createResize:Nu.B},Eu=n(1189),Mu={createReviver:Eu.m},Tu=n(1606),Ou={DenseMatrixDependencies:x,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,zerosDependencies:U,createRightArithShift:Tu.f},Pu=n(2446),_u={DenseMatrixDependencies:x,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,zerosDependencies:U,createRightLogShift:Pu.n},Iu=n(3163),Bu={BigNumberDependencies:p,DenseMatrixDependencies:x,SparseMatrixDependencies:O,addScalarDependencies:_,cosDependencies:Jr,matrixDependencies:F,multiplyScalarDependencies:at,normDependencies:Io,sinDependencies:bs,typedDependencies:w,unaryMinusDependencies:wt,createRotationMatrix:Iu.m},Ru=n(404),Fu={multiplyDependencies:xt,rotationMatrixDependencies:Bu,typedDependencies:w,createRotate:Ru.S},ju=n(6610),ku={IndexDependencies:kn,matrixDependencies:F,rangeDependencies:Wn,typedDependencies:w,createRow:ju.R},qu=n(5973),Lu={IndexDependencies:kn,matrixDependencies:F,rangeDependencies:Wn,typedDependencies:w,createRowTransform:qu.J},zu={BigNumberDependencies:p,UnitDependencies:Ot,createRydberg:Pt.QE},Uu={BigNumberDependencies:p,createSQRT1_2:ns.j2},Gu={BigNumberDependencies:p,createSQRT2:ns.RJ},$u={BigNumberDependencies:p,createSackurTetrode:Pt.bz},Hu=n(1001),Wu={BigNumberDependencies:p,typedDependencies:w,createSec:Hu.c},Vu=n(5757),Yu={BigNumberDependencies:p,typedDependencies:w,createSech:Vu.g},Qu={BigNumberDependencies:p,UnitDependencies:Ot,createSecondRadiation:Pt.cr},Zu=n(3995),Ju={DenseMatrixDependencies:x,IndexDependencies:kn,compareNaturalDependencies:nr,sizeDependencies:ft,subsetDependencies:$,typedDependencies:w,createSetCartesian:Zu.v},Ku=n(8578),Xu={DenseMatrixDependencies:x,IndexDependencies:kn,compareNaturalDependencies:nr,sizeDependencies:ft,subsetDependencies:$,typedDependencies:w,createSetDifference:Ku.e},el=n(7921),tl={DenseMatrixDependencies:x,IndexDependencies:kn,compareNaturalDependencies:nr,sizeDependencies:ft,subsetDependencies:$,typedDependencies:w,createSetDistinct:el.Z},nl=n(2776),rl={DenseMatrixDependencies:x,IndexDependencies:kn,compareNaturalDependencies:nr,sizeDependencies:ft,subsetDependencies:$,typedDependencies:w,createSetIntersect:nl.e},il=n(2659),sl={IndexDependencies:kn,compareNaturalDependencies:nr,sizeDependencies:ft,subsetDependencies:$,typedDependencies:w,createSetIsSubset:il.P},al=n(5150),ol={IndexDependencies:kn,compareNaturalDependencies:nr,sizeDependencies:ft,subsetDependencies:$,typedDependencies:w,createSetMultiplicity:al.C},cl=n(7834),ul={IndexDependencies:kn,compareNaturalDependencies:nr,sizeDependencies:ft,subsetDependencies:$,typedDependencies:w,createSetPowerset:cl.Y},ll=n(5200),hl={compareNaturalDependencies:nr,typedDependencies:w,createSetSize:ll.G},pl=n(8297),dl={IndexDependencies:kn,concatDependencies:k,setDifferenceDependencies:Xu,sizeDependencies:ft,subsetDependencies:$,typedDependencies:w,createSetSymDifference:pl.l},fl=n(2746),ml={IndexDependencies:kn,concatDependencies:k,setIntersectDependencies:rl,setSymDifferenceDependencies:dl,sizeDependencies:ft,subsetDependencies:$,typedDependencies:w,createSetUnion:fl.s},gl=n(6768),yl={typedDependencies:w,createSinh:gl.V},xl=n(9279),vl={absDependencies:S,addDependencies:L,bignumberDependencies:Fe,divideDependencies:qr,isNegativeDependencies:Rt,isPositiveDependencies:Ln,largerDependencies:Gt,mapDependencies:Za,matrixDependencies:F,maxDependencies:tc,multiplyDependencies:xt,smallerDependencies:_n,subtractDependencies:Hr,typedDependencies:w,unaryMinusDependencies:wt,createSolveODE:xl.c},bl=n(72),Dl={compareDependencies:er,compareNaturalDependencies:nr,matrixDependencies:F,typedDependencies:w,createSort:bl.V},wl=n(9391),Al={SparseMatrixDependencies:O,typedDependencies:w,createSparse:wl.R},Sl={BigNumberDependencies:p,UnitDependencies:Ot,createSpeedOfLight:Pt.Lg},Nl=n(4708),Cl={typedDependencies:w,createSplitUnit:Nl.t},El=n(3831),Ml={absDependencies:S,addDependencies:L,identityDependencies:ct,invDependencies:Ct,mapDependencies:Za,maxDependencies:tc,multiplyDependencies:xt,sizeDependencies:ft,sqrtDependencies:Gr,subtractDependencies:Hr,typedDependencies:w,createSqrtm:El.y},Tl=n(2436),Ol={typedDependencies:w,createSquare:Tl.G},Pl=n(1146),_l={typedDependencies:w,createSqueeze:Pl.l},Il=n(5849),Bl={addDependencies:L,applyDependencies:pe,divideDependencies:qr,isNaNDependencies:$a,multiplyDependencies:xt,subtractDependencies:Hr,typedDependencies:w,createVariance:Il.A},Rl=n(9029),Fl={mapDependencies:Za,sqrtDependencies:Gr,typedDependencies:w,varianceDependencies:Bl,createStd:Rl.y},jl=n(7764),kl={mapDependencies:Za,sqrtDependencies:Gr,typedDependencies:w,varianceDependencies:Bl,createStdTransform:jl.E},ql={BigNumberDependencies:p,UnitDependencies:Ot,createStefanBoltzmann:Pt.zy},Ll=n(2581),zl={typedDependencies:w,createString:Ll.I},Ul=n(9459),Gl={addDependencies:L,matrixDependencies:F,typedDependencies:w,zerosDependencies:U,createSubsetTransform:Ul.R},$l=n(4414),Hl={addDependencies:L,numericDependencies:Ue,typedDependencies:w,createSumTransform:$l.o},Wl=n(5945),Vl={OperatorNodeDependencies:br,parseDependencies:Mr,simplifyDependencies:ki,typedDependencies:w,createSymbolicEqual:Wl.N},Yl=n(5883),Ql={typedDependencies:w,createTan:Yl.a},Zl=n(227),Jl={typedDependencies:w,createTanh:Zl.I},Kl={BigNumberDependencies:p,UnitDependencies:Ot,createThomsonCrossSection:Pt.wp},Xl=n(9116),eh={concatDependencies:k,matrixDependencies:F,typedDependencies:w,createTo:Xl.U},th=n(3767),nh={addDependencies:L,matrixDependencies:F,typedDependencies:w,createTrace:th.s},rh={createTrue:ns.L7},ih=n(7563),sh={DenseMatrixDependencies:x,concatDependencies:k,equalScalarDependencies:M,matrixDependencies:F,typedDependencies:w,createUnequal:ih.K},ah=n(5486),oh={UnitDependencies:Ot,typedDependencies:w,createUnitFunction:ah.n},ch={eDependencies:rs,createUppercaseE:ns.OL},uh={piDependencies:zc,createUppercasePi:ns.ol},lh={BigNumberDependencies:p,UnitDependencies:Ot,createVacuumImpedance:Pt.AW},hh=n(3094),ph={addDependencies:L,applyDependencies:pe,divideDependencies:qr,isNaNDependencies:$a,multiplyDependencies:xt,subtractDependencies:Hr,typedDependencies:w,createVarianceTransform:hh.M},dh={createVersion:ns.BB},fh={BigNumberDependencies:p,createWeakMixingAngle:Pt.qH},mh={BigNumberDependencies:p,UnitDependencies:Ot,createWienDisplacement:Pt.Lz},gh=n(9187),yh={DenseMatrixDependencies:x,concatDependencies:k,matrixDependencies:F,typedDependencies:w,createXor:gh.Y},xh=n(9926),vh={BigNumberDependencies:p,ComplexDependencies:f,addDependencies:L,divideDependencies:qr,equalDependencies:We,factorialDependencies:zt,gammaDependencies:qt,isNegativeDependencies:Rt,multiplyDependencies:xt,piDependencies:zc,powDependencies:Mt,sinDependencies:bs,smallerEqDependencies:$n,subtractDependencies:Hr,typedDependencies:w,createZeta:xh.b},bh=n(1718),Dh={ComplexDependencies:f,addDependencies:L,multiplyDependencies:xt,numberDependencies:Le,typedDependencies:w,createZpk2tf:bh.S},wh=r,Ah=n(4634),Sh=n(6627),Nh=n(8321),Ch=n(3140),Eh=n(1504),Mh=n(4719),Th=n(5662);function Oh(e,t){var n=Ah({},Mh.P,t);if("function"!=typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var r,i,s=(r={isNumber:o.Et,isComplex:o.Zd,isBigNumber:o.C4,isBigInt:o.sI,isFraction:o.fU,isUnit:o.vO,isString:o.Kg,isArray:o.cy,isMatrix:o.OA,isCollection:o.P3,isDenseMatrix:o.zR,isSparseMatrix:o.AF,isRange:o._Z,isIndex:o.nw,isBoolean:o.Lm,isResultSet:o.eW,isHelp:o.gS,isFunction:o.Tn,isDate:o.$P,isRegExp:o.gd,isObject:o.Gv,isMap:o.jh,isPartitionedMap:o.aZ,isObjectWrappingMap:o.uQ,isNull:o.kZ,isUndefined:o.b0,isAccessorNode:o.AS,isArrayNode:o.gO,isAssignmentNode:o.qM,isBlockNode:o.CD,isConditionalNode:o.PO,isConstantNode:o.BA,isFunctionAssignmentNode:o.m2,isFunctionNode:o.Px,isIndexNode:o.$I,isNode:o.Ll,isObjectNode:o.GJ,isOperatorNode:o.$$,isParenthesisNode:o.tv,isRangeNode:o.Ye,isRelationalNode:o.iu,isSymbolNode:o.li,isChain:o.o_},i=new Eh,r.on=i.on.bind(i),r.off=i.off.bind(i),r.once=i.once.bind(i),r.emit=i.emit.bind(i),r);s.config=(0,Th.hZ)(n,s.emit),s.expression={transform:{},mathWithTransform:{config:s.config}};var a={};function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.typed.apply(s.typed,t)}h.isTypedFunction=Sh.A.isTypedFunction;var p=function(e,t,n,r){function i(t,i,a){var o;if(a.wrap&&"function"==typeof i&&(i=function(e){var t=function(){for(var t=[],r=0,i=arguments.length;r<i;r++){var s=arguments[r];t[r]=s&&s.valueOf()}return e.apply(n,t)};return e.transform&&(t.transform=e.transform),t}(i)),"function"==typeof(o=i)&&"string"==typeof o.signature&&(i=e(t,{[i.signature]:i})),e.isTypedFunction(n[t])&&e.isTypedFunction(i))return i=a.override?e(t,i.signatures):e(n[t],i),n[t]=i,delete r[t],s(t,i),void n.emit("import",t,(function(){return i}));if(void 0===n[t]||a.override)return n[t]=i,delete r[t],s(t,i),void n.emit("import",t,(function(){return i}));if(!a.silent)throw new Error('Cannot import "'+t+'": already exists')}function s(e,t){t&&"function"==typeof t.transform?(n.expression.transform[e]=t.transform,h(e)&&(n.expression.mathWithTransform[e]=t.transform)):(delete n.expression.transform[e],h(e)&&(n.expression.mathWithTransform[e]=t))}function a(e){delete n.expression.transform[e],h(e)?n.expression.mathWithTransform[e]=n[e]:delete n.expression.mathWithTransform[e]}function c(t,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.fn;if(s.includes("."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(s));var o=d(t)?n.expression.transform:n,c=s in n.expression.transform,u=(0,Ch.mQ)(o,s)?o[s]:void 0,l=function(){var r={};t.dependencies.map(Nh.Py).forEach((e=>{if(e.includes("."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(e));"math"===e?r.math=n:"mathWithTransform"===e?r.mathWithTransform=n.expression.mathWithTransform:"classes"===e?r.classes=n:r[e]=n[e]}));var a=t(r);if(a&&"function"==typeof a.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with export const path = "expression.transform"');if(void 0===u||i.override)return a;if(e.isTypedFunction(u)&&e.isTypedFunction(a))return e(u,a);if(i.silent)return u;throw new Error('Cannot import "'+s+'": already exists')};t.meta&&!1===t.meta.lazy?(o[s]=l(),u&&c?a(s):(d(t)||p(t))&&(0,Ch.RZ)(n.expression.mathWithTransform,s,(()=>o[s]))):((0,Ch.RZ)(o,s,l),u&&c?a(s):(d(t)||p(t))&&(0,Ch.RZ)(n.expression.mathWithTransform,s,(()=>o[s]))),r[s]=t,n.emit("import",s,l)}function u(e){return"function"==typeof e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e||null===e||(0,o.vO)(e)||(0,o.Zd)(e)||(0,o.C4)(e)||(0,o.fU)(e)||(0,o.OA)(e)||Array.isArray(e)}function h(e){return!(0,Ch.mQ)(f,e)}function p(e){return!(e.fn.includes(".")||(0,Ch.mQ)(f,e.fn)||e.meta&&e.meta.isClass)}function d(e){return void 0!==e&&void 0!==e.meta&&!0===e.meta.isTransformFunction||!1}var f={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return function(e,t){var n=arguments.length;if(1!==n&&2!==n)throw new l.X("import",n,1,2);t||(t={});var r={};for(var s in function e(n,r,i){if(Array.isArray(r))r.forEach((t=>e(n,t)));else if("object"==typeof r)for(var s in r)(0,Ch.mQ)(r,s)&&e(n,r[s],s);else if((0,Nh.T$)(r)||void 0!==i){var a=(0,Nh.T$)(r)?d(r)?r.fn+".transform":r.fn:i;if((0,Ch.mQ)(n,a)&&n[a]!==r&&!t.silent)throw new Error('Cannot import "'+a+'" twice');n[a]=r}else if(!t.silent)throw new TypeError("Factory, Object, or Array expected")}(r,e),r)if((0,Ch.mQ)(r,s)){var a=r[s];if((0,Nh.T$)(a))c(a,t);else if(u(a))i(s,a,t);else if(!t.silent)throw new TypeError("Factory, Object, or Array expected")}}}(h,0,s,a);return s.import=p,s.on("config",(()=>{Object.values(a).forEach((e=>{e&&e.meta&&e.meta.recreateOnConfigChange&&p(e,{override:!0})}))})),s.create=Oh.bind(null,e),s.factory=Nh.P9,s.import(Object.values((0,Ch.rU)(e))),s.ArgumentsError=l.X,s.DimensionError=u.h,s.IndexError=c.d,s}},236:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var r=[],i=(0,n(8321).P9)("replacer",r,(()=>function(e,t){return"number"!=typeof t||isFinite(t)&&!isNaN(t)?"bigint"==typeof t?{mathjs:"bigint",value:String(t)}:t:{mathjs:"number",value:String(t)}}))},1189:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});var r=["classes"],i=(0,n(8321).P9)("reviver",r,(e=>{var{classes:t}=e;return function(e,n){var r=t[n&&n.mathjs];return r&&"function"==typeof r.fromJSON?r.fromJSON(n):n}}))},1976:(e,t,n)=>{"use strict";n.d(t,{Ki:()=>c,LF:()=>o,Nk:()=>x,Qb:()=>S,Wf:()=>N,YD:()=>u,ZO:()=>h,b7:()=>d,bD:()=>D,dX:()=>w,gn:()=>y,gu:()=>a,l3:()=>m,lq:()=>f,nA:()=>p,qV:()=>g,qc:()=>v,sO:()=>A,wp:()=>b,zZ:()=>l});var r=n(1106),i="number",s="number, number";function a(e){return Math.abs(e)}function o(e,t){return e+t}function c(e,t){return e-t}function u(e,t){return e*t}function l(e){return-e}function h(e){return e}function p(e){return(0,r._n)(e)}function d(e){return e*e*e}function f(e){return Math.exp(e)}function m(e){return(0,r.IY)(e)}function g(e,t){if(!(0,r.YN)(e)||!(0,r.YN)(t))throw new Error("Parameters in function lcm must be integer numbers");if(0===e||0===t)return 0;for(var n,i=e*t;0!==t;)t=e%(n=t),e=n;return Math.abs(i/e)}function y(e,t){return t?Math.log(e)/Math.log(t):Math.log(e)}function x(e){return(0,r.YL)(e)}function v(e){return(0,r.p6)(e)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t<0;if(n&&(t=-t),0===t)throw new Error("Root must be non-zero");if(e<0&&Math.abs(t)%2!=1)throw new Error("Root must be odd when a is negative.");if(0===e)return n?1/0:0;if(!isFinite(e))return n?0:e;var r=Math.pow(Math.abs(e),1/t);return r=e<0?-r:r,n?1/r:r}function D(e){return(0,r._S)(e)}function w(e){return e*e}function A(e,t){var n,i,s,a=0,o=1,c=1,u=0;if(!(0,r.YN)(e)||!(0,r.YN)(t))throw new Error("Parameters in function xgcd must be integer numbers");for(;t;)s=e-(i=Math.floor(e/t))*t,n=a,a=o-i*a,o=n,n=c,c=u-i*c,u=n,e=t,t=s;return e<0?[-e,-o,-u]:[e,e?o:0,u]}function S(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(0,r.YN)(t)||t<0||t>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat((0,r.Mg)(e,t))}a.signature=i,o.signature=s,c.signature=s,u.signature=s,l.signature=i,h.signature=i,p.signature=i,d.signature=i,f.signature=i,m.signature=i,g.signature=s,x.signature=i,v.signature=i,D.signature=i,w.signature=i,A.signature=s,S.signature=s},8253:(e,t,n)=>{"use strict";n.d(t,{Co:()=>c,F4:()=>u,IR:()=>a,O2:()=>s,QO:()=>l,Wv:()=>h,eg:()=>o});var r=n(1106),i="number, number";function s(e,t){if(!(0,r.YN)(e)||!(0,r.YN)(t))throw new Error("Integers expected in function bitAnd");return e&t}function a(e){if(!(0,r.YN)(e))throw new Error("Integer expected in function bitNot");return~e}function o(e,t){if(!(0,r.YN)(e)||!(0,r.YN)(t))throw new Error("Integers expected in function bitOr");return e|t}function c(e,t){if(!(0,r.YN)(e)||!(0,r.YN)(t))throw new Error("Integers expected in function bitXor");return e^t}function u(e,t){if(!(0,r.YN)(e)||!(0,r.YN)(t))throw new Error("Integers expected in function leftShift");return e<<t}function l(e,t){if(!(0,r.YN)(e)||!(0,r.YN)(t))throw new Error("Integers expected in function rightArithShift");return e>>t}function h(e,t){if(!(0,r.YN)(e)||!(0,r.YN)(t))throw new Error("Integers expected in function rightLogShift");return e>>>t}s.signature=i,a.signature="number",o.signature=i,c.signature=i,u.signature=i,l.signature=i,h.signature=i},6625:(e,t,n)=>{"use strict";n.d(t,{DC:()=>i,JX:()=>o,R_:()=>s,f6:()=>a});var r="number, number";function i(e){return!e}function s(e,t){return!(!e&&!t)}function a(e,t){return!!e!=!!t}function o(e,t){return!(!e||!t)}i.signature="number",s.signature=r,a.signature=r,o.signature=r},1389:(e,t,n)=>{"use strict";n.d(t,{VX:()=>s,gU:()=>o,lm:()=>p,mn:()=>c,n0:()=>a});var r=n(1106),i=n(924);function s(e){var t;if((0,r.YN)(e))return e<=0?isFinite(e)?1/0:NaN:e>171?1/0:(0,i.q)(1,e-1);if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*s(1-e));if(e>=171.35)return 1/0;if(e>85){var n=e*e,c=n*e,u=c*e,l=u*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*n)-139/(51840*c)-571/(2488320*u)+163879/(209018880*l)+5246819/(75246796800*l*e))}--e,t=o[0];for(var h=1;h<o.length;++h)t+=o[h]/(e+h);var p=e+a+.5;return Math.sqrt(2*Math.PI)*Math.pow(p,e+.5)*Math.exp(-p)*t}s.signature="number";var a=4.7421875,o=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],c=.9189385332046728,u=5,l=7,h=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function p(e){if(e<0)return NaN;if(0===e)return 1/0;if(!isFinite(e))return e;if(e<.5)return Math.log(Math.PI/Math.sin(Math.PI*e))-p(1-e);for(var t=(e-=1)+u+.5,n=h[0],r=l-1;r>=1;r--)n+=h[r]/(e+r);return c+(e+.5)*Math.log(t)-t+Math.log(n)}p.signature="number"},4975:(e,t,n)=>{"use strict";n.d(t,{BD:()=>a,E4:()=>c,Hy:()=>v,LD:()=>g,OT:()=>m,OU:()=>u,Pk:()=>p,RR:()=>x,Xx:()=>y,ie:()=>s,iu:()=>d,lh:()=>o,o:()=>h,rc:()=>b,wX:()=>f,yQ:()=>l});var r=n(1106),i="number";function s(e){return(0,r.Fq)(e)}function a(e){return Math.atan(1/e)}function o(e){return isFinite(e)?(Math.log((e+1)/e)+Math.log(e/(e-1)))/2:0}function c(e){return Math.asin(1/e)}function u(e){var t=1/e;return Math.log(t+Math.sqrt(t*t+1))}function l(e){return Math.acos(1/e)}function h(e){var t=1/e,n=Math.sqrt(t*t-1);return Math.log(n+t)}function p(e){return(0,r.yH)(e)}function d(e){return(0,r.rf)(e)}function f(e){return 1/Math.tan(e)}function m(e){var t=Math.exp(2*e);return(t+1)/(t-1)}function g(e){return 1/Math.sin(e)}function y(e){return 0===e?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(e)-Math.exp(-e)))*(0,r._S)(e)}function x(e){return 1/Math.cos(e)}function v(e){return 2/(Math.exp(e)+Math.exp(-e))}function b(e){return(0,r.L0)(e)}s.signature=i,a.signature=i,o.signature=i,c.signature=i,u.signature=i,l.signature=i,h.signature=i,p.signature=i,d.signature=i,f.signature=i,m.signature=i,g.signature=i,y.signature=i,x.signature=i,v.signature=i,b.signature=i},8183:(e,t,n)=>{"use strict";n.d(t,{F5:()=>s,Xo:()=>a,hD:()=>i}),n(1106);var r="number";function i(e){return e<0}function s(e){return e>0}function a(e){return Number.isNaN(e)}i.signature=r,s.signature=r,a.signature=r},7151:(e,t,n)=>{"use strict";n.d(t,{S:()=>a});var r=n(8321),i=n(6355),s=["typed"],a=(0,r.P9)("bigint",s,(e=>{var{typed:t}=e,n=t("bigint",{"":function(){return 0n},bigint:function(e){return e},number:function(e){return BigInt(e.toFixed())},BigNumber:function(e){return BigInt(e.round().toString())},Fraction:function(e){return BigInt(e.valueOf().toFixed())},"string | boolean":function(e){return BigInt(e)},null:function(e){return 0n},"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e)))});return n.fromJSON=function(e){return BigInt(e.value)},n}))},3557:(e,t,n)=>{"use strict";n.d(t,{g:()=>s});var r=n(6582),i=["?on","config"],s=(0,n(8321).P9)("BigNumber",i,(e=>{var{on:t,config:n}=e,i=r.A.clone({precision:n.precision,modulo:r.A.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(e){return new i(e.value)},t&&t("config",(function(e,t){e.precision!==t.precision&&i.config({precision:e.precision})})),i}),{isClass:!0})},1300:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var r=n(8321),i=n(6355),s=["typed","BigNumber"],a=(0,r.P9)("bignumber",s,(e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(e){return new n(e+"")},string:function(e){var t=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(t){var r=t[2],i=n(t[1]),s=new n(2).pow(Number(r));if(i.gt(s.sub(1)))throw new SyntaxError('String "'.concat(e,'" is out of range'));var a=new n(2).pow(Number(r)-1);return i.gte(a)?i.sub(s):i}return new n(e)},BigNumber:function(e){return e},bigint:function(e){return new n(e.toString())},Unit:t.referToSelf((e=>t=>{var n=t.clone();return n.value=e(t.value),n})),Fraction:function(e){return new n(e.n).div(e.d).times(e.s)},null:function(e){return new n(0)},"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e)))})}))},5870:(e,t,n)=>{"use strict";n.d(t,{p:()=>o});var r=n(8321),i=n(6355),s="boolean",a=["typed"],o=(0,r.P9)(s,a,(e=>{var{typed:t}=e;return t(s,{"":function(){return!1},boolean:function(e){return e},number:function(e){return!!e},null:function(e){return!1},BigNumber:function(e){return!e.isZero()},string:function(e){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;var n=Number(e);if(""!==e&&!isNaN(n))return!!n;throw new Error('Cannot convert "'+e+'" to a boolean')},"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e)))})}))},1653:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var r=n(4943),i=n(760),s=n(3140),a=["?on","math","typed"],o=(0,n(8321).P9)("Chain",a,(e=>{var{on:t,math:n,typed:a}=e;function o(e){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");(0,r.o_)(e)?this.value=e.value:this.value=e}function c(e,t){(0,s.RZ)(o.prototype,e,(function(){var e=t();if("function"==typeof e)return u(e)}))}function u(e){return function(){if(0===arguments.length)return new o(e(this.value));for(var t=[this.value],n=0;n<arguments.length;n++)t[n+1]=arguments[n];if(a.isTypedFunction(e)){var r=a.resolve(e,t);if(1===r.params.length)throw new Error("chain function "+e.name+" cannot match rest parameter between chain value and additional arguments.");return new o(r.implementation.apply(e,t))}return new o(e.apply(e,t))}}o.prototype.type="Chain",o.prototype.isChain=!0,o.prototype.done=function(){return this.value},o.prototype.valueOf=function(){return this.value},o.prototype.toString=function(){return(0,i.GP)(this.value)},o.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},o.fromJSON=function(e){return new o(e.value)},o.createProxy=function(e,t){if("string"==typeof e)i=e,"function"==typeof(a=t)&&(o.prototype[i]=u(a));else{var n=function(t){(0,s.mQ)(e,t)&&void 0===l[t]&&c(t,(()=>e[t]))};for(var r in e)n(r)}var i,a};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return o.createProxy(n),t&&t("import",(function(e,t,n){n||c(e,t)})),o}),{isClass:!0})},624:(e,t,n)=>{"use strict";n.d(t,{U:()=>a});var r=n(8321),i="chain",s=["typed","Chain"],a=(0,r.P9)(i,s,(e=>{var{typed:t,Chain:n}=e;return t(i,{"":function(){return new n},any:function(e){return new n(e)}})}))},1289:(e,t,n)=>{"use strict";n.d(t,{z:()=>o});var r=n(5716),i=n(1106),s=n(4943),a=[],o=(0,n(8321).P9)("Complex",a,(()=>(Object.defineProperty(r,"name",{value:"Complex"}),r.prototype.constructor=r,r.prototype.type="Complex",r.prototype.isComplex=!0,r.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},r.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},r.prototype.format=function(e){var t=this.im,n=this.re,r=(0,i.GP)(this.re,e),a=(0,i.GP)(this.im,e),o=(0,s.Et)(e)?e:e?e.precision:null;if(null!==o){var c=Math.pow(10,-o);Math.abs(n/t)<c&&(n=0),Math.abs(t/n)<c&&(t=0)}return 0===t?r:0===n?1===t?"i":-1===t?"-i":a+"i":t<0?-1===t?r+" - i":r+" - "+a.substring(1)+"i":1===t?r+" + i":r+" + "+a+"i"},r.fromPolar=function(e){switch(arguments.length){case 1:var t=arguments[0];if("object"==typeof t)return r(t);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],i=arguments[1];if((0,s.Et)(n)){if((0,s.vO)(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),(0,s.Et)(i))return new r({r:n,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},r.prototype.valueOf=r.prototype.toString,r.fromJSON=function(e){return new r(e)},r.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},r)),{isClass:!0})},174:(e,t,n)=>{"use strict";n.d(t,{X:()=>a});var r=n(8321),i=n(6355),s=["typed","Complex"],a=(0,r.P9)("complex",s,(e=>{var{typed:t,Complex:n}=e;return t("complex",{"":function(){return n.ZERO},number:function(e){return new n(e,0)},"number, number":function(e,t){return new n(e,t)},"BigNumber, BigNumber":function(e,t){return new n(e.toNumber(),t.toNumber())},Fraction:function(e){return new n(e.valueOf(),0)},Complex:function(e){return e.clone()},string:function(e){return n(e)},null:function(e){return n(0)},Object:function(e){if("re"in e&&"im"in e)return new n(e.re,e.im);if("r"in e&&"phi"in e||"abs"in e&&"arg"in e)return new n(e);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e)))})}))},395:(e,t,n)=>{"use strict";n.d(t,{z:()=>f});var r={s:1,n:0,d:1};function i(e,t){if(isNaN(e=parseInt(e,10)))throw h();return e*t}function s(e,t){if(0===t)throw l();var n=Object.create(u.prototype);n.s=e<0?-1:1;var r=c(e=e<0?-e:e,t);return n.n=e/r,n.d=t/r,n}function a(e){for(var t={},n=e,r=2,i=4;i<=n;){for(;n%r==0;)n/=r,t[r]=(t[r]||0)+1;i+=1+2*r++}return n!==e?n>1&&(t[n]=(t[n]||0)+1):t[e]=(t[e]||0)+1,t}var o=function(e,t){var n,s=0,a=1,o=1,c=0,u=0,d=0,f=1,m=1,g=0,y=1,x=1,v=1,b=1e7;if(null==e);else if(void 0!==t){if(o=(s=e)*(a=t),s%1!=0||a%1!=0)throw p()}else switch(typeof e){case"object":if("d"in e&&"n"in e)s=e.n,a=e.d,"s"in e&&(s*=e.s);else{if(!(0 in e))throw h();s=e[0],1 in e&&(a=e[1])}o=s*a;break;case"number":if(e<0&&(o=e,e=-e),e%1==0)s=e;else if(e>0){for(e>=1&&(e/=m=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));y<=b&&v<=b;){if(e===(n=(g+x)/(y+v))){y+v<=b?(s=g+x,a=y+v):v>y?(s=x,a=v):(s=g,a=y);break}e>n?(g+=x,y+=v):(x+=g,v+=y),y>b?(s=x,a=v):(s=g,a=y)}s*=m}else(isNaN(e)||isNaN(t))&&(a=s=NaN);break;case"string":if(null===(y=e.match(/\d+|./g)))throw h();if("-"===y[g]?(o=-1,g++):"+"===y[g]&&g++,y.length===g+1?u=i(y[g++],o):"."===y[g+1]||"."===y[g]?("."!==y[g]&&(c=i(y[g++],o)),(1+ ++g===y.length||"("===y[g+1]&&")"===y[g+3]||"'"===y[g+1]&&"'"===y[g+3])&&(u=i(y[g],o),f=Math.pow(10,y[g].length),g++),("("===y[g]&&")"===y[g+2]||"'"===y[g]&&"'"===y[g+2])&&(d=i(y[g+1],o),m=Math.pow(10,y[g+1].length)-1,g+=3)):"/"===y[g+1]||":"===y[g+1]?(u=i(y[g],o),f=i(y[g+2],1),g+=3):"/"===y[g+3]&&" "===y[g+1]&&(c=i(y[g],o),u=i(y[g+2],o),f=i(y[g+4],1),g+=5),y.length<=g){o=s=d+(a=f*m)*c+m*u;break}default:throw h()}if(0===a)throw l();r.s=o<0?-1:1,r.n=Math.abs(s),r.d=Math.abs(a)};function c(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function u(e,t){if(o(e,t),!(this instanceof u))return s(r.s*r.n,r.d);e=c(r.d,r.n),this.s=r.s,this.n=r.n/e,this.d=r.d/e}var l=function(){return new Error("Division by Zero")},h=function(){return new Error("Invalid argument")},p=function(){return new Error("Parameters must be integer")};u.prototype={s:1,n:0,d:1,abs:function(){return s(this.n,this.d)},neg:function(){return s(-this.s*this.n,this.d)},add:function(e,t){return o(e,t),s(this.s*this.n*r.d+r.s*this.d*r.n,this.d*r.d)},sub:function(e,t){return o(e,t),s(this.s*this.n*r.d-r.s*this.d*r.n,this.d*r.d)},mul:function(e,t){return o(e,t),s(this.s*r.s*this.n*r.n,this.d*r.d)},div:function(e,t){return o(e,t),s(this.s*r.s*this.n*r.d,this.d*r.n)},clone:function(){return s(this.s*this.n,this.d)},mod:function(e,t){if(isNaN(this.n)||isNaN(this.d))return new u(NaN);if(void 0===e)return s(this.s*this.n%this.d,1);if(o(e,t),0===r.n&&0===this.d)throw l();return s(this.s*(r.d*this.n)%(r.n*this.d),r.d*this.d)},gcd:function(e,t){return o(e,t),s(c(r.n,this.n)*c(r.d,this.d),r.d*this.d)},lcm:function(e,t){return o(e,t),0===r.n&&0===this.n?s(0,1):s(r.n*this.n,c(r.n,this.n)*c(r.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new u(NaN):s(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new u(NaN):s(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new u(NaN):s(Math.round(e*this.s*this.n/this.d),e)},roundTo:function(e,t){return o(e,t),s(this.s*Math.round(this.n*r.d/(this.d*r.n))*r.n,r.d)},inverse:function(){return s(this.s*this.d,this.n)},pow:function(e,t){if(o(e,t),1===r.d)return r.s<0?s(Math.pow(this.s*this.d,r.n),Math.pow(this.n,r.n)):s(Math.pow(this.s*this.n,r.n),Math.pow(this.d,r.n));if(this.s<0)return null;var n=a(this.n),i=a(this.d),c=1,u=1;for(var l in n)if("1"!==l){if("0"===l){c=0;break}if(n[l]*=r.n,n[l]%r.d!=0)return null;n[l]/=r.d,c*=Math.pow(l,n[l])}for(var l in i)if("1"!==l){if(i[l]*=r.n,i[l]%r.d!=0)return null;i[l]/=r.d,u*=Math.pow(l,i[l])}return r.s<0?s(u,c):s(c,u)},equals:function(e,t){return o(e,t),this.s*this.n*r.d==r.s*r.n*this.d},compare:function(e,t){o(e,t);var n=this.s*this.n*r.d-r.s*r.n*this.d;return(0<n)-(n<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;e=e||.001;for(var t=this.abs(),n=t.toContinued(),r=1;r<n.length;r++){for(var i=s(n[r-1],1),a=r-2;a>=0;a--)i=i.inverse().add(n[a]);if(Math.abs(i.sub(t).valueOf())<e)return i.mul(this.s)}return this},divisible:function(e,t){return o(e,t),!(!(r.n*this.d)||this.n*r.d%(r.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,n+=" ",r%=i),n+=r,n+="/",n+=i),n},toLatex:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,r%=i),n+="\\frac{",n+=r,n+="}{",n+=i,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,r=[];if(isNaN(t)||isNaN(n))return r;do{r.push(Math.floor(t/n)),e=t%n,t=n,n=e}while(1!==t);return r},toString:function(e){var t=this.n,n=this.d;if(isNaN(t)||isNaN(n))return"NaN";e=e||15;var r=function(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var n=10%t,r=1;1!==n;r++)if(n=10*n%t,r>2e3)return 0;return r}(0,n),i=function(e,t,n){for(var r=1,i=function(e,t,n){for(var r=1;t>0;e=e*e%n,t>>=1)1&t&&(r=r*e%n);return r}(10,n,t),s=0;s<300;s++){if(r===i)return s;r=10*r%t,i=10*i%t}return 0}(0,n,r),s=this.s<0?"-":"";if(s+=t/n|0,t%=n,(t*=10)&&(s+="."),r){for(var a=i;a--;)s+=t/n|0,t%=n,t*=10;for(s+="(",a=r;a--;)s+=t/n|0,t%=n,t*=10;s+=")"}else for(a=e;t&&a--;)s+=t/n|0,t%=n,t*=10;return s}};var d=[],f=(0,n(8321).P9)("Fraction",d,(()=>(Object.defineProperty(u,"name",{value:"Fraction"}),u.prototype.constructor=u,u.prototype.type="Fraction",u.prototype.isFraction=!0,u.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},u.fromJSON=function(e){return new u(e)},u)),{isClass:!0})},5654:(e,t,n)=>{"use strict";n.d(t,{l:()=>a});var r=n(8321),i=n(6355),s=["typed","Fraction"],a=(0,r.P9)("fraction",s,(e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new n(e)},string:function(e){return new n(e)},"number, number":function(e,t){return new n(e,t)},null:function(e){return new n(0)},BigNumber:function(e){return new n(e.toString())},bigint:function(e){return new n(e.toString())},Fraction:function(e){return e},Unit:t.referToSelf((e=>t=>{var n=t.clone();return n.value=e(t.value),n})),Object:function(e){return new n(e)},"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e)))})}))},5520:(e,t,n)=>{"use strict";n.d(t,{j:()=>p});var r=n(4943),i=n(5838),s=n(760),a=n(1106),o=n(3140),c=n(1380),u=n(8321),l=n(6383),h=["Matrix"],p=(0,u.P9)("DenseMatrix",h,(e=>{var{Matrix:t}=e;function n(e,t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!(0,r.Kg)(t))throw new Error("Invalid datatype: "+t);if((0,r.OA)(e))"DenseMatrix"===e.type?(this._data=(0,o.o8)(e._data),this._size=(0,o.o8)(e._size),this._datatype=t||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=t||e._datatype);else if(e&&(0,r.cy)(e.data)&&(0,r.cy)(e.size))this._data=e.data,this._size=e.size,(0,i.tf)(this._data,this._size),this._datatype=t||e.datatype;else if((0,r.cy)(e))this._data=f(e),this._size=(0,i.LO)(this._data),(0,i.tf)(this._data,this._size),this._datatype=t;else{if(e)throw new TypeError("Unsupported type of data ("+(0,r.QP)(e)+")");this._data=[],this._size=[0],this._datatype=t}}function u(e,t,n,r){var s=r===n-1,a=t.dimension(r);return s?a.map((function(t){return(0,i.r7)(t,e.length),e[t]})).valueOf():a.map((function(s){return(0,i.r7)(s,e.length),u(e[s],t,n,r+1)})).valueOf()}function h(e,t,n,r,s){var a=s===r-1,o=t.dimension(s);a?o.forEach((function(t,r){(0,i.r7)(t),e[t]=n[r[0]]})):o.forEach((function(a,o){(0,i.r7)(a),h(e[a],t,n[o[0]],r,s+1)}))}function p(e,t,n){if(0===t.length){for(var s=e._data;(0,r.cy)(s);)s=s[0];return s}return e._size=t.slice(0),e._data=(0,i.XR)(e._data,e._size,n),e}function d(e,t,n){for(var r=e._size.slice(0),i=!1;r.length<t.length;)r.push(0),i=!0;for(var s=0,a=t.length;s<a;s++)t[s]>r[s]&&(r[s]=t[s],i=!0);i&&p(e,r,n)}function f(e){return(0,r.OA)(e)?f(e.valueOf()):(0,r.cy)(e)?e.map(f):e}return n.prototype=new t,n.prototype.createDenseMatrix=function(e,t){return new n(e,t)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return(0,i.ig)(this._data,r.QP)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(e,t){return new n(e,t)},n.prototype.subset=function(e,t,s){switch(arguments.length){case 1:return function(e,t){if(!(0,r.nw)(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var s=t.size();if(s.length!==e._size.length)throw new c.h(s.length,e._size.length);for(var a=t.min(),o=t.max(),l=0,h=e._size.length;l<h;l++)(0,i.r7)(a[l],e._size[l]),(0,i.r7)(o[l],e._size[l]);return new n(u(e._data,t,s.length,0),e._datatype)}(this,e);case 2:case 3:return function(e,t,n,s){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var a,u=t.size(),l=t.isScalar();if((0,r.OA)(n)?(a=n.size(),n=n.valueOf()):a=(0,i.LO)(n),l){if(0!==a.length)throw new TypeError("Scalar expected");e.set(t.min(),n,s)}else{if(!(0,o.QO)(a,u))try{n=0===a.length?(0,i.hO)([n],u):(0,i.hO)(n,u),a=(0,i.LO)(n)}catch(e){}if(u.length<e._size.length)throw new c.h(u.length,e._size.length,"<");if(a.length<u.length){for(var p=0,f=0;1===u[p]&&1===a[p];)p++;for(;1===u[p];)f++,p++;n=(0,i.iD)(n,u.length,f,a)}if(!(0,o.QO)(u,a))throw new c.h(u,a,">");var m=t.max().map((function(e){return e+1}));d(e,m,s);var g=u.length;h(e._data,t,n,g,0)}return e}(this,e,t,s);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(e){return(0,i.Jt)(this._data,e)},n.prototype.set=function(e,t,n){if(!(0,r.cy)(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new c.h(e.length,this._size.length,"<");var s,a,o,u=e.map((function(e){return e+1}));d(this,u,n);var l=this._data;for(s=0,a=e.length-1;s<a;s++)o=e[s],(0,i.r7)(o,l.length),l=l[o];return o=e[e.length-1],(0,i.r7)(o,l.length),l[o]=t,this},n.prototype.resize=function(e,t,n){if(!(0,r.P3)(e))throw new TypeError("Array or Matrix expected");var i=e.valueOf().map((e=>Array.isArray(e)&&1===e.length?e[0]:e));return p(n?this.clone():this,i,t)},n.prototype.reshape=function(e,t){var n=t?this.clone():this;n._data=(0,i.tQ)(n._data,e);var r=n._size.reduce(((e,t)=>e*t));return n._size=(0,i.cs)(e,r),n},n.prototype.clone=function(){return new n({data:(0,o.o8)(this._data),size:(0,o.o8)(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype._forEach=function(e){var t=this,n=t.size();if(1!==n.length){var r=Array(n.length).fill(0),i=Array(n.length-1),s=i.length-1;i[0]=t._data[0];for(var a=0;a<s;a++)i[a+1]=i[a][0];for(r[s]=-1;;){var o=void 0;for(o=s;o>=0;o--){if(r[o]++,r[o]!==n[o]){i[o]=0===o?t._data[r[o]]:i[o-1][r[o]];for(var c=o;c<s;c++)i[c+1]=i[c][0];for(var u=0;u<n[i.length];u++)r[i.length]=u,e(i[s],u,r.slice(0));break}r[o]=0}if(-1===o)break}}else for(var l=0;l<n[0];l++)e(t._data,l,[l])},n.prototype.map=function(e){var t=this,r=new n(t),i=(0,l.r)(e,t._data,"map");return r._forEach((function(e,n,r){e[n]=i(e[n],r,t)})),r},n.prototype.forEach=function(e){var t=this,n=(0,l.r)(e,t._data,"map");t._forEach((function(e,r,i){n(e[r],i,t)}))},n.prototype[Symbol.iterator]=function*(){var e=function*(t,n){if((0,r.cy)(t))for(var i=0;i<t.length;i++)yield*e(t[i],n.concat(i));else yield{value:t,index:n}};yield*e(this._data,[])},n.prototype.rows=function(){var e=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var t=this._data;for(var r of t)e.push(new n([r],this._datatype));return e},n.prototype.columns=function(){var e=this,t=[],r=this.size();if(2!==r.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var i=this._data,s=function(r){var s=i.map((e=>[e[r]]));t.push(new n(s,e._datatype))},a=0;a<r[1];a++)s(a);return t},n.prototype.toArray=function(){return(0,o.o8)(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(e){return(0,s.GP)(this._data,e)},n.prototype.toString=function(){return(0,s.GP)(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(e){if(e){if((0,r.C4)(e)&&(e=e.toNumber()),!(0,r.Et)(e)||!(0,a.YN)(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var t=e>0?e:0,i=e<0?-e:0,s=this._size[0],o=this._size[1],c=Math.min(s-i,o-t),u=[],l=0;l<c;l++)u[l]=this._data[l+i][l+t];return new n({data:u,size:[c],datatype:this._datatype})},n.diagonal=function(e,t,s,o){if(!(0,r.cy)(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if((0,r.C4)(e)&&(e=e.toNumber()),!(0,r.Et)(e)||!(0,a.YN)(e)||e<1)throw new Error("Size values must be positive integers");return e})),s){if((0,r.C4)(s)&&(s=s.toNumber()),!(0,r.Et)(s)||!(0,a.YN)(s))throw new TypeError("The parameter k must be an integer number")}else s=0;var c,u=s>0?s:0,l=s<0?-s:0,h=e[0],p=e[1],d=Math.min(h-l,p-u);if((0,r.cy)(t)){if(t.length!==d)throw new Error("Invalid value array length");c=function(e){return t[e]}}else if((0,r.OA)(t)){var f=t.size();if(1!==f.length||f[0]!==d)throw new Error("Invalid matrix length");c=function(e){return t.get([e])}}else c=function(){return t};o||(o=(0,r.C4)(c(0))?c(0).mul(0):0);var m=[];if(e.length>0){m=(0,i.XR)(m,e,o);for(var g=0;g<d;g++)m[g+l][g+u]=c(g)}return new n({data:m,size:[h,p]})},n.fromJSON=function(e){return new n(e)},n.prototype.swapRows=function(e,t){if(!((0,r.Et)(e)&&(0,a.YN)(e)&&(0,r.Et)(t)&&(0,a.YN)(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return(0,i.r7)(e,this._size[0]),(0,i.r7)(t,this._size[0]),n._swapRows(e,t,this._data),this},n._swapRows=function(e,t,n){var r=n[e];n[e]=n[t],n[t]=r},n}),{isClass:!0})},7648:(e,t,n)=>{"use strict";n.d(t,{B:()=>i});var r=["smaller","larger"],i=(0,n(8321).P9)("FibonacciHeap",r,(e=>{var{smaller:t,larger:n}=e,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function s(e,t,n){t.left.right=t.right,t.right.left=t.left,n.degree--,n.child===t&&(n.child=t.right),0===n.degree&&(n.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1}function a(e,t){var n=t.parent;n&&(t.mark?(s(e,t,n),a(n)):t.mark=!0)}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(e,n){var r={key:e,value:n,degree:0};if(this._minimum){var i=this._minimum;r.left=i,r.right=i.right,i.right=r,r.right.left=r,t(e,i.key)&&(this._minimum=r)}else r.left=r,r.right=r,this._minimum=r;return this._size++,r},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return 0===this._size},i.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var i=this._minimum,s=e.degree,a=e.child;s>0;){var c=a.right;a.left.right=a.right,a.right.left=a.left,a.left=i,a.right=i.right,i.right=a,a.right.left=a,a.parent=null,a=c,s--}return e.left.right=e.right,e.right.left=e.left,i=e===e.right?null:function(e,i){var s,a=Math.floor(Math.log(i)*r)+1,c=new Array(a),u=0,l=e;if(l)for(u++,l=l.right;l!==e;)u++,l=l.right;for(;u>0;){for(var h=l.degree,p=l.right;s=c[h];){if(n(l.key,s.key)){var d=s;s=l,l=d}o(s,l),c[h]=null,h++}c[h]=l,l=p,u--}e=null;for(var f=0;f<a;f++)(s=c[f])&&(e?(s.left.right=s.right,s.right.left=s.left,s.left=e,s.right=e.right,e.right=s,s.right.left=s,t(s.key,e.key)&&(e=s)):e=s);return e}(i=e.right,this._size),this._size--,this._minimum=i,e},i.prototype.remove=function(e){this._minimum=function(e,n){n.key=-1;var r=n.parent;return r&&t(n.key,r.key)&&(s(e,n,r),a(e,r)),t(n.key,e.key)&&(e=n),e}(this._minimum,e),this.extractMinimum()};var o=function(e,t){e.left.right=e.right,e.right.left=e.left,e.parent=t,t.child?(e.left=t.child,e.right=t.child.right,t.child.right=e,e.right.left=e):(t.child=e,e.right=e,e.left=e),t.degree++,e.mark=!1};return i}),{isClass:!0})},2854:(e,t,n)=>{"use strict";n.d(t,{r:()=>a});var r=n(4943),i=n(3140),s=["smaller","DenseMatrix"],a=(0,n(8321).P9)("ImmutableDenseMatrix",s,(e=>{var{smaller:t,DenseMatrix:n}=e;function s(e,t){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!(0,r.Kg)(t))throw new Error("Invalid datatype: "+t);if((0,r.OA)(e)||(0,r.cy)(e)){var i=new n(e,t);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(e&&(0,r.cy)(e.data)&&(0,r.cy)(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min=void 0!==e.min?e.min:null,this._max=void 0!==e.max?e.max:null;else{if(e)throw new TypeError("Unsupported type of data ("+(0,r.QP)(e)+")");this._data=[],this._size=[0],this._datatype=t,this._min=null,this._max=null}}return s.prototype=new n,s.prototype.type="ImmutableDenseMatrix",s.prototype.isImmutableDenseMatrix=!0,s.prototype.subset=function(e){switch(arguments.length){case 1:var t=n.prototype.subset.call(this,e);return(0,r.OA)(t)?new s({data:t._data,size:t._size,datatype:t._datatype}):t;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},s.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},s.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},s.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},s.prototype.clone=function(){return new s({data:(0,i.o8)(this._data),size:(0,i.o8)(this._size),datatype:this._datatype})},s.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},s.fromJSON=function(e){return new s(e)},s.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},s.prototype.min=function(){if(null===this._min){var e=null;this.forEach((function(n){(null===e||t(n,e))&&(e=n)})),this._min=null!==e?e:void 0}return this._min},s.prototype.max=function(){if(null===this._max){var e=null;this.forEach((function(n){(null===e||t(e,n))&&(e=n)})),this._max=null!==e?e:void 0}return this._max},s}),{isClass:!0})},2205:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var r=[],i=(0,n(8321).P9)("Matrix",r,(()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e}),{isClass:!0})},8873:(e,t,n)=>{"use strict";n.d(t,{T:()=>o});var r=n(4943),i=n(3140),s=n(1106),a=["ImmutableDenseMatrix","getMatrixDataType"],o=(0,n(8321).P9)("Index",a,(e=>{var{ImmutableDenseMatrix:t,getMatrixDataType:n}=e;function a(e){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var t=0,i=arguments.length;t<i;t++){var s=arguments[t],u=(0,r.cy)(s),l=(0,r.OA)(s),h=null;if((0,r._Z)(s))this._dimensions.push(s),this._isScalar=!1;else if(u||l){var p=void 0;"boolean"===n(s)?(u&&(p=o(c(s).valueOf())),l&&(p=o(c(s._data).valueOf())),h=s.valueOf().length):p=o(s.valueOf()),this._dimensions.push(p);var d=p.size();1===d.length&&1===d[0]&&null===h||(this._isScalar=!1)}else if("number"==typeof s)this._dimensions.push(o([s]));else{if("string"!=typeof s)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(s)}this._sourceSize.push(h)}}function o(e){for(var n=0,r=e.length;n<r;n++)if("number"!=typeof e[n]||!(0,s.YN)(e[n]))throw new TypeError("Index parameters must be positive integer numbers");return new t(e)}return a.prototype.type="Index",a.prototype.isIndex=!0,a.prototype.clone=function(){var e=new a;return e._dimensions=(0,i.o8)(this._dimensions),e._isScalar=this._isScalar,e._sourceSize=this._sourceSize,e},a.create=function(e){var t=new a;return a.apply(t,e),t},a.prototype.size=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?1:r.size()[0]}return e},a.prototype.max=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?r:r.max()}return e},a.prototype.min=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?r:r.min()}return e},a.prototype.forEach=function(e){for(var t=0,n=this._dimensions.length;t<n;t++)e(this._dimensions[t],t,this)},a.prototype.dimension=function(e){return this._dimensions[e]||null},a.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},a.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},a.prototype.isScalar=function(){return this._isScalar},a.prototype.toArray=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e.push("string"==typeof r?r:r.toArray())}return e},a.prototype.valueOf=a.prototype.toArray,a.prototype.toString=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];"string"==typeof r?e.push(JSON.stringify(r)):e.push(r.toString())}return"["+e.join(", ")+"]"},a.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},a.fromJSON=function(e){return a.create(e.dimensions)},a}),{isClass:!0});function c(e){var t=[];return e.forEach(((e,n)=>{e&&t.push(n)})),t}},7251:(e,t,n)=>{"use strict";n.d(t,{U:()=>a});var r=n(4943),i=n(1106),s=[],a=(0,n(8321).P9)("Range",s,(()=>{function e(t,n,i){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");var s=null!=t,a=null!=n,o=null!=i;if(s)if((0,r.C4)(t))t=t.toNumber();else if("number"!=typeof t)throw new TypeError("Parameter start must be a number");if(a)if((0,r.C4)(n))n=n.toNumber();else if("number"!=typeof n)throw new TypeError("Parameter end must be a number");if(o)if((0,r.C4)(i))i=i.toNumber();else if("number"!=typeof i)throw new TypeError("Parameter step must be a number");this.start=s?parseFloat(t):0,this.end=a?parseFloat(n):0,this.step=o?parseFloat(i):1}return e.prototype.type="Range",e.prototype.isRange=!0,e.parse=function(t){if("string"!=typeof t)return null;var n=t.split(":").map((function(e){return parseFloat(e)}));if(n.some((function(e){return isNaN(e)})))return null;switch(n.length){case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[2],n[1]);default:return null}},e.prototype.clone=function(){return new e(this.start,this.end,this.step)},e.prototype.size=function(){var e=0,t=this.start,n=this.step,r=this.end-t;return(0,i._S)(n)===(0,i._S)(r)?e=Math.ceil(r/n):0===r&&(e=0),isNaN(e)&&(e=0),[e]},e.prototype.min=function(){var e=this.size()[0];return e>0?this.step>0?this.start:this.start+(e-1)*this.step:void 0},e.prototype.max=function(){var e=this.size()[0];return e>0?this.step>0?this.start+(e-1)*this.step:this.start:void 0},e.prototype.forEach=function(e){var t=this.start,n=this.step,r=this.end,i=0;if(n>0)for(;t<r;)e(t,[i],this),t+=n,i++;else if(n<0)for(;t>r;)e(t,[i],this),t+=n,i++},e.prototype.map=function(e){var t=[];return this.forEach((function(n,r,i){t[r[0]]=e(n,r,i)})),t},e.prototype.toArray=function(){var e=[];return this.forEach((function(t,n){e[n[0]]=t})),e},e.prototype.valueOf=function(){return this.toArray()},e.prototype.format=function(e){var t=(0,i.GP)(this.start,e);return 1!==this.step&&(t+=":"+(0,i.GP)(this.step,e)),t+":"+(0,i.GP)(this.end,e)},e.prototype.toString=function(){return this.format()},e.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},e.fromJSON=function(t){return new e(t.start,t.end,t.step)},e}),{isClass:!0})},628:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=["addScalar","equalScalar","FibonacciHeap"],i=(0,n(8321).P9)("Spa",r,(e=>{var{addScalar:t,equalScalar:n,FibonacciHeap:r}=e;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var n=this._heap.insert(e,t);this._values[e]=n}},i.prototype.get=function(e){var t=this._values[e];return t?t.value:0},i.prototype.accumulate=function(e,n){var r=this._values[e];r?r.value=t(r.value,n):(r=this._heap.insert(e,n),this._values[e]=r)},i.prototype.forEach=function(e,t,r){var i=this._heap,s=this._values,a=[],o=i.extractMinimum();for(o&&a.push(o);o&&o.key<=t;)o.key>=e&&(n(o.value,0)||r(o.key,o.value,this)),(o=i.extractMinimum())&&a.push(o);for(var c=0;c<a.length;c++){var u=a[c];s[(o=i.insert(u.key,u.value)).key]=o}},i.prototype.swap=function(e,t){var n=this._values[e],r=this._values[t];if(!n&&r)n=this._heap.insert(e,r.value),this._heap.remove(r),this._values[e]=n,this._values[t]=void 0;else if(n&&!r)r=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=r,this._values[e]=void 0;else if(n&&r){var i=n.value;n.value=r.value,r.value=i}},i}),{isClass:!0})},8801:(e,t,n)=>{"use strict";n.d(t,{g:()=>p});var r=n(4943),i=n(1106),s=n(760),a=n(3140),o=n(5838),c=n(8321),u=n(1380),l=n(6383),h=["typed","equalScalar","Matrix"],p=(0,c.P9)("SparseMatrix",h,(e=>{var{typed:t,equalScalar:n,Matrix:c}=e;function h(e,t){if(!(this instanceof h))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!(0,r.Kg)(t))throw new Error("Invalid datatype: "+t);if((0,r.OA)(e))!function(e,t,n){"SparseMatrix"===t.type?(e._values=t._values?(0,a.o8)(t._values):void 0,e._index=(0,a.o8)(t._index),e._ptr=(0,a.o8)(t._ptr),e._size=(0,a.o8)(t._size),e._datatype=n||t._datatype):p(e,t.valueOf(),n||t._datatype)}(this,e,t);else if(e&&(0,r.cy)(e.index)&&(0,r.cy)(e.ptr)&&(0,r.cy)(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if((0,r.cy)(e))p(this,e,t);else{if(e)throw new TypeError("Unsupported type of data ("+(0,r.QP)(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t}}function p(e,i,s){e._values=[],e._index=[],e._ptr=[],e._datatype=s;var a=i.length,o=0,c=n,u=0;if((0,r.Kg)(s)&&(c=t.find(n,[s,s])||n,u=t.convert(0,s)),a>0){var l=0;do{e._ptr.push(e._index.length);for(var h=0;h<a;h++){var p=i[h];if((0,r.cy)(p)){if(0===l&&o<p.length&&(o=p.length),l<p.length){var d=p[l];c(d,u)||(e._values.push(d),e._index.push(h))}}else 0===l&&o<1&&(o=1),c(p,u)||(e._values.push(p),e._index.push(h))}l++}while(l<o)}e._ptr.push(e._index.length),e._size=[a,o]}function d(e,t,n,r){if(n-t==0)return n;for(var i=t;i<n;i++)if(r[i]===e)return i;return t}function f(e,t,n,r,i,s,a){i.splice(e,0,r),s.splice(e,0,t);for(var o=n+1;o<a.length;o++)a[o]++}function m(e,i,s,a){var o=a||0,c=n,u=0;(0,r.Kg)(e._datatype)&&(c=t.find(n,[e._datatype,e._datatype])||n,u=t.convert(0,e._datatype),o=t.convert(o,e._datatype));var l,h,p,d=!c(o,u),f=e._size[0],m=e._size[1];if(s>m){for(h=m;h<s;h++)if(e._ptr[h]=e._values.length,d)for(l=0;l<f;l++)e._values.push(o),e._index.push(l);e._ptr[s]=e._values.length}else s<m&&(e._ptr.splice(s+1,m-s),e._values.splice(e._ptr[s],e._values.length),e._index.splice(e._ptr[s],e._index.length));if(m=s,i>f){if(d){var g=0;for(h=0;h<m;h++){e._ptr[h]=e._ptr[h]+g,p=e._ptr[h+1]+g;var y=0;for(l=f;l<i;l++,y++)e._values.splice(p+y,0,o),e._index.splice(p+y,0,l),g++}e._ptr[m]=e._values.length}}else if(i<f){var x=0;for(h=0;h<m;h++){e._ptr[h]=e._ptr[h]-x;var v=e._ptr[h],b=e._ptr[h+1]-x;for(p=v;p<b;p++)(l=e._index[p])>i-1&&(e._values.splice(p,1),e._index.splice(p,1),x++)}e._ptr[h]=e._values.length}return e._size[0]=i,e._size[1]=s,e}function g(e,t,n,r,i){var s,o,c=r[0],u=r[1],l=[];for(s=0;s<c;s++)for(l[s]=[],o=0;o<u;o++)l[s][o]=0;for(o=0;o<u;o++)for(var h=n[o],p=n[o+1],d=h;d<p;d++)l[s=t[d]][o]=e?i?(0,a.o8)(e[d]):e[d]:1;return l}return h.prototype=new c,h.prototype.createSparseMatrix=function(e,t){return new h(e,t)},Object.defineProperty(h,"name",{value:"SparseMatrix"}),h.prototype.constructor=h,h.prototype.type="SparseMatrix",h.prototype.isSparseMatrix=!0,h.prototype.getDataType=function(){return(0,o.ig)(this._values,r.QP)},h.prototype.storage=function(){return"sparse"},h.prototype.datatype=function(){return this._datatype},h.prototype.create=function(e,t){return new h(e,t)},h.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},h.prototype.subset=function(e,t,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function(e,t){if(!(0,r.nw)(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var n,i,s,a,c=t.size();if(c.length!==e._size.length)throw new u.h(c.length,e._size.length);var l=t.min(),p=t.max();for(n=0,i=e._size.length;n<i;n++)(0,o.r7)(l[n],e._size[n]),(0,o.r7)(p[n],e._size[n]);var d=e._values,f=e._index,m=e._ptr,g=t.dimension(0),y=t.dimension(1),x=[],v=[];g.forEach((function(e,t){v[e]=t[0],x[e]=!0}));var b=d?[]:void 0,D=[],w=[];return y.forEach((function(e){for(w.push(D.length),s=m[e],a=m[e+1];s<a;s++)n=f[s],!0===x[n]&&(D.push(v[n]),b&&b.push(d[s]))})),w.push(D.length),new h({values:b,index:D,ptr:w,size:c,datatype:e._datatype})}(this,e);case 2:case 3:return function(e,t,n,i){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var s,c=t.size(),l=t.isScalar();if((0,r.OA)(n)?(s=n.size(),n=n.toArray()):s=(0,o.LO)(n),l){if(0!==s.length)throw new TypeError("Scalar expected");e.set(t.min(),n,i)}else{if(1!==c.length&&2!==c.length)throw new u.h(c.length,e._size.length,"<");if(s.length<c.length){for(var h=0,p=0;1===c[h]&&1===s[h];)h++;for(;1===c[h];)p++,h++;n=(0,o.iD)(n,c.length,p,s)}if(!(0,a.QO)(c,s))throw new u.h(c,s,">");if(1===c.length)t.dimension(0).forEach((function(t,r){(0,o.r7)(t),e.set([t,0],n[r[0]],i)}));else{var d=t.dimension(0),f=t.dimension(1);d.forEach((function(t,r){(0,o.r7)(t),f.forEach((function(s,a){(0,o.r7)(s),e.set([t,s],n[r[0]][a[0]],i)}))}))}}return e}(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},h.prototype.get=function(e){if(!(0,r.cy)(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new u.h(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],n=e[1];(0,o.r7)(t,this._size[0]),(0,o.r7)(n,this._size[1]);var i=d(t,this._ptr[n],this._ptr[n+1],this._index);return i<this._ptr[n+1]&&this._index[i]===t?this._values[i]:0},h.prototype.set=function(e,i,s){if(!(0,r.cy)(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new u.h(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var a=e[0],c=e[1],l=this._size[0],h=this._size[1],p=n,g=0;(0,r.Kg)(this._datatype)&&(p=t.find(n,[this._datatype,this._datatype])||n,g=t.convert(0,this._datatype)),(a>l-1||c>h-1)&&(m(this,Math.max(a+1,l),Math.max(c+1,h),s),l=this._size[0],h=this._size[1]),(0,o.r7)(a,l),(0,o.r7)(c,h);var y=d(a,this._ptr[c],this._ptr[c+1],this._index);return y<this._ptr[c+1]&&this._index[y]===a?p(i,g)?function(e,t,n,r,i){n.splice(e,1),r.splice(e,1);for(var s=t+1;s<i.length;s++)i[s]--}(y,c,this._values,this._index,this._ptr):this._values[y]=i:p(i,g)||f(y,a,c,i,this._values,this._index,this._ptr),this},h.prototype.resize=function(e,t,n){if(!(0,r.P3)(e))throw new TypeError("Array or Matrix expected");var a=e.valueOf().map((e=>Array.isArray(e)&&1===e.length?e[0]:e));if(2!==a.length)throw new Error("Only two dimensions matrix are supported");return a.forEach((function(e){if(!(0,r.Et)(e)||!(0,i.YN)(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+(0,s.GP)(a)+")")})),m(n?this.clone():this,a[0],a[1],t)},h.prototype.reshape=function(e,t){if(!(0,r.cy)(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");e.forEach((function(t){if(!(0,r.Et)(t)||!(0,i.YN)(t)||t<=-2||0===t)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+(0,s.GP)(e)+")")}));var n=this._size[0]*this._size[1];if(n!==(e=(0,o.cs)(e,n))[0]*e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var a=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return a;for(var c=[],u=0;u<a._ptr.length;u++)for(var l=0;l<a._ptr[u+1]-a._ptr[u];l++)c.push(u);for(var h=a._values.slice(),p=a._index.slice(),m=0;m<a._index.length;m++){var g=p[m],y=c[m],x=g*a._size[1]+y;c[m]=x%e[1],p[m]=Math.floor(x/e[1])}a._values.length=0,a._index.length=0,a._ptr.length=e[1]+1,a._size=e.slice();for(var v=0;v<a._ptr.length;v++)a._ptr[v]=0;for(var b=0;b<h.length;b++){var D=p[b],w=c[b],A=h[b];f(d(D,a._ptr[w],a._ptr[w+1],a._index),D,w,A,a._values,a._index,a._ptr)}return a},h.prototype.clone=function(){return new h({values:this._values?(0,a.o8)(this._values):void 0,index:(0,a.o8)(this._index),ptr:(0,a.o8)(this._ptr),size:(0,a.o8)(this._size),datatype:this._datatype})},h.prototype.size=function(){return this._size.slice(0)},h.prototype.map=function(e,i){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var s=this,a=this._size[0],o=this._size[1],c=(0,l.r)(e,s,"map");return function(e,i,a,o,u,l,p){var d=[],f=[],m=[],g=n,y=0;(0,r.Kg)(e._datatype)&&(g=t.find(n,[e._datatype,e._datatype])||n,y=t.convert(0,e._datatype));for(var x=function(e,t,n){var r=function(e,t,n){return c(e,[t,n],s)}(e,t,n);g(r,y)||(d.push(r),f.push(t))},v=0;v<=u;v++){m.push(d.length);var b=e._ptr[v],D=e._ptr[v+1];if(p)for(var w=b;w<D;w++){var A=e._index[w];A>=0&&A<=a&&x(e._values[w],A-0,v-0)}else{for(var S={},N=b;N<D;N++)S[e._index[N]]=e._values[N];for(var C=0;C<=a;C++)x(C in S?S[C]:0,C-0,v-0)}}return m.push(d.length),new h({values:d,index:f,ptr:m,size:[a-0+1,u-0+1]})}(this,0,a-1,0,o-1,0,i)},h.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this,r=this._size[0],i=this._size[1],s=(0,l.r)(e,n,"forEach"),a=0;a<i;a++){var o=this._ptr[a],c=this._ptr[a+1];if(t)for(var u=o;u<c;u++){var h=this._index[u];s(this._values[u],[h,a],n)}else{for(var p={},d=o;d<c;d++)p[this._index[d]]=this._values[d];for(var f=0;f<r;f++)s(f in p?p[f]:0,[f,a],n)}}},h.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var e=this._size[1],t=0;t<e;t++)for(var n=this._ptr[t],r=this._ptr[t+1],i=n;i<r;i++){var s=this._index[i];yield{value:this._values[i],index:[s,t]}}},h.prototype.toArray=function(){return g(this._values,this._index,this._ptr,this._size,!0)},h.prototype.valueOf=function(){return g(this._values,this._index,this._ptr,this._size,!1)},h.prototype.format=function(e){for(var t=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+(0,s.GP)(t,e)+" x "+(0,s.GP)(n,e)+"] density: "+(0,s.GP)(r,e)+"\n",a=0;a<n;a++)for(var o=this._ptr[a],c=this._ptr[a+1],u=o;u<c;u++){var l=this._index[u];i+="\n    ("+(0,s.GP)(l,e)+", "+(0,s.GP)(a,e)+") ==> "+(this._values?(0,s.GP)(this._values[u],e):"X")}return i},h.prototype.toString=function(){return(0,s.GP)(this.toArray())},h.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},h.prototype.diagonal=function(e){if(e){if((0,r.C4)(e)&&(e=e.toNumber()),!(0,r.Et)(e)||!(0,i.YN)(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var t=e>0?e:0,n=e<0?-e:0,s=this._size[0],a=this._size[1],o=Math.min(s-n,a-t),c=[],u=[],l=[];l[0]=0;for(var p=t;p<a&&c.length<o;p++)for(var d=this._ptr[p],f=this._ptr[p+1],m=d;m<f;m++){var g=this._index[m];if(g===p-t+n){c.push(this._values[m]),u[c.length-1]=g-n;break}}return l.push(c.length),new h({values:c,index:u,ptr:l,size:[o,1]})},h.fromJSON=function(e){return new h(e)},h.diagonal=function(e,s,a,o,c){if(!(0,r.cy)(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if((0,r.C4)(e)&&(e=e.toNumber()),!(0,r.Et)(e)||!(0,i.YN)(e)||e<1)throw new Error("Size values must be positive integers");return e})),a){if((0,r.C4)(a)&&(a=a.toNumber()),!(0,r.Et)(a)||!(0,i.YN)(a))throw new TypeError("The parameter k must be an integer number")}else a=0;var u=n,l=0;(0,r.Kg)(c)&&(u=t.find(n,[c,c])||n,l=t.convert(0,c));var p,d=a>0?a:0,f=a<0?-a:0,m=e[0],g=e[1],y=Math.min(m-f,g-d);if((0,r.cy)(s)){if(s.length!==y)throw new Error("Invalid value array length");p=function(e){return s[e]}}else if((0,r.OA)(s)){var x=s.size();if(1!==x.length||x[0]!==y)throw new Error("Invalid matrix length");p=function(e){return s.get([e])}}else p=function(){return s};for(var v=[],b=[],D=[],w=0;w<g;w++){D.push(v.length);var A=w-d;if(A>=0&&A<y){var S=p(A);u(S,l)||(b.push(A+f),v.push(S))}}return D.push(v.length),new h({values:v,index:b,ptr:D,size:[m,g]})},h.prototype.swapRows=function(e,t){if(!((0,r.Et)(e)&&(0,i.YN)(e)&&(0,r.Et)(t)&&(0,i.YN)(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return(0,o.r7)(e,this._size[0]),(0,o.r7)(t,this._size[0]),h._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},h._forEachRow=function(e,t,n,r,i){for(var s=r[e],a=r[e+1],o=s;o<a;o++)i(n[o],t[o])},h._swapRows=function(e,t,n,r,i,s){for(var a=0;a<n;a++){var o=s[a],c=s[a+1],u=d(e,o,c,i),l=d(t,o,c,i);if(u<c&&l<c&&i[u]===e&&i[l]===t){if(r){var h=r[u];r[u]=r[l],r[l]=h}}else if(u<c&&i[u]===e&&(l>=c||i[l]!==t)){var p=r?r[u]:void 0;i.splice(l,0,t),r&&r.splice(l,0,p),i.splice(l<=u?u+1:u,1),r&&r.splice(l<=u?u+1:u,1)}else if(l<c&&i[l]===t&&(u>=c||i[u]!==e)){var f=r?r[l]:void 0;i.splice(u,0,e),r&&r.splice(u,0,f),i.splice(u<=l?l+1:l,1),r&&r.splice(u<=l?l+1:l,1)}}},h}),{isClass:!0})},7387:(e,t,n)=>{"use strict";n.d(t,{z:()=>o});var r=n(4943),i=n(8321),s="index",a=["typed","Index"],o=(0,i.P9)(s,a,(e=>{var{typed:t,Index:n}=e;return t(s,{"...number | string | BigNumber | Range | Array | Matrix":function(e){var t=e.map((function(e){return(0,r.C4)(e)?e.toNumber():(0,r.cy)(e)||(0,r.OA)(e)?e.map((function(e){return(0,r.C4)(e)?e.toNumber():e})):e})),i=new n;return n.apply(i,t),i}})}))},794:(e,t,n)=>{"use strict";n.d(t,{u:()=>a});var r=n(8321),i="matrix",s=["typed","Matrix","DenseMatrix","SparseMatrix"],a=(0,r.P9)(i,s,(e=>{var{typed:t,Matrix:n,DenseMatrix:r,SparseMatrix:s}=e;return t(i,{"":function(){return a([])},string:function(e){return a([],e)},"string, string":function(e,t){return a([],e,t)},Array:function(e){return a(e)},Matrix:function(e){return a(e,e.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(e,t,n){if("dense"===t||"default"===t||void 0===t)return new r(e,n);if("sparse"===t)return new s(e,n);throw new TypeError("Unknown matrix type "+JSON.stringify(t)+".")}}))},9391:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var r=n(8321),i="sparse",s=["typed","SparseMatrix"],a=(0,r.P9)(i,s,(e=>{var{typed:t,SparseMatrix:n}=e;return t(i,{"":function(){return new n([])},string:function(e){return new n([],e)},"Array | Matrix":function(e){return new n(e)},"Array | Matrix, string":function(e,t){return new n(e,t)}})}))},6540:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8321),i=n(1380),s=["typed"],a=(0,r.P9)("matAlgo01xDSid",s,(e=>{var{typed:t}=e;return function(e,n,r,s){var a=e._data,o=e._size,c=e._datatype||e.getDataType(),u=n._values,l=n._index,h=n._ptr,p=n._size,d=n._datatype||void 0===n._data?n._datatype:n.getDataType();if(o.length!==p.length)throw new i.h(o.length,p.length);if(o[0]!==p[0]||o[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+p+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f,m,g=o[0],y=o[1],x="string"==typeof c&&"mixed"!==c&&c===d?c:void 0,v=x?t.find(r,[x,x]):r,b=[];for(f=0;f<g;f++)b[f]=[];var D=[],w=[];for(m=0;m<y;m++){for(var A=m+1,S=h[m],N=h[m+1],C=S;C<N;C++)D[f=l[C]]=s?v(u[C],a[f][m]):v(a[f][m],u[C]),w[f]=A;for(f=0;f<g;f++)w[f]===A?b[f][m]=D[f]:b[f][m]=a[f][m]}return e.createDenseMatrix({data:b,size:[g,y],datatype:c===e._datatype&&d===n._datatype?x:void 0})}}))},7308:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8321),i=n(1380),s=["typed","equalScalar"],a=(0,r.P9)("matAlgo02xDS0",s,(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,s,a){var o=e._data,c=e._size,u=e._datatype||e.getDataType(),l=r._values,h=r._index,p=r._ptr,d=r._size,f=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(c.length!==d.length)throw new i.h(c.length,d.length);if(c[0]!==d[0]||c[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+d+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m,g=c[0],y=c[1],x=n,v=0,b=s;"string"==typeof u&&u===f&&"mixed"!==u&&(m=u,x=t.find(n,[m,m]),v=t.convert(0,m),b=t.find(s,[m,m]));for(var D=[],w=[],A=[],S=0;S<y;S++){A[S]=w.length;for(var N=p[S],C=p[S+1],E=N;E<C;E++){var M=h[E],T=a?b(l[E],o[M][S]):b(o[M][S],l[E]);x(T,v)||(w.push(M),D.push(T))}}return A[y]=w.length,r.createSparseMatrix({values:D,index:w,ptr:A,size:[g,y],datatype:u===e._datatype&&f===r._datatype?m:void 0})}}))},361:(e,t,n)=>{"use strict";n.d(t,{O:()=>a});var r=n(8321),i=n(1380),s=["typed"],a=(0,r.P9)("matAlgo03xDSf",s,(e=>{var{typed:t}=e;return function(e,n,r,s){var a=e._data,o=e._size,c=e._datatype||e.getDataType(),u=n._values,l=n._index,h=n._ptr,p=n._size,d=n._datatype||void 0===n._data?n._datatype:n.getDataType();if(o.length!==p.length)throw new i.h(o.length,p.length);if(o[0]!==p[0]||o[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+p+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f,m=o[0],g=o[1],y=0,x=r;"string"==typeof c&&c===d&&"mixed"!==c&&(f=c,y=t.convert(0,f),x=t.find(r,[f,f]));for(var v=[],b=0;b<m;b++)v[b]=[];for(var D=[],w=[],A=0;A<g;A++){for(var S=A+1,N=h[A],C=h[A+1],E=N;E<C;E++){var M=l[E];D[M]=s?x(u[E],a[M][A]):x(a[M][A],u[E]),w[M]=S}for(var T=0;T<m;T++)w[T]===S?v[T][A]=D[T]:v[T][A]=s?x(y,a[T][A]):x(a[T][A],y)}return e.createDenseMatrix({data:v,size:[m,g],datatype:c===e._datatype&&d===n._datatype?f:void 0})}}))},7481:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var r=n(8321),i=n(1380),s=["typed","equalScalar"],a=(0,r.P9)("matAlgo04xSidSid",s,(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,s){var a=e._values,o=e._index,c=e._ptr,u=e._size,l=e._datatype||void 0===e._data?e._datatype:e.getDataType(),h=r._values,p=r._index,d=r._ptr,f=r._size,m=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(u.length!==f.length)throw new i.h(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var g,y=u[0],x=u[1],v=n,b=0,D=s;"string"==typeof l&&l===m&&"mixed"!==l&&(g=l,v=t.find(n,[g,g]),b=t.convert(0,g),D=t.find(s,[g,g]));var w,A,S,N,C,E=a&&h?[]:void 0,M=[],T=[],O=a&&h?[]:void 0,P=a&&h?[]:void 0,_=[],I=[];for(A=0;A<x;A++){T[A]=M.length;var B=A+1;for(N=c[A],C=c[A+1],S=N;S<C;S++)w=o[S],M.push(w),_[w]=B,O&&(O[w]=a[S]);for(N=d[A],C=d[A+1],S=N;S<C;S++)if(_[w=p[S]]===B){if(O){var R=D(O[w],h[S]);v(R,b)?_[w]=null:O[w]=R}}else M.push(w),I[w]=B,P&&(P[w]=h[S]);if(O&&P)for(S=T[A];S<M.length;)_[w=M[S]]===B?(E[S]=O[w],S++):I[w]===B?(E[S]=P[w],S++):M.splice(S,1)}return T[x]=M.length,e.createSparseMatrix({values:E,index:M,ptr:T,size:[y,x],datatype:l===e._datatype&&m===r._datatype?g:void 0})}}))},1232:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});var r=n(8321),i=n(1380),s=["typed","equalScalar"],a=(0,r.P9)("matAlgo05xSfSf",s,(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,s){var a=e._values,o=e._index,c=e._ptr,u=e._size,l=e._datatype||void 0===e._data?e._datatype:e.getDataType(),h=r._values,p=r._index,d=r._ptr,f=r._size,m=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(u.length!==f.length)throw new i.h(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var g,y=u[0],x=u[1],v=n,b=0,D=s;"string"==typeof l&&l===m&&"mixed"!==l&&(g=l,v=t.find(n,[g,g]),b=t.convert(0,g),D=t.find(s,[g,g]));var w,A,S,N,C=a&&h?[]:void 0,E=[],M=[],T=C?[]:void 0,O=C?[]:void 0,P=[],_=[];for(A=0;A<x;A++){M[A]=E.length;var I=A+1;for(S=c[A],N=c[A+1];S<N;S++)w=o[S],E.push(w),P[w]=I,T&&(T[w]=a[S]);for(S=d[A],N=d[A+1];S<N;S++)P[w=p[S]]!==I&&E.push(w),_[w]=I,O&&(O[w]=h[S]);if(C)for(S=M[A];S<E.length;){var B=P[w=E[S]],R=_[w];if(B===I||R===I){var F=D(B===I?T[w]:b,R===I?O[w]:b);v(F,b)?E.splice(S,1):(C.push(F),S++)}}}return M[x]=E.length,e.createSparseMatrix({values:C,index:E,ptr:M,size:[y,x],datatype:l===e._datatype&&m===r._datatype?g:void 0})}}))},5651:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var r=n(8321),i=n(1380),s=n(6355),a=["typed","equalScalar"],o=(0,r.P9)("matAlgo06xS0S0",a,(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,a){var o=e._values,c=e._size,u=e._datatype||void 0===e._data?e._datatype:e.getDataType(),l=r._values,h=r._size,p=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(c.length!==h.length)throw new i.h(c.length,h.length);if(c[0]!==h[0]||c[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+h+")");var d,f=c[0],m=c[1],g=n,y=0,x=a;"string"==typeof u&&u===p&&"mixed"!==u&&(d=u,g=t.find(n,[d,d]),y=t.convert(0,d),x=t.find(a,[d,d]));for(var v=o&&l?[]:void 0,b=[],D=[],w=v?[]:void 0,A=[],S=[],N=0;N<m;N++){D[N]=b.length;var C=N+1;if((0,s.Tb)(e,N,A,w,S,C,b,x),(0,s.Tb)(r,N,A,w,S,C,b,x),w)for(var E=D[N];E<b.length;){var M=b[E];if(S[M]===C){var T=w[M];g(T,y)?b.splice(E,1):(v.push(T),E++)}else b.splice(E,1)}else for(var O=D[N];O<b.length;)S[b[O]]!==C?b.splice(O,1):O++}return D[m]=b.length,e.createSparseMatrix({values:v,index:b,ptr:D,size:[f,m],datatype:u===e._datatype&&p===r._datatype?d:void 0})}}))},5572:(e,t,n)=>{"use strict";n.d(t,{v:()=>a});var r=n(8321),i=n(1380),s=["typed","DenseMatrix"],a=(0,r.P9)("matAlgo07xSSf",s,(e=>{var{typed:t,DenseMatrix:n}=e;return function(e,s,a){var o=e._size,c=e._datatype||void 0===e._data?e._datatype:e.getDataType(),u=s._size,l=s._datatype||void 0===s._data?s._datatype:s.getDataType();if(o.length!==u.length)throw new i.h(o.length,u.length);if(o[0]!==u[0]||o[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+u+")");var h,p,d,f=o[0],m=o[1],g=0,y=a;"string"==typeof c&&c===l&&"mixed"!==c&&(h=c,g=t.convert(0,h),y=t.find(a,[h,h]));var x=[];for(p=0;p<f;p++)x[p]=[];var v=[],b=[],D=[],w=[];for(d=0;d<m;d++){var A=d+1;for(r(e,d,D,v,A),r(s,d,w,b,A),p=0;p<f;p++){var S=D[p]===A?v[p]:g,N=w[p]===A?b[p]:g;x[p][d]=y(S,N)}}return new n({data:x,size:[f,m],datatype:c===e._datatype&&l===s._datatype?h:void 0})};function r(e,t,n,r,i){for(var s=e._values,a=e._index,o=e._ptr,c=o[t],u=o[t+1];c<u;c++){var l=a[c];n[l]=i,r[l]=s[c]}}}))},1352:(e,t,n)=>{"use strict";n.d(t,{z:()=>a});var r=n(8321),i=n(1380),s=["typed","equalScalar"],a=(0,r.P9)("matAlgo08xS0Sid",s,(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,s){var a=e._values,o=e._index,c=e._ptr,u=e._size,l=e._datatype||void 0===e._data?e._datatype:e.getDataType(),h=r._values,p=r._index,d=r._ptr,f=r._size,m=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(u.length!==f.length)throw new i.h(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");if(!a||!h)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var g,y=u[0],x=u[1],v=n,b=0,D=s;"string"==typeof l&&l===m&&"mixed"!==l&&(g=l,v=t.find(n,[g,g]),b=t.convert(0,g),D=t.find(s,[g,g]));for(var w,A,S,N,C=[],E=[],M=[],T=[],O=[],P=0;P<x;P++){M[P]=E.length;var _=P+1;for(A=c[P],S=c[P+1],w=A;w<S;w++)O[N=o[w]]=_,T[N]=a[w],E.push(N);for(A=d[P],S=d[P+1],w=A;w<S;w++)O[N=p[w]]===_&&(T[N]=D(T[N],h[w]));for(w=M[P];w<E.length;){var I=T[N=E[w]];v(I,b)?E.splice(w,1):(C.push(I),w++)}}return M[x]=E.length,e.createSparseMatrix({values:C,index:E,ptr:M,size:[y,x],datatype:l===e._datatype&&m===r._datatype?g:void 0})}}))},7726:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});var r=n(8321),i=n(1380),s=["typed","equalScalar"],a=(0,r.P9)("matAlgo09xS0Sf",s,(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,s){var a=e._values,o=e._index,c=e._ptr,u=e._size,l=e._datatype||void 0===e._data?e._datatype:e.getDataType(),h=r._values,p=r._index,d=r._ptr,f=r._size,m=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(u.length!==f.length)throw new i.h(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var g,y=u[0],x=u[1],v=n,b=0,D=s;"string"==typeof l&&l===m&&"mixed"!==l&&(g=l,v=t.find(n,[g,g]),b=t.convert(0,g),D=t.find(s,[g,g]));var w,A,S,N,C,E=a&&h?[]:void 0,M=[],T=[],O=E?[]:void 0,P=[];for(A=0;A<x;A++){T[A]=M.length;var _=A+1;if(O)for(N=d[A],C=d[A+1],S=N;S<C;S++)P[w=p[S]]=_,O[w]=h[S];for(N=c[A],C=c[A+1],S=N;S<C;S++)if(w=o[S],O){var I=P[w]===_?O[w]:b,B=D(a[S],I);v(B,b)||(M.push(w),E.push(B))}else M.push(w)}return T[x]=M.length,e.createSparseMatrix({values:E,index:M,ptr:T,size:[y,x],datatype:l===e._datatype&&m===r._datatype?g:void 0})}}))},2723:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=["typed","DenseMatrix"],i=(0,n(8321).P9)("matAlgo10xSids",r,(e=>{var{typed:t,DenseMatrix:n}=e;return function(e,r,i,s){var a=e._values,o=e._index,c=e._ptr,u=e._size,l=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,p=u[0],d=u[1],f=i;"string"==typeof l&&(h=l,r=t.convert(r,h),f=t.find(i,[h,h]));for(var m=[],g=[],y=[],x=0;x<d;x++){for(var v=x+1,b=c[x],D=c[x+1],w=b;w<D;w++){var A=o[w];g[A]=a[w],y[A]=v}for(var S=0;S<p;S++)0===x&&(m[S]=[]),y[S]===v?m[S][x]=s?f(r,g[S]):f(g[S],r):m[S][x]=r}return new n({data:m,size:[p,d],datatype:h})}}))},9755:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=["typed","equalScalar"],i=(0,n(8321).P9)("matAlgo11xS0s",r,(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i,s){var a=e._values,o=e._index,c=e._ptr,u=e._size,l=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,p=u[0],d=u[1],f=n,m=0,g=i;"string"==typeof l&&(h=l,f=t.find(n,[h,h]),m=t.convert(0,h),r=t.convert(r,h),g=t.find(i,[h,h]));for(var y=[],x=[],v=[],b=0;b<d;b++){v[b]=x.length;for(var D=c[b],w=c[b+1],A=D;A<w;A++){var S=o[A],N=s?g(r,a[A]):g(a[A],r);f(N,m)||(x.push(S),y.push(N))}}return v[d]=x.length,e.createSparseMatrix({values:y,index:x,ptr:v,size:[p,d],datatype:h})}}))},4900:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});var r=["typed","DenseMatrix"],i=(0,n(8321).P9)("matAlgo12xSfs",r,(e=>{var{typed:t,DenseMatrix:n}=e;return function(e,r,i,s){var a=e._values,o=e._index,c=e._ptr,u=e._size,l=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,p=u[0],d=u[1],f=i;"string"==typeof l&&(h=l,r=t.convert(r,h),f=t.find(i,[h,h]));for(var m=[],g=[],y=[],x=0;x<d;x++){for(var v=x+1,b=c[x],D=c[x+1],w=b;w<D;w++){var A=o[w];g[A]=a[w],y[A]=v}for(var S=0;S<p;S++)0===x&&(m[S]=[]),y[S]===v?m[S][x]=s?f(r,g[S]):f(g[S],r):m[S][x]=s?f(r,0):f(0,r)}return new n({data:m,size:[p,d],datatype:h})}}))},2347:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(8321),i=n(3140),s=["typed"],a=(0,r.P9)("matAlgo14xDs",s,(e=>{var{typed:t}=e;return function(e,r,s,a){var o,c=e._data,u=e._size,l=e._datatype,h=s;"string"==typeof l&&(o=l,r=t.convert(r,o),h=t.find(s,[o,o]));var p=u.length>0?n(h,0,u,u[0],c,r,a):[];return e.createDenseMatrix({data:p,size:(0,i.o8)(u),datatype:o})};function n(e,t,r,i,s,a,o){var c=[];if(t===r.length-1)for(var u=0;u<i;u++)c[u]=o?e(a,s[u]):e(s[u],a);else for(var l=0;l<i;l++)c[l]=n(e,t+1,r,r[t+1],s[l],a,o);return c}}))},2573:(e,t,n)=>{"use strict";n.d(t,{$:()=>p});var r=n(8321),i=n(3140),s=n(1380),a=["typed"],o=(0,r.P9)("matAlgo13xDD",a,(e=>{var{typed:t}=e;return function(e,r,i){var a,o=e._data,c=e._size,u=e._datatype,l=r._data,h=r._size,p=r._datatype,d=[];if(c.length!==h.length)throw new s.h(c.length,h.length);for(var f=0;f<c.length;f++){if(c[f]!==h[f])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+h+")");d[f]=c[f]}var m=i;"string"==typeof u&&u===p&&(a=u,m=t.find(i,[a,a]));var g=d.length>0?n(m,0,d,d[0],o,l):[];return e.createDenseMatrix({data:g,size:d,datatype:a})};function n(e,t,r,i,s,a){var o=[];if(t===r.length-1)for(var c=0;c<i;c++)o[c]=e(s[c],a[c]);else for(var u=0;u<i;u++)o[u]=n(e,t+1,r,r[t+1],s[u],a[u]);return o}})),c=n(2347),u=n(5838);function l(e,t){if((0,i.QO)(e.size(),t.size()))return[e,t];var n=(0,u.Kx)(e.size(),t.size());return[e,t].map((e=>function(e,t){return(0,i.QO)(e.size(),t)?e:e.create((0,u.hO)(e.valueOf(),t),e.datatype())}(e,n)))}var h=["typed","matrix"],p=(0,r.P9)("matrixAlgorithmSuite",h,(e=>{var{typed:t,matrix:n}=e,r=o({typed:t}),s=(0,c.A)({typed:t});return function(e){var a,o=e.elop,c=e.SD||e.DS;o?(a={"DenseMatrix, DenseMatrix":(e,t)=>r(...l(e,t),o),"Array, Array":(e,t)=>r(...l(n(e),n(t)),o).valueOf(),"Array, DenseMatrix":(e,t)=>r(...l(n(e),t),o),"DenseMatrix, Array":(e,t)=>r(...l(e,n(t)),o)},e.SS&&(a["SparseMatrix, SparseMatrix"]=(t,n)=>e.SS(...l(t,n),o,!1)),e.DS&&(a["DenseMatrix, SparseMatrix"]=(t,n)=>e.DS(...l(t,n),o,!1),a["Array, SparseMatrix"]=(t,r)=>e.DS(...l(n(t),r),o,!1)),c&&(a["SparseMatrix, DenseMatrix"]=(e,t)=>c(...l(t,e),o,!0),a["SparseMatrix, Array"]=(e,t)=>c(...l(n(t),e),o,!0))):(a={"DenseMatrix, DenseMatrix":t.referToSelf((e=>(t,n)=>r(...l(t,n),e))),"Array, Array":t.referToSelf((e=>(t,i)=>r(...l(n(t),n(i)),e).valueOf())),"Array, DenseMatrix":t.referToSelf((e=>(t,i)=>r(...l(n(t),i),e))),"DenseMatrix, Array":t.referToSelf((e=>(t,i)=>r(...l(t,n(i)),e)))},e.SS&&(a["SparseMatrix, SparseMatrix"]=t.referToSelf((t=>(n,r)=>e.SS(...l(n,r),t,!1)))),e.DS&&(a["DenseMatrix, SparseMatrix"]=t.referToSelf((t=>(n,r)=>e.DS(...l(n,r),t,!1))),a["Array, SparseMatrix"]=t.referToSelf((t=>(r,i)=>e.DS(...l(n(r),i),t,!1)))),c&&(a["SparseMatrix, DenseMatrix"]=t.referToSelf((e=>(t,n)=>c(...l(n,t),e,!0))),a["SparseMatrix, Array"]=t.referToSelf((e=>(t,r)=>c(...l(n(r),t),e,!0)))));var u=e.scalar||"any";(e.Ds||e.Ss)&&(o?(a["DenseMatrix,"+u]=(e,t)=>s(e,t,o,!1),a[u+", DenseMatrix"]=(e,t)=>s(t,e,o,!0),a["Array,"+u]=(e,t)=>s(n(e),t,o,!1).valueOf(),a[u+", Array"]=(e,t)=>s(n(t),e,o,!0).valueOf()):(a["DenseMatrix,"+u]=t.referToSelf((e=>(t,n)=>s(t,n,e,!1))),a[u+", DenseMatrix"]=t.referToSelf((e=>(t,n)=>s(n,t,e,!0))),a["Array,"+u]=t.referToSelf((e=>(t,r)=>s(n(t),r,e,!1).valueOf())),a[u+", Array"]=t.referToSelf((e=>(t,r)=>s(n(r),t,e,!0).valueOf()))));var h=void 0!==e.sS?e.sS:e.Ss;return o?(e.Ss&&(a["SparseMatrix,"+u]=(t,n)=>e.Ss(t,n,o,!1)),h&&(a[u+", SparseMatrix"]=(e,t)=>h(t,e,o,!0))):(e.Ss&&(a["SparseMatrix,"+u]=t.referToSelf((t=>(n,r)=>e.Ss(n,r,t,!1)))),h&&(a[u+", SparseMatrix"]=t.referToSelf((e=>(t,n)=>h(n,t,e,!0))))),o&&o.signatures&&(0,i.X$)(a,o.signatures),a}}))},3417:(e,t,n)=>{"use strict";n.d(t,{G:()=>a});var r=n(8321),i=n(6355),s=["typed"],a=(0,r.P9)("number",s,(e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(e){return e},string:function(e){if("NaN"===e)return NaN;var t,n,r=(n=(t=e).match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/))?{input:t,radix:{"0b":2,"0o":8,"0x":16}[n[1]],integerPart:n[2],fractionalPart:n[3]}:null;if(r)return function(e){for(var t=parseInt(e.integerPart,e.radix),n=0,r=0;r<e.fractionalPart.length;r++)n+=parseInt(e.fractionalPart[r],e.radix)/Math.pow(e.radix,r+1);var i=t+n;if(isNaN(i))throw new SyntaxError('String "'+e.input+'" is not a valid number');return i}(r);var i=0,s=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);s&&(i=Number(s[2]),e=s[1]);var a=Number(e);if(isNaN(a))throw new SyntaxError('String "'+e+'" is not a valid number');if(s){if(a>2**i-1)throw new SyntaxError('String "'.concat(e,'" is out of range'));a>=2**(i-1)&&(a-=2**i)}return a},BigNumber:function(e){return e.toNumber()},bigint:function(e){return Number(e)},Fraction:function(e){return e.valueOf()},Unit:t.referToSelf((e=>t=>{var n=t.clone();return n.value=e(t.value),n})),null:function(e){return 0},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e)))});return n.fromJSON=function(e){return parseFloat(e.value)},n}))},7613:(e,t,n)=>{"use strict";n.d(t,{O:()=>i});var r=[],i=(0,n(8321).P9)("ResultSet",r,(()=>{function e(t){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this.entries=t||[]}return e.prototype.type="ResultSet",e.prototype.isResultSet=!0,e.prototype.valueOf=function(){return this.entries},e.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},e.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},e.fromJSON=function(t){return new e(t.entries)},e}),{isClass:!0})},2581:(e,t,n)=>{"use strict";n.d(t,{I:()=>c});var r=n(8321),i=n(6355),s=n(1106),a="string",o=["typed"],c=(0,r.P9)(a,o,(e=>{var{typed:t}=e;return t(a,{"":function(){return""},number:s.GP,null:function(e){return"null"},boolean:function(e){return e+""},string:function(e){return e},"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e))),any:function(e){return String(e)}})}))},2783:(e,t,n)=>{"use strict";n.d(t,{d:()=>f});var r=n(3693),i=n(4634),s=n(4943),a=n(8321),o=n(2718),c=n(760),u=n(3140),l=n(7506);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],f=(0,a.P9)("Unit",d,(e=>{var t,n,r,{on:a,config:h,addScalar:d,subtractScalar:f,multiplyScalar:m,divideScalar:g,pow:y,abs:x,fix:v,round:b,equal:D,isNumeric:w,format:A,number:S,Complex:N,BigNumber:C,Fraction:E}=e,M=S;function T(e,t){if(!(this instanceof T))throw new Error("Constructor must be called with the new operator");if(null!=e&&!w(e)&&!(0,s.Zd)(e))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,void 0===t)this.units=[],this.dimensions=L.map((e=>0));else if("string"==typeof t){var n=T.parse(t);this.units=n.units,this.dimensions=n.dimensions}else{if(!(0,s.vO)(t)||null!==t.value)throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.fixPrefix=t.fixPrefix,this.skipAutomaticSimplification=t.skipAutomaticSimplification,this.dimensions=t.dimensions.slice(0),this.units=t.units.map((e=>i({},e)))}this.value=this._normalize(e)}function O(){for(;" "===r||"\t"===r;)_()}function P(e){return e>="0"&&e<="9"}function _(){n++,r=t.charAt(n)}function I(e){n=e,r=t.charAt(n)}function B(){var e="",t=n;if("+"===r?_():"-"===r&&(e+=r,_()),!function(e){return e>="0"&&e<="9"||"."===e}(r))return I(t),null;if("."===r){if(e+=r,_(),!P(r))return I(t),null}else{for(;P(r);)e+=r,_();"."===r&&(e+=r,_())}for(;P(r);)e+=r,_();if("E"===r||"e"===r){var i="",s=n;if(i+=r,_(),"+"!==r&&"-"!==r||(i+=r,_()),!P(r))return I(s),e;for(e+=i;P(r);)e+=r,_()}return e}function R(){for(var e="";P(r)||T.isValidAlpha(r);)e+=r,_();var t=e.charAt(0);return T.isValidAlpha(t)?e:null}function F(e){return r===e?(_(),e):null}Object.defineProperty(T,"name",{value:"Unit"}),T.prototype.constructor=T,T.prototype.type="Unit",T.prototype.isUnit=!0,T.parse=function(e,i){if(i=i||{},n=-1,r="","string"!=typeof(t=e))throw new TypeError("Invalid argument in Unit.parse, string expected");var s=new T;s.units=[];var a=1,o=!1;_(),O();var c=B(),u=null;if(c){if("BigNumber"===h.number)u=new C(c);else if("Fraction"===h.number)try{u=new E(c)}catch(e){u=parseFloat(c)}else u=parseFloat(c);O(),F("*")?(a=1,o=!0):F("/")&&(a=-1,o=!0)}for(var l=[],p=1;;){for(O();"("===r;)l.push(a),p*=a,a=1,_(),O();var d;if(!r)break;var f=r;if(null===(d=R()))throw new SyntaxError('Unexpected "'+f+'" in "'+t+'" at index '+n.toString());var m=j(d);if(null===m)throw new SyntaxError('Unit "'+d+'" not found.');var g=a*p;if(O(),F("^")){O();var y=B();if(null===y)throw new SyntaxError('In "'+e+'", "^" must be followed by a floating-point number');g*=y}s.units.push({unit:m.unit,prefix:m.prefix,power:g});for(var x=0;x<L.length;x++)s.dimensions[x]+=(m.unit.dimensions[x]||0)*g;for(O();")"===r;){if(0===l.length)throw new SyntaxError('Unmatched ")" in "'+t+'" at index '+n.toString());p/=l.pop(),_(),O()}if(o=!1,F("*")?(a=1,o=!0):F("/")?(a=-1,o=!0):a=1,m.unit.base){var v=m.unit.base.key;V.auto[v]={unit:m.unit,prefix:m.prefix}}}if(O(),r)throw new SyntaxError('Could not parse: "'+e+'"');if(o)throw new SyntaxError('Trailing characters: "'+e+'"');if(0!==l.length)throw new SyntaxError('Unmatched "(" in "'+t+'"');if(0===s.units.length&&!i.allowNoUnits)throw new SyntaxError('"'+e+'" contains no units');return s.value=void 0!==u?s._normalize(u):null,s},T.prototype.clone=function(){var e=new T;e.fixPrefix=this.fixPrefix,e.skipAutomaticSimplification=this.skipAutomaticSimplification,e.value=(0,u.o8)(this.value),e.dimensions=this.dimensions.slice(0),e.units=[];for(var t=0;t<this.units.length;t++)for(var n in e.units[t]={},this.units[t])(0,u.mQ)(this.units[t],n)&&(e.units[t][n]=this.units[t][n]);return e},T.prototype.valueType=function(){return(0,s.QP)(this.value)},T.prototype._isDerived=function(){return 0!==this.units.length&&(this.units.length>1||Math.abs(this.units[0].power-1)>1e-15)},T.prototype._normalize=function(e){if(null==e||0===this.units.length)return e;for(var t=e,n=T._getNumberConverter((0,s.QP)(e)),r=0;r<this.units.length;r++){var i=n(this.units[r].unit.value),a=n(this.units[r].prefix.value),o=n(this.units[r].power);t=m(t,y(m(i,a),o))}return t},T.prototype._denormalize=function(e,t){if(null==e||0===this.units.length)return e;for(var n=e,r=T._getNumberConverter((0,s.QP)(e)),i=0;i<this.units.length;i++){var a=r(this.units[i].unit.value),o=r(this.units[i].prefix.value),c=r(this.units[i].power);n=g(n,y(m(a,o),c))}return n};var j=(0,o.B)((e=>{if((0,u.mQ)($,e)){var t=$[e];return{unit:t,prefix:t.prefixes[""]}}for(var n in $)if((0,u.mQ)($,n)&&(0,c.d5)(e,n)){var r=$[n],i=e.length-n.length,s=e.substring(0,i),a=(0,u.mQ)(r.prefixes,s)?r.prefixes[s]:void 0;if(void 0!==a)return{unit:r,prefix:a}}return null}),{hasher:e=>e[0],limit:100});function k(e){return e.equalBase(z.NONE)&&null!==e.value&&!h.predictable?e.value:e}T.isValuelessUnit=function(e){return null!==j(e)},T.prototype.hasBase=function(e){if("string"==typeof e&&(e=z[e]),!e)return!1;for(var t=0;t<L.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},T.prototype.equalBase=function(e){for(var t=0;t<L.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},T.prototype.equals=function(e){return this.equalBase(e)&&D(this.value,e.value)},T.prototype.multiply=function(e){for(var t=this.clone(),n=(0,s.vO)(e)?e:new T(e),r=0;r<L.length;r++)t.dimensions[r]=(this.dimensions[r]||0)+(n.dimensions[r]||0);for(var i=0;i<n.units.length;i++){var a=p({},n.units[i]);t.units.push(a)}if(null!==this.value||null!==n.value){var o=null===this.value?this._normalize(1):this.value,c=null===n.value?n._normalize(1):n.value;t.value=m(o,c)}else t.value=null;return(0,s.vO)(e)&&(t.skipAutomaticSimplification=!1),k(t)},T.prototype.divideInto=function(e){return new T(e).divide(this)},T.prototype.divide=function(e){for(var t=this.clone(),n=(0,s.vO)(e)?e:new T(e),r=0;r<L.length;r++)t.dimensions[r]=(this.dimensions[r]||0)-(n.dimensions[r]||0);for(var i=0;i<n.units.length;i++){var a=p(p({},n.units[i]),{},{power:-n.units[i].power});t.units.push(a)}if(null!==this.value||null!==n.value){var o=null===this.value?this._normalize(1):this.value,c=null===n.value?n._normalize(1):n.value;t.value=g(o,c)}else t.value=null;return(0,s.vO)(e)&&(t.skipAutomaticSimplification=!1),k(t)},T.prototype.pow=function(e){for(var t=this.clone(),n=0;n<L.length;n++)t.dimensions[n]=(this.dimensions[n]||0)*e;for(var r=0;r<t.units.length;r++)t.units[r].power*=e;return null!==t.value?t.value=y(t.value,e):t.value=null,t.skipAutomaticSimplification=!1,k(t)},T.prototype.abs=function(){var e=this.clone();if(null!==e.value)if(e._isDerived()||0===e.units.length||0===e.units[0].unit.offset)e.value=x(e.value);else{var t=e._numberConverter(),n=t(e.units[0].unit.value),r=t(e.units[0].unit.offset),i=m(n,r);e.value=f(x(d(e.value,i)),i)}for(var s in e.units)"VA"!==e.units[s].unit.name&&"VAR"!==e.units[s].unit.name||(e.units[s].unit=$.W);return e},T.prototype.to=function(e){var t,n=null===this.value?this._normalize(1):this.value;if("string"==typeof e)t=T.parse(e);else{if(!(0,s.vO)(e))throw new Error("String or Unit expected as parameter");t=e.clone()}if(!this.equalBase(t))throw new Error("Units do not match ('".concat(t.toString(),"' != '").concat(this.toString(),"')"));if(null!==t.value)throw new Error("Cannot convert to a unit with a value");if(null===this.value||this._isDerived()||0===this.units.length||0===t.units.length||this.units[0].unit.offset===t.units[0].unit.offset)t.value=(0,u.o8)(n);else{var r=T._getNumberConverter((0,s.QP)(n)),i=this.units[0].unit.value,a=this.units[0].unit.offset,o=m(i,a),c=t.units[0].unit.value,l=t.units[0].unit.offset,h=m(c,l);t.value=d(n,r(f(o,h)))}return t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t},T.prototype.toNumber=function(e){return M(this.toNumeric(e))},T.prototype.toNumeric=function(e){var t;return(t=e?this.to(e):this.clone())._isDerived()||0===t.units.length?t._denormalize(t.value):t._denormalize(t.value,t.units[0].prefix.value)},T.prototype.toString=function(){return this.format()},T.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},T.fromJSON=function(e){var t,n=new T(e.value,null!==(t=e.unit)&&void 0!==t?t:void 0);return n.fixPrefix=e.fixPrefix||!1,n},T.prototype.valueOf=T.prototype.toString,T.prototype.simplify=function(){var e,t,n=this.clone(),r=[];for(var i in Y)if((0,u.mQ)(Y,i)&&n.hasBase(z[i])){e=i;break}if("NONE"===e)n.units=[];else if(e&&(0,u.mQ)(Y,e)&&(t=Y[e]),t)n.units=[{unit:t.unit,prefix:t.prefix,power:1}];else{for(var s=!1,a=0;a<L.length;a++){var o=L[a];Math.abs(n.dimensions[a]||0)>1e-12&&((0,u.mQ)(Y,o)?r.push({unit:Y[o].unit,prefix:Y[o].prefix,power:n.dimensions[a]||0}):s=!0)}r.length<n.units.length&&!s&&(n.units=r)}return n},T.prototype.toSI=function(){for(var e=this.clone(),t=[],n=0;n<L.length;n++){var r=L[n];if(Math.abs(e.dimensions[n]||0)>1e-12){if(!(0,u.mQ)(V.si,r))throw new Error("Cannot express custom unit "+r+" in SI units");t.push({unit:V.si[r].unit,prefix:V.si[r].prefix,power:e.dimensions[n]||0})}}return e.units=t,e.fixPrefix=!0,e.skipAutomaticSimplification=!0,null!==this.value?(e.value=null,this.to(e)):e},T.prototype.formatUnits=function(){for(var e="",t="",n=0,r=0,i=0;i<this.units.length;i++)this.units[i].power>0?(n++,e+=" "+this.units[i].prefix.name+this.units[i].unit.name,Math.abs(this.units[i].power-1)>1e-15&&(e+="^"+this.units[i].power)):this.units[i].power<0&&r++;if(r>0)for(var s=0;s<this.units.length;s++)this.units[s].power<0&&(n>0?(t+=" "+this.units[s].prefix.name+this.units[s].unit.name,Math.abs(this.units[s].power+1)>1e-15&&(t+="^"+-this.units[s].power)):(t+=" "+this.units[s].prefix.name+this.units[s].unit.name,t+="^"+this.units[s].power));e=e.substr(1),t=t.substr(1),n>1&&r>0&&(e="("+e+")"),r>1&&n>0&&(t="("+t+")");var a=e;return n>0&&r>0&&(a+=" / "),a+t},T.prototype.format=function(e){var t=this.skipAutomaticSimplification||null===this.value?this.clone():this.simplify(),n=!1;for(var r in void 0!==t.value&&null!==t.value&&(0,s.Zd)(t.value)&&(n=Math.abs(t.value.re)<1e-14),t.units)(0,u.mQ)(t.units,r)&&t.units[r].unit&&("VA"===t.units[r].unit.name&&n?t.units[r].unit=$.VAR:"VAR"!==t.units[r].unit.name||n||(t.units[r].unit=$.VA));1!==t.units.length||t.fixPrefix||Math.abs(t.units[0].power-Math.round(t.units[0].power))<1e-14&&(t.units[0].prefix=t._bestPrefix());var i=t._denormalize(t.value),a=null!==t.value?A(i,e||{}):"",o=t.formatUnits();return t.value&&(0,s.Zd)(t.value)&&(a="("+a+")"),o.length>0&&a.length>0&&(a+=" "),a+o},T.prototype._bestPrefix=function(){if(1!==this.units.length)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var e=null!==this.value?x(this.value):0,t=x(this.units[0].unit.value),n=this.units[0].prefix;if(0===e)return n;var r=this.units[0].power,i=Math.log(e/Math.pow(n.value*t,r))/Math.LN10-1.2;if(i>-2.200001&&i<1.800001)return n;i=Math.abs(i);var s=this.units[0].unit.prefixes;for(var a in s)if((0,u.mQ)(s,a)){var o=s[a];if(o.scientific){var c=Math.abs(Math.log(e/Math.pow(o.value*t,r))/Math.LN10-1.2);(c<i||c===i&&o.name.length<n.name.length)&&(n=o,i=c)}}return n},T.prototype.splitUnit=function(e){for(var t=this.clone(),n=[],r=0;r<e.length&&(t=t.to(e[r]),r!==e.length-1);r++){var i=t.toNumeric(),s=b(i),a=new T(D(s,i)?s:v(t.toNumeric()),e[r].toString());n.push(a),t=f(t,a)}for(var o=0,c=0;c<n.length;c++)o=d(o,n[c].value);return D(o,this.value)&&(t.value=0),n.push(t),n};var q={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};q.SHORTLONG=i({},q.SHORT,q.LONG),q.BINARY_SHORT=i({},q.BINARY_SHORT_SI,q.BINARY_SHORT_IEC),q.BINARY_LONG=i({},q.BINARY_LONG_SI,q.BINARY_LONG_IEC);var L=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],z={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var U in z)(0,u.mQ)(z,U)&&(z[U].key=U);var G={name:"",base:{},value:1,offset:0,dimensions:L.map((e=>0))},$={meter:{name:"meter",base:z.LENGTH,prefixes:q.LONG,value:1,offset:0},inch:{name:"inch",base:z.LENGTH,prefixes:q.NONE,value:.0254,offset:0},foot:{name:"foot",base:z.LENGTH,prefixes:q.NONE,value:.3048,offset:0},yard:{name:"yard",base:z.LENGTH,prefixes:q.NONE,value:.9144,offset:0},mile:{name:"mile",base:z.LENGTH,prefixes:q.NONE,value:1609.344,offset:0},link:{name:"link",base:z.LENGTH,prefixes:q.NONE,value:.201168,offset:0},rod:{name:"rod",base:z.LENGTH,prefixes:q.NONE,value:5.0292,offset:0},chain:{name:"chain",base:z.LENGTH,prefixes:q.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:z.LENGTH,prefixes:q.NONE,value:1e-10,offset:0},m:{name:"m",base:z.LENGTH,prefixes:q.SHORT,value:1,offset:0},in:{name:"in",base:z.LENGTH,prefixes:q.NONE,value:.0254,offset:0},ft:{name:"ft",base:z.LENGTH,prefixes:q.NONE,value:.3048,offset:0},yd:{name:"yd",base:z.LENGTH,prefixes:q.NONE,value:.9144,offset:0},mi:{name:"mi",base:z.LENGTH,prefixes:q.NONE,value:1609.344,offset:0},li:{name:"li",base:z.LENGTH,prefixes:q.NONE,value:.201168,offset:0},rd:{name:"rd",base:z.LENGTH,prefixes:q.NONE,value:5.02921,offset:0},ch:{name:"ch",base:z.LENGTH,prefixes:q.NONE,value:20.1168,offset:0},mil:{name:"mil",base:z.LENGTH,prefixes:q.NONE,value:254e-7,offset:0},m2:{name:"m2",base:z.SURFACE,prefixes:q.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:z.SURFACE,prefixes:q.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:z.SURFACE,prefixes:q.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:z.SURFACE,prefixes:q.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:z.SURFACE,prefixes:q.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:z.SURFACE,prefixes:q.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:z.SURFACE,prefixes:q.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:z.SURFACE,prefixes:q.NONE,value:6.4516e-10,offset:0},acre:{name:"acre",base:z.SURFACE,prefixes:q.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:z.SURFACE,prefixes:q.NONE,value:1e4,offset:0},m3:{name:"m3",base:z.VOLUME,prefixes:q.CUBIC,value:1,offset:0},L:{name:"L",base:z.VOLUME,prefixes:q.SHORT,value:.001,offset:0},l:{name:"l",base:z.VOLUME,prefixes:q.SHORT,value:.001,offset:0},litre:{name:"litre",base:z.VOLUME,prefixes:q.LONG,value:.001,offset:0},cuin:{name:"cuin",base:z.VOLUME,prefixes:q.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:z.VOLUME,prefixes:q.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:z.VOLUME,prefixes:q.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:z.VOLUME,prefixes:q.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:z.VOLUME,prefixes:q.NONE,value:15e-6,offset:0},drop:{name:"drop",base:z.VOLUME,prefixes:q.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:z.VOLUME,prefixes:q.NONE,value:5e-8,offset:0},minim:{name:"minim",base:z.VOLUME,prefixes:q.NONE,value:6.1611519921875e-8,offset:0},fluiddram:{name:"fluiddram",base:z.VOLUME,prefixes:q.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:z.VOLUME,prefixes:q.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:z.VOLUME,prefixes:q.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:z.VOLUME,prefixes:q.NONE,value:1e-6,offset:0},cup:{name:"cup",base:z.VOLUME,prefixes:q.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:z.VOLUME,prefixes:q.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:z.VOLUME,prefixes:q.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:z.VOLUME,prefixes:q.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:z.VOLUME,prefixes:q.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:z.VOLUME,prefixes:q.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:z.VOLUME,prefixes:q.NONE,value:.238480942392,offset:0},g:{name:"g",base:z.MASS,prefixes:q.SHORT,value:.001,offset:0},gram:{name:"gram",base:z.MASS,prefixes:q.LONG,value:.001,offset:0},ton:{name:"ton",base:z.MASS,prefixes:q.SHORT,value:907.18474,offset:0},t:{name:"t",base:z.MASS,prefixes:q.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:z.MASS,prefixes:q.LONG,value:1e3,offset:0},grain:{name:"grain",base:z.MASS,prefixes:q.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:z.MASS,prefixes:q.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:z.MASS,prefixes:q.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:z.MASS,prefixes:q.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:z.MASS,prefixes:q.NONE,value:45.359237,offset:0},stick:{name:"stick",base:z.MASS,prefixes:q.NONE,value:.115,offset:0},stone:{name:"stone",base:z.MASS,prefixes:q.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:z.MASS,prefixes:q.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:z.MASS,prefixes:q.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:z.MASS,prefixes:q.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:z.MASS,prefixes:q.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:z.MASS,prefixes:q.NONE,value:45.359237,offset:0},s:{name:"s",base:z.TIME,prefixes:q.SHORT,value:1,offset:0},min:{name:"min",base:z.TIME,prefixes:q.NONE,value:60,offset:0},h:{name:"h",base:z.TIME,prefixes:q.NONE,value:3600,offset:0},second:{name:"second",base:z.TIME,prefixes:q.LONG,value:1,offset:0},sec:{name:"sec",base:z.TIME,prefixes:q.LONG,value:1,offset:0},minute:{name:"minute",base:z.TIME,prefixes:q.NONE,value:60,offset:0},hour:{name:"hour",base:z.TIME,prefixes:q.NONE,value:3600,offset:0},day:{name:"day",base:z.TIME,prefixes:q.NONE,value:86400,offset:0},week:{name:"week",base:z.TIME,prefixes:q.NONE,value:604800,offset:0},month:{name:"month",base:z.TIME,prefixes:q.NONE,value:2629800,offset:0},year:{name:"year",base:z.TIME,prefixes:q.NONE,value:31557600,offset:0},decade:{name:"decade",base:z.TIME,prefixes:q.NONE,value:315576e3,offset:0},century:{name:"century",base:z.TIME,prefixes:q.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:z.TIME,prefixes:q.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:z.FREQUENCY,prefixes:q.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:z.FREQUENCY,prefixes:q.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:z.ANGLE,prefixes:q.SHORT,value:1,offset:0},radian:{name:"radian",base:z.ANGLE,prefixes:q.LONG,value:1,offset:0},deg:{name:"deg",base:z.ANGLE,prefixes:q.SHORT,value:null,offset:0},degree:{name:"degree",base:z.ANGLE,prefixes:q.LONG,value:null,offset:0},grad:{name:"grad",base:z.ANGLE,prefixes:q.SHORT,value:null,offset:0},gradian:{name:"gradian",base:z.ANGLE,prefixes:q.LONG,value:null,offset:0},cycle:{name:"cycle",base:z.ANGLE,prefixes:q.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:z.ANGLE,prefixes:q.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:z.ANGLE,prefixes:q.NONE,value:null,offset:0},A:{name:"A",base:z.CURRENT,prefixes:q.SHORT,value:1,offset:0},ampere:{name:"ampere",base:z.CURRENT,prefixes:q.LONG,value:1,offset:0},K:{name:"K",base:z.TEMPERATURE,prefixes:q.SHORT,value:1,offset:0},degC:{name:"degC",base:z.TEMPERATURE,prefixes:q.SHORT,value:1,offset:273.15},degF:{name:"degF",base:z.TEMPERATURE,prefixes:q.SHORT,value:new E(5,9),offset:459.67},degR:{name:"degR",base:z.TEMPERATURE,prefixes:q.SHORT,value:new E(5,9),offset:0},kelvin:{name:"kelvin",base:z.TEMPERATURE,prefixes:q.LONG,value:1,offset:0},celsius:{name:"celsius",base:z.TEMPERATURE,prefixes:q.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:z.TEMPERATURE,prefixes:q.LONG,value:new E(5,9),offset:459.67},rankine:{name:"rankine",base:z.TEMPERATURE,prefixes:q.LONG,value:new E(5,9),offset:0},mol:{name:"mol",base:z.AMOUNT_OF_SUBSTANCE,prefixes:q.SHORT,value:1,offset:0},mole:{name:"mole",base:z.AMOUNT_OF_SUBSTANCE,prefixes:q.LONG,value:1,offset:0},cd:{name:"cd",base:z.LUMINOUS_INTENSITY,prefixes:q.SHORT,value:1,offset:0},candela:{name:"candela",base:z.LUMINOUS_INTENSITY,prefixes:q.LONG,value:1,offset:0},N:{name:"N",base:z.FORCE,prefixes:q.SHORT,value:1,offset:0},newton:{name:"newton",base:z.FORCE,prefixes:q.LONG,value:1,offset:0},dyn:{name:"dyn",base:z.FORCE,prefixes:q.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:z.FORCE,prefixes:q.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:z.FORCE,prefixes:q.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:z.FORCE,prefixes:q.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:z.FORCE,prefixes:q.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:z.FORCE,prefixes:q.NONE,value:9.80665,offset:0},J:{name:"J",base:z.ENERGY,prefixes:q.SHORT,value:1,offset:0},joule:{name:"joule",base:z.ENERGY,prefixes:q.LONG,value:1,offset:0},erg:{name:"erg",base:z.ENERGY,prefixes:q.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:z.ENERGY,prefixes:q.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:z.ENERGY,prefixes:q.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:z.ENERGY,prefixes:q.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:z.ENERGY,prefixes:q.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:z.POWER,prefixes:q.SHORT,value:1,offset:0},watt:{name:"watt",base:z.POWER,prefixes:q.LONG,value:1,offset:0},hp:{name:"hp",base:z.POWER,prefixes:q.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:z.POWER,prefixes:q.SHORT,value:N.I,offset:0},VA:{name:"VA",base:z.POWER,prefixes:q.SHORT,value:1,offset:0},Pa:{name:"Pa",base:z.PRESSURE,prefixes:q.SHORT,value:1,offset:0},psi:{name:"psi",base:z.PRESSURE,prefixes:q.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:z.PRESSURE,prefixes:q.NONE,value:101325,offset:0},bar:{name:"bar",base:z.PRESSURE,prefixes:q.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:z.PRESSURE,prefixes:q.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:z.PRESSURE,prefixes:q.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:z.PRESSURE,prefixes:q.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:z.PRESSURE,prefixes:q.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:z.ELECTRIC_CHARGE,prefixes:q.LONG,value:1,offset:0},C:{name:"C",base:z.ELECTRIC_CHARGE,prefixes:q.SHORT,value:1,offset:0},farad:{name:"farad",base:z.ELECTRIC_CAPACITANCE,prefixes:q.LONG,value:1,offset:0},F:{name:"F",base:z.ELECTRIC_CAPACITANCE,prefixes:q.SHORT,value:1,offset:0},volt:{name:"volt",base:z.ELECTRIC_POTENTIAL,prefixes:q.LONG,value:1,offset:0},V:{name:"V",base:z.ELECTRIC_POTENTIAL,prefixes:q.SHORT,value:1,offset:0},ohm:{name:"ohm",base:z.ELECTRIC_RESISTANCE,prefixes:q.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:z.ELECTRIC_INDUCTANCE,prefixes:q.LONG,value:1,offset:0},H:{name:"H",base:z.ELECTRIC_INDUCTANCE,prefixes:q.SHORT,value:1,offset:0},siemens:{name:"siemens",base:z.ELECTRIC_CONDUCTANCE,prefixes:q.LONG,value:1,offset:0},S:{name:"S",base:z.ELECTRIC_CONDUCTANCE,prefixes:q.SHORT,value:1,offset:0},weber:{name:"weber",base:z.MAGNETIC_FLUX,prefixes:q.LONG,value:1,offset:0},Wb:{name:"Wb",base:z.MAGNETIC_FLUX,prefixes:q.SHORT,value:1,offset:0},tesla:{name:"tesla",base:z.MAGNETIC_FLUX_DENSITY,prefixes:q.LONG,value:1,offset:0},T:{name:"T",base:z.MAGNETIC_FLUX_DENSITY,prefixes:q.SHORT,value:1,offset:0},b:{name:"b",base:z.BIT,prefixes:q.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:z.BIT,prefixes:q.BINARY_LONG,value:1,offset:0},B:{name:"B",base:z.BIT,prefixes:q.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:z.BIT,prefixes:q.BINARY_LONG,value:8,offset:0}},H={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function W(e){if("BigNumber"===e.number){var t=(0,l.R3)(C);$.rad.value=new C(1),$.deg.value=t.div(180),$.grad.value=t.div(200),$.cycle.value=t.times(2),$.arcsec.value=t.div(648e3),$.arcmin.value=t.div(10800)}else $.rad.value=1,$.deg.value=Math.PI/180,$.grad.value=Math.PI/200,$.cycle.value=2*Math.PI,$.arcsec.value=Math.PI/648e3,$.arcmin.value=Math.PI/10800;$.radian.value=$.rad.value,$.degree.value=$.deg.value,$.gradian.value=$.grad.value}W(h),a&&a("config",(function(e,t){e.number!==t.number&&W(e)}));var V={si:{NONE:{unit:G,prefix:q.NONE[""]},LENGTH:{unit:$.m,prefix:q.SHORT[""]},MASS:{unit:$.g,prefix:q.SHORT.k},TIME:{unit:$.s,prefix:q.SHORT[""]},CURRENT:{unit:$.A,prefix:q.SHORT[""]},TEMPERATURE:{unit:$.K,prefix:q.SHORT[""]},LUMINOUS_INTENSITY:{unit:$.cd,prefix:q.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:$.mol,prefix:q.SHORT[""]},ANGLE:{unit:$.rad,prefix:q.SHORT[""]},BIT:{unit:$.bits,prefix:q.SHORT[""]},FORCE:{unit:$.N,prefix:q.SHORT[""]},ENERGY:{unit:$.J,prefix:q.SHORT[""]},POWER:{unit:$.W,prefix:q.SHORT[""]},PRESSURE:{unit:$.Pa,prefix:q.SHORT[""]},ELECTRIC_CHARGE:{unit:$.C,prefix:q.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:$.F,prefix:q.SHORT[""]},ELECTRIC_POTENTIAL:{unit:$.V,prefix:q.SHORT[""]},ELECTRIC_RESISTANCE:{unit:$.ohm,prefix:q.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:$.H,prefix:q.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:$.S,prefix:q.SHORT[""]},MAGNETIC_FLUX:{unit:$.Wb,prefix:q.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:$.T,prefix:q.SHORT[""]},FREQUENCY:{unit:$.Hz,prefix:q.SHORT[""]}}};V.cgs=JSON.parse(JSON.stringify(V.si)),V.cgs.LENGTH={unit:$.m,prefix:q.SHORT.c},V.cgs.MASS={unit:$.g,prefix:q.SHORT[""]},V.cgs.FORCE={unit:$.dyn,prefix:q.SHORT[""]},V.cgs.ENERGY={unit:$.erg,prefix:q.NONE[""]},V.us=JSON.parse(JSON.stringify(V.si)),V.us.LENGTH={unit:$.ft,prefix:q.NONE[""]},V.us.MASS={unit:$.lbm,prefix:q.NONE[""]},V.us.TEMPERATURE={unit:$.degF,prefix:q.NONE[""]},V.us.FORCE={unit:$.lbf,prefix:q.NONE[""]},V.us.ENERGY={unit:$.BTU,prefix:q.BTU[""]},V.us.POWER={unit:$.hp,prefix:q.NONE[""]},V.us.PRESSURE={unit:$.psi,prefix:q.NONE[""]},V.auto=JSON.parse(JSON.stringify(V.si));var Y=V.auto;for(var Q in T.setUnitSystem=function(e){if(!(0,u.mQ)(V,e))throw new Error("Unit system "+e+" does not exist. Choices are: "+Object.keys(V).join(", "));Y=V[e]},T.getUnitSystem=function(){for(var e in V)if((0,u.mQ)(V,e)&&V[e]===Y)return e},T.typeConverters={BigNumber:function(e){return null!=e&&e.isFraction?new C(e.n).div(e.d).times(e.s):new C(e+"")},Fraction:function(e){return new E(e)},Complex:function(e){return e},number:function(e){return null!=e&&e.isFraction?S(e):e}},T.prototype._numberConverter=function(){var e=T.typeConverters[this.valueType()];if(e)return e;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},T._getNumberConverter=function(e){if(!T.typeConverters[e])throw new TypeError('Unsupported type "'+e+'"');return T.typeConverters[e]},$)if((0,u.mQ)($,Q)){var Z=$[Q];Z.dimensions=Z.base.dimensions}for(var J in H)if((0,u.mQ)(H,J)){var K=$[H[J]],X={};for(var ee in K)(0,u.mQ)(K,ee)&&(X[ee]=K[ee]);X.name=J,$[J]=X}return T.isValidAlpha=function(e){return/^[a-zA-Z]$/.test(e)},T.createUnit=function(e,t){if("object"!=typeof e)throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(t&&t.override)for(var n in e)if((0,u.mQ)(e,n)&&T.deleteUnit(n),e[n].aliases)for(var r=0;r<e[n].aliases.length;r++)T.deleteUnit(e[n].aliases[r]);var i;for(var s in e)(0,u.mQ)(e,s)&&(i=T.createUnitSingle(s,e[s]));return i},T.createUnitSingle=function(e,t){if(null==t&&(t={}),"string"!=typeof e)throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if((0,u.mQ)($,e))throw new Error('Cannot create unit "'+e+'": a unit with that name already exists');!function(e){for(var t=0;t<e.length;t++){if(r=e.charAt(t),0===t&&!T.isValidAlpha(r))throw new Error('Invalid unit name (must begin with alpha character): "'+e+'"');if(t>0&&!T.isValidAlpha(r)&&!P(r))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+e+'"')}}(e);var n,i,s,a=null,o=[],c=0;if(t&&"Unit"===t.type)a=t.clone();else if("string"==typeof t)""!==t&&(n=t);else{if("object"!=typeof t)throw new TypeError('Cannot create unit "'+e+'" from "'+t.toString()+'": expecting "string" or "Unit" or "Object"');n=t.definition,i=t.prefixes,c=t.offset,s=t.baseName,t.aliases&&(o=t.aliases.valueOf())}if(o)for(var l=0;l<o.length;l++)if((0,u.mQ)($,o[l]))throw new Error('Cannot create alias "'+o[l]+'": a unit with that name already exists');if(n&&"string"==typeof n&&!a)try{a=T.parse(n,{allowNoUnits:!0})}catch(t){throw t.message='Could not create unit "'+e+'" from "'+n+'": '+t.message,t}else n&&"Unit"===n.type&&(a=n.clone());o=o||[],c=c||0,i=i&&i.toUpperCase&&q[i.toUpperCase()]||q.NONE;var h={};if(a){h={name:e,value:a.value,dimensions:a.dimensions.slice(0),prefixes:i,offset:c};var p=!1;for(var d in z)if((0,u.mQ)(z,d)){for(var f=!0,m=0;m<L.length;m++)if(Math.abs((h.dimensions[m]||0)-(z[d].dimensions[m]||0))>1e-12){f=!1;break}if(f){p=!0,h.base=z[d];break}}if(!p){s=s||e+"_STUFF";var g={dimensions:a.dimensions.slice(0)};g.key=s,z[s]=g,Y[s]={unit:h,prefix:q.NONE[""]},h.base=z[s]}}else{if(s=s||e+"_STUFF",L.indexOf(s)>=0)throw new Error('Cannot create new base unit "'+e+'": a base unit with that name already exists (and cannot be overridden)');for(var y in L.push(s),z)(0,u.mQ)(z,y)&&(z[y].dimensions[L.length-1]=0);for(var x={dimensions:[]},v=0;v<L.length;v++)x.dimensions[v]=0;x.dimensions[L.length-1]=1,x.key=s,z[s]=x,h={name:e,value:1,dimensions:z[s].dimensions.slice(0),prefixes:i,offset:c,base:z[s]},Y[s]={unit:h,prefix:q.NONE[""]}}T.UNITS[e]=h;for(var b=0;b<o.length;b++){var D=o[b],w={};for(var A in h)(0,u.mQ)(h,A)&&(w[A]=h[A]);w.name=D,T.UNITS[D]=w}return delete j.cache,new T(null,e)},T.deleteUnit=function(e){delete T.UNITS[e],delete j.cache},T.PREFIXES=q,T.BASE_DIMENSIONS=L,T.BASE_UNITS=z,T.UNIT_SYSTEMS=V,T.UNITS=$,T}),{isClass:!0})},8782:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});var r=n(8321),i="createUnit",s=["typed","Unit"],a=(0,r.P9)(i,s,(e=>{var{typed:t,Unit:n}=e;return t(i,{"Object, Object":function(e,t){return n.createUnit(e,t)},Object:function(e){return n.createUnit(e,{})},"string, Unit | string | Object, Object":function(e,t,r){var i={};return i[e]=t,n.createUnit(i,r)},"string, Unit | string | Object":function(e,t){var r={};return r[e]=t,n.createUnit(r,{})},string:function(e){var t={};return t[e]={},n.createUnit(t,{})}})}))},4708:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var r=n(8321),i="splitUnit",s=["typed"],a=(0,r.P9)(i,s,(e=>{var{typed:t}=e;return t(i,{"Unit, Array":function(e,t){return e.splitUnit(t)}})}))},5486:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(8321),i=n(6355),s="unit",a=["typed","Unit"],o=(0,r.P9)(s,a,(e=>{var{typed:t,Unit:n}=e;return t(s,{Unit:function(e){return e.clone()},string:function(e){return n.isValuelessUnit(e)?new n(null,e):n.parse(e,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(e,t){return new n(e,t)},"number | BigNumber | Fraction":function(e){return new n(e)},"Array | Matrix":t.referToSelf((e=>t=>(0,i.Bl)(t,e)))})}))},3387:(e,t,n)=>{"use strict";n.d(t,{$L:()=>x,AW:()=>l,Cc:()=>k,DT:()=>g,Dc:()=>w,Dp:()=>F,EE:()=>y,Gj:()=>B,I:()=>A,Ik:()=>q,KV:()=>V,Kw:()=>I,Lg:()=>i,Lz:()=>H,Og:()=>a,QE:()=>T,Rd:()=>c,TT:()=>J,Tx:()=>Y,UK:()=>R,VK:()=>f,WX:()=>b,Wq:()=>E,XS:()=>d,_7:()=>M,_F:()=>X,aE:()=>K,bz:()=>U,cC:()=>v,cn:()=>Z,cr:()=>G,dd:()=>D,e0:()=>W,eb:()=>u,ez:()=>_,hy:()=>L,jh:()=>N,oL:()=>S,qH:()=>P,qQ:()=>j,qU:()=>Q,rg:()=>m,tP:()=>s,u5:()=>z,v2:()=>p,w$:()=>h,wp:()=>O,y0:()=>o,zr:()=>C,zy:()=>$});var r=n(8321),i=ee("speedOfLight","299792458","m s^-1"),s=ee("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),a=ee("planckConstant","6.62607015e-34","J s"),o=ee("reducedPlanckConstant","1.0545718176461565e-34","J s"),c=ee("magneticConstant","1.25663706212e-6","N A^-2"),u=ee("electricConstant","8.8541878128e-12","F m^-1"),l=ee("vacuumImpedance","376.730313667","ohm"),h=ee("coulomb","8.987551792261171e9","N m^2 C^-2"),p=ee("elementaryCharge","1.602176634e-19","C"),d=ee("bohrMagneton","9.2740100783e-24","J T^-1"),f=ee("conductanceQuantum","7.748091729863649e-5","S"),m=ee("inverseConductanceQuantum","12906.403729652257","ohm"),g=ee("magneticFluxQuantum","2.0678338484619295e-15","Wb"),y=ee("nuclearMagneton","5.0507837461e-27","J T^-1"),x=ee("klitzing","25812.807459304513","ohm"),v=ee("bohrRadius","5.29177210903e-11","m"),b=ee("classicalElectronRadius","2.8179403262e-15","m"),D=ee("electronMass","9.1093837015e-31","kg"),w=ee("fermiCoupling","1.1663787e-5","GeV^-2"),A=te("fineStructure",.0072973525693),S=ee("hartreeEnergy","4.3597447222071e-18","J"),N=ee("protonMass","1.67262192369e-27","kg"),C=ee("deuteronMass","3.3435830926e-27","kg"),E=ee("neutronMass","1.6749271613e-27","kg"),M=ee("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),T=ee("rydberg","10973731.568160","m^-1"),O=ee("thomsonCrossSection","6.6524587321e-29","m^2"),P=te("weakMixingAngle",.2229),_=te("efimovFactor",22.7),I=ee("atomicMass","1.66053906660e-27","kg"),B=ee("avogadro","6.02214076e23","mol^-1"),R=ee("boltzmann","1.380649e-23","J K^-1"),F=ee("faraday","96485.33212331001","C mol^-1"),j=ee("firstRadiation","3.7417718521927573e-16","W m^2"),k=ee("loschmidt","2.686780111798444e25","m^-3"),q=ee("gasConstant","8.31446261815324","J K^-1 mol^-1"),L=ee("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),z=ee("molarVolume","0.022413969545014137","m^3 mol^-1"),U=te("sackurTetrode",-1.16487052358),G=ee("secondRadiation","0.014387768775039337","m K"),$=ee("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),H=ee("wienDisplacement","2.897771955e-3","m K"),W=ee("molarMass","0.99999999965e-3","kg mol^-1"),V=ee("molarMassC12","11.9999999958e-3","kg mol^-1"),Y=ee("gravity","9.80665","m s^-2"),Q=ee("planckLength","1.616255e-35","m"),Z=ee("planckMass","2.176435e-8","kg"),J=ee("planckTime","5.391245e-44","s"),K=ee("planckCharge","1.87554603778e-18","C"),X=ee("planckTemperature","1.416785e+32","K");function ee(e,t,n){return(0,r.P9)(e,["config","Unit","BigNumber"],(e=>{var{config:r,Unit:i,BigNumber:s}=e,a=new i("BigNumber"===r.number?new s(t):parseFloat(t),n);return a.fixPrefix=!0,a}))}function te(e,t){return(0,r.P9)(e,["config","BigNumber"],(e=>{var{config:n,BigNumber:r}=e;return"BigNumber"===n.number?new r(t):t}))}},5838:(e,t,n)=>{"use strict";n.d(t,{$p:()=>d,Bq:()=>N,Jt:()=>q,Kx:()=>F,LO:()=>l,Tj:()=>C,Wr:()=>T,XR:()=>g,cs:()=>v,fj:()=>O,hO:()=>k,iD:()=>A,ig:()=>I,jJ:()=>E,ls:()=>P,pb:()=>M,px:()=>_,qj:()=>L,r2:()=>D,r7:()=>f,tQ:()=>x,tf:()=>p,xW:()=>R,yT:()=>m});var r=n(4634),i=n(1106),s=n(4943),a=n(760),o=n(1380),c=n(6636),u=n(3140);function l(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function h(e,t,n){var r,i=e.length;if(i!==t[n])throw new o.h(i,t[n]);if(n<t.length-1){var s=n+1;for(r=0;r<i;r++){var a=e[r];if(!Array.isArray(a))throw new o.h(t.length-1,t.length,"<");h(e[r],t,s)}}else for(r=0;r<i;r++)if(Array.isArray(e[r]))throw new o.h(t.length+1,t.length,">")}function p(e,t){if(0===t.length){if(Array.isArray(e))throw new o.h(e.length,0)}else h(e,t,0)}function d(e,t){var n=e.isMatrix?e._size:l(e);t._sourceSize.forEach(((e,t)=>{if(null!==e&&e!==n[t])throw new o.h(e,n[t])}))}function f(e,t){if(void 0!==e){if(!(0,s.Et)(e)||!(0,i.YN)(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"==typeof t&&e>=t)throw new c.d(e,t)}}function m(e){for(var t=0;t<e._dimensions.length;++t){var n=e._dimensions[t];if(n._data&&(0,s.cy)(n._data)){if(0===n._size[0])return!0}else if(n.isRange){if(n.start===n.end)return!0}else if((0,s.Kg)(n)&&0===n.length)return!0}return!1}function g(e,t,n){if(!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");return t.forEach((function(e){if(!(0,s.Et)(e)||!(0,i.YN)(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+(0,a.GP)(t)+")")})),((0,s.Et)(e)||(0,s.C4)(e))&&(e=[e]),y(e,t,0,void 0!==n?n:0),e}function y(e,t,n,r){var i,s,a=e.length,o=t[n],c=Math.min(a,o);if(e.length=o,n<t.length-1){var u=n+1;for(i=0;i<c;i++)s=e[i],Array.isArray(s)||(s=[s],e[i]=s),y(s,t,u,r);for(i=c;i<o;i++)s=[],e[i]=s,y(s,t,u,r)}else{for(i=0;i<c;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=c;i<o;i++)e[i]=r}}function x(e,t){var n=N(e),r=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new o.h(0,r,"!=");var i=b(t=v(t,r));if(r!==i)throw new o.h(i,r,"!=");try{return function(e,t){for(var n,r=e,i=t.length-1;i>0;i--){var s=t[i];n=[];for(var a=r.length/s,o=0;o<a;o++)n.push(r.slice(o*s,(o+1)*s));r=n}return r}(n,t)}catch(e){if(e instanceof o.h)throw new o.h(i,r,"!=");throw e}}function v(e,t){var n=b(e),r=e.slice(),i=e.indexOf(-1);if(e.indexOf(-1,i+1)>=0)throw new Error("More than one wildcard in sizes");if(i>=0){if(t%n!=0)throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);r[i]=-t/n}return r}function b(e){return e.reduce(((e,t)=>e*t),1)}function D(e,t){for(var n=t||l(e);Array.isArray(e)&&1===e.length;)e=e[0],n.shift();for(var r=n.length;1===n[r-1];)r--;return r<n.length&&(e=w(e,r,0),n.length=r),e}function w(e,t,n){var r,i;if(n<t){var s=n+1;for(r=0,i=e.length;r<i;r++)e[r]=w(e[r],t,s)}else for(;Array.isArray(e);)e=e[0];return e}function A(e,t,n,r){var i=r||l(e);if(n)for(var s=0;s<n;s++)e=[e],i.unshift(1);for(e=S(e,t,0);i.length<t;)i.push(1);return e}function S(e,t,n){var r,i;if(Array.isArray(e)){var s=n+1;for(r=0,i=e.length;r<i;r++)e[r]=S(e[r],t,s)}else for(var a=n;a<t;a++)e=[e];return e}function N(e){if(!Array.isArray(e))return e;var t=[];return e.forEach((function e(n){Array.isArray(n)?n.forEach(e):t.push(n)})),t}function C(e,t){return Array.prototype.map.call(e,t)}function E(e,t){Array.prototype.forEach.call(e,t)}function M(e,t){if(1!==l(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,t)}function T(e,t){if(1!==l(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,(e=>t.test(e)))}function O(e,t){return Array.prototype.join.call(e,t)}function P(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;var t=[],n=0;t[0]={value:e[0],identifier:0};for(var r=1;r<e.length;r++)e[r]===e[r-1]?n++:n=0,t.push({value:e[r],identifier:n});return t}function _(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;for(var t=[],n=0;n<e.length;n++)t.push(e[n].value);return t}function I(e,t){for(var n,r=0,i=0;i<e.length;i++){var s=e[i],a=Array.isArray(s);if(0===i&&a&&(r=s.length),a&&s.length!==r)return;var o=a?I(s,t):t(s);if(void 0===n)n=o;else if(n!==o)return"mixed"}return n}function B(e,t,n,r){if(r<n){if(e.length!==t.length)throw new o.h(e.length,t.length);for(var i=[],s=0;s<e.length;s++)i[s]=B(e[s],t[s],n,r+1);return i}return e.concat(t)}function R(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(1===e.length)return e[0];if(e.length>1)return e.slice(1).reduce((function(e,n){return B(e,n,t,0)}),e[0]);throw new Error("Wrong number of arguments in function concat")}function F(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.map((e=>e.length)),i=Math.max(...r),s=new Array(i).fill(null),a=0;a<t.length;a++)for(var o=t[a],c=r[a],u=0;u<c;u++){var l=i-c+u;o[u]>s[l]&&(s[l]=o[u])}for(var h=0;h<t.length;h++)j(t[h],s);return s}function j(e,t){for(var n=t.length,r=e.length,i=0;i<r;i++){var s=n-r+i;if(e[i]<t[s]&&e[i]>1||e[i]>t[s])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(r," with size ").concat(e[i]," to size ").concat(t[s]))}}function k(e,t){var n=l(e);if((0,u.QO)(n,t))return e;j(n,t);var i,s,a,o=F(n,t),c=o.length,h=[...Array(c-n.length).fill(1),...n],p=function(e){return r([],e)}(e);n.length<c&&(n=l(p=x(p,h)));for(var d=0;d<c;d++)n[d]<o[d]&&(i=p,s=o[d],a=d,n=l(p=R(...Array(s).fill(i),a)));return p}function q(e,t){if(!Array.isArray(e))throw new Error("Array expected");var n=l(e);if(t.length!==n.length)throw new o.h(t.length,n.length);for(var r=0;r<t.length;r++)f(t[r],n[r]);return t.reduce(((e,t)=>e[t]),e)}function L(e,t,n,r){return Array.isArray(e)?e.map((function(e,i){return L(e,t.concat(i),n,r)})):r(e,t,n)}},4636:(e,t,n)=>{"use strict";function r(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitAnd");var n=e.constructor;if(e.isNaN()||t.isNaN())return new n(NaN);if(e.isZero()||t.eq(-1)||e.eq(t))return e;if(t.isZero()||e.eq(-1))return t;if(!e.isFinite()||!t.isFinite()){if(!e.isFinite()&&!t.isFinite())return e.isNegative()===t.isNegative()?e:new n(0);if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new n(0):t;if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new n(0):e}return a(e,t,(function(e,t){return e&t}))}function i(e){if(e.isFinite()&&!e.isInteger())throw new Error("Integer expected in function bitNot");var t=e.constructor,n=t.precision;t.config({precision:1e9});var r=e.plus(new t(1));return r.s=-r.s||null,t.config({precision:n}),r}function s(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitOr");var n=e.constructor;if(e.isNaN()||t.isNaN())return new n(NaN);var r=new n(-1);return e.isZero()||t.eq(r)||e.eq(t)?t:t.isZero()||e.eq(r)?e:e.isFinite()&&t.isFinite()?a(e,t,(function(e,t){return e|t})):!e.isFinite()&&!e.isNegative()&&t.isNegative()||e.isNegative()&&!t.isNegative()&&!t.isFinite()?r:e.isNegative()&&t.isNegative()?e.isFinite()?e:t:e.isFinite()?t:e}function a(e,t,n){var r,s,a,c,u,l=e.constructor,h=+(e.s<0),p=+(t.s<0);if(h){r=o(i(e));for(var d=0;d<r.length;++d)r[d]^=1}else r=o(e);if(p){s=o(i(t));for(var f=0;f<s.length;++f)s[f]^=1}else s=o(t);r.length<=s.length?(a=r,c=s,u=h):(a=s,c=r,u=p);var m=a.length,g=c.length,y=1^n(h,p),x=new l(1^y),v=new l(1),b=new l(2),D=l.precision;for(l.config({precision:1e9});m>0;)n(a[--m],c[--g])===y&&(x=x.plus(v)),v=v.times(b);for(;g>0;)n(u,c[--g])===y&&(x=x.plus(v)),v=v.times(b);return l.config({precision:D}),0===y&&(x.s=-x.s),x}function o(e){for(var t=e.d,n=t[0]+"",r=1;r<t.length;++r){for(var i=t[r]+"",s=7-i.length;s--;)i="0"+i;n+=i}for(var a=n.length;"0"===n.charAt(a);)a--;var o=e.e,c=n.slice(0,a+1||1),u=c.length;if(o>0)if(++o>u)for(o-=u;o--;)c+="0";else o<u&&(c=c.slice(0,o)+"."+c.slice(o));for(var l=[0],h=0;h<c.length;){for(var p=l.length;p--;)l[p]*=10;l[0]+=parseInt(c.charAt(h++));for(var d=0;d<l.length;++d)l[d]>1&&(null!==l[d+1]&&void 0!==l[d+1]||(l[d+1]=0),l[d+1]+=l[d]>>1,l[d]&=1)}return l.reverse()}function c(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitXor");var n=e.constructor;if(e.isNaN()||t.isNaN())return new n(NaN);if(e.isZero())return t;if(t.isZero())return e;if(e.eq(t))return new n(0);var r=new n(-1);return e.eq(r)?i(t):t.eq(r)?i(e):e.isFinite()&&t.isFinite()?a(e,t,(function(e,t){return e^t})):e.isFinite()||t.isFinite()?new n(e.isNegative()===t.isNegative()?1/0:-1/0):r}function u(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function leftShift");var n=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new n(NaN):e.isZero()||t.isZero()?e:e.isFinite()||t.isFinite()?t.lt(55)?e.times(Math.pow(2,t.toNumber())+""):e.times(new n(2).pow(t)):new n(NaN)}function l(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function rightArithShift");var n=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new n(NaN):e.isZero()||t.isZero()?e:t.isFinite()?t.lt(55)?e.div(Math.pow(2,t.toNumber())+"").floor():e.div(new n(2).pow(t)).floor():e.isNegative()?new n(-1):e.isFinite()?new n(0):new n(NaN)}n.d(t,{Am:()=>l,GK:()=>r,KO:()=>s,ZN:()=>u,e6:()=>i,hC:()=>c})},7506:(e,t,n)=>{"use strict";n.d(t,{OP:()=>o,R3:()=>a,pb:()=>s,t9:()=>i});var r=n(2718),i=(0,r.B)((function(e){return new e(1).exp()}),{hasher:c}),s=(0,r.B)((function(e){return new e(1).plus(new e(5).sqrt()).div(2)}),{hasher:c}),a=(0,r.B)((function(e){return e.acos(-1)}),{hasher:c}),o=(0,r.B)((function(e){return a(e).times(2)}),{hasher:c});function c(e){return e[0].precision}},6052:(e,t,n)=>{"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-9,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return!e.isNaN()&&!t.isNaN()&&(e.isFinite()&&t.isFinite()?!!e.eq(t)||e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(n),r)):e.eq(t))}n.d(t,{q:()=>r})},6355:(e,t,n)=>{"use strict";n.d(t,{Bl:()=>u,HL:()=>o,TS:()=>l,Tb:()=>p,xL:()=>c});var r=n(4943),i=n(6636),s=n(5838),a=n(9979);function o(e){for(var t=0;t<e.length;t++)if((0,r.P3)(e[t]))return!0;return!1}function c(e,t){(0,r.OA)(e)&&(e=e.valueOf());for(var n=0,i=e.length;n<i;n++){var s=e[n];Array.isArray(s)?c(s,t):t(s)}}function u(e,t,n){return e&&"function"==typeof e.map?e.map((function(e){return u(e,t,n)})):t(e)}function l(e,t,n){var a=Array.isArray(e)?(0,s.LO)(e):e.size();if(t<0||t>=a.length)throw new i.d(t,a.length);return(0,r.OA)(e)?e.create(h(e.valueOf(),t,n),e.datatype()):h(e,t,n)}function h(e,t,n){var r,i,s,o;if(t<=0){if(Array.isArray(e[0])){for(o=(0,a.U)(e),i=[],r=0;r<o.length;r++)i[r]=h(o[r],t-1,n);return i}for(s=e[0],r=1;r<e.length;r++)s=n(s,e[r]);return s}for(i=[],r=0;r<e.length;r++)i[r]=h(e[r],t-1,n);return i}function p(e,t,n,r,i,s,a,o,c,u,l){var h,p,d,f,m=e._values,g=e._index,y=e._ptr;if(r)for(p=y[t],d=y[t+1],h=p;h<d;h++)n[f=g[h]]!==s?(n[f]=s,a.push(f),u?(r[f]=c?o(m[h],l):o(l,m[h]),i[f]=s):r[f]=m[h]):(r[f]=c?o(m[h],r[f]):o(r[f],m[h]),i[f]=s);else for(p=y[t],d=y[t+1],h=p;h<d;h++)n[f=g[h]]!==s?(n[f]=s,a.push(f)):i[f]=s}},9863:(e,t,n)=>{"use strict";n.d(t,{HU:()=>i,Tn:()=>c,dL:()=>s,xk:()=>a,z_:()=>o});var r=n(3140);function i(e,t){if(a(e,t))return e[t];if("function"==typeof e[t]&&c(e,t))throw new Error('Cannot access method "'+t+'" as a property');throw new Error('No access to property "'+t+'"')}function s(e,t,n){if(a(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}function a(e,t){return!(!function(e){return"object"==typeof e&&e&&e.constructor===Object}(e)&&!Array.isArray(e)||!(0,r.mQ)(u,t)&&(t in Object.prototype||t in Function.prototype))}function o(e,t){if(!c(e,t))throw new Error('No access to method "'+t+'"');return e[t]}function c(e,t){return!(null==e||"function"!=typeof e[t]||(0,r.mQ)(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)||!(0,r.mQ)(l,t)&&(t in Object.prototype||t in Function.prototype))}var u={length:!0,name:!0},l={toString:!0,valueOf:!0,toLocaleString:!0}},8321:(e,t,n)=>{"use strict";n.d(t,{P9:()=>i,Py:()=>a,T$:()=>s});var r=n(3140);function i(e,t,n,i){function s(i){var s=(0,r.K)(i,t.map(a));return function(e,t,n){if(!t.filter((e=>!function(e){return e&&"?"===e[0]}(e))).every((e=>void 0!==n[e]))){var r=t.filter((e=>void 0===n[e]));throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(r.map((e=>'"'.concat(e,'"'))).join(", "),"."))}}(e,t,i),n(s)}return s.isFactory=!0,s.fn=e,s.dependencies=t.slice().sort(),i&&(s.meta=i),s}function s(e){return"function"==typeof e&&"string"==typeof e.fn&&Array.isArray(e.dependencies)}function a(e){return e&&"?"===e[0]?e.slice(1):e}},2718:(e,t,n)=>{"use strict";function r(e){var t=0,n=1,r=Object.create(null),i=Object.create(null),s=0,a=function(e){var a=i[e];if(a&&(delete r[a],delete i[e],--t,n===a)){if(!t)return s=0,void(n=1);for(;!Object.prototype.hasOwnProperty.call(r,++n););}};return e=Math.abs(e),{hit:function(o){var c=i[o],u=++s;if(r[u]=o,i[o]=u,!c){if(++t<=e)return;return o=r[n],a(o),o}if(delete r[c],n===c)for(;!Object.prototype.hasOwnProperty.call(r,++n););},delete:a,clear:function(){t=s=0,n=1,r=Object.create(null),i=Object.create(null)}}}function i(e){var{hasher:t,limit:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=null==n?Number.POSITIVE_INFINITY:n,t=null==t?JSON.stringify:t,function i(){"object"!=typeof i.cache&&(i.cache={values:new Map,lru:r(n||Number.POSITIVE_INFINITY)});for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var o=t(s);if(i.cache.values.has(o))return i.cache.lru.hit(o),i.cache.values.get(o);var c=e.apply(e,s);return i.cache.values.set(o,c),i.cache.values.delete(i.cache.lru.hit(o)),c}}n.d(t,{B:()=>i})},4943:(e,t,n)=>{"use strict";n.d(t,{$$:()=>U,$I:()=>q,$P:()=>w,AF:()=>m,AS:()=>O,BA:()=>R,C4:()=>s,CD:()=>I,Et:()=>i,GJ:()=>z,Gv:()=>S,Kg:()=>l,Ll:()=>L,Lm:()=>x,OA:()=>p,P3:()=>d,PO:()=>B,Px:()=>k,QP:()=>Y,Tn:()=>D,Ye:()=>$,Zd:()=>o,_Z:()=>g,aZ:()=>C,b0:()=>T,cy:()=>h,eW:()=>v,fU:()=>c,gO:()=>P,gS:()=>b,gd:()=>A,iu:()=>H,jW:()=>F,jh:()=>N,kZ:()=>M,li:()=>W,m2:()=>j,nw:()=>y,o_:()=>V,qM:()=>_,sI:()=>a,tv:()=>G,uQ:()=>E,vO:()=>u,zR:()=>f});var r=n(6905);function i(e){return"number"==typeof e}function s(e){return!(!e||"object"!=typeof e||"function"!=typeof e.constructor)&&(!0===e.isBigNumber&&"object"==typeof e.constructor.prototype&&!0===e.constructor.prototype.isBigNumber||"function"==typeof e.constructor.isDecimal&&!0===e.constructor.isDecimal(e))}function a(e){return"bigint"==typeof e}function o(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isComplex||!1}function c(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isFraction||!1}function u(e){return e&&!0===e.constructor.prototype.isUnit||!1}function l(e){return"string"==typeof e}var h=Array.isArray;function p(e){return e&&!0===e.constructor.prototype.isMatrix||!1}function d(e){return Array.isArray(e)||p(e)}function f(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function m(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function g(e){return e&&!0===e.constructor.prototype.isRange||!1}function y(e){return e&&!0===e.constructor.prototype.isIndex||!1}function x(e){return"boolean"==typeof e}function v(e){return e&&!0===e.constructor.prototype.isResultSet||!1}function b(e){return e&&!0===e.constructor.prototype.isHelp||!1}function D(e){return"function"==typeof e}function w(e){return e instanceof Date}function A(e){return e instanceof RegExp}function S(e){return!(!e||"object"!=typeof e||e.constructor!==Object||o(e)||c(e))}function N(e){return!!e&&(e instanceof Map||e instanceof r.AP||"function"==typeof e.set&&"function"==typeof e.get&&"function"==typeof e.keys&&"function"==typeof e.has)}function C(e){return N(e)&&N(e.a)&&N(e.b)}function E(e){return N(e)&&S(e.wrappedObject)}function M(e){return null===e}function T(e){return void 0===e}function O(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1}function P(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1}function _(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function I(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1}function B(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1}function R(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1}function F(e){return R(e)||U(e)&&1===e.args.length&&R(e.args[0])&&"-+~".includes(e.op)}function j(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function k(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1}function q(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1}function L(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1}function z(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1}function U(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1}function G(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1}function $(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1}function H(e){return e&&!0===e.isRelationalNode&&!0===e.constructor.prototype.isNode||!1}function W(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1}function V(e){return e&&!0===e.constructor.prototype.isChain||!1}function Y(e){var t=typeof e;return"object"===t?null===e?"null":s(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}},4139:(e,t,n)=>{"use strict";n.d(t,{GK:()=>a,MA:()=>l,QP:()=>h,WC:()=>o,oB:()=>c});var r=n(763),i=n(3140),s={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},a={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},o={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(a.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(a.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(a.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(a.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(a.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(a.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(a.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(a.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(a.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(a.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(a.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(a.bitAnd,"${args[1]}\\right)")},bitNot:{1:a.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(a.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(a.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(a.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(a.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(a.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(a.and,"${args[1]}\\right)")},not:{1:a.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(a.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(a.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(a.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(a.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(a.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(a.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(a.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(a.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(a.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(a.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(a.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(a.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(a.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(s.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},c="\\mathrm{${name}}\\left(${args}\\right)",u={deg:"^\\circ"};function l(e){return r(e,{preserveFormatting:!0})}function h(e,t){return(t=void 0!==t&&t)?(0,i.mQ)(u,e)?u[e]:"\\mathrm{"+l(e)+"}":(0,i.mQ)(s,e)?s[e]:l(e)}},6905:(e,t,n)=>{"use strict";n.d(t,{A5:()=>c,AP:()=>s,pI:()=>u,vw:()=>l,w6:()=>a});var r=n(9863),i=n(4943);class s{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter((e=>this.has(e))).values()}get(e){return(0,r.HU)(this.wrappedObject,e)}set(e,t){return(0,r.dL)(this.wrappedObject,e,t),this}has(e){return(0,r.xk)(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return o(this.keys(),(e=>[e,this.get(e)]))}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){(0,r.xk)(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class a{constructor(e,t,n){this.a=e,this.b=t,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return o(this.keys(),(e=>[e,this.get(e)]))}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function o(e,t){return{next:()=>{var n=e.next();return n.done?n:{value:t(n.value),done:!1}}}}function c(){return new Map}function u(e){if(!e)return c();if((0,i.jh)(e))return e;if((0,i.Gv)(e))return new s(e);throw new Error("createMap can create maps from objects or Maps")}function l(e){if(e instanceof s)return e.wrappedObject;var t={};for(var n of e.keys()){var i=e.get(n);(0,r.dL)(t,n,i)}return t}},6495:(e,t,n)=>{"use strict";function r(){throw new Error('No "bignumber" implementation available')}function i(){throw new Error('No "fraction" implementation available')}function s(){throw new Error('No "matrix" implementation available')}n.d(t,{Sw:()=>i,j9:()=>r,zc:()=>s})},1106:(e,t,n)=>{"use strict";n.d(t,{BC:()=>s,Fq:()=>w,GP:()=>d,IY:()=>h,Kk:()=>u,L0:()=>C,Mg:()=>g,QI:()=>m,YL:()=>c,YN:()=>i,_S:()=>a,_n:()=>l,b1:()=>M,jS:()=>f,p6:()=>o,q8:()=>D,rf:()=>S,vm:()=>b,yH:()=>A,yI:()=>N,ym:()=>E});var r=n(4943);function i(e){return"boolean"==typeof e||!!isFinite(e)&&e===Math.round(e)}function s(e,t){return"bigint"!==t.number||/^-?\d+$/.test(e)?t.number:t.numberFallback}var a=Math.sign||function(e){return e>0?1:e<0?-1:0},o=Math.log2||function(e){return Math.log(e)/Math.LN2},c=Math.log10||function(e){return Math.log(e)/Math.LN10},u=Math.log1p||function(e){return Math.log(e+1)},l=Math.cbrt||function(e){if(0===e)return e;var t,n=e<0;return n&&(e=-e),t=isFinite(e)?(e/((t=Math.exp(Math.log(e)/3))*t)+2*t)/3:e,n?-t:t},h=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function p(e,t,n){var r={2:"0b",8:"0o",16:"0x"}[t],s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!i(n))throw new Error("size must be an integer");if(e>2**(n-1)-1||e<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!i(e))throw new Error("Value must be an integer");e<0&&(e+=2**n),s="i".concat(n)}var a="";return e<0&&(e=-e,a="-"),"".concat(a).concat(r).concat(e.toString(t)).concat(s)}function d(e,t){if("function"==typeof t)return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:n,precision:i,wordSize:s}=f(t);switch(n){case"fixed":return g(e,i);case"exponential":return y(e,i);case"engineering":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=x(m(e),t),i=n.exponent,s=n.coefficients,a=i%3==0?i:i<0?i-3-i%3:i-i%3;if((0,r.Et)(t))for(;t>s.length||i-a+1>s.length;)s.push(0);else for(var o=Math.abs(i-a)-(s.length-1),c=0;c<o;c++)s.push(0);for(var u=Math.abs(i-a),l=1;u>0;)l++,u--;var h=s.slice(l).join(""),p=(0,r.Et)(t)&&h.length||h.match(/[1-9]/)?"."+h:"",d=s.slice(0,l).join("")+p+"e"+(i>=0?"+":"")+a.toString();return n.sign+d}(e,i);case"bin":return p(e,2,s);case"oct":return p(e,8,s);case"hex":return p(e,16,s);case"auto":return function(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=O(null==n?void 0:n.lowerExp,-3),i=O(null==n?void 0:n.upperExp,5),s=m(e),a=t?x(s,t):s;if(a.exponent<r||a.exponent>=i)return y(e,t);var o=a.coefficients,c=a.exponent;o.length<t&&(o=o.concat(v(t-o.length))),o=o.concat(v(c-o.length+1+(o.length<t?t-o.length:0)));var u=c>0?c:0;return u<(o=v(-c).concat(o)).length-1&&o.splice(u+1,0,"."),a.sign+o.join("")}(e,i,t).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function f(e){var t,n,i="auto";if(void 0!==e)if((0,r.Et)(e))t=e;else if((0,r.C4)(e))t=e.toNumber();else{if(!(0,r.Gv)(e))throw new Error("Unsupported type of options, number, BigNumber, or object expected");void 0!==e.precision&&(t=T(e.precision,(()=>{throw new Error('Option "precision" must be a number or BigNumber')}))),void 0!==e.wordSize&&(n=T(e.wordSize,(()=>{throw new Error('Option "wordSize" must be a number or BigNumber')}))),e.notation&&(i=e.notation)}return{notation:i,precision:t,wordSize:n}}function m(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),s=r.indexOf(".");i+=-1!==s?s-1:r.length-1;var a=r.replace(".","").replace(/^0*/,(function(e){return i-=e.length,""})).replace(/0*$/,"").split("").map((function(e){return parseInt(e)}));return 0===a.length&&(a.push(0),i++),{sign:n,coefficients:a,exponent:i}}function g(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=m(e),r="number"==typeof t?x(n,n.exponent+1+t):n,i=r.coefficients,s=r.exponent+1,a=s+(t||0);return i.length<a&&(i=i.concat(v(a-i.length))),s<0&&(i=v(1-s).concat(i),s=1),s<i.length&&i.splice(s,0,0===s?"0.":"."),r.sign+i.join("")}function y(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=m(e),r=t?x(n,t):n,i=r.coefficients,s=r.exponent;i.length<t&&(i=i.concat(v(t-i.length)));var a=i.shift();return r.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function x(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t&&r.splice(t,r.length-t)[0]>=5){var i=t-1;for(r[i]++;10===r[i];)r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++}return n}function v(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function b(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return!isNaN(e)&&!isNaN(t)&&(isFinite(e)&&isFinite(t)?e===t||Math.abs(e-t)<=Math.max(n*Math.max(Math.abs(e),Math.abs(t)),r):e===t)}Number.EPSILON;var w=Math.acosh||function(e){return Math.log(Math.sqrt(e*e-1)+e)},A=Math.asinh||function(e){return Math.log(Math.sqrt(e*e+1)+e)},S=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2},N=Math.cosh||function(e){return(Math.exp(e)+Math.exp(-e))/2},C=Math.sinh||function(e){return(Math.exp(e)-Math.exp(-e))/2},E=Math.tanh||function(e){var t=Math.exp(2*e);return(t-1)/(t+1)};function M(e,t){return(e>0||!(e<0)&&1/e==1/0)^(t>0||!(t<0)&&1/t==1/0)?-e:e}function T(e,t){return(0,r.Et)(e)?e:(0,r.C4)(e)?e.toNumber():void t()}function O(e,t){return(0,r.Et)(e)?e:(0,r.C4)(e)?e.toNumber():t}},3140:(e,t,n)=>{"use strict";n.d(t,{K:()=>d,Mx:()=>p,QO:()=>o,RZ:()=>l,X$:()=>s,mQ:()=>h,o8:()=>i,rU:()=>c,zw:()=>a});var r=n(4943);function i(e){var t=typeof e;if("number"===t||"bigint"===t||"string"===t||"boolean"===t||null==e)return e;if("function"==typeof e.clone)return e.clone();if(Array.isArray(e))return e.map((function(e){return i(e)}));if(e instanceof Date)return new Date(e.valueOf());if((0,r.C4)(e))return e;if((0,r.Gv)(e))return function(e,t){var n={};for(var r in e)h(e,r)&&(n[r]=t(e[r]));return n}(e,i);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function s(e,t){for(var n in t)h(t,n)&&(e[n]=t[n]);return e}function a(e,t){if(Array.isArray(t))throw new TypeError("Arrays are not supported by deepExtend");for(var n in t)if(h(t,n)&&!(n in Object.prototype)&&!(n in Function.prototype))if(t[n]&&t[n].constructor===Object)void 0===e[n]&&(e[n]={}),e[n]&&e[n].constructor===Object?a(e[n],t[n]):e[n]=t[n];else{if(Array.isArray(t[n]))throw new TypeError("Arrays are not supported by deepExtend");e[n]=t[n]}return e}function o(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!o(e[r],t[r]))return!1;return!0}if("function"==typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!o(e[n],t[n]))return!1;for(n in t)if(!(n in e))return!1;return!0}return e===t}function c(e){var t={};return u(e,t),t}function u(e,t){for(var n in e)if(h(e,n)){var r=e[n];"object"==typeof r&&null!==r?u(r,t):t[n]=r}}function l(e,t,n){var r,i=!0;Object.defineProperty(e,t,{get:function(){return i&&(r=n(),i=!1),r},set:function(e){r=e,i=!1},configurable:!0,enumerable:!0})}function h(e,t){return e&&Object.hasOwnProperty.call(e,t)}function p(e){return e&&"function"==typeof e.factory}function d(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],s=e[i];void 0!==s&&(n[i]=s)}return n}},6383:(e,t,n)=>{"use strict";n.d(t,{r:()=>a});var r=n(6627),i=n(5838),s=n(4943);function a(e,t,n){if(r.A.isTypedFunction(e)){var s=(t.isMatrix?t.size():(0,i.LO)(t)).map((()=>0)),a=t.isMatrix?t.get(s):(0,i.Jt)(t,s),c=1===Object.keys(e.signatures).length,u=function(e,t,n,i){for(var s=[t,n,i],a=3;a>0;a--){var o=s.slice(0,a);if(null!==r.A.resolve(e,o))return a}}(e,a,s,t),l=c?Object.values(e.signatures)[0]:e;return u>=1&&u<=3?function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return o(l,r.slice(0,u),n,e.name)}:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return o(l,r,n,e.name)}}return e}function o(e,t,n,r){try{return e(...t)}catch(e){!function(e,t,n,r){var i;if(e instanceof TypeError&&"wrongType"===(null===(i=e.data)||void 0===i?void 0:i.category)){var a=[];throw a.push("value: ".concat((0,s.QP)(t[0]))),t.length>=2&&a.push("index: ".concat((0,s.QP)(t[1]))),t.length>=3&&a.push("array: ".concat((0,s.QP)(t[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(a.join(", "),") at index ").concat(JSON.stringify(t[1])))}throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(e.message))}(e,t,n,r)}}},3556:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});var r=/\$([\w.]+)/g},924:(e,t,n)=>{"use strict";function r(e,t){if(t<e)return 1;if(t===e)return t;var n=t+e>>1;return r(e,n)*r(n+1,t)}n.d(t,{q:()=>r})},8315:(e,t,n)=>{"use strict";n.d(t,{n:()=>i});var r=n(6905);function i(e,t){return new r.w6(e,new r.AP(t),new Set(Object.keys(t)))}},760:(e,t,n)=>{"use strict";n.d(t,{n6:()=>f,d5:()=>c,ih:()=>p,GP:()=>u,As:()=>l});var r=n(4943),i=n(1106);function s(e,t,n){var r=new(0,e.constructor)(2),s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!(0,i.YN)(n))throw new Error("size must be an integer");if(e.greaterThan(r.pow(n-1).sub(1))||e.lessThan(r.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(r.pow(n))),s="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(s);case 8:return"".concat(e.toOctal()).concat(s);case 16:return"".concat(e.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(t," not supported "))}}function a(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()}function o(e,t){return(0,r.Et)(e)?e:(0,r.C4)(e)?e.toNumber():t}function c(e,t){var n=e.length-t.length,r=e.length;return e.substring(n,r)===t}function u(e,t){var n=function(e,t){return"number"==typeof e?(0,i.GP)(e,t):(0,r.C4)(e)?function(e,t){if("function"==typeof t)return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:c}=(0,i.jS)(t);switch(n){case"fixed":return function(e,t){return e.toFixed(t)}(e,r);case"exponential":return a(e,r);case"engineering":return function(e,t){var n=e.e,r=n%3==0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)).toPrecision(t);return i.includes("e")&&(i=new(0,e.constructor)(i).toFixed()),i+"e"+(n>=0?"+":"")+r.toString()}(e,r);case"bin":return s(e,2,c);case"oct":return s(e,8,c);case"hex":return s(e,16,c);case"auto":var u=o(null==t?void 0:t.lowerExp,-3),l=o(null==t?void 0:t.upperExp,5);if(e.isZero())return"0";var h=e.toSignificantDigits(r),p=h.e;return(p>=u&&p<l?h.toFixed():a(e,r)).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(e,t):function(e){return e&&"object"==typeof e&&"number"==typeof e.s&&"number"==typeof e.n&&"number"==typeof e.d||!1}(e)?t&&"decimal"===t.fraction?e.toString():e.s*e.n+"/"+e.d:Array.isArray(e)?d(e,t):(0,r.Kg)(e)?l(e):"function"==typeof e?e.syntax?String(e.syntax):"function":e&&"object"==typeof e?"function"==typeof e.format?e.format(t):e&&e.toString(t)!=={}.toString()?e.toString(t):"{"+Object.keys(e).map((n=>l(n)+": "+u(e[n],t))).join(", ")+"}":String(e)}(e,t);return t&&"object"==typeof t&&"truncate"in t&&n.length>t.truncate?n.substring(0,t.truncate-3)+"...":n}function l(e){for(var t=String(e),n="",r=0;r<t.length;){var i=t.charAt(r);n+=i in h?h[i]:i,r++}return'"'+n+'"'}var h={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function p(e){var t=String(e);return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(e,t){if(Array.isArray(e)){for(var n="[",r=e.length,i=0;i<r;i++)0!==i&&(n+=", "),n+=d(e[i],t);return n+"]"}return u(e,t)}function f(e,t){if(!(0,r.Kg)(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+(0,r.QP)(e)+", index: 0)");if(!(0,r.Kg)(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+(0,r.QP)(t)+", index: 1)");return e===t?0:e>t?1:-1}},9979:(e,t,n)=>{"use strict";function r(e){var t,n,r=e.length,i=e[0].length,s=[];for(n=0;n<i;n++){var a=[];for(t=0;t<r;t++)a.push(e[t][n]);s.push(a)}return s}n.d(t,{U:()=>r})},6627:(e,t,n)=>{"use strict";function r(){return!0}function i(){return!1}function s(){}n.d(t,{A:()=>o});const a="Argument is not a typed-function.",o=function e(){function t(e){return"object"==typeof e&&null!==e&&e.constructor===Object}const n=[{name:"number",test:function(e){return"number"==typeof e}},{name:"string",test:function(e){return"string"==typeof e}},{name:"boolean",test:function(e){return"boolean"==typeof e}},{name:"Function",test:function(e){return"function"==typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],o={name:"any",test:r,isAny:!0};let c,u,l=0,h={createCount:0};function p(e){const t=c.get(e);if(t)return t;let n='Unknown type "'+e+'"';const r=e.toLowerCase();let i;for(i of u)if(i.toLowerCase()===r){n+='. Did you mean "'+i+'" ?';break}throw new TypeError(n)}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";const n=t?p(t).index:u.length,r=[];for(let t=0;t<e.length;++t){if(!e[t]||"string"!=typeof e[t].name||"function"!=typeof e[t].test)throw new TypeError("Object with properties {name: string, test: function} expected");const i=e[t].name;if(c.has(i))throw new TypeError('Duplicate type name "'+i+'"');r.push(i),c.set(i,{name:i,test:e[t].test,isAny:e[t].isAny,index:n+t,conversionsTo:[]})}const i=u.slice(n);u=u.slice(0,n).concat(r).concat(i);for(let e=n+r.length;e<u.length;++e)c.get(u[e]).index=e}function f(){c=new Map,u=[],l=0,d([o],!1)}function m(e){const t=u.filter((t=>{const n=c.get(t);return!n.isAny&&n.test(e)}));return t.length?t:["any"]}function g(e){return e&&"function"==typeof e&&"_typedFunctionData"in e}function y(e,t,n){if(!g(e))throw new TypeError(a);const r=n&&n.exact,i=w(Array.isArray(t)?t.join(","):t),s=x(i);if(!r||s in e.signatures){const t=e._typedFunctionData.signatureMap.get(s);if(t)return t}const o=i.length;let c,u;if(r){let t;for(t in c=[],e.signatures)c.push(e._typedFunctionData.signatureMap.get(t))}else c=e._typedFunctionData.signatures;for(let e=0;e<o;++e){const t=i[e],n=[];let r;for(r of c){const i=C(r.params,e);if(i&&(!t.restParam||i.restParam)){if(!i.hasAny){const e=D(i);if(t.types.some((t=>!e.has(t.name))))continue}n.push(r)}}if(c=n,0===c.length)break}for(u of c)if(u.params.length<=o)return u;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+x(i,", ")+"))")}function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e.map((e=>e.name)).join(t)}function v(e){const t=0===e.indexOf("..."),n=(t?e.length>3?e.slice(3):"any":e).split("|").map((e=>p(e.trim())));let r=!1,i=t?"...":"";return{types:n.map((function(e){return r=e.isAny||r,i+=e.name+"|",{name:e.name,typeIndex:e.index,test:e.test,isAny:e.isAny,conversion:null,conversionIndex:-1}})),name:i.slice(0,-1),hasAny:r,hasConversion:!1,restParam:t}}function b(e){const t=function(e){if(0===e.length)return[];const t=e.map(p);e.length>1&&t.sort(((e,t)=>e.index-t.index));let n=t[0].conversionsTo;if(1===e.length)return n;n=n.concat([]);const r=new Set(e);for(let e=1;e<t.length;++e){let i;for(i of t[e].conversionsTo)r.has(i.from)||(n.push(i),r.add(i.from))}return n}(e.types.map((e=>e.name)));let n=e.hasAny,r=e.name;const i=t.map((function(e){const t=p(e.from);return n=t.isAny||n,r+="|"+e.from,{name:e.from,typeIndex:t.index,test:t.test,isAny:t.isAny,conversion:e,conversionIndex:e.index}}));return{types:e.types.concat(i),name:r,hasAny:n,hasConversion:i.length>0,restParam:e.restParam}}function D(e){return e.typeSet||(e.typeSet=new Set,e.types.forEach((t=>e.typeSet.add(t.name)))),e.typeSet}function w(e){const t=[];if("string"!=typeof e)throw new TypeError("Signatures must be strings");const n=e.trim();if(""===n)return t;const r=n.split(",");for(let e=0;e<r.length;++e){const n=v(r[e].trim());if(n.restParam&&e!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+r[e]+'": only allowed for the last parameter');if(0===n.types.length)return null;t.push(n)}return t}function A(e){const t=G(e);return!!t&&t.restParam}function S(e){if(e&&0!==e.types.length){if(1===e.types.length)return p(e.types[0].name).test;if(2===e.types.length){const t=p(e.types[0].name).test,n=p(e.types[1].name).test;return function(e){return t(e)||n(e)}}{const t=e.types.map((function(e){return p(e.name).test}));return function(e){for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1}}}return r}function N(e){let t,n,r;if(A(e)){t=U(e).map(S);const n=t.length,r=S(G(e)),i=function(e){for(let t=n;t<e.length;t++)if(!r(e[t]))return!1;return!0};return function(e){for(let n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return i(e)&&e.length>=n+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(n=S(e[0]),function(e){return n(e[0])&&1===e.length}):2===e.length?(n=S(e[0]),r=S(e[1]),function(e){return n(e[0])&&r(e[1])&&2===e.length}):(t=e.map(S),function(e){for(let n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return e.length===t.length})}function C(e,t){return t<e.length?e[t]:A(e)?G(e):null}function E(e,t){const n=C(e,t);return n?D(n):new Set}function M(e){return null===e.conversion||void 0===e.conversion}function T(e,t){const n=new Set;return e.forEach((e=>{const r=E(e.params,t);let i;for(i of r)n.add(i)})),n.has("any")?["any"]:Array.from(n)}function O(e,t,n){let r,i;const s=e||"unnamed";let a,o=n;for(a=0;a<t.length;a++){const e=[];if(o.forEach((n=>{const r=S(C(n.params,a));(a<n.params.length||A(n.params))&&r(t[a])&&e.push(n)})),0===e.length){if(i=T(o,a),i.length>0){const e=m(t[a]);return r=new TypeError("Unexpected type of argument in function "+s+" (expected: "+i.join(" or ")+", actual: "+e.join(" | ")+", index: "+a+")"),r.data={category:"wrongType",fn:s,index:a,actual:e,expected:i},r}}else o=e}const c=o.map((function(e){return A(e.params)?1/0:e.params.length}));if(t.length<Math.min.apply(null,c))return i=T(o,a),r=new TypeError("Too few arguments in function "+s+" (expected: "+i.join(" or ")+", index: "+t.length+")"),r.data={category:"tooFewArgs",fn:s,index:t.length,expected:i},r;const u=Math.max.apply(null,c);if(t.length>u)return r=new TypeError("Too many arguments in function "+s+" (expected: "+u+", actual: "+t.length+")"),r.data={category:"tooManyArgs",fn:s,index:t.length,expectedLength:u},r;const l=[];for(let e=0;e<t.length;++e)l.push(m(t[e]).join("|"));return r=new TypeError('Arguments of type "'+l.join(", ")+'" do not match any of the defined signatures of function '+s+"."),r.data={category:"mismatch",actual:l},r}function P(e){let t=u.length+1;for(let n=0;n<e.types.length;n++)M(e.types[n])&&(t=Math.min(t,e.types[n].typeIndex));return t}function _(e){let t=l+1;for(let n=0;n<e.types.length;n++)M(e.types[n])||(t=Math.min(t,e.types[n].conversionIndex));return t}function I(e,t){if(e.hasAny){if(!t.hasAny)return 1}else if(t.hasAny)return-1;if(e.restParam){if(!t.restParam)return 1}else if(t.restParam)return-1;if(e.hasConversion){if(!t.hasConversion)return 1}else if(t.hasConversion)return-1;const n=P(e)-P(t);if(n<0)return-1;if(n>0)return 1;const r=_(e)-_(t);return r<0?-1:r>0?1:0}function B(e,t){const n=e.params,r=t.params,i=G(n),s=G(r),a=A(n),o=A(r);if(a&&i.hasAny){if(!o||!s.hasAny)return 1}else if(o&&s.hasAny)return-1;let c,u=0,l=0;for(c of n)c.hasAny&&++u,c.hasConversion&&++l;let h=0,p=0;for(c of r)c.hasAny&&++h,c.hasConversion&&++p;if(u!==h)return u-h;if(a&&i.hasConversion){if(!o||!s.hasConversion)return 1}else if(o&&s.hasConversion)return-1;if(l!==p)return l-p;if(a){if(!o)return 1}else if(o)return-1;const d=(n.length-r.length)*(a?-1:1);if(0!==d)return d;const f=[];let m,g=0;for(let e=0;e<n.length;++e){const t=I(n[e],r[e]);f.push(t),g+=t}if(0!==g)return g;for(m of f)if(0!==m)return m;return 0}function R(e,t){let n=t;if(e.some((e=>e.hasConversion))){const r=A(e),i=e.map(F);n=function(){const e=[],n=r?arguments.length-1:arguments.length;for(let t=0;t<n;t++)e[t]=i[t](arguments[t]);return r&&(e[n]=arguments[n].map(i[n])),t.apply(this,e)}}let r=n;if(A(e)){const t=e.length-1;r=function(){return n.apply(this,$(arguments,0,t).concat([$(arguments,t)]))}}return r}function F(e){let t,n,r,i;const s=[],a=[];switch(e.types.forEach((function(e){e.conversion&&(s.push(p(e.conversion.from).test),a.push(e.conversion.convert))})),a.length){case 0:return function(e){return e};case 1:return t=s[0],r=a[0],function(e){return t(e)?r(e):e};case 2:return t=s[0],n=s[1],r=a[0],i=a[1],function(e){return t(e)?r(e):n(e)?i(e):e};default:return function(e){for(let t=0;t<a.length;t++)if(s[t](e))return a[t](e);return e}}}function j(e){return function e(t,n,r){if(n<t.length){const a=t[n];let o=[];if(a.restParam){const e=a.types.filter(M);e.length<a.types.length&&o.push({types:e,name:"..."+e.map((e=>e.name)).join("|"),hasAny:e.some((e=>e.isAny)),hasConversion:!1,restParam:!0}),o.push(a)}else o=a.types.map((function(e){return{types:[e],name:e.name,hasAny:e.isAny,hasConversion:e.conversion,restParam:!1}}));return i=o,s=function(i){return e(t,n+1,r.concat([i]))},Array.prototype.concat.apply([],i.map(s))}return[r];var i,s}(e,0,[])}function k(e,t){const n=Math.max(e.length,t.length);for(let r=0;r<n;r++){const n=E(e,r),i=E(t,r);let s,a=!1;for(s of i)if(n.has(s)){a=!0;break}if(!a)return!1}const r=e.length,i=t.length,s=A(e),a=A(t);return s?a?r===i:i>=r:a?r>=i:r===i}function q(e,t,n){const r=[];let i;for(i of e){let e=n[i];if("number"!=typeof e)throw new TypeError('No definition for referenced signature "'+i+'"');if(e=t[e],"function"!=typeof e)return!1;r.push(e)}return r}function L(e,t){if(h.createCount++,0===Object.keys(t).length)throw new SyntaxError("No signatures provided");h.warnAgainstDeprecatedThis&&function(e){const t=/\bthis(\(|\.signatures\b)/;Object.keys(e).forEach((n=>{const r=e[n];if(t.test(r.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")}))}(t);const n=[],r=[],a={},o=[];let c;for(c in t){if(!Object.prototype.hasOwnProperty.call(t,c))continue;const e=w(c);if(!e)continue;n.forEach((function(t){if(k(t,e))throw new TypeError('Conflicting signatures "'+x(t)+'" and "'+x(e)+'".')})),n.push(e);const i=r.length;r.push(t[c]);const s=e.map(b);let u;for(u of j(s)){const e=x(u);o.push({params:u,name:e,fn:i}),u.every((e=>!e.hasConversion))&&(a[e]=i)}}o.sort(B);const u=function(e,t,n){const r=function(e){return e.map((e=>Y(e)?W(e.referToSelf.callback):V(e)?H(e.referTo.references,e.referTo.callback):e))}(e),i=new Array(r.length).fill(!1);let s=!0;for(;s;){s=!1;let e=!0;for(let a=0;a<r.length;++a){if(i[a])continue;const o=r[a];if(Y(o))r[a]=o.referToSelf.callback(n),r[a].referToSelf=o.referToSelf,i[a]=!0,e=!1;else if(V(o)){const n=q(o.referTo.references,r,t);n?(r[a]=o.referTo.callback.apply(this,n),r[a].referTo=o.referTo,i[a]=!0,e=!1):s=!0}}if(e&&s)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return r}(r,a,he);let l;for(l in a)Object.prototype.hasOwnProperty.call(a,l)&&(a[l]=u[a[l]]);const p=[],d=new Map;for(l of o)d.has(l.name)||(l.fn=u[l.fn],p.push(l),d.set(l.name,l));const f=p[0]&&p[0].params.length<=2&&!A(p[0].params),m=p[1]&&p[1].params.length<=2&&!A(p[1].params),g=p[2]&&p[2].params.length<=2&&!A(p[2].params),y=p[3]&&p[3].params.length<=2&&!A(p[3].params),v=p[4]&&p[4].params.length<=2&&!A(p[4].params),D=p[5]&&p[5].params.length<=2&&!A(p[5].params),C=f&&m&&g&&y&&v&&D;for(let e=0;e<p.length;++e)p[e].test=N(p[e].params);const E=f?S(p[0].params[0]):i,M=m?S(p[1].params[0]):i,T=g?S(p[2].params[0]):i,O=y?S(p[3].params[0]):i,P=v?S(p[4].params[0]):i,_=D?S(p[5].params[0]):i,I=f?S(p[0].params[1]):i,F=m?S(p[1].params[1]):i,L=g?S(p[2].params[1]):i,z=y?S(p[3].params[1]):i,U=v?S(p[4].params[1]):i,G=D?S(p[5].params[1]):i;for(let e=0;e<p.length;++e)p[e].implementation=R(p[e].params,p[e].fn);const $=f?p[0].implementation:s,Q=m?p[1].implementation:s,Z=g?p[2].implementation:s,J=y?p[3].implementation:s,K=v?p[4].implementation:s,X=D?p[5].implementation:s,ee=f?p[0].params.length:-1,te=m?p[1].params.length:-1,ne=g?p[2].params.length:-1,re=y?p[3].params.length:-1,ie=v?p[4].params.length:-1,se=D?p[5].params.length:-1,ae=C?6:0,oe=p.length,ce=p.map((e=>e.test)),ue=p.map((e=>e.implementation)),le=function(){for(let e=ae;e<oe;e++)if(ce[e](arguments))return ue[e].apply(this,arguments);return h.onMismatch(e,arguments,p)};function he(e,t){return arguments.length===ee&&E(e)&&I(t)?$.apply(this,arguments):arguments.length===te&&M(e)&&F(t)?Q.apply(this,arguments):arguments.length===ne&&T(e)&&L(t)?Z.apply(this,arguments):arguments.length===re&&O(e)&&z(t)?J.apply(this,arguments):arguments.length===ie&&P(e)&&U(t)?K.apply(this,arguments):arguments.length===se&&_(e)&&G(t)?X.apply(this,arguments):le.apply(this,arguments)}try{Object.defineProperty(he,"name",{value:e})}catch(e){}return he.signatures=a,he._typedFunctionData={signatures:p,signatureMap:d},he}function z(e,t,n){throw O(e,t,n)}function U(e){return $(e,0,e.length-1)}function G(e){return e[e.length-1]}function $(e,t,n){return Array.prototype.slice.call(e,t,n)}function H(e,t){return{referTo:{references:e,callback:t}}}function W(e){if("function"!=typeof e)throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:e}}}function V(e){return e&&"object"==typeof e.referTo&&Array.isArray(e.referTo.references)&&"function"==typeof e.referTo.callback}function Y(e){return e&&"object"==typeof e.referToSelf&&"function"==typeof e.referToSelf.callback}function Q(e,t){if(!e)return t;if(t&&t!==e){const n=new Error("Function names do not match (expected: "+e+", actual: "+t+")");throw n.data={actual:t,expected:e},n}return e}function Z(e){let t;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(g(e[n])||"string"==typeof e[n].signature)&&(t=Q(t,e[n].name));return t}function J(e,t){let n;for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(n in e&&t[n]!==e[n]){const r=new Error('Signature "'+n+'" is defined twice');throw r.data={signature:n,sourceFunction:t[n],destFunction:e[n]},r}e[n]=t[n]}}f(),d(n);const K=h;function X(e){if(!e||"string"!=typeof e.from||"string"!=typeof e.to||"function"!=typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(e.to===e.from)throw new SyntaxError('Illegal to define conversion from "'+e.from+'" to itself.')}return h=function(e){const n="string"==typeof e;let r=n?e:"";const i={};for(let e=n?1:0;e<arguments.length;++e){const s=arguments[e];let a,o={};if("function"==typeof s?(a=s.name,"string"==typeof s.signature?o[s.signature]=s:g(s)&&(o=s.signatures)):t(s)&&(o=s,n||(a=Z(s))),0===Object.keys(o).length){const t=new TypeError("Argument to 'typed' at index "+e+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw t.data={index:e,argument:s},t}n||(r=Q(r,a)),J(i,o)}return L(r||"",i)},h.create=e,h.createCount=K.createCount,h.onMismatch=z,h.throwMismatchError=z,h.createError=O,h.clear=f,h.clearConversions=function(){let e;for(e of u)c.get(e).conversionsTo=[];l=0},h.addTypes=d,h._findType=p,h.referTo=function(){const e=U(arguments).map((e=>x(w(e)))),t=G(arguments);if("function"!=typeof t)throw new TypeError("Callback function expected as last argument");return H(e,t)},h.referToSelf=W,h.convert=function(e,t){const n=p(t);if(n.test(e))return e;const r=n.conversionsTo;if(0===r.length)throw new Error("There are no conversions to "+t+" defined.");for(let t=0;t<r.length;t++)if(p(r[t].from).test(e))return r[t].convert(e);throw new Error("Cannot convert "+e+" to "+t)},h.findSignature=y,h.find=function(e,t,n){return y(e,t,n).implementation},h.isTypedFunction=g,h.warnAgainstDeprecatedThis=!0,h.addType=function(e,t){let n="any";!1!==t&&c.has("Object")&&(n="Object"),h.addTypes([e],n)},h.addConversion=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{override:!1};X(e);const n=p(e.to),r=n.conversionsTo.find((t=>t.from===e.from));if(r){if(!t||!t.override)throw new Error('There is already a conversion from "'+e.from+'" to "'+n.name+'"');h.removeConversion({from:r.from,to:e.to,convert:r.convert})}n.conversionsTo.push({from:e.from,convert:e.convert,index:l++})},h.addConversions=function(e,t){e.forEach((e=>h.addConversion(e,t)))},h.removeConversion=function(e){X(e);const t=p(e.to),n=function(t){for(let n=0;n<t.length;n++)if(t[n].from===e.from)return t[n]}(t.conversionsTo);if(!n)throw new Error("Attempt to remove nonexistent conversion from "+e.from+" to "+e.to);if(n.convert!==e.convert)throw new Error("Conversion to remove does not match existing conversion");const r=t.conversionsTo.indexOf(n);t.conversionsTo.splice(r,1)},h.resolve=function(e,t){if(!g(e))throw new TypeError(a);const n=e._typedFunctionData.signatures;for(let e=0;e<n.length;++e)if(n[e].test(t))return n[e];return null},h}()},8732:e=>{"use strict";e.exports=JSON.parse('{"welcome":{"title":"Welcome to Ray Optics Simulation","instruction":"To add an optical component, select a tool and click the blank space.\\nTo load an example, please [go to the Gallery page](/gallery).","loading":"Loading scene from URL… Please wait."},"common":{"saveButton":"Save","cancelButton":"Cancel","defaultOption":"Default","customOption":"Custom","closeButton":"Close","resetButton":"Reset","reloadToTakeEffect":"Please reload the page to take effect."},"file":{"title":"File","undo":{"title":"Undo"},"redo":{"title":"Redo"},"reset":{"title":"Reset"},"save":{"title":"Save"},"open":{"title":"Open","description":"Open an existing file or background image. The background image will be shown from the coordinate origin. (Or drop the file)"},"export":{"title":"Export as PNG/SVG"},"copyLink":{"title":"Copy Shareable Link","description":"Copy and go to the direct URL for the current scene, which can be used for sharing (possibly via a URL shortener). Also see Settings -> Auto sync URL."},"viewGallery":{"title":"View Gallery","description":"Go to the Gallery webpage to load an example."}},"settings":{"title":"Settings","more":"More","rayDensity":{"title":"Ray Density","description":"Determines the number of rays to be emitted by beams and point sources. This also affects the accuracy of image detection and color rendering."},"layoutAids":{"title":"Layout Aids","showGrid":"Grid","snapToGrid":"Snap to Grid","lockObjs":"Lock Objects"},"showRayArrows":{"title":"Show Ray Arrows"},"correctBrightness":{"title":"Correct Brightness","description":"By default, the brightness on the screen does not consistently represent the brightness of the rays. This option fixes it using a specialized renderer, but may reduce the performance on some devices. (On some other devices it actually improves the performance.)","error":"Failed to enable \\"Correct Brightness\\". Your browser may not support WebGL floating-point textures."},"gridSize":{"title":"Grid Size"},"observerSize":{"title":"Observer Size"},"lengthScale":{"title":"Length Scale","description":"If the default unit of length is too small or too large to model a physical system when interpreted as a common physical unit (e.g. millimeters), this factor can be used to scale the appearance (e.g. line widths) in the scene."},"zoom":{"title":"Zoom"},"showAdvancedSettings":{"title":"More scene settings…"},"colorMode":{"title":"Color Mode","description":"Determines how the brightnesses (and colors if \\"Simulate Colors\\" is on) of the rays or images are mapped to the colors on the screen. Only configurable when using \\"Correct Brightness\\"."},"theme":{"title":"Theme"},"language":{"title":"Language","lowFraction":"This language is only {{fraction}} translated. You can help complete it [on Weblate](/weblate)."},"autoSyncUrl":{"title":"Auto sync URL","description":"When enabled, the URL will be updated automatically with the current scene, so you don\'t need to keep saving the scene manually. To set the title, use File -> Save -> Rename."},"showJsonEditor":{"title":"Show JSON editor","description":"Show the code editor for the JSON representation of the scene, which is needed when creating a custom module (See Tools -> Other -> Import Modules -> Make custom modules)."},"showStatusBox":{"title":"Show status box","description":"Show the status box, which includes the mouse coordinates, performance information, and the truncated brightness (the total brightness of the rays truncated in the infinite series of internal reflection)."},"showSimulatorControls":{"title":"Show simulator controls","description":"Allows manual control of the simulator, useful when the scene takes a long time to run, is slow to load from JSON, or contains randomization."},"showHelpPopups":{"title":"Show help popups","description":"Defines whether to show help popups when hovering over buttons."},"advancedHelp":"For advanced help, see the help icon in the lower-right corner."},"objBar":{"showAdvanced":{"title":"More options…"},"applyToAll":{"title":"Apply to All"},"duplicate":{"title":"Duplicate"},"delete":{"title":"Delete"},"unselect":{"title":"Unselect","description":"Unselect this object (Right-click on blank space has the same function.)"}},"sceneObjs":{"common":{"lengthUnitInfo":"The unit of length used in this simulator (except for wavelengths) is an arbitrary unit, which can be interpreted as any physical unit (e.g. millimeters) as long as it is consistent throughout the simulation. If the unit appears too small or too large, please adjust Settings -> Length Scale.","brightness":"Brightness","brightnessInfo":{"rayDensity":"Only effective if \'Ray Density\' is high enough.","rayDensitySlider":"To control the numbers of rays emitted, please adjust the global \'Ray Density\' slider instead.","newColorModes":"When \\"Correct Brightness\\" is on, the behavior at low \\"Ray Density\\" is different from the default. For the unit, see the info box of a detector when it is selected."},"wavelength":"Wavelength","emisAngle":"Emission Angle","random":"Random","lambert":"Lambertian","coordOrigin":"Origin","focalLength":"Focal length","eqnInfo":{"constants":"Supported constants","operators":"Supported operators","functions":"Supported functions","module":"To have custom parameters or complicated equations, you can create a custom module. See Tools -> Other -> Import Modules for more information."},"imageDetectionWarning":"This tool does not support image detection.","nonSimulateColorsWarning":"This tool only works when \\"Simulate Colors\\" is on."},"ParamCurveObjMixin":{"addPiece":"Add piece","removePiece":"Remove piece","step":"Step","error":{"invalidStepSize":"Invalid step size: {{step}}","invalidRange":"Invalid parameter range: tMin ({{tMin}}) >= tMax ({{tMax}})","nonFiniteCoords":"Non-finite coordinates: ({{x}}, {{y}})","pieceError":"Error at piece {{pieceIndex}}, t={{t}}: {{error}}"}},"Beam":{"imageDetectionWarning":"Image detection may not work with divergent/random beams."},"AngleSource":{"symmetric":"Symmetric"},"BaseFilter":{"filter":"Filter","bandwidth":"Bandwidth","invert":"Invert"},"IdealMirror":{"cartesianSign":"Cartesian Sign Convention"},"BeamSplitter":{"transRatio":"Transmission Ratio"},"BaseGlass":{"refIndex":"Refractive index","refIndexInfo":{"relative":"Relative if inside another glass","effective":"If this object is to be simulated with (absolute) refractive index n₁, but is placed inside another glass with refractive index n₀, then you should set the refractive index to n₁/n₀ here. In more complicated cases that several glasses overlap together, the effective refractive index of the overlapping region equals the product of the refractive indices of individual ones."},"cauchyCoeff":"Cauchy coefficient"},"SphericalLens":{"defBy":{"radiiOfCurvature":"Radii of Curvature","focalDistances":"Focal Distances"},"invalidParameters":"Invalid lens parameters"},"CustomGlass":{"curveGenerationError":"Curve generation error: f(x) > g(x) at x = {{x}}"},"ParamGlass":{"eqnInfo":{"closedAndPositivelyOriented":"The curve must be closed and positively oriented (clockwise in the computer graphics convention where the y-axis points down)."},"warning":{"notClosed":"Curve is not closed.","notPositivelyOriented":"Curve is not positively oriented."}},"BaseGrinGlass":{"refIndexFnInfo":{"lambda":"To simulate chromatic dispersion, use parameter {{lambda}} for the vacuum wavelength in nanometers.","diff":"Only supports differentiable functions.","origin":"The origin of n(x,y) is in the absolute coordinates and does not move with the object. You may double-click a control-point to inspect its absolute coordinates.","accuracy":"For a more accurate simulation, see \\"More options…\\""},"absorptionFnInfo":{"absorption":"The absorption rate of the glass, in units of 1/[length]."},"stepSize":"Numerical solver step size","stepSizeInfo":"Step size of Euler\'s method for solving the eikonal ray equation - see \'step\' function and documentation inside the \'BaseGrinGlass.js\' file, for more information.","intersectTol":"Intersection tolerance","symbolicBodyMerging":"Symbolic body-merging","symbolicBodyMergingInfo":{"all":"This toggle applies to all GRIN objects in the simulation.","impl":"This simulator has currently two implementations of light propagation between different mediums, for GRIN objects - numerical and symbolic (see \'multRefIndex\' and \'devRefIndex\' functions in \'BaseGrinGlass.js\').","implNote":"The numerical implementation is faster but doesn\'t always work properly (depending on the specific case) in scenarios when used with more than one GRIN object, such that at least one of them has a refractive index function which is not defined in the entire plane, while the symbolic implementation is slower but robust to such problems."}},"CircleGrinGlass":{"epsInfo":{"units":"Units - [length]^2.","functions":"This numerical tolerance is used in the functions \'isOutsideGlass\', \'isInsideGlass\' and \'isOnBoundary\', inside the \'CircleGrinGlass.js\' file."}},"GrinGlass":{"epsInfo":{"units":"Units - [length].","functions":"This numerical tolerance is used in the functions \'isOnBoundary\' and \'countIntersections\', inside the \'GrinGlass.js\' file."}},"ParamGrinGlass":{"epsInfo":{"units":"Units - [length].","functions":"This numerical tolerance is used in the function \'isOnBoundary\' inside the \'ParamCurveObjMixin.js\' file."}},"CurveGrinGlass":{"epsInfo":{"units":"Units - [length]^2.","functions":"This numerical tolerance is used in the function \'isOnBoundary\' inside the \'CurveGrinGlass.js\' file."}},"Aperture":{"diameter":"Diameter"},"DiffractionGrating":{"lineDensity":"Lines/{{lengthUnit}}","customBrightness":"Custom Brightness","customBrightnessInfo":"When on, the brightnesses of the diffracted rays are customized by an array of numbers corresponding to m = 0, 1, -1, 2, -2, …. The number is to be normalized to the brightness of the incident ray. The values not in the array are set to 0. For example, \\"1, 0.5, 0.5\\" means the m=0 ray has the same brightness as the incident ray, the m=1 and m=-1 rays have half the brightness, and all other rays are ignored.","slitRatio":"Slit width / line spacing","mirrored":"Mirrored"},"Ruler":{"scaleInterval":"Scale interval"},"Detector":{"info":{"P":"P: The rate of energy flow (flux) in B/s (see below).","Fperp":"F⊥: The rate of perpendicular momentum flow in (B/s)/c.","Fpar":"F∥: The rate of parallel momentum flow in (B/s)/c.","irradiance":"The irradiance in the exported CSV is in (B/s)/L.","length":"L is the arbitrary unit of length used in this simulator.","B":"B is an arbitrary unit of radiant flux or luminous flux, corresponding to the unit of the \\"Brightness\\" option being B/L for non-Lambertian beams and 500B/360° for point sources.","s":"The dimensionless factor s is the \\"Brightness Scale\\" shown in Settings -> Show status box, which equals 1 when \\"Ray Density\\" is above some threshold and proportional to \\"Ray Density\\" otherwise.","sNewColorModes":"When \\"Correct Brightness\\" is on, the dimensionless factor s always equals 1.","truncation":"If some rays are truncated in the infinite series of internal reflection, the total truncation is shown as error estimates."},"irradMap":"Irradiance Map","binSize":"Bin Size","exportData":"Export data"},"TextLabel":{"textHere":"Text Here","fontSize":"Font Size","font":"Font","fontStyle":"Style","fontStyles":{"normal":"Normal","bold":"Bold","italic":"Italic","boldItalic":"Bold Italic","oblique":"Oblique","boldOblique":"Bold Oblique"},"alignment":"Alignment","alignments":{"left":"Left","center":"Centre","right":"Right"},"smallCaps":"Small Caps","angle":"Angle"},"LineArrow":{"arrow":"Forward arrow","backArrow":"Backward arrow"},"Drawing":{"finishDrawing":"Finish Drawing"},"BaseCustomSurface":{"info":{"angles":"{{theta_0}} and {{theta_j}} are the angles of the incident and jth outgoing rays, respectively, in radians and relative to the normal direction.","brightnesses":"{{P_0}} and {{P_j}} are the brightnesses of the incident and jth outgoing rays, respectively, in the same unit as the detector tool.","previousFormulas":"A formula can refer to the result of previous formulas. If a formula gives an invalid value, that outgoing ray is ignored and its brightness is treated as 0.","otherParams":"Other parameters of the incident rays that can be used are {{lambda}} (wavelength in nm) and {{p}} (0 for s-polarized, 1 for p-polarized). They remain the same for the outgoing rays.","coating":"This object can act as a coating of glass objects by overlapping with their surfaces. In this case, the refraction itself also needs to be handled by the formulas of this object. The refractive indices of the material attached to the same and opposite sides of the incident ray can be referred to as {{n_0}} and {{n_1}}, respectively. If this object is inside a glass object, the values are relative to it.","twoSides":"If you want the two sides of this surface to have different formulas, you can overlap two single-sided surfaces with opposite orientations.","module":"To have custom parameters, complicated formulas, or a large number of outgoing rays, you can create a custom module. See Tools -> Other -> Import Modules for more information."},"twoSided":"Two-sided","addOutgoingRay":"Add outgoing ray","removeOutgoingRay":"Remove outgoing ray"},"CustomSurface":{"info":{"incidentPos":"The position of the incident point can be referred to as {{t}}, which interpolates linearly from -1 to 1 between the two endpoints of the line-segment."}},"CustomArcSurface":{"info":{"incidentPos":"The position of the incident point can be referred to as {{t}}, which interpolates uniformly (with respect to angle) from -1 to 1 between the two endpoints of the arc."}},"CustomParamSurface":{"info":{"incidentPos":"The position of the incident point in the curve\'s parameter space can be referred to as {{t}}."}},"ModuleObj":{"module":"Module","demodulize":"Demodulize","loopVariableTooLarge":"The length of the loop variable \\"{{name}}\\" is too large. Please set maxLoopLength to a larger value.","loopTooLarge":"The length of the loop is too large. Please set maxLoopLength to a larger value.","variableRangeError":"Error parsing variable range \\"{{str}}\\" with parameters {{params}}: {{error}}","stringExpansionError":"Error expanding string \\"{{str}}\\" with parameters {{params}}: {{error}}","objectExpansionError":"Error expanding object {{obj}} in array with parameters {{params}}: {{error}}","variableDefinitionError":"Error evaluating variable definitions with parameters {{params}}: {{error}}","unclosedMathBlock":"Unclosed math block: {{str}}"},"Handle":{"handle":"Handle","transformation":"Transformation","transformations":{"translation":"Translation","xTranslation":"X Translation","yTranslation":"Y Translation","rotation":"Rotation","scaling":"Scaling"},"step":"Step","transformationWarning":"Applying \\"{{transformation}}\\" to \\"{{obj}}\\" may give unexpected results."},"CropBox":{"title":"Export","cropBoxSize":"Crop Box Size","format":"Format","width":"Width","rayCountLimit":"Ray count limit","transparent":"Transparent background","svgWarning":"Export to SVG: Color mixtures, correct brightness, and relative refractive indices below 1 are not supported.","rayCountWarning":"The current number of rays in the scene is larger than the ray count limit. You may need to increase the ray count limit in the Crop Box options."}},"saveModal":{"title":"Save","description":{"autoSync":"You may use Settings -> Auto sync URL instead of saving to a file.","rename":"Click \\"Rename\\" to change the title without saving to a file.","contribute":"You may consider [contributing a new item](/contributing/gallery) to the [Gallery](/gallery)."},"fileName":"Name","rename":"Rename"},"moduleModal":{"title":"Import Modules","makeCustomModules":"Make custom modules","conflict":"A different module with the same name already exists in the current scene. You may enter a new name, or leave it the same to overwrite the existing module."},"colorModeModal":{"linear":{"title":"Linear Value","description":"The value V in the HSV color space equals the total brightness of the rays when \\"Simulate Colors\\" is off and for monochromatic light between 420 to 620 nm. V is capped to 1 while preserving H and S. The color is gamma-corrected."},"linearRGB":{"title":"Linear RGB","description":"Similar to \\"Linear Value\\", but each component of the RGB color space is capped to 1 independently."},"reinhard":{"title":"Reinhard","description":"The Reinhard tone mapping applied to the total relative luminance. At the low brightness limit, the color is consistent with \\"Linear Value\\"."},"colorizedIntensity":{"title":"Color-coded Intensity","description":"The total brightness of 100, 10, …, 10⁻⁵ are represented by red, orange, yellow, green, cyan, blue, purple, and black, respectively, and interpolate smoothly in log scale."}},"themeModal":{"title":"Theme styles","background":{"title":"Background color"},"ray":{"title":"Default ray"},"colorRay":{"title":"Colored ray"},"extendedRay":{"title":"Default backward extended ray"},"colorExtendedRay":{"title":"Colored backward extended ray"},"forwardExtendedRay":{"title":"Default forward extended ray"},"colorForwardExtendedRay":{"title":"Colored forward extended ray"},"observedRay":{"title":"Default observed ray"},"colorObservedRay":{"title":"Colored observed ray"},"realImage":{"title":"Default real image"},"colorRealImage":{"title":"Colored real image"},"virtualImage":{"title":"Default virtual image"},"colorVirtualImage":{"title":"Colored virtual image"},"virtualObject":{"title":"Default virtual object"},"colorVirtualObject":{"title":"Colored virtual object"},"grid":{"title":"Grid lines"},"observer":{"title":"Observer fill"},"sourcePoint":{"title":"Source control point"},"directionPoint":{"title":"Direction control point"},"centerPoint":{"title":"Center control point"},"lightSource":{"title":"Default light source surface"},"beamShield":{"title":"Beam source shield"},"colorSourceCenter":{"title":"Colored light source center"},"mirror":{"title":"Mirror surface"},"beamSplitter":{"title":"Beam splitter surface"},"idealCurveCenter":{"title":"Ideal curve center"},"idealCurveArrow":{"title":"Ideal curve arrow"},"glass":{"title":"Glass fill"},"grinGlass":{"title":"Gradient-index glass fill"},"blocker":{"title":"Blocker surface"},"diffractionGrating":{"title":"Diffraction grating surface"},"detector":{"title":"Detector surface"},"detectorText":{"title":"Detector text"},"irradMap":{"title":"Irradiance map fill"},"irradMapBorder":{"title":"Irradiance map border"},"ruler":{"title":"Ruler scale lines"},"rulerText":{"title":"Ruler text"},"decoration":{"title":"Decoration style"},"handlePoint":{"title":"Default handle control point"},"handleArrow":{"title":"Handle arrow"},"customSurface":{"title":"Custom surface style"},"import":{"title":"Import","description":"Import theme from a scene JSON file.","error":"The file does not contain a theme."}},"languageModal":{"title":"Language","translatedFraction":"translated","helpTranslate":"Help us translate this app"},"generalWarnings":{"shareLinkTooLong":"The URL is too long that it may not work on some platforms. You may need to use \\"Save\\" and share the file instead.","autoSyncUrlTooLarge":"The scene is too large to sync with URL. Please save it manually.","identicalObjects":"There are two identical optical elements in the scene that overlap completely. This may cause unexpected behavior.","brightnessInconsistent":"The brightnesses of two or more light sources saturate with inconsistent ratios. This may lead to wrong detector readings and color rendering. Please increase the ray density or reduce the brightnesses of the light sources.","blackBecomesTransparent":"When using \\"Correct Brightness\\" with a non-black background, the black part of the light\'s color becomes transparent due to additive color mixing. Please set all theme colors of light to have unit HSV value to avoid this issue.","undefinedBehaviorOverlapping":"Surface merging is not supported for overlap between \\"{{involvedObj1}}\\" and \\"{{involvedObj2}}\\", resulting in undefined behavior. Please move the objects slightly apart (or move the light source) to get a well-defined behavior.","undefinedBehaviorSingle":"Undefined behavior encountered at the object \\"{{involvedObj}}\\". Please move the object or the light source slightly to get a well-defined behavior."},"generalErrors":{"newerVersion":"The version of the scene is newer than the current version of the simulator.","unknownObjectType":"Unknown scene object type: \\"{{type}}\\".","unknownSceneKey":"Unknown key in scene: \\"{{key}}\\".","unknownPropertyValue":"Unknown value \\"{{value}}\\" for property \\"{{property}}\\".","unknownObjectKey":"Unknown key: \\"{{key}}\\" in object of type \\"{{type}}\\".","unknownModuleKey":"Unknown key: \\"{{key}}\\" in module \\"{{module}}\\".","unknownModule":"Unknown module: \\"{{module}}\\"."},"appErrors":{"jsError":"JavaScript Error: {{msg}} at {{url}}","httpStatusError":"HTTP Request Error: {{status}}","httpError":"HTTP Request Error","httpTimeout":"HTTP Request Timeout","invalidFile":"The file is neither a valid JSON scene nor an image file."},"sidebar":{"aiAssistant":{"title":"AI Assistant","description":"Link to Ray Optics Coder on ChatGPT. See Tools -> Other -> Import module -> Make custom modules for more information."}},"statusBox":{"rayCount":"Number of ray segments","totalTruncation":"Truncated brightness","brightnessScale":"Brightness Scale","timeElapsed":"Time elapsed","forceStopped":"Force stopped.","mouseCoordinates":"Mouse coordinates"},"simulatorControls":{"refreshScene":{"title":"Refresh Scene"},"refreshSimulation":{"title":"Refresh Simulation"},"autoRefresh":{"title":"Auto Refresh"}},"footer":{"processing":"Processing… Click here to stop.","helpPopup":{"constrainedDragging":{"title":"Constrained dragging","description":"When dragging an object, hold Shift to limit to horizontal/vertical; hold Ctrl to clone. When creating a line-shaped object or dragging its endpoints, hold Shift to lock the angle or snap to 0°, 45°, 90°; hold Ctrl to rotate/scale about its center."},"groupRotateScale":{"title":"Group, rotate, and scale objects","description":"Hold Ctrl, click one or more objects or control points (e.g. endpoints), then click empty space to group them and create a handle. Drag the handle (or press arrow keys) to move the group; Shift+drag to limit to horizontal/vertical; Ctrl+drag to rotate the group, Ctrl+Shift+drag to scale the group. Drag the \\"+\\" to set rotation/scaling center. Click the handle and press Ctrl+D to duplicate the group; press Delete to ungroup."},"editCoordinates":{"title":"Edit coordinates directly","description":"Double-click or right-click the control point (e.g. endpoint) of the object, edit the (x,y) coordinates, then press Enter."},"keyboardShortcuts":{"title":"Keyboard shortcuts","description":"When an object is selected (by clicking it), press arrow keys to move the object; +/- to rotate the object; Ctrl+D to duplicate the object; Delete key to delete the object."},"runLocally":{"title":"Run Locally","description":"To run this project on your own computer, independently of the online version, please see [this guide](/run-locally)."},"integrations":{"title":"Integrations with programming languages","description":"You can call the simulator from programming languages such as Python or Julia with the [integration tools](/integrations). Note that this web app also has some built-in programming support with the [module](/modules/tutorial) feature."},"contactUs":{"title":"Contact Us","description":"The suggested way is to go to [Discussions](/github/discussions) or [Issues](/github/issues) on GitHub. If you do not use GitHub, you can also email us at [ray-optics@phydemo.app](/email).","contribute":"Direct contributions are also welcome (see [the contribution guide](/contributing))."}}}}')}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var s=n[t]={id:t,loaded:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.amdD=function(){throw new Error("define cannot be used indirect")},r.amdO={},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i={};(()=>{"use strict";r.r(i),r.d(i,{Editor:()=>w,Scene:()=>m,Simulator:()=>g.A,geometry:()=>y.A,sceneObjs:()=>e});var e=r(4536);const t={rayDensity_light:"rayModeDensity",rayDensity_images:"imageModeDensity",grid:"snapToGrid",lockobjs:"lockObjs",colorMode:"simulateColors",symbolicGrin:"symbolicBodyMerging"},n={light:"rays",extended_light:"extended"},s={laser:{type:"SingleRay",p:"brightness"},parallel:{type:"Beam",p:"brightness",divergence:"emisAngle"},radiant:{type:"PointSource",p:"brightness"},led:{type:"AngleSource",p:"emisAngle"},mirror:{type:"Mirror",isDichroic:"filter",isDichroicFilter:"invert"},arcmirror:{type:"ArcMirror",isDichroic:"filter",isDichroicFilter:"invert"},parabolicmirror:{type:"ParabolicMirror",isDichroic:"filter",isDichroicFilter:"invert"},curvedmirror:{type:"CustomMirror",p:"eqn",isDichroic:"filter",isDichroicFilter:"invert"},idealmirror:{type:"IdealMirror",p:"focalLength",isDichroic:"filter",isDichroicFilter:"invert"},beamsplitter:{type:"BeamSplitter",p:"transRatio",isDichroic:"filter",isDichroicFilter:"invert"},halfplane:{type:"PlaneGlass",p:"refIndex",cauchyCoeff:"cauchyB"},circlelens:{type:"CircleGlass",p:"refIndex",cauchyCoeff:"cauchyB"},refractor:{type:"Glass",p:"refIndex",cauchyCoeff:"cauchyB"},curvedglass:{type:"CustomGlass",p:"refIndex",cauchyCoeff:"cauchyB"},lens:{type:"IdealLens",p:"focalLength"},sphericallens:{type:"SphericalLens",p:"refIndex",cauchyCoeff:"cauchyB",definedBy:"defBy"},grin_circlelens:{type:"CircleGrinGlass",p_tex:"refIndexFn",step_size:"stepSize",eps:"intersectTol"},grin_refractor:{type:"GrinGlass",p_tex:"refIndexFn",step_size:"stepSize",eps:"intersectTol"},blackline:{type:"Blocker",isDichroic:"filter",isDichroicFilter:"invert"},blackcircle:{type:"CircleBlocker",isDichroic:"filter",isDichroicFilter:"invert"},aperture:{type:"Aperture",isDichroic:"filter",isDichroicFilter:"invert"},diffractiongrating:{type:"DiffractionGrating",line_density:"lineDensity",slit_ratio:"slitRatio"},ruler:{type:"Ruler",p:"scaleInterval"},protractor:{type:"Protractor"},power:{type:"Detector",irradianceMap:"irradMap"},text:{type:"TextLabel",p:"text",fontName:"font",fontAlignment:"alignment",fontSmallCaps:"smallCaps",fontAngle:"angle"},line:{type:"LineArrow",arrow1:"arrow",arrow2:"backArrow"},drawing:{type:"Drawing",points:"strokes"},handle:{type:"Handle"},cropbox:{type:"CropBox"}};function a(r){if(!r.version){let i=JSON.stringify(r).replace(/"point"|"xxa"|"aH"/g,"1").replace(/"circle"|"xxf"/g,"5").replace(/"k"/g,'"objs"').replace(/"L"/g,'"p1"').replace(/"G"/g,'"p2"').replace(/"F"/g,'"p3"').replace(/"bA"/g,'"exist"').replace(/"aa"/g,'"parallel"').replace(/"ba"/g,'"mirror"').replace(/"bv"/g,'"lens"').replace(/"av"/g,'"notDone"').replace(/"bP"/g,'"lightAlpha"').replace(/"ab"|"observed_light"|"observed_images"/g,'"observer"');(r=JSON.parse(i)).objs||(r={objs:r}),r.mode||(r.mode="light"),r.rayDensity_light||(r.rayDensity_light=1),r.rayDensity_images||(r.rayDensity_images=1),r.scale||(r.scale=1),r.version=1}if(1==r.version&&(r.origin={x:0,y:0},r.version=2),2==r.version){for(let c in t)void 0!==r[c]&&(r[t[c]]=r[c],delete r[c]);function a(e){if("object"==typeof e&&null!==e){void 0!==e.exist&&delete e.exist,"number"==typeof e.type&&delete e.type,void 0!==e.byHandle&&delete e.byHandle,void 0!==e.targetObj_index&&(e.targetObjIndex=e.targetObj_index,delete e.targetObj_index),void 0!==e.mousePart&&(e.dragContext=e.mousePart,delete e.mousePart);for(let t in e)a(e[t])}}r.mode in n&&(r.mode=n[r.mode]),r.objs=r.objs.map((e=>{if(e.type in s){for(let t in s[e.type])"type"!==t&&void 0!==e[t]&&(e[s[e.type][t]]=e[t],delete e[t]);e.type=s[e.type].type}return e})),a(r);const o=["version","name","objs","backgroundImage",...Object.keys(m.serializableDefaults)];for(let u in r)o.includes(u)||delete r[u];r.objs=r.objs.filter((t=>t.type in e)),r.objs=r.objs.map((t=>{const n=["type",...Object.keys(e[t.type].serializableDefaults)];for(let e in t)n.includes(e)||delete t[e];return t})),r.version=5}return r}var o=r(2635),c=r(7391),u=r.n(c);function l(e,t,n,r=""){const i=JSON.parse(JSON.stringify(n));if(t&&"object"==typeof t&&!Array.isArray(t))for(const e in t)e in n&&("object"!=typeof n[e]||Array.isArray(n[e])||null===n[e]?i[e]=t[e]:i[e]=l(i[e],t[e],n[e],r?`${r}.${e}`:e));return i}function h(e,t,n=""){if(!e||"object"!=typeof e||Array.isArray(e))return null;for(const r in e){const i=n?`${n}.${r}`:r;if(!(r in t))return i;if("object"==typeof t[r]&&!Array.isArray(t[r])&&null!==t[r]){const n=h(e[r],t[r],i);if(n)return n}}return null}function p(e,t){if(e===t)return!0;if(null==e||null==t)return e===t;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return e===t;if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!p(e[n],t[n]))return!1;return!0}const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const r of n){if(!(r in t))return!1;if(!p(e[r],t[r]))return!1}return!0}function d(e,t){if(!e||"object"!=typeof e||Array.isArray(e))return p(e,t)?null:e;const n={};let r=!1;for(const i in e)if(i in t)if("object"!=typeof t[i]||Array.isArray(t[i])||null===t[i])p(e[i],t[i])||(n[i]=e[i],r=!0);else{const s=d(e[i],t[i]);null!==s&&(n[i]=s,r=!0)}return r?n:null}class f{static serializableDefaults={name:"",modules:{},objs:[],mode:"rays",rayModeDensity:.1,imageModeDensity:1,showGrid:!1,snapToGrid:!1,lockObjs:!1,gridSize:20,observer:null,lengthScale:1,origin:{x:0,y:0},scale:1,width:1500,height:900,simulateColors:!1,colorMode:"default",showRayArrows:!1,symbolicBodyMerging:!1,randomSeed:null,theme:{background:{color:{r:0,g:0,b:0}},ray:{color:{r:1,g:1,b:.5},dash:[]},colorRay:{dash:[]},extendedRay:{color:{r:1,g:.5,b:0},dash:[]},colorExtendedRay:{dash:[2,2]},forwardExtendedRay:{color:{r:.3,g:.3,b:.3},dash:[]},colorForwardExtendedRay:{dash:[1,5]},observedRay:{color:{r:0,g:0,b:1},dash:[]},colorObservedRay:{dash:[1,2]},realImage:{color:{r:1,g:1,b:.5},size:5},colorRealImage:{size:5},virtualImage:{color:{r:1,g:.5,b:0},size:5},colorVirtualImage:{size:3},virtualObject:{color:{r:.3,g:.3,b:.3},size:5},colorVirtualObject:{size:1},grid:{color:{r:1,g:1,b:1,a:.25},dash:[2,2],width:1},observer:{color:{r:0,g:0,b:1}},sourcePoint:{color:{r:1,g:0,b:0,a:1},size:5},directionPoint:{color:{r:1,g:0,b:0,a:1},size:3},centerPoint:{color:{r:1,g:0,b:0,a:1},size:3},lightSource:{color:{r:0,g:1,b:0,a:1},size:5},beamShield:{color:{r:.5,g:.5,b:.5,a:1},width:2},colorSourceCenter:{color:{r:1,g:1,b:1,a:1},size:3},mirror:{color:{r:.66,g:.66,b:.66,a:1},width:1},beamSplitter:{color:{r:.39,g:.39,b:.66,a:1},width:1},idealCurveCenter:{color:{r:1,g:1,b:1,a:1},size:1},idealCurveArrow:{color:{r:1,g:0,b:0,a:1},size:10},glass:{color:{r:1,g:1,b:1}},grinGlass:{color:{r:1,g:0,b:1,a:.15}},blocker:{color:{r:.29,g:.14,b:.04,a:1},width:3},diffractionGrating:{color:{r:.49,g:.24,b:.07,a:1},dash:[2,2],width:2},detector:{color:{r:.66,g:.66,b:.66,a:1},dash:[5,5],width:1},detectorText:{color:{r:.66,g:.66,b:.66,a:1},font:"Arial",size:16},irradMap:{color:{r:0,g:0,b:1,a:1}},irradMapBorder:{color:{r:1,g:1,b:1,a:1},width:1},ruler:{color:{r:.5,g:.5,b:.5,a:1},width:1},rulerText:{color:{r:.5,g:.5,b:.5,a:1},font:"Arial",size:14},decoration:{color:{r:1,g:1,b:1,a:1},width:1},handlePoint:{color:{r:.5,g:.5,b:.5,a:1}},handleArrow:{color:{r:1,g:1,b:1,a:1},size:24},customSurface:{color:{r:.73,g:.58,b:1,a:1},width:2,dash:[2,2]}}};static nestedProperties=["theme"];constructor(){this.backgroundImage=null,this.error=null,this.warning=null,this.rng=new(u())((new Date).getTime().toString()),this.loadJSON(JSON.stringify({version:5}),(()=>{}))}setViewportSize(e,t){this.width=e,this.height=t}get rayDensity(){return"rays"==this.mode||"extended"==this.mode?this.rayModeDensity:this.imageModeDensity}set rayDensity(e){"rays"==this.mode||"extended"==this.mode?this.rayModeDensity=e:this.imageModeDensity=e}get isBackgroundLight(){const e=this.theme.background.color;return.299*e.r+.587*e.g+.114*e.b>.5}get highlightColor(){return this.isBackgroundLight?{r:0,g:.75,b:.75,a:1}:{r:0,g:1,b:1,a:1}}get highlightColorCss(){return this.isBackgroundLight?"rgb(0, 192, 192)":"rgb(0, 255, 255)"}get opticalObjs(){return function t(n){let r=[];for(let i of n)i.constructor===e.ModuleObj?r=r.concat(t(i.objs)):r.push(i);return r}(this.objs).filter((e=>e.constructor.isOptical))}loadJSON(t,n){this.error=null,this.warning=null;try{let r=JSON.parse(t);if(r.version){if("string"==typeof r.version||r.version>5)return this.error=o.Ay.t("simulator:generalErrors.newerVersion"),void n(!0,!0);r.version<5&&(r=a(r))}else r=a(r);const i=f.serializableDefaults,s=this.width||i.width,c=this.height||i.height,p=100*Math.ceil(s/100),d=100*Math.ceil(c/100),m=["version","name","modules","objs","backgroundImage",...Object.keys(i)];for(const e in r)if(!m.includes(e))return this.error=o.Ay.t("simulator:generalErrors.unknownSceneKey",{key:e}),void n(!0,!0);for(const e of f.nestedProperties)if(r[e]){const t=h(r[e],i[e],e);if(t)return this.error=o.Ay.t("simulator:generalErrors.unknownSceneKey",{key:t}),void n(!0,!0)}const g=["rays","extended","images","observer"];if(r.mode&&!g.includes(r.mode))return this.error=o.Ay.t("simulator:generalErrors.unknownPropertyValue",{property:"mode",value:r.mode}),void n(!0,!0);const y=["default","linear","linearRGB","reinhard","colorizedIntensity"];if(r.colorMode&&!y.includes(r.colorMode))return this.error=o.Ay.t("simulator:generalErrors.unknownPropertyValue",{property:"colorMode",value:r.colorMode}),void n(!0,!0);for(let e in i)e in r||(r[e]=JSON.parse(JSON.stringify(i[e]))),f.nestedProperties.includes(e)?this[e]=l(0,r[e],i[e]):this[e]=r[e];let x=1;x=r.width/r.height>p/d?r.width/p:r.height/d,this.scale=r.scale/x,this.origin.x=r.origin.x/x,this.origin.y=r.origin.y/x,this.width=s,this.height=c,this.randomSeed?this.rng=new(u())(this.randomSeed):this.rng=new(u())((new Date).getTime().toString()),this.objs=[];for(const t of r.objs){if(!e[t.type]){this.error=o.Ay.t("simulator:generalErrors.unknownObjectType",{type:t.type});break}this.objs.push(new e[t.type](this,t))}if(this.error)return void n(!0,!0);r.backgroundImage?(this.backgroundImage=new Image,this.backgroundImage.src="../gallery/"+r.backgroundImage,this.backgroundImage.onload=function(e){n(!1,!0)},n(!0,!1)):n(!0,!0)}catch(e){this.error=e.toString(),this.objs=[],n(!0,!0)}}toJSON(){let e={version:5};this.name&&(e.name=this.name),Object.keys(this.modules).length>0&&(e.modules=this.modules),e.objs=this.objs.map((e=>e.serialize()));const t=100*Math.ceil(this.width/100),n=100*Math.ceil(this.height/100);e.width=t,e.height=n;const r=f.serializableDefaults;for(let t in r)if(!e.hasOwnProperty(t))if(f.nestedProperties.includes(t)){const n=d(this[t],r[t]);null!==n&&(e[t]=n)}else{const n=JSON.stringify(this[t]);n!==JSON.stringify(r[t])&&(e[t]=JSON.parse(n))}return JSON.stringify(e,null,2)}pushObj(e){this.objs.push(e),e.scene=this}unshiftObj(e){for(var t in this.objs.unshift(e),e.scene=this,this.objs)if("Handle"==this.objs[t].constructor.type){for(var n in this.objs[t].controlPoints)this.objs[t].controlPoints[n].targetObjIndex++;for(var n in this.objs[t].objIndices)this.objs[t].objIndices[n]++}}removeObj(t){for(var n=t;n<this.objs.length-1;n++){let t=this.objs[n+1].serialize();this.objs[n]=new e[t.type](this,t)}for(var n in this.objs)if("Handle"==this.objs[n].constructor.type){let e=[];for(var r=0;r<this.objs[n].controlPoints.length;r++)this.objs[n].controlPoints[r].targetObjIndex>t?(this.objs[n].controlPoints[r].targetObjIndex--,e.push(this.objs[n].controlPoints[r])):this.objs[n].controlPoints[r].targetObjIndex!=t&&e.push(this.objs[n].controlPoints[r]);this.objs[n].controlPoints=e;let i=[];for(r=0;r<this.objs[n].objIndices.length;r++)this.objs[n].objIndices[r]>t?i.push(this.objs[n].objIndices[r]-1):this.objs[n].objIndices[r]!=t&&i.push(this.objs[n].objIndices[r]);this.objs[n].objIndices=i}this.objs.length=this.objs.length-1}cloneObj(t){let n=this.objs[t].serialize();return this.objs[this.objs.length]=new e[n.type](this,n),this.objs[this.objs.length-1]}cloneObjsByHandle(e){let t=this.objs[e];if("Handle"===t.constructor.type){var n=[];for(var r in t.controlPoints)-1==n.indexOf(t.controlPoints[r].targetObjIndex)&&n.push(t.controlPoints[r].targetObjIndex);for(var r in t.objIndices)-1==n.indexOf(t.objIndices[r])&&n.push(t.objIndices[r]);for(var r in n)"Handle"!=this.objs[n[r]].constructor.type&&this.cloneObj(n[r])}}addModule(t,n){this.modules[t]=n;for(let t in this.objs)"ModuleObj"===this.objs[t].constructor.type&&(this.objs[t]=new e.ModuleObj(this,this.objs[t].serialize()));return!0}removeModule(e){e:for(;;){for(let t of this.objs)if("ModuleObj"===t.constructor.type&&t.module===e){t.demodulize();continue e}break}delete this.modules[e]}setScaleWithCenter(e,t,n){const r=e-this.scale;this.origin.x*=e/this.scale,this.origin.y*=e/this.scale,this.origin.x-=t*r,this.origin.y-=n*r,this.scale=e}validateDelayed(){if(this.error)return;this.warning=null;const e=this.opticalObjs;if(e.length<100){const r=e.map((e=>JSON.stringify(e.serialize())));for(var t=0;t<e.length;t++)for(var n=t+1;n<e.length;n++)if(r[t]==r[n]){this.warning=`opticalObjs[${t}]==[${n}] ${e[t].constructor.type}: `+o.Ay.t("simulator:generalWarnings.identicalObjects");break}}}}const m=f;var g=r(7235),y=r(6492),x=r(7389),v=r(9721),b=r(4213);class D{static UNDO_LIMIT=50;static UNDO_INTERVAL=250;constructor(e,t,n){this.scene=e,this.scene.editor=this,this.canvas=t,this.simulator=n,this.lastDeviceIsTouch=!1,this.mousePos=y.A.point(0,0),this.lastMousePos=null,this.isConstructing=!1,this.draggingObjIndex=-1,this.positioningObjIndex=-1,this.dragContext={},this.selectedObjIndex=-1,this.hoveredObjIndex=-1,this.addingObjType="",this.undoData=[this.scene.toJSON()],this.lastActionTime=new Date,this.lastActionJson=this.scene.toJSON(),this.undoIndex=0,this.undoLBound=0,this.undoUBound=0,this.isInCropMode=!1,this.pendingControlPointSelection=!1,this.pendingControlPoints=[],this.pendingObjectSelection=!1,this.pendingObjectIndex=-1,this.addingModuleName="",this.eventListeners={},this.delayedValidationTimerId=-1,this.minimalDragLength=3,this.initCanvas()}on(e,t){this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)}emit(e,t){this.eventListeners[e]&&this.eventListeners[e].forEach((e=>e(t)))}initCanvas(){let e=-1;const t=this;this.canvas.addEventListener("mousedown",(function(n){t.lastDeviceIsTouch&&Date.now()-e<500||(t.lastDeviceIsTouch=!1,t.scene.error?t.canvas.style.cursor="not-allowed":(n.preventDefault(),t.canvas.focus(),t.onCanvasMouseDown(n)))})),this.canvas.addEventListener("mousemove",(function(n){t.lastDeviceIsTouch&&Date.now()-e<500||(t.lastDeviceIsTouch=!1,t.scene.error?t.canvas.style.cursor="not-allowed":(n.preventDefault(),t.onCanvasMouseMove(n)))})),this.canvas.addEventListener("mouseup",(function(n){t.lastDeviceIsTouch&&Date.now()-e<500||(t.lastDeviceIsTouch=!1,t.scene.error?t.canvas.style.cursor="not-allowed":t.onCanvasMouseUp(n))})),this.canvas.addEventListener("mouseout",(function(n){t.lastDeviceIsTouch&&Date.now()-e<500||(t.lastDeviceIsTouch=!1,-1!=t.draggingObjIndex&&t.onCanvasMouseUp(n),t.hoveredObjIndex=-1,t.emit("mouseCoordinateChange",{mousePos:null}),t.simulator.updateSimulation(!0,!0))}));let n=0;this.canvas.addEventListener("wheel",(function(e){e.preventDefault();var r=Date.now();if(r-n<16)return;n=r;const i=e.deltaY||e.detail||e.wheelDelta,s=t.scene.scale*t.scene.lengthScale,a=Math.max(.05,.05*s);let o=s;i>0?o=s-a:i<0&&(o=s+a),o=Math.max(.25,Math.min(5,o));const c=100*o;t.setScaleWithCenter(c/t.scene.lengthScale/100,(e.pageX-e.target.offsetLeft)/t.scene.scale,(e.pageY-e.target.offsetTop)/t.scene.scale),t.onActionComplete()}),!1);let r=null,i=1,s=0,a=0;this.canvas.addEventListener("touchstart",(function(n){t.scene.error||(t.lastDeviceIsTouch=!0,e=Date.now(),2===n.touches.length?(n.preventDefault(),s=(n.touches[0].pageX+n.touches[1].pageX)/2,a=(n.touches[0].pageY+n.touches[1].pageY)/2,t.isConstructing||t.draggingObjIndex>=0?(t.onCanvasMouseUp(n),t.undo()):t.onCanvasMouseUp(n)):(t.canvas.focus(),t.onCanvasMouseMove(n),t.onCanvasMouseDown(n)))})),this.canvas.addEventListener("touchmove",(function(n){if(!t.scene.error)if(t.lastDeviceIsTouch=!0,e=Date.now(),n.preventDefault(),2===n.touches.length){const e=n.touches[0].clientX-n.touches[1].clientX,o=n.touches[0].clientY-n.touches[1].clientY,c=Math.sqrt(e*e+o*o);null===r&&(r=c,i=t.scene.scale);let u=i*(c/r);u=Math.max(.25/t.scene.lengthScale,Math.min(5/t.scene.lengthScale,u));const l=(n.touches[0].pageX+n.touches[1].pageX)/2,h=(n.touches[0].pageY+n.touches[1].pageY)/2,p=l-s,d=h-a;t.scene.origin.x+=p,t.scene.origin.y+=d,t.setScaleWithCenter(u,(l-n.target.offsetLeft)/t.scene.scale,(h-n.target.offsetTop)/t.scene.scale),s=l,a=h}else t.onCanvasMouseMove(n)})),this.canvas.addEventListener("touchend",(function(n){t.scene.error||(t.lastDeviceIsTouch=!0,e=Date.now(),n.touches.length<2&&(r=null,t.onCanvasMouseUp(n),t.onActionComplete()))})),this.canvas.addEventListener("touchcancel",(function(n){t.scene.error||(t.lastDeviceIsTouch=!0,e=Date.now(),r=null,t.onCanvasMouseUp(n))})),this.canvas.addEventListener("dblclick",(function(e){t.scene.error||t.onCanvasDblClick(e)}))}onCanvasMouseDown(t){if(t.changedTouches){var n=t.changedTouches[0];this.lastDeviceIsTouch=!0}else n=t,this.lastDeviceIsTouch=!1;const r=(n.pageX-t.target.offsetLeft-this.scene.origin.x)/this.scene.scale,i=(n.pageY-t.target.offsetTop-this.scene.origin.y)/this.scene.scale;this.lastMousePos=y.A.point(r,i);const s=this.truncateToBinaryFraction(r,this.scene.scale),a=this.truncateToBinaryFraction(i,this.scene.scale);var o=y.A.point(s,a);if(!this.scene.snapToGrid||t.altKey&&!this.isConstructing||y.A.point(Math.round((n.pageX-t.target.offsetLeft-this.scene.origin.x)/this.scene.scale/this.scene.gridSize)*this.scene.gridSize,Math.round((n.pageY-t.target.offsetTop-this.scene.origin.y)/this.scene.scale/this.scene.gridSize)*this.scene.gridSize),(-1==this.positioningObjIndex||(this.emit("requestPositioningComfirm",{ctrl:t.ctrlKey,shift:t.shiftKey}),t.which&&3==t.which))&&(t.which&&(1==t.which||3==t.which)||t.changedTouches))if(this.scene.snapToGrid?this.mousePos=y.A.point(Math.round((n.pageX-t.target.offsetLeft-this.scene.origin.x)/this.scene.scale/this.scene.gridSize)*this.scene.gridSize,Math.round((n.pageY-t.target.offsetTop-this.scene.origin.y)/this.scene.scale/this.scene.gridSize)*this.scene.gridSize):this.mousePos=o,this.isConstructing){if(t.which&&1==t.which||t.changedTouches){this.selectedObjIndex!=this.scene.objs.length-1&&this.selectObj(this.scene.objs.length-1);const e=this.scene.objs[this.scene.objs.length-1].onConstructMouseDown(new x.A(o,this.scene,this.lastDeviceIsTouch),t.ctrlKey,t.shiftKey);e&&e.isDone&&(this.isConstructing=!1),e&&e.requiresObjBarUpdate&&this.selectObj(this.selectedObjIndex),this.simulator.updateSimulation(!this.scene.objs[this.scene.objs.length-1].constructor.isOptical,!0)}}else{if(!this.scene.lockObjs!=(t.altKey&&""!=this.addingObjType)&&3!=t.which){if(this.dragContext={},"observer"==this.scene.mode&&y.A.distanceSquared(o,this.scene.observer.c)<this.scene.observer.r*this.scene.observer.r)return this.draggingObjIndex=-4,this.dragContext={},this.dragContext.mousePos0=this.mousePos,this.dragContext.mousePos1=this.mousePos,void(this.dragContext.snapContext={});var c=this.selectionSearch(o),u=c[0];if(-1!=u.targetObjIndex)return!t.ctrlKey&&this.scene.objs.length>0&&"Handle"==this.scene.objs[0].constructor.type&&this.scene.objs[0].notDone&&(this.removeObj(0),u.targetObjIndex--),this.selectObj(u.targetObjIndex),this.dragContext=u.dragContext,this.dragContext.originalObj=this.scene.objs[u.targetObjIndex].serialize(),this.dragContext.hasDuplicated=!1,this.draggingObjIndex=u.targetObjIndex,void(t.ctrlKey&&(0===this.dragContext.part?(this.pendingObjectSelection=!0,this.pendingObjectIndex=u.targetObjIndex):this.dragContext.targetPoint&&(this.pendingControlPointSelection=!0,this.pendingControlPoints=c)))}if(-1==this.draggingObjIndex){if(this.scene.objs.length>0&&"Handle"==this.scene.objs[0].constructor.type&&this.scene.objs[0].notDone)return this.finishHandleCreation(this.mousePos),this.hoveredObjIndex=0,this.canvas.style.cursor="pointer",void this.simulator.updateSimulation(!0,!0);if(""==this.addingObjType||3==t.which)this.draggingObjIndex=-3,this.dragContext={},this.dragContext.mousePos0=this.mousePos,this.dragContext.mousePos1=this.mousePos,this.dragContext.mousePos2=this.scene.origin,this.dragContext.snapContext={},this.selectObj(-1);else{this.isConstructing=!0;let t={};this.scene.objs[this.selectedObjIndex]&&this.scene.objs[this.selectedObjIndex].constructor.type==this.addingObjType&&(t=this.scene.objs[this.selectedObjIndex].serialize()),this.scene.pushObj(new e[this.addingObjType](this.scene,t));const n=this.scene.objs[this.scene.objs.length-1].onConstructMouseDown(new x.A(o,this.scene,this.lastDeviceIsTouch));n&&n.isDone&&(this.isConstructing=!1),this.selectObj(this.scene.objs.length-1),this.simulator.updateSimulation(!this.scene.objs[this.scene.objs.length-1].constructor.isOptical,!0)}}}}onCanvasMouseMove(t){if(t.changedTouches)var n=t.changedTouches[0];else n=t;const r=(n.pageX-t.target.offsetLeft-this.scene.origin.x)/this.scene.scale,i=(n.pageY-t.target.offsetTop-this.scene.origin.y)/this.scene.scale;if(this.lastMousePos){if(y.A.distanceSquared(this.lastMousePos,y.A.point(r,i))<this.minimalDragLength*this.minimalDragLength/(this.scene.scale*this.scene.scale))return;this.lastMousePos=null}const s=this.truncateToBinaryFraction(r,this.scene.scale),a=this.truncateToBinaryFraction(i,this.scene.scale);var o,c=y.A.point(s,a);o=!this.scene.snapToGrid||t.altKey&&!this.isConstructing?c:y.A.point(Math.round((n.pageX-t.target.offsetLeft-this.scene.origin.x)/this.scene.scale/this.scene.gridSize)*this.scene.gridSize,Math.round((n.pageY-t.target.offsetTop-this.scene.origin.y)/this.scene.scale/this.scene.gridSize)*this.scene.gridSize),this.pendingControlPointSelection=!1,this.pendingObjectSelection=!1;const u=this.scene.objs.length>0&&"Handle"===this.scene.objs[0].constructor.type&&this.scene.objs[0].notDone;if(!this.isConstructing&&-1==this.draggingObjIndex&&!this.scene.lockObjs){var l=this.selectionSearch(c)[0];this.hoveredObjIndex!=l.targetObjIndex&&(this.hoveredObjIndex=l.targetObjIndex,this.simulator.updateSimulation(!0,!0)),l.dragContext?l.dragContext.cursor?this.canvas.style.cursor=l.dragContext.cursor:l.dragContext.targetPoint||l.dragContext.targetPoint_?this.canvas.style.cursor="pointer":0==l.dragContext.part?this.canvas.style.cursor="move":this.canvas.style.cursor="":"observer"==this.scene.mode&&y.A.distanceSquared(this.mousePos,this.scene.observer.c)<this.scene.observer.r*this.scene.observer.r?this.canvas.style.cursor="pointer":u?t.ctrlKey?(this.canvas.style.cursor="",this.scene.objs[0].p1&&(this.scene.objs[0].p1=null,this.simulator.updateSimulation(!0,!0))):(this.canvas.style.cursor="alias",o&&(this.scene.objs[0].p1=o,this.simulator.updateSimulation(!0,!0))):this.canvas.style.cursor=""}if(o.x!=this.mousePos.x||o.y!=this.mousePos.y)if(this.mousePos=o,this.emit("mouseCoordinateChange",{mousePos:this.mousePos}),this.isConstructing){this.hoveredObjIndex=this.scene.objs.length-1;const e=this.scene.objs[this.scene.objs.length-1].onConstructMouseMove(new x.A(this.mousePos,this.scene,this.lastDeviceIsTouch),t.ctrlKey,t.shiftKey);e&&e.isDone&&(this.isConstructing=!1),e&&e.requiresObjBarUpdate&&this.selectObj(this.selectedObjIndex),this.simulator.updateSimulation(!this.scene.objs[this.scene.objs.length-1].constructor.isOptical,!0)}else{if(-4==this.draggingObjIndex){if(t.shiftKey)var h=new x.A(this.mousePos,this.scene,this.lastDeviceIsTouch).getPosSnappedToDirection(this.dragContext.mousePos0,[{x:1,y:0},{x:0,y:1}],this.dragContext.snapContext);else h=this.mousePos,this.dragContext.snapContext={};var p=h.x-this.dragContext.mousePos1.x,d=h.y-this.dragContext.mousePos1.y;this.scene.observer.c.x+=p,this.scene.observer.c.y+=d,this.dragContext.mousePos1=h,this.simulator.updateSimulation(!1,!0)}this.draggingObjIndex>=0&&(this.scene.objs[this.draggingObjIndex].onDrag(new x.A(c,this.scene,this.lastDeviceIsTouch,1*t.altKey),this.dragContext,t.ctrlKey,t.shiftKey),0==this.dragContext.part&&(t.ctrlKey&&!this.dragContext.hasDuplicated&&(this.scene.pushObj(new e[this.scene.objs[this.draggingObjIndex].constructor.type](this.scene,this.dragContext.originalObj)),this.dragContext.hasDuplicated=!0),!t.ctrlKey&&this.dragContext.hasDuplicated&&(this.scene.objs.length--,this.dragContext.hasDuplicated=!1)),this.simulator.updateSimulation(!this.scene.objs[this.draggingObjIndex].constructor.isOptical,!0),this.dragContext.requiresObjBarUpdate&&this.selectObj(this.selectedObjIndex)),-3==this.draggingObjIndex&&this.dragContext.mousePos1&&(p=this.mousePos.x-this.dragContext.mousePos1.x,d=this.mousePos.y-this.dragContext.mousePos1.y,this.scene.origin.x=p*this.scene.scale+this.dragContext.mousePos2.x,this.scene.origin.y=d*this.scene.scale+this.dragContext.mousePos2.y,this.simulator.updateSimulation())}}truncateToBinaryFraction(e,t){const n=1/t;let r=1;for(;r>n;)r/=2;return Math.round(e/r)*r}onCanvasMouseUp(e){if(e.changedTouches)var t=e.changedTouches[0];else t=e;const n=(t.pageX-e.target.offsetLeft-this.scene.origin.x)/this.scene.scale,r=(t.pageY-e.target.offsetTop-this.scene.origin.y)/this.scene.scale,i=this.truncateToBinaryFraction(n,this.scene.scale),s=this.truncateToBinaryFraction(r,this.scene.scale);var a=y.A.point(i,s);if(!this.scene.snapToGrid||e.altKey&&!this.isConstructing||y.A.point(Math.round((t.pageX-e.target.offsetLeft-this.scene.origin.x)/this.scene.scale/this.scene.gridSize)*this.scene.gridSize,Math.round((t.pageY-e.target.offsetTop-this.scene.origin.y)/this.scene.scale/this.scene.gridSize)*this.scene.gridSize),this.isConstructing){if(e.which&&1==e.which||e.changedTouches){const t=this.scene.objs[this.scene.objs.length-1].onConstructMouseUp(new x.A(a,this.scene,this.lastDeviceIsTouch),e.ctrlKey,e.shiftKey);t&&t.isDone&&(this.isConstructing=!1),t&&t.requiresObjBarUpdate&&this.selectObj(this.selectedObjIndex),this.simulator.updateSimulation(!this.scene.objs[this.scene.objs.length-1].constructor.isOptical,!0),this.isConstructing||(this.onActionComplete(),this.scene.lockObjs&&(this.hoveredObjIndex=-1,this.simulator.updateSimulation(!0,!0)))}}else{if(this.pendingControlPointSelection&&(this.pendingControlPointSelection=!1,this.addControlPointsForHandle(this.pendingControlPoints),this.hoveredObjIndex=-1,this.simulator.updateSimulation(!0,!0)),this.pendingObjectSelection&&(this.pendingObjectSelection=!1,this.addObjectForHandle(this.pendingObjectIndex),this.hoveredObjIndex=-1,this.simulator.updateSimulation(!0,!0)),e.which&&3==e.which&&-3==this.draggingObjIndex&&this.mousePos.x==this.dragContext.mousePos0.x&&this.mousePos.y==this.dragContext.mousePos0.y)return this.draggingObjIndex=-1,this.dragContext={},void this.onCanvasDblClick(e);this.onActionComplete(),this.draggingObjIndex=-1,this.dragContext={}}}onCanvasDblClick(e){const t=(e.pageX-e.target.offsetLeft-this.scene.origin.x)/this.scene.scale,n=(e.pageY-e.target.offsetTop-this.scene.origin.y)/this.scene.scale,r=this.truncateToBinaryFraction(t,this.scene.scale),i=this.truncateToBinaryFraction(n,this.scene.scale);if(this.mousePos=y.A.point(r,i),this.isConstructing);else if(this.lastMousePos&&new x.A(this.mousePos,this.scene,this.lastDeviceIsTouch).isOnPoint(this.lastMousePos)){if(this.dragContext={},"observer"==this.scene.mode&&y.A.distanceSquared(this.mousePos,this.scene.observer.c)<this.scene.observer.r*this.scene.observer.r)return this.positioningObjIndex=-4,this.dragContext={},this.dragContext.targetPoint=y.A.point(this.scene.observer.c.x,this.scene.observer.c.y),this.dragContext.snapContext={},void this.emit("positioningStart",{dragContext:this.dragContext});var s=this.selectionSearch(this.mousePos)[0];-1!=s.targetObjIndex&&s.dragContext.targetPoint&&(this.selectObj(s.targetObjIndex),this.dragContext=s.dragContext,this.dragContext.originalObj=this.scene.objs[s.targetObjIndex].serialize(),this.dragContext.hasDuplicated=!1,this.positioningObjIndex=s.targetObjIndex,this.emit("positioningStart",{dragContext:this.dragContext}))}}selectionSearch(e){for(var t,n=1/0,r=-1,i=!1,s=!1,a=[],o=0;o<this.scene.objs.length;o++)if(void 0!==this.scene.objs[o]){let u=this.scene.objs[o].checkMouseOver(new x.A(e,this.scene,this.lastDeviceIsTouch));var c;u&&(u.targetPoint||u.targetPoint_?(i||(i=!0,a=[]),((c=y.A.distanceSquared(e,u.targetPoint||u.targetPoint_))<=n||r==this.selectedObjIndex)&&(r=o,n=c,t=u,s?a.push({dragContext:t,targetObjIndex:r}):a.unshift({dragContext:t,targetObjIndex:r}),r==this.selectedObjIndex&&(s=!0))):i||(r=o,t=u,a.unshift({dragContext:t,targetObjIndex:r})))}return 0==a.length&&a.push({targetObjIndex:-1}),a}addControlPointsForHandle(t){if("Handle"!=this.scene.objs[0].constructor.type||!this.scene.objs[0].notDone)for(var n in this.scene.unshiftObj(new e.Handle(this.scene,{notDone:!0})),this.selectedObjIndex>=0&&this.selectedObjIndex++,t)t[n].targetObjIndex++;for(var n in t)this.scene.objs[0].addControlPoint(t[n]);this.simulator.updateSimulation(!0,!0)}addObjectForHandle(t){"Handle"==this.scene.objs[0].constructor.type&&this.scene.objs[0].notDone||(this.scene.unshiftObj(new e.Handle(this.scene,{notDone:!0})),this.selectedObjIndex>=0&&this.selectedObjIndex++,t++),this.scene.objs[0].addObject(t),this.simulator.updateSimulation(!0,!0)}finishHandleCreation(e){this.scene.objs[0].finishHandle(e),this.simulator.updateSimulation(!0,!0),this.selectObj(0)}selectObj(e){return this.scene.objs[0]&&"Handle"==this.scene.objs[0].constructor.type&&this.scene.objs[0].notDone?(this.selectedObjIndex=-1,void this.emit("selectionChange",{oldIndex:this.selectedObjIndex,newIndex:-1})):e<0||e>=this.scene.objs.length?(this.emit("selectionChange",{oldIndex:this.selectedObjIndex,newIndex:-1}),void(this.selectedObjIndex=-1)):(this.emit("selectionChange",{oldIndex:this.selectedObjIndex,newIndex:e}),void(this.selectedObjIndex=e))}confirmPositioning(e,t,n,r){-4==this.positioningObjIndex?(this.scene.observer.c.x=e,this.scene.observer.c.y=t,this.simulator.updateSimulation(!1,!0)):(this.scene.objs[this.positioningObjIndex].onDrag(new x.A(y.A.point(e,t),this.scene,this.lastDeviceIsTouch,2),this.dragContext,n,r),this.simulator.updateSimulation(!this.scene.objs[this.positioningObjIndex].constructor.isOptical,!0)),this.onActionComplete(),this.endPositioning()}endPositioning(){this.emit("positioningEnd"),this.positioningObjIndex=-1,this.dragContext={}}removeObj(e){this.isConstructing=!1,this.scene.removeObj(e),this.selectedObjIndex--,this.selectObj(this.selectedObjIndex)}setScale(e){this.setScaleWithCenter(e,this.canvas.width/this.scene.scale/2,this.canvas.height/this.scene.scale/2)}setScaleWithCenter(e,t,n){this.scene.setScaleWithCenter(e,t,n),this.emit("scaleChange"),this.simulator.updateSimulation()}loadJSON(e){const t=this;this.scene.setViewportSize(this.canvas.width/this.simulator.dpr,this.canvas.height/this.simulator.dpr),this.scene.loadJSON(e,(function(e,n){t.emit("sceneLoaded",{needFullUpdate:e,completed:n}),e?t.simulator.updateSimulation():setTimeout((function(){t.simulator.updateSimulation(!0,!0)}),1)})),this.selectObj(-1),this.simulator.updateSimulation()}onActionComplete(e=!1){if(this.scene.error)return;const t=this.scene.toJSON(),n=this.lastActionJson;this.lastActionJson=t,this.emit("newAction",{newJSON:t,oldJSON:n,fromJsonEditor:e}),this.emit("requestUpdateErrorAndWarning"),this.requireDelayedValidation(),new Date-this.lastActionTime>D.UNDO_INTERVAL&&t!=n&&(this.undoIndex=(this.undoIndex+1)%D.UNDO_LIMIT,this.emit("newUndoPoint"),this.undoUBound=this.undoIndex,this.undoUBound==this.undoLBound&&(this.undoLBound=(this.undoLBound+1)%D.UNDO_LIMIT)),this.undoData[this.undoIndex]=this.lastActionJson,this.lastActionTime=new Date}undo(){if(this.isConstructing){const t=this.scene.objs[this.scene.objs.length-1].constructor.type,n=this.scene.objs[this.scene.objs.length-1].onConstructUndo();return n&&n.isCancelled&&(this.isConstructing=!1,this.scene.objs.length--,this.selectObj(-1)),void this.simulator.updateSimulation(!e[t].isOptical,!0)}-1==this.positioningObjIndex?this.undoIndex!=this.undoLBound&&(this.undoIndex=(this.undoIndex+(D.UNDO_LIMIT-1))%D.UNDO_LIMIT,this.loadJSON(this.undoData[this.undoIndex]),this.lastActionJson=this.undoData[this.undoIndex],this.emit("undo"),this.requireDelayedValidation()):this.endPositioning()}redo(){this.isConstructing=!1,this.endPositioning(),this.undoIndex!=this.undoUBound&&(this.undoIndex=(this.undoIndex+1)%D.UNDO_LIMIT,this.loadJSON(this.undoData[this.undoIndex]),this.lastActionJson=this.undoData[this.undoIndex],this.emit("redo"),this.requireDelayedValidation())}enterCropMode(){this.isInCropMode=!0;for(var t=-1,n=0;n<this.scene.objs.length;n++)if("CropBox"==this.scene.objs[n].constructor.type){t=n;break}-1==t&&(this.scene.pushObj(new e.CropBox(this.scene,{p1:y.A.point((.2*this.canvas.width/this.simulator.dpr-this.scene.origin.x)/this.scene.scale,((120+.2*(this.canvas.height-120))/this.simulator.dpr-this.scene.origin.y)/this.scene.scale),p4:y.A.point((.8*this.canvas.width/this.simulator.dpr-this.scene.origin.x)/this.scene.scale,((120+.8*(this.canvas.height-120))/this.simulator.dpr-this.scene.origin.y)/this.scene.scale)})),t=this.scene.objs.length-1),this.selectObj(t),this.simulator.updateSimulation(!0,!0)}confirmCrop(e){"svg"==e.format?this.exportSVG(e):this.exportImage(e),this.isInCropMode=!1,this.selectObj(-1),this.simulator.updateSimulation(!0,!0)}cancelCrop(){this.isInCropMode=!1,this.selectObj(-1),this.simulator.updateSimulation(!0,!0)}exportSVG(e){const t=this,n=new m;n.backgroundImage=this.scene.backgroundImage,n.loadJSON(this.scene.toJSON(),(function(r,i){if(!i)return;n.scale=1,n.origin={x:-e.p1.x*n.scale,y:-e.p1.y*n.scale};const s=e.p4.x-e.p1.x,a=e.p4.y-e.p1.y,o=new v(s,a);e.transparent||(o.fillStyle=`rgb(${Math.round(255*n.theme.background.color.r)}, ${Math.round(255*n.theme.background.color.g)}, ${Math.round(255*n.theme.background.color.b)})`,o.fillRect(0,0,s,a));const c=new g.A(n,o,null,null,null,null,!1,e.rayCountLimit||1e7);function u(){const e=new Blob([o.getSerializedSvg()],{type:"image/svg+xml"});(0,b.saveAs)(e,(t.scene.name||"export")+".svg")}c.on("simulationComplete",u),c.on("simulationStop",u),c.updateSimulation()}))}exportImage(e){const t=this,n=new m;n.backgroundImage=this.scene.backgroundImage,n.loadJSON(this.scene.toJSON(),(function(r,i){if(!i)return;n.scale=e.width/(e.p4.x-e.p1.x),n.origin={x:-e.p1.x*n.scale,y:-e.p1.y*n.scale},e.transparent&&0==n.theme.background.color.r&&0==n.theme.background.color.g&&0==n.theme.background.color.b&&(n.theme.background.color={r:.01,g:.01,b:.01});const s=e.width,a=e.width*(e.p4.y-e.p1.y)/(e.p4.x-e.p1.x),o=[],c=[];for(let e=0;e<4;e++)o.push(document.createElement("canvas")),c.push(o[e].getContext("2d")),o[e].width=s,o[e].height=a;let u=document.createElement("canvas"),l=null;if(t.simulator.glMain){u.width=s,u.height=a;const e={alpha:!0,premultipliedAlpha:!0,antialias:!1};l=u.getContext("webgl",e)||u.getContext("experimental-webgl",e)}const h=new g.A(n,c[0],c[1],c[2],c[3],document.createElement("canvas").getContext("2d"),!1,e.rayCountLimit||1e7,l);function p(){const r=document.createElement("canvas");r.width=s,r.height=a;const i=r.getContext("2d");e.transparent||(i.fillStyle=`rgb(${Math.round(255*n.theme.background.color.r)}, ${Math.round(255*n.theme.background.color.g)}, ${Math.round(255*n.theme.background.color.b)})`,i.fillRect(0,0,e.width,e.width*(e.p4.y-e.p1.y)/(e.p4.x-e.p1.x))),i.drawImage(o[1],0,0),i.drawImage(o[3],0,0),"default"==t.scene.colorMode?i.drawImage(o[0],0,0):i.drawImage(u,0,0),i.drawImage(o[2],0,0),r.toBlob((function(e){(0,b.saveAs)(e,(t.scene.name||"export")+".png")}))}h.on("simulationComplete",p),h.on("simulationStop",p),h.updateSimulation()}))}requireDelayedValidation(){if(this.scene.error)return;this.delayedValidationTimerId&&clearTimeout(this.delayedValidationTimerId);const e=this;this.delayedValidationTimerId=setTimeout((function(){e.validateDelayed()}),this.scene.warning?500:5e3)}validateDelayed(){this.scene.validateDelayed(),this.emit("requestUpdateErrorAndWarning")}isObjHighlighted(e){return!!(this.scene.objs.length>0&&"Handle"===this.scene.objs[0].constructor.type&&this.scene.objs[0].notDone&&this.scene.objs[0].objIndices.includes(e))||!!this.scene.objs[this.hoveredObjIndex]&&("Handle"===this.scene.objs[this.hoveredObjIndex].constructor.type&&this.scene.objs[this.hoveredObjIndex].objIndices.includes(e)||this.hoveredObjIndex===e)}selectAll(){if(0===this.scene.objs.length)return;let t=-1;this.scene.objs.length>0&&"Handle"===this.scene.objs[0].constructor.type&&this.scene.objs[0].notDone?t=0:(this.scene.unshiftObj(new e.Handle(this.scene,{notDone:!0})),this.selectedObjIndex>=0&&this.selectedObjIndex++,this.selectObj(-1),t=0,this.selectedObjIndex>=0&&this.selectedObjIndex++),this.scene.objs[t].objIndices=[];for(let e=0;e<this.scene.objs.length;e++)"Handle"!==this.scene.objs[e].constructor.type&&this.scene.objs[t].addObject(e);this.simulator.updateSimulation(!0,!0)}}const w=D;if("undefined"!=typeof process&&process.versions&&process.versions.node){const e=r(8732);o.Ay.init({lng:"en",resources:{en:{simulator:e}},interpolation:{escapeValue:!1}})}})(),module.exports=i})();